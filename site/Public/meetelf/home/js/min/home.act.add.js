/*! jQuery v1.11.1 | (c) 2005, 2014 jQuery Foundation, Inc. | jquery.org/license */

/*!
 * Bootstrap v3.2.0 (http://getbootstrap.com)
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */

/*!
 * Cropper v0.9.2
 * https://github.com/fengyuanchen/cropper
 *
 * Copyright (c) 2014-2015 Fengyuan Chen and contributors
 * Released under the MIT license
 *
 * Date: 2015-04-18T04:35:01.500Z
 */

/*!
 * jQuery Form Plugin
 * version: 3.51.0-2014.06.20
 * Requires jQuery v1.5 or later
 * Copyright (c) 2014 M. Alsup
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Project repository: https://github.com/malsup/form
 * Dual licensed under the MIT and GPL licenses.
 * https://github.com/malsup/form#copyright-and-license
 */

/*! jQuery Validation Plugin - v1.13.0 - 7/1/2014
 * http://jqueryvalidation.org/
 * Copyright (c) 2014 JÃ¶rn Zaefferer; Licensed MIT */

/*!
 * jQuery Cookie Plugin v1.1
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2011, Klaus Hartl
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.opensource.org/licenses/GPL-2.0
 */

/* ----------------------------------------------------------------------------- 

  jQuery DateTimePicker - Responsive flat design jQuery DateTime Picker plugin for Web & Mobile
  Version 0.1.7
  Copyright (c)2015 Curious Solutions Pvt Ltd and Neha Kadam
  http://curioussolutions.github.io/DateTimePicker
  https://github.com/CuriousSolutions/DateTimePicker

 ----------------------------------------------------------------------------- */

/* =============================================================
 * bootstrap-combobox.js v1.1.6
 * =============================================================
 * Copyright 2012 Daniel Farrell
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */

/*!
 * UEditor
 * version: ueditor
 * build: Tue Aug 25 2015 15:23:01 GMT+0800 (CST)
 */

/*
 * Lazy Load - jQuery plugin for lazy loading images
 *
 * Copyright (c) 2007-2013 Mika Tuupola
 *
 * Licensed under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 *
 * Project home:
 *   http://www.appelsiini.net/projects/lazyload
 *
 * Version:  1.9.3
 *
 */

!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function g(e){var t=e.length,n=h.type(e);return"function"===n||h.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e}function S(e,t,n){if(h.isFunction(t))return h.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return h.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(E.test(t))return h.filter(t,e,n);t=h.filter(t,e)}return h.grep(e,function(e){return h.inArray(e,t)>=0!==n})}function A(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function _(e){var t=M[e]={};return h.each(e.match(O)||[],function(e,n){t[n]=!0}),t}function P(){T.addEventListener?(T.removeEventListener("DOMContentLoaded",H,!1),e.removeEventListener("load",H,!1)):(T.detachEvent("onreadystatechange",H),e.detachEvent("onload",H))}function H(){(T.addEventListener||"load"===event.type||"complete"===T.readyState)&&(P(),h.ready())}function q(e,t,n){if(void 0===n&&1===e.nodeType){var r="data-"+t.replace(I,"-$1").toLowerCase();if(n=e.getAttribute(r),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:F.test(n)?h.parseJSON(n):n}catch(i){}h.data(e,t,n)}else n=void 0}return n}function R(e){var t;for(t in e)if(("data"!==t||!h.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function U(e,t,r,i){if(h.acceptData(e)){var s,o,u=h.expando,a=e.nodeType,f=a?h.cache:e,l=a?e[u]:e[u]&&u;if(l&&f[l]&&(i||f[l].data)||void 0!==r||"string"!=typeof t)return l||(l=a?e[u]=n.pop()||h.guid++:u),f[l]||(f[l]=a?{}:{toJSON:h.noop}),("object"==typeof t||"function"==typeof t)&&(i?f[l]=h.extend(f[l],t):f[l].data=h.extend(f[l].data,t)),o=f[l],i||(o.data||(o.data={}),o=o.data),void 0!==r&&(o[h.camelCase(t)]=r),"string"==typeof t?(s=o[t],null==s&&(s=o[h.camelCase(t)])):s=o,s}}function z(e,t,n){if(h.acceptData(e)){var r,i,s=e.nodeType,o=s?h.cache:e,u=s?e[h.expando]:h.expando;if(o[u]){if(t&&(r=n?o[u]:o[u].data)){h.isArray(t)?t=t.concat(h.map(t,h.camelCase)):t in r?t=[t]:(t=h.camelCase(t),t=t in r?[t]:t.split(" ")),i=t.length;while(i--)delete r[t[i]];if(n?!R(r):!h.isEmptyObject(r))return}(n||(delete o[u].data,R(o[u])))&&(s?h.cleanData([e],!0):l.deleteExpando||o!=o.window?delete o[u]:o[u]=null)}}}function et(){return!0}function tt(){return!1}function nt(){try{return T.activeElement}catch(e){}}function rt(e){var t=it.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function wt(e,t){var n,r,i=0,s=typeof e.getElementsByTagName!==B?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!==B?e.querySelectorAll(t||"*"):void 0;if(!s)for(s=[],n=e.childNodes||e;null!=(r=n[i]);i++)!t||h.nodeName(r,t)?s.push(r):h.merge(s,wt(r,t));return void 0===t||t&&h.nodeName(e,t)?h.merge([e],s):s}function Et(e){J.test(e.type)&&(e.defaultChecked=e.checked)}function St(e,t){return h.nodeName(e,"table")&&h.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function xt(e){return e.type=(null!==h.find.attr(e,"type"))+"/"+e.type,e}function Tt(e){var t=vt.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function Nt(e,t){for(var n,r=0;null!=(n=e[r]);r++)h._data(n,"globalEval",!t||h._data(t[r],"globalEval"))}function Ct(e,t){if(1===t.nodeType&&h.hasData(e)){var n,r,i,s=h._data(e),o=h._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;i>r;r++)h.event.add(t,n,u[n][r])}o.data&&(o.data=h.extend({},o.data))}}function kt(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!l.noCloneEvent&&t[h.expando]){i=h._data(t);for(r in i.events)h.removeEvent(t,r,i.handle);t.removeAttribute(h.expando)}"script"===n&&t.text!==e.text?(xt(t).text=e.text,Tt(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),l.html5Clone&&e.innerHTML&&!h.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&J.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}function Ot(t,n){var r,i=h(n.createElement(t)).appendTo(n.body),s=e.getDefaultComputedStyle&&(r=e.getDefaultComputedStyle(i[0]))?r.display:h.css(i[0],"display");return i.detach(),s}function Mt(e){var t=T,n=At[e];return n||(n=Ot(e,t),"none"!==n&&n||(Lt=(Lt||h("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=(Lt[0].contentWindow||Lt[0].contentDocument).document,t.write(),t.close(),n=Ot(e,t),Lt.detach()),At[e]=n),n}function jt(e,t){return{get:function(){var n=e();if(null!=n)return n?void delete this.get:(this.get=t).apply(this,arguments)}}}function Vt(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=Xt.length;while(i--)if(t=Xt[i]+n,t in e)return t;return r}function $t(e,t){for(var n,r,i,s=[],o=0,u=e.length;u>o;o++)r=e[o],r.style&&(s[o]=h._data(r,"olddisplay"),n=r.style.display,t?(s[o]||"none"!==n||(r.style.display=""),""===r.style.display&&V(r)&&(s[o]=h._data(r,"olddisplay",Mt(r.nodeName)))):(i=V(r),(n&&"none"!==n||!i)&&h._data(r,"olddisplay",i?n:h.css(r,"display"))));for(o=0;u>o;o++)r=e[o],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?s[o]||"":"none"));return e}function Jt(e,t,n){var r=Rt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function Kt(e,t,n,r,i){for(var s=n===(r?"border":"content")?4:"width"===t?1:0,o=0;4>s;s+=2)"margin"===n&&(o+=h.css(e,n+X[s],!0,i)),r?("content"===n&&(o-=h.css(e,"padding"+X[s],!0,i)),"margin"!==n&&(o-=h.css(e,"border"+X[s]+"Width",!0,i))):(o+=h.css(e,"padding"+X[s],!0,i),"padding"!==n&&(o+=h.css(e,"border"+X[s]+"Width",!0,i)));return o}function Qt(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,s=Pt(e),o=l.boxSizing&&"border-box"===h.css(e,"boxSizing",!1,s);if(0>=i||null==i){if(i=Ht(e,t,s),(0>i||null==i)&&(i=e.style[t]),Dt.test(i))return i;r=o&&(l.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+Kt(e,t,n||(o?"border":"content"),r,s)+"px"}function Gt(e,t,n,r,i){return new Gt.prototype.init(e,t,n,r,i)}function on(){return setTimeout(function(){Yt=void 0}),Yt=h.now()}function un(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)n=X[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function an(e,t,n){for(var r,i=(sn[t]||[]).concat(sn["*"]),s=0,o=i.length;o>s;s++)if(r=i[s].call(n,t,e))return r}function fn(e,t,n){var r,i,s,o,u,a,f,c,p=this,d={},v=e.style,m=e.nodeType&&V(e),g=h._data(e,"fxshow");n.queue||(u=h._queueHooks(e,"fx"),null==u.unqueued&&(u.unqueued=0,a=u.empty.fire,u.empty.fire=function(){u.unqueued||a()}),u.unqueued++,p.always(function(){p.always(function(){u.unqueued--,h.queue(e,"fx").length||u.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[v.overflow,v.overflowX,v.overflowY],f=h.css(e,"display"),c="none"===f?h._data(e,"olddisplay")||Mt(e.nodeName):f,"inline"===c&&"none"===h.css(e,"float")&&(l.inlineBlockNeedsLayout&&"inline"!==Mt(e.nodeName)?v.zoom=1:v.display="inline-block")),n.overflow&&(v.overflow="hidden",l.shrinkWrapBlocks()||p.always(function(){v.overflow=n.overflow[0],v.overflowX=n.overflow[1],v.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],en.exec(i)){if(delete t[r],s=s||"toggle"===i,i===(m?"hide":"show")){if("show"!==i||!g||void 0===g[r])continue;m=!0}d[r]=g&&g[r]||h.style(e,r)}else f=void 0;if(h.isEmptyObject(d))"inline"===("none"===f?Mt(e.nodeName):f)&&(v.display=f);else{g?"hidden"in g&&(m=g.hidden):g=h._data(e,"fxshow",{}),s&&(g.hidden=!m),m?h(e).show():p.done(function(){h(e).hide()}),p.done(function(){var t;h._removeData(e,"fxshow");for(t in d)h.style(e,t,d[t])});for(r in d)o=an(m?g[r]:0,r,p),r in g||(g[r]=o.start,m&&(o.end=o.start,o.start="width"===r||"height"===r?1:0))}}function ln(e,t){var n,r,i,s,o;for(n in e)if(r=h.camelCase(n),i=t[r],s=e[n],h.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),o=h.cssHooks[r],o&&"expand"in o){s=o.expand(s),delete e[r];for(n in s)n in e||(e[n]=s[n],t[n]=i)}else t[r]=i}function cn(e,t,n){var r,i,s=0,o=rn.length,u=h.Deferred().always(function(){delete a.elem}),a=function(){if(i)return!1;for(var t=Yt||on(),n=Math.max(0,f.startTime+f.duration-t),r=n/f.duration||0,s=1-r,o=0,a=f.tweens.length;a>o;o++)f.tweens[o].run(s);return u.notifyWith(e,[f,s,n]),1>s&&a?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:h.extend({},t),opts:h.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Yt||on(),duration:n.duration,tweens:[],createTween:function(t,n){var r=h.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(r),r},stop:function(t){var n=0,r=t?f.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)f.tweens[n].run(1);return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;for(ln(l,f.opts.specialEasing);o>s;s++)if(r=rn[s].call(f,e,l,f.opts))return r;return h.map(l,an,f),h.isFunction(f.opts.start)&&f.opts.start.call(e,f),h.fx.timer(h.extend(a,{elem:e,anim:f,queue:f.opts.queue})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function Fn(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,s=t.toLowerCase().match(O)||[];if(h.isFunction(n))while(r=s[i++])"+"===r.charAt(0)?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function In(e,t,n,r){function o(u){var a;return i[u]=!0,h.each(e[u]||[],function(e,u){var f=u(t,n,r);return"string"!=typeof f||s||i[f]?s?!(a=f):void 0:(t.dataTypes.unshift(f),o(f),!1)}),a}var i={},s=e===Hn;return o(t.dataTypes[0])||!i["*"]&&o("*")}function qn(e,t){var n,r,i=h.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((i[r]?e:n||(n={}))[r]=t[r]);return n&&h.extend(!0,e,n),e}function Rn(e,t,n){var r,i,s,o,u=e.contents,a=e.dataTypes;while("*"===a[0])a.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(o in u)if(u[o]&&u[o].test(i)){a.unshift(o);break}if(a[0]in n)s=a[0];else{for(o in n){if(!a[0]||e.converters[o+" "+a[0]]){s=o;break}r||(r=o)}s=s||r}return s?(s!==a[0]&&a.unshift(s),n[s]):void 0}function Un(e,t,n,r){var i,s,o,u,a,f={},l=e.dataTypes.slice();if(l[1])for(o in e.converters)f[o.toLowerCase()]=e.converters[o];s=l.shift();while(s)if(e.responseFields[s]&&(n[e.responseFields[s]]=t),!a&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),a=s,s=l.shift())if("*"===s)s=a;else if("*"!==a&&a!==s){if(o=f[a+" "+s]||f["* "+s],!o)for(i in f)if(u=i.split(" "),u[1]===s&&(o=f[a+" "+u[0]]||f["* "+u[0]])){o===!0?o=f[i]:f[i]!==!0&&(s=u[0],l.unshift(u[1]));break}if(o!==!0)if(o&&e["throws"])t=o(t);else try{t=o(t)}catch(c){return{state:"parsererror",error:o?c:"No conversion from "+a+" to "+s}}}return{state:"success",data:t}}function Jn(e,t,n,r){var i;if(h.isArray(t))h.each(t,function(t,i){n||Wn.test(e)?r(e,i):Jn(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==h.type(t))r(e,t);else for(i in t)Jn(e+"["+i+"]",t[i],n,r)}function Yn(){try{return new e.XMLHttpRequest}catch(t){}}function Zn(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function ir(e){return h.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var n=[],r=n.slice,i=n.concat,s=n.push,o=n.indexOf,u={},a=u.toString,f=u.hasOwnProperty,l={},c="1.11.1",h=function(e,t){return new h.fn.init(e,t)},p=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,d=/^-ms-/,v=/-([\da-z])/gi,m=function(e,t){return t.toUpperCase()};h.fn=h.prototype={jquery:c,constructor:h,selector:"",length:0,toArray:function(){return r.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:r.call(this)},pushStack:function(e){var t=h.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return h.each(this,e,t)},map:function(e){return this.pushStack(h.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(r.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:s,sort:n.sort,splice:n.splice},h.extend=h.fn.extend=function(){var e,t,n,r,i,s,o=arguments[0]||{},u=1,a=arguments.length,f=!1;for("boolean"==typeof o&&(f=o,o=arguments[u]||{},u++),"object"==typeof o||h.isFunction(o)||(o={}),u===a&&(o=this,u--);a>u;u++)if(null!=(i=arguments[u]))for(r in i)e=o[r],n=i[r],o!==n&&(f&&n&&(h.isPlainObject(n)||(t=h.isArray(n)))?(t?(t=!1,s=e&&h.isArray(e)?e:[]):s=e&&h.isPlainObject(e)?e:{},o[r]=h.extend(f,s,n)):void 0!==n&&(o[r]=n));return o},h.extend({expando:"jQuery"+(c+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===h.type(e)},isArray:Array.isArray||function(e){return"array"===h.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!h.isArray(e)&&e-parseFloat(e)>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==h.type(e)||e.nodeType||h.isWindow(e))return!1;try{if(e.constructor&&!f.call(e,"constructor")&&!f.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(l.ownLast)for(t in e)return f.call(e,t);for(t in e);return void 0===t||f.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?u[a.call(e)]||"object":typeof e},globalEval:function(t){t&&h.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(d,"ms-").replace(v,m)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,s=e.length,o=g(e);if(n){if(o){for(;s>i;i++)if(r=t.apply(e[i],n),r===!1)break}else for(i in e)if(r=t.apply(e[i],n),r===!1)break}else if(o){for(;s>i;i++)if(r=t.call(e[i],i,e[i]),r===!1)break}else for(i in e)if(r=t.call(e[i],i,e[i]),r===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(p,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(g(Object(e))?h.merge(n,"string"==typeof e?[e]:e):s.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(o)return o.call(t,e,n);for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,t){var n=+t.length,r=0,i=e.length;while(n>r)e[i++]=t[r++];if(n!==n)while(void 0!==t[r])e[i++]=t[r++];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],s=0,o=e.length,u=!n;o>s;s++)r=!t(e[s],s),r!==u&&i.push(e[s]);return i},map:function(e,t,n){var r,s=0,o=e.length,u=g(e),a=[];if(u)for(;o>s;s++)r=t(e[s],s,n),null!=r&&a.push(r);else for(s in e)r=t(e[s],s,n),null!=r&&a.push(r);return i.apply([],a)},guid:1,proxy:function(e,t){var n,i,s;return"string"==typeof t&&(s=e[t],t=e,e=s),h.isFunction(e)?(n=r.call(arguments,2),i=function(){return e.apply(t||this,n.concat(r.call(arguments)))},i.guid=e.guid=e.guid||h.guid++,i):void 0},now:function(){return+(new Date)},support:l}),h.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){u["[object "+t+"]"]=t.toLowerCase()});var y=function(e){function st(e,t,r,i){var s,u,f,l,c,d,g,y,S,x;if((t?t.ownerDocument||t:E)!==p&&h(t),t=t||p,r=r||[],!e||"string"!=typeof e)return r;if(1!==(l=t.nodeType)&&9!==l)return[];if(v&&!i){if(s=Z.exec(e))if(f=s[1]){if(9===l){if(u=t.getElementById(f),!u||!u.parentNode)return r;if(u.id===f)return r.push(u),r}else if(t.ownerDocument&&(u=t.ownerDocument.getElementById(f))&&b(t,u)&&u.id===f)return r.push(u),r}else{if(s[2])return P.apply(r,t.getElementsByTagName(e)),r;if((f=s[3])&&n.getElementsByClassName&&t.getElementsByClassName)return P.apply(r,t.getElementsByClassName(f)),r}if(n.qsa&&(!m||!m.test(e))){if(y=g=w,S=t,x=9===l&&e,1===l&&"object"!==t.nodeName.toLowerCase()){d=o(e),(g=t.getAttribute("id"))?y=g.replace(tt,"\\$&"):t.setAttribute("id",y),y="[id='"+y+"'] ",c=d.length;while(c--)d[c]=y+mt(d[c]);S=et.test(e)&&dt(t.parentNode)||t,x=d.join(",")}if(x)try{return P.apply(r,S.querySelectorAll(x)),r}catch(T){}finally{g||t.removeAttribute("id")}}}return a(e.replace(z,"$1"),t,r,i)}function ot(){function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function ut(e){return e[w]=!0,e}function at(e){var t=p.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ft(e,t){var n=e.split("|"),i=e.length;while(i--)r.attrHandle[n[i]]=t}function lt(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||A)-(~e.sourceIndex||A);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function ct(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function ht(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function pt(e){return ut(function(t){return t=+t,ut(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function dt(e){return e&&typeof e.getElementsByTagName!==L&&e}function vt(){}function mt(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function gt(e,t,n){var r=t.dir,i=n&&"parentNode"===r,s=x++;return t.first?function(t,n,s){while(t=t[r])if(1===t.nodeType||i)return e(t,n,s)}:function(t,n,o){var u,a,f=[S,s];if(o){while(t=t[r])if((1===t.nodeType||i)&&e(t,n,o))return!0}else while(t=t[r])if(1===t.nodeType||i){if(a=t[w]||(t[w]={}),(u=a[r])&&u[0]===S&&u[1]===s)return f[2]=u[2];if(a[r]=f,f[2]=e(t,n,o))return!0}}}function yt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function bt(e,t,n){for(var r=0,i=t.length;i>r;r++)st(e,t[r],n);return n}function wt(e,t,n,r,i){for(var s,o=[],u=0,a=e.length,f=null!=t;a>u;u++)(s=e[u])&&(!n||n(s,r,i))&&(o.push(s),f&&t.push(u));return o}function Et(e,t,n,r,i,s){return r&&!r[w]&&(r=Et(r)),i&&!i[w]&&(i=Et(i,s)),ut(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||bt(t||"*",u.nodeType?[u]:u,[]),m=!e||!s&&t?v:wt(v,h,e,u,a),g=n?i||(s?e:d||r)?[]:o:m;if(n&&n(m,g,u,a),r){f=wt(g,p),r(f,[],u,a),l=f.length;while(l--)(c=f[l])&&(g[p[l]]=!(m[p[l]]=c))}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?B.call(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=wt(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):P.apply(o,g)})}function St(e){for(var t,n,i,s=e.length,o=r.relative[e[0].type],u=o||r.relative[" "],a=o?1:0,l=gt(function(e){return e===t},u,!0),c=gt(function(e){return B.call(t,e)>-1},u,!0),h=[function(e,n,r){return!o&&(r||n!==f)||((t=n).nodeType?l(e,n,r):c(e,n,r))}];s>a;a++)if(n=r.relative[e[a].type])h=[gt(yt(h),n)];else{if(n=r.filter[e[a].type].apply(null,e[a].matches),n[w]){for(i=++a;s>i;i++)if(r.relative[e[i].type])break;return Et(a>1&&yt(h),a>1&&mt(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(z,"$1"),n,i>a&&St(e.slice(a,i)),s>i&&St(e=e.slice(i)),s>i&&mt(e))}h.push(n)}return yt(h)}function xt(e,t){var n=t.length>0,i=e.length>0,s=function(s,o,u,a,l){var c,h,d,v=0,m="0",g=s&&[],y=[],b=f,w=s||i&&r.find.TAG("*",l),E=S+=null==b?1:Math.random()||.1,x=w.length;for(l&&(f=o!==p&&o);m!==x&&null!=(c=w[m]);m++){if(i&&c){h=0;while(d=e[h++])if(d(c,o,u)){a.push(c);break}l&&(S=E)}n&&((c=!d&&c)&&v--,s&&g.push(c))}if(v+=m,n&&m!==v){h=0;while(d=t[h++])d(g,y,o,u);if(s){if(v>0)while(m--)g[m]||y[m]||(y[m]=_.call(a));y=wt(y)}P.apply(a,y),l&&!s&&y.length>0&&v+t.length>1&&st.uniqueSort(a)}return l&&(S=E,f=b),g};return n?ut(s):s}var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w="sizzle"+ -(new Date),E=e.document,S=0,x=0,T=ot(),N=ot(),C=ot(),k=function(e,t){return e===t&&(c=!0),0},L="undefined",A=1<<31,O={}.hasOwnProperty,M=[],_=M.pop,D=M.push,P=M.push,H=M.slice,B=M.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},j="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",F="[\\x20\\t\\r\\n\\f]",I="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",q=I.replace("w","w#"),R="\\["+F+"*("+I+")(?:"+F+"*([*^$|!~]?=)"+F+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+q+"))|)"+F+"*\\]",U=":("+I+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+R+")*)|.*)\\)|)",z=new RegExp("^"+F+"+|((?:^|[^\\\\])(?:\\\\.)*)"+F+"+$","g"),W=new RegExp("^"+F+"*,"+F+"*"),X=new RegExp("^"+F+"*([>+~]|"+F+")"+F+"*"),V=new RegExp("="+F+"*([^\\]'\"]*?)"+F+"*\\]","g"),$=new RegExp(U),J=new RegExp("^"+q+"$"),K={ID:new RegExp("^#("+I+")"),CLASS:new RegExp("^\\.("+I+")"),TAG:new RegExp("^("+I.replace("w","w*")+")"),ATTR:new RegExp("^"+R),PSEUDO:new RegExp("^"+U),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+F+"*(even|odd|(([+-]|)(\\d*)n|)"+F+"*(?:([+-]|)"+F+"*(\\d+)|))"+F+"*\\)|)","i"),bool:new RegExp("^(?:"+j+")$","i"),needsContext:new RegExp("^"+F+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+F+"*((?:-\\d)?\\d*)"+F+"*\\)|)(?=[^-]|$)","i")},Q=/^(?:input|select|textarea|button)$/i,G=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,et=/[+~]/,tt=/'|\\/g,nt=new RegExp("\\\\([\\da-f]{1,6}"+F+"?|("+F+")|.)","ig"),rt=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)};try{P.apply(M=H.call(E.childNodes),E.childNodes),M[E.childNodes.length].nodeType}catch(it){P={apply:M.length?function(e,t){D.apply(e,H.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}n=st.support={},s=st.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},h=st.setDocument=function(e){var t,i=e?e.ownerDocument||e:E,o=i.defaultView;return i!==p&&9===i.nodeType&&i.documentElement?(p=i,d=i.documentElement,v=!s(i),o&&o!==o.top&&(o.addEventListener?o.addEventListener("unload",function(){h()},!1):o.attachEvent&&o.attachEvent("onunload",function(){h()})),n.attributes=at(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=at(function(e){return e.appendChild(i.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=Y.test(i.getElementsByClassName)&&at(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),n.getById=at(function(e){return d.appendChild(e).id=w,!i.getElementsByName||!i.getElementsByName(w).length}),n.getById?(r.find.ID=function(e,t){if(typeof t.getElementById!==L&&v){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},r.filter.ID=function(e){var t=e.replace(nt,rt);return function(e){return e.getAttribute("id")===t}}):(delete r.find.ID,r.filter.ID=function(e){var t=e.replace(nt,rt);return function(e){var n=typeof e.getAttributeNode!==L&&e.getAttributeNode("id");return n&&n.value===t}}),r.find.TAG=n.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==L?t.getElementsByTagName(e):void 0}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if("*"===e){while(n=s[i++])1===n.nodeType&&r.push(n);return r}return s},r.find.CLASS=n.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==L&&v?t.getElementsByClassName(e):void 0},g=[],m=[],(n.qsa=Y.test(i.querySelectorAll))&&(at(function(e){e.innerHTML="<select msallowclip=''><option selected=''></option></select>",e.querySelectorAll("[msallowclip^='']").length&&m.push("[*^$]="+F+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+F+"*(?:value|"+j+")"),e.querySelectorAll(":checked").length||m.push(":checked")}),at(function(e){var t=i.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+F+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")})),(n.matchesSelector=Y.test(y=d.matches||d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.msMatchesSelector))&&at(function(e){n.disconnectedMatch=y.call(e,"div"),y.call(e,"[s!='']:x"),g.push("!=",U)}),m=m.length&&new RegExp(m.join("|")),g=g.length&&new RegExp(g.join("|")),t=Y.test(d.compareDocumentPosition),b=t||Y.test(d.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&1===r.nodeType&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},k=t?function(e,t){if(e===t)return c=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r?r:(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&r||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===i||e.ownerDocument===E&&b(E,e)?-1:t===i||t.ownerDocument===E&&b(E,t)?1:l?B.call(l,e)-B.call(l,t):0:4&r?-1:1)}:function(e,t){if(e===t)return c=!0,0;var n,r=0,s=e.parentNode,o=t.parentNode,u=[e],a=[t];if(!s||!o)return e===i?-1:t===i?1:s?-1:o?1:l?B.call(l,e)-B.call(l,t):0;if(s===o)return lt(e,t);n=e;while(n=n.parentNode)u.unshift(n);n=t;while(n=n.parentNode)a.unshift(n);while(u[r]===a[r])r++;return r?lt(u[r],a[r]):u[r]===E?-1:a[r]===E?1:0},i):p},st.matches=function(e,t){return st(e,null,null,t)},st.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p&&h(e),t=t.replace(V,"='$1']"),!(!n.matchesSelector||!v||g&&g.test(t)||m&&m.test(t)))try{var r=y.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(i){}return st(t,p,null,[e]).length>0},st.contains=function(e,t){return(e.ownerDocument||e)!==p&&h(e),b(e,t)},st.attr=function(e,t){(e.ownerDocument||e)!==p&&h(e);var i=r.attrHandle[t.toLowerCase()],s=i&&O.call(r.attrHandle,t.toLowerCase())?i(e,t,!v):void 0;return void 0!==s?s:n.attributes||!v?e.getAttribute(t):(s=e.getAttributeNode(t))&&s.specified?s.value:null},st.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},st.uniqueSort=function(e){var t,r=[],i=0,s=0;if(c=!n.detectDuplicates,l=!n.sortStable&&e.slice(0),e.sort(k),c){while(t=e[s++])t===e[s]&&(i=r.push(s));while(i--)e.splice(r[i],1)}return l=null,e},i=st.getText=function(e){var t,n="",r=0,s=e.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===s||4===s)return e.nodeValue}else while(t=e[r++])n+=i(t);return n},r=st.selectors={cacheLength:50,createPseudo:ut,match:K,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(nt,rt),e[3]=(e[3]||e[4]||e[5]||"").replace(nt,rt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||st.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&st.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return K.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&$.test(n)&&(t=o(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(nt,rt).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=T[e+" "];return t||(t=new RegExp("(^|"+F+")"+e+"("+F+"|$)"))&&T(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==L&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=st.attr(r,e);return null==i?"!="===t:t?(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i+" ").indexOf(n)>-1:"|="===t?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),u="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,a){var f,l,c,h,p,d,v=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=u&&t.nodeName.toLowerCase(),y=!a&&!u;if(m){if(s){while(v){c=t;while(c=c[v])if(u?c.nodeName.toLowerCase()===g:1===c.nodeType)return!1;d=v="only"===e&&!d&&"nextSibling"}return!0}if(d=[o?m.firstChild:m.lastChild],o&&y){l=m[w]||(m[w]={}),f=l[e]||[],p=f[0]===S&&f[1],h=f[0]===S&&f[2],c=p&&m.childNodes[p];while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if(1===c.nodeType&&++h&&c===t){l[e]=[S,p,h];break}}else if(y&&(f=(t[w]||(t[w]={}))[e])&&f[0]===S)h=f[1];else while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if((u?c.nodeName.toLowerCase()===g:1===c.nodeType)&&++h&&(y&&((c[w]||(c[w]={}))[e]=[S,h]),c===t))break;return h-=i,h===r||h%r===0&&h/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||st.error("unsupported pseudo: "+e);return i[w]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?ut(function(e,n){var r,s=i(e,t),o=s.length;while(o--)r=B.call(e,s[o]),e[r]=!(n[r]=s[o])}):function(e){return i(e,0,n)}):i}},pseudos:{not:ut(function(e){var t=[],n=[],r=u(e.replace(z,"$1"));return r[w]?ut(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)(s=o[u])&&(e[u]=!(t[u]=s))}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:ut(function(e){return function(t){return st(e,t).length>0}}),contains:ut(function(e){return function(t){return(t.textContent||t.innerText||i(t)).indexOf(e)>-1}}),lang:ut(function(e){return J.test(e||"")||st.error("unsupported lang: "+e),e=e.replace(nt,rt).toLowerCase(),function(t){var n;do if(n=v?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===d},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return G.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:pt(function(){return[0]}),last:pt(function(e,t){return[t-1]}),eq:pt(function(e,t,n){return[0>n?n+t:n]}),even:pt(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:pt(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:pt(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:pt(function(e,t,n){for(var r=0>n?n+t:n;++r<t;)e.push(r);return e})}},r.pseudos.nth=r.pseudos.eq;for(t in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=ct(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=ht(t);return vt.prototype=r.filters=r.pseudos,r.setFilters=new vt,o=st.tokenize=function(e,t){var n,i,s,o,u,a,f,l=N[e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=r.preFilter;while(u){(!n||(i=W.exec(u)))&&(i&&(u=u.slice(i[0].length)||u),a.push(s=[])),n=!1,(i=X.exec(u))&&(n=i.shift(),s.push({value:n,type:i[0].replace(z," ")}),u=u.slice(n.length));for(o in r.filter)!(i=K[o].exec(u))||f[o]&&!(i=f[o](i))||(n=i.shift(),s.push({value:n,type:o,matches:i}),u=u.slice(n.length));if(!n)break}return t?u.length:u?st.error(e):N(e,a).slice(0)},u=st.compile=function(e,t){var n,r=[],i=[],s=C[e+" "];if(!s){t||(t=o(e)),n=t.length;while(n--)s=St(t[n]),s[w]?r.push(s):i.push(s);s=C(e,xt(i,r)),s.selector=e}return s},a=st.select=function(e,t,i,s){var a,f,l,c,h,p="function"==typeof e&&e,d=!s&&o(e=p.selector||e);if(i=i||[],1===d.length){if(f=d[0]=d[0].slice(0),f.length>2&&"ID"===(l=f[0]).type&&n.getById&&9===t.nodeType&&v&&r.relative[f[1].type]){if(t=(r.find.ID(l.matches[0].replace(nt,rt),t)||[])[0],!t)return i;p&&(t=t.parentNode),e=e.slice(f.shift().value.length)}a=K.needsContext.test(e)?0:f.length;while(a--){if(l=f[a],r.relative[c=l.type])break;if((h=r.find[c])&&(s=h(l.matches[0].replace(nt,rt),et.test(f[0].type)&&dt(t.parentNode)||t))){if(f.splice(a,1),e=s.length&&mt(f),!e)return P.apply(i,s),i;break}}}return(p||u(e,d))(s,t,!v,i,et.test(e)&&dt(t.parentNode)||t),i},n.sortStable=w.split("").sort(k).join("")===w,n.detectDuplicates=!!c,h(),n.sortDetached=at(function(e){return 1&e.compareDocumentPosition(p.createElement("div"))}),at(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||ft("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&at(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||ft("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),at(function(e){return null==e.getAttribute("disabled")})||ft(j,function(e,t,n){var r;return n?void 0:e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),st}(e);h.find=y,h.expr=y.selectors,h.expr[":"]=h.expr.pseudos,h.unique=y.uniqueSort,h.text=y.getText,h.isXMLDoc=y.isXML,h.contains=y.contains;var b=h.expr.match.needsContext,w=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,E=/^.[^:#\[\.,]*$/;h.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?h.find.matchesSelector(r,e)?[r]:[]:h.find.matches(e,h.grep(t,function(e){return 1===e.nodeType}))},h.fn.extend({find:function(e){var t,n=[],r=this,i=r.length;if("string"!=typeof e)return this.pushStack(h(e).filter(function(){for(t=0;i>t;t++)if(h.contains(r[t],this))return!0}));for(t=0;i>t;t++)h.find(e,r[t],n);return n=this.pushStack(i>1?h.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(S(this,e||[],!1))},not:function(e){return this.pushStack(S(this,e||[],!0))},is:function(e){return!!S(this,"string"==typeof e&&b.test(e)?h(e):e||[],!1).length}});var x,T=e.document,N=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,C=h.fn.init=function(e,t){var n,r;if(!e)return this;if("string"==typeof e){if(n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:N.exec(e),!n||!n[1]&&t)return!t||t.jquery?(t||x).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof h?t[0]:t,h.merge(this,h.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:T,!0)),w.test(n[1])&&h.isPlainObject(t))for(n in t)h.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}if(r=T.getElementById(n[2]),r&&r.parentNode){if(r.id!==n[2])return x.find(e);this.length=1,this[0]=r}return this.context=T,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):h.isFunction(e)?"undefined"!=typeof x.ready?x.ready(e):e(h):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),h.makeArray(e,this))};C.prototype=h.fn,x=h(T);var k=/^(?:parents|prev(?:Until|All))/,L={children:!0,contents:!0,next:!0,prev:!0};h.extend({dir:function(e,t,n){var r=[],i=e[t];while(i&&9!==i.nodeType&&(void 0===n||1!==i.nodeType||!h(i).is(n)))1===i.nodeType&&r.push(i),i=i[t];return r},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),h.fn.extend({has:function(e){var t,n=h(e,this),r=n.length;return this.filter(function(){for(t=0;r>t;t++)if(h.contains(this,n[t]))return!0})},closest:function(e,t){for(var n,r=0,i=this.length,s=[],o=b.test(e)||"string"!=typeof e?h(e,t||this.context):0;i>r;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&h.find.matchesSelector(n,e))){s.push(n);break}return this.pushStack(s.length>1?h.unique(s):s)},index:function(e){return e?"string"==typeof e?h.inArray(this[0],h(e)):h.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(h.unique(h.merge(this.get(),h(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),h.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return h.dir(e,"parentNode")},parentsUntil:function(e,t,n){return h.dir(e,"parentNode",n)},next:function(e){return A(e,"nextSibling")},prev:function(e){return A(e,"previousSibling")},nextAll:function(e){return h.dir(e,"nextSibling")},prevAll:function(e){return h.dir(e,"previousSibling")},nextUntil:function(e,t,n){return h.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return h.dir(e,"previousSibling",n)},siblings:function(e){return h.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return h.sibling(e.firstChild)},contents:function(e){return h.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:h.merge([],e.childNodes)}},function(e,t){h.fn[e]=function(n,r){var i=h.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=h.filter(r,i)),this.length>1&&(L[e]||(i=h.unique(i)),k.test(e)&&(i=i.reverse())),this.pushStack(i)}});var O=/\S+/g,M={};h.Callbacks=function(e){e="string"==typeof e?M[e]||_(e):h.extend({},e);var t,n,r,i,s,o,u=[],a=!e.once&&[],f=function(c){for(n=e.memory&&c,r=!0,s=o||0,o=0,i=u.length,t=!0;u&&i>s;s++)if(u[s].apply(c[0],c[1])===!1&&e.stopOnFalse){n=!1;break}t=!1,u&&(a?a.length&&f(a.shift()):n?u=[]:l.disable())},l={add:function(){if(u){var r=u.length;!function s(t){h.each(t,function(t,n){var r=h.type(n);"function"===r?e.unique&&l.has(n)||u.push(n):n&&n.length&&"string"!==r&&s(n)})}(arguments),t?i=u.length:n&&(o=r,f(n))}return this},remove:function(){return u&&h.each(arguments,function(e,n){var r;while((r=h.inArray(n,u,r))>-1)u.splice(r,1),t&&(i>=r&&i--,s>=r&&s--)}),this},has:function(e){return e?h.inArray(e,u)>-1:!!u&&!!u.length},empty:function(){return u=[],i=0,this},disable:function(){return u=a=n=void 0,this},disabled:function(){return!u},lock:function(){return a=void 0,n||l.disable(),this},locked:function(){return!a},fireWith:function(e,n){return!u||r&&!a||(n=n||[],n=[e,n.slice?n.slice():n],t?a.push(n):f(n)),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!r}};return l},h.extend({Deferred:function(e){var t=[["resolve","done",h.Callbacks("once memory"),"resolved"],["reject","fail",h.Callbacks("once memory"),"rejected"],["notify","progress",h.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return h.Deferred(function(n){h.each(t,function(t,s){var o=h.isFunction(e[t])&&e[t];i[s[1]](function(){var e=o&&o.apply(this,arguments);e&&h.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s[0]+"With"](this===r?n.promise():this,o?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?h.extend(e,r):r}},i={};return r.pipe=r.then,h.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[1^e][2].disable,t[2][2].lock),i[s[0]]=function(){return i[s[0]+"With"](this===i?r:this,arguments),this},i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=r.call(arguments),i=n.length,s=1!==i||e&&h.isFunction(e.promise)?i:0,o=1===s?e:h.Deferred(),u=function(e,t,n){return function(i){t[e]=this,n[e]=arguments.length>1?r.call(arguments):i,n===a?o.notifyWith(t,n):--s||o.resolveWith(t,n)}},a,f,l;if(i>1)for(a=new Array(i),f=new Array(i),l=new Array(i);i>t;t++)n[t]&&h.isFunction(n[t].promise)?n[t].promise().done(u(t,l,n)).fail(o.reject).progress(u(t,f,a)):--s;return s||o.resolveWith(l,n),o.promise()}});var D;h.fn.ready=function(e){return h.ready.promise().done(e),this},h.extend({isReady:!1,readyWait:1,holdReady:function(e){e?h.readyWait++:h.ready(!0)},ready:function(e){if(e===!0?!--h.readyWait:!h.isReady){if(!T.body)return setTimeout(h.ready);h.isReady=!0,e!==!0&&--h.readyWait>0||(D.resolveWith(T,[h]),h.fn.triggerHandler&&(h(T).triggerHandler("ready"),h(T).off("ready")))}}}),h.ready.promise=function(t){if(!D)if(D=h.Deferred(),"complete"===T.readyState)setTimeout(h.ready);else if(T.addEventListener)T.addEventListener("DOMContentLoaded",H,!1),e.addEventListener("load",H,!1);else{T.attachEvent("onreadystatechange",H),e.attachEvent("onload",H);var n=!1;try{n=null==e.frameElement&&T.documentElement}catch(r){}n&&n.doScroll&&!function i(){if(!h.isReady){try{n.doScroll("left")}catch(e){return setTimeout(i,50)}P(),h.ready()}}()}return D.promise(t)};var B="undefined",j;for(j in h(l))break;l.ownLast="0"!==j,l.inlineBlockNeedsLayout=!1,h(function(){var e,t,n,r;n=T.getElementsByTagName("body")[0],n&&n.style&&(t=T.createElement("div"),r=T.createElement("div"),r.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(r).appendChild(t),typeof t.style.zoom!==B&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",l.inlineBlockNeedsLayout=e=3===t.offsetWidth,e&&(n.style.zoom=1)),n.removeChild(r))}),function(){var e=T.createElement("div");if(null==l.deleteExpando){l.deleteExpando=!0;try{delete e.test}catch(t){l.deleteExpando=!1}}e=null}(),h.acceptData=function(e){var t=h.noData[(e.nodeName+" ").toLowerCase()],n=+e.nodeType||1;return 1!==n&&9!==n?!1:!t||t!==!0&&e.getAttribute("classid")===t};var F=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,I=/([A-Z])/g;h.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?h.cache[e[h.expando]]:e[h.expando],!!e&&!R(e)},data:function(e,t,n){return U(e,t,n)},removeData:function(e,t){return z(e,t)},_data:function(e,t,n){return U(e,t,n,!0)},_removeData:function(e,t){return z(e,t,!0)}}),h.fn.extend({data:function(e,t){var n,r,i,s=this[0],o=s&&s.attributes;if(void 0===e){if(this.length&&(i=h.data(s),1===s.nodeType&&!h._data(s,"parsedAttrs"))){n=o.length;while(n--)o[n]&&(r=o[n].name,0===r.indexOf("data-")&&(r=h.camelCase(r.slice(5)),q(s,r,i[r])));h._data(s,"parsedAttrs",!0)}return i}return"object"==typeof e?this.each(function(){h.data(this,e)}):arguments.length>1?this.each(function(){h.data(this,e,t)}):s?q(s,e,h.data(s,e)):void 0},removeData:function(e){return this.each(function(){h.removeData(this,e)})}}),h.extend({queue:function(e,t,n){var r;return e?(t=(t||"fx")+"queue",r=h._data(e,t),n&&(!r||h.isArray(n)?r=h._data(e,t,h.makeArray(n)):r.push(n)),r||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=h.queue(e,t),r=n.length,i=n.shift(),s=h._queueHooks(e,t),o=function(){h.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return h._data(e,n)||h._data(e,n,{empty:h.Callbacks("once memory").add(function(){h._removeData(e,t+"queue"),h._removeData(e,n)})})}}),h.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?h.queue(this[0],e):void 0===t?this:this.each(function(){var n=h.queue(this,e,t);h._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&h.dequeue(this,e)})},dequeue:function(e){return this.each(function(){h.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=h.Deferred(),s=this,o=this.length,u=function(){--r||i.resolveWith(s,[s])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(o--)n=h._data(s[o],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(u));return u(),i.promise(t)}});var W=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,X=["Top","Right","Bottom","Left"],V=function(e,t){return e=t||e,"none"===h.css(e,"display")||!h.contains(e.ownerDocument,e)},$=h.access=function(e,t,n,r,i,s,o){var u=0,a=e.length,f=null==n;if("object"===h.type(n)){i=!0;for(u in n)h.access(e,t,u,n[u],!0,s,o)}else if(void 0!==r&&(i=!0,h.isFunction(r)||(o=!0),f&&(o?(t.call(e,r),t=null):(f=t,t=function(e,t,n){return f.call(h(e),n)})),t))for(;a>u;u++)t(e[u],n,o?r:r.call(e[u],u,t(e[u],n)));return i?e:f?t.call(e):a?t(e[0],n):s},J=/^(?:checkbox|radio)$/i;!function(){var e=T.createElement("input"),t=T.createElement("div"),n=T.createDocumentFragment();if(t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",l.leadingWhitespace=3===t.firstChild.nodeType,l.tbody=!t.getElementsByTagName("tbody").length,l.htmlSerialize=!!t.getElementsByTagName("link").length,l.html5Clone="<:nav></:nav>"!==T.createElement("nav").cloneNode(!0).outerHTML,e.type="checkbox",e.checked=!0,n.appendChild(e),l.appendChecked=e.checked,t.innerHTML="<textarea>x</textarea>",l.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,n.appendChild(t),t.innerHTML="<input type='radio' checked='checked' name='t'/>",l.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,l.noCloneEvent=!0,t.attachEvent&&(t.attachEvent("onclick",function(){l.noCloneEvent=!1}),t.cloneNode(!0).click()),null==l.deleteExpando){l.deleteExpando=!0;try{delete t.test}catch(r){l.deleteExpando=!1}}}(),function(){var t,n,r=T.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})n="on"+t,(l[t+"Bubbles"]=n in e)||(r.setAttribute(n,"t"),l[t+"Bubbles"]=r.attributes[n].expando===!1);r=null}();var K=/^(?:input|select|textarea)$/i,Q=/^key/,G=/^(?:mouse|pointer|contextmenu)|click/,Y=/^(?:focusinfocus|focusoutblur)$/,Z=/^([^.]*)(?:\.(.+)|)$/;h.event={global:{},add:function(e,t,n,r,i){var s,o,u,a,f,l,c,p,d,v,m,g=h._data(e);if(g){n.handler&&(a=n,n=a.handler,i=a.selector),n.guid||(n.guid=h.guid++),(o=g.events)||(o=g.events={}),(l=g.handle)||(l=g.handle=function(e){return typeof h===B||e&&h.event.triggered===e.type?void 0:h.event.dispatch.apply(l.elem,arguments)},l.elem=e),t=(t||"").match(O)||[""],u=t.length;while(u--)s=Z.exec(t[u])||[],d=m=s[1],v=(s[2]||"").split(".").sort(),d&&(f=h.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=h.event.special[d]||{},c=h.extend({type:d,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&h.expr.match.needsContext.test(i),namespace:v.join(".")},a),(p=o[d])||(p=o[d]=[],p.delegateCount=0,f.setup&&f.setup.call(e,r,v,l)!==!1||(e.addEventListener?e.addEventListener(d,l,!1):e.attachEvent&&e.attachEvent("on"+d,l))),f.add&&(f.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),h.event.global[d]=!0);e=null}},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,p,d,v,m,g=h.hasData(e)&&h._data(e);if(g&&(l=g.events)){t=(t||"").match(O)||[""],f=t.length;while(f--)if(u=Z.exec(t[f])||[],d=m=u[1],v=(u[2]||"").split(".").sort(),d){c=h.event.special[d]||{},d=(r?c.delegateType:c.bindType)||d,p=l[d]||[],u=u[2]&&new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=s=p.length;while(s--)o=p[s],!i&&m!==o.origType||n&&n.guid!==o.guid||u&&!u.test(o.namespace)||r&&r!==o.selector&&("**"!==r||!o.selector)||(p.splice(s,1),o.selector&&p.delegateCount--,c.remove&&c.remove.call(e,o));a&&!p.length&&(c.teardown&&c.teardown.call(e,v,g.handle)!==!1||h.removeEvent(e,d,g.handle),delete l[d])}else for(d in l)h.event.remove(e,d+t[f],n,r,!0);h.isEmptyObject(l)&&(delete g.handle,h._removeData(e,"events"))}},trigger:function(t,n,r,i){var s,o,u,a,l,c,p,d=[r||T],v=f.call(t,"type")?t.type:t,m=f.call(t,"namespace")?t.namespace.split("."):[];if(u=c=r=r||T,3!==r.nodeType&&8!==r.nodeType&&!Y.test(v+h.event.triggered)&&(v.indexOf(".")>=0&&(m=v.split("."),v=m.shift(),m.sort()),o=v.indexOf(":")<0&&"on"+v,t=t[h.expando]?t:new h.Event(v,"object"==typeof t&&t),t.isTrigger=i?2:3,t.namespace=m.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:h.makeArray(n,[t]),l=h.event.special[v]||{},i||!l.trigger||l.trigger.apply(r,n)!==!1)){if(!i&&!l.noBubble&&!h.isWindow(r)){for(a=l.delegateType||v,Y.test(a+v)||(u=u.parentNode);u;u=u.parentNode)d.push(u),c=u;c===(r.ownerDocument||T)&&d.push(c.defaultView||c.parentWindow||e)}p=0;while((u=d[p++])&&!t.isPropagationStopped())t.type=p>1?a:l.bindType||v,s=(h._data(u,"events")||{})[t.type]&&h._data(u,"handle"),s&&s.apply(u,n),s=o&&u[o],s&&s.apply&&h.acceptData(u)&&(t.result=s.apply(u,n),t.result===!1&&t.preventDefault());if(t.type=v,!i&&!t.isDefaultPrevented()&&(!l._default||l._default.apply(d.pop(),n)===!1)&&h.acceptData(r)&&o&&r[v]&&!h.isWindow(r)){c=r[o],c&&(r[o]=null),h.event.triggered=v;try{r[v]()}catch(g){}h.event.triggered=void 0,c&&(r[o]=c)}return t.result}},dispatch:function(e){e=h.event.fix(e);var t,n,i,s,o,u=[],a=r.call(arguments),f=(h._data(this,"events")||{})[e.type]||[],l=h.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){u=h.event.handlers.call(this,e,f),t=0;while((s=u[t++])&&!e.isPropagationStopped()){e.currentTarget=s.elem,o=0;while((i=s.handlers[o++])&&!e.isImmediatePropagationStopped())(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,n=((h.event.special[i.origType]||{}).handle||i.handler).apply(s.elem,a),void 0!==n&&(e.result=n)===!1&&(e.preventDefault(),e.stopPropagation()))}return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,i,s,o=[],u=t.delegateCount,a=e.target;if(u&&a.nodeType&&(!e.button||"click"!==e.type))for(;a!=this;a=a.parentNode||this)if(1===a.nodeType&&(a.disabled!==!0||"click"!==e.type)){for(i=[],s=0;u>s;s++)r=t[s],n=r.selector+" ",void 0===i[n]&&(i[n]=r.needsContext?h(n,this).index(a)>=0:h.find(n,this,null,[a]).length),i[n]&&i.push(r);i.length&&o.push({elem:a,handlers:i})}return u<t.length&&o.push({elem:this,handlers:t.slice(u)}),o},fix:function(e){if(e[h.expando])return e;var t,n,r,i=e.type,s=e,o=this.fixHooks[i];o||(this.fixHooks[i]=o=G.test(i)?this.mouseHooks:Q.test(i)?this.keyHooks:{}),r=o.props?this.props.concat(o.props):this.props,e=new h.Event(s),t=r.length;while(t--)n=r[t],e[n]=s[n];return e.target||(e.target=s.srcElement||T),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,o.filter?o.filter(e,s):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,s=t.button,o=t.fromElement;return null==e.pageX&&null!=t.clientX&&(r=e.target.ownerDocument||T,i=r.documentElement,n=r.body,e.pageX=t.clientX+(i&&i.scrollLeft||n&&n.scrollLeft||0)-(i&&i.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||n&&n.scrollTop||0)-(i&&i.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&o&&(e.relatedTarget=o===e.target?t.toElement:o),e.which||void 0===s||(e.which=1&s?1:2&s?3:4&s?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==nt()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===nt()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return h.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(e){return h.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=h.extend(new h.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?h.event.trigger(i,null,t):h.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},h.removeEvent=T.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===B&&(e[r]=null),e.detachEvent(r,n))},h.Event=function(e,t){return this instanceof h.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?et:tt):this.type=e,t&&h.extend(this,t),this.timeStamp=e&&e.timeStamp||h.now(),void (this[h.expando]=!0)):new h.Event(e,t)},h.Event.prototype={isDefaultPrevented:tt,isPropagationStopped:tt,isImmediatePropagationStopped:tt,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=et,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=et,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=et,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},h.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){h.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj;return(!i||i!==r&&!h.contains(r,i))&&(e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t),n}}}),l.submitBubbles||(h.event.special.submit={setup:function(){return h.nodeName(this,"form")?!1:void h.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,n=h.nodeName(t,"input")||h.nodeName(t,"button")?t.form:void 0;n&&!h._data(n,"submitBubbles")&&(h.event.add(n,"submit._submit",function(e){e._submit_bubble=!0}),h._data(n,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&h.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return h.nodeName(this,"form")?!1:void h.event.remove(this,"._submit")}}),l.changeBubbles||(h.event.special.change={setup:function(){return K.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(h.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),h.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),h.event.simulate("change",this,e,!0)})),!1):void h.event.add(this,"beforeactivate._change",function(e){var t=e.target;K.test(t.nodeName)&&!h._data(t,"changeBubbles")&&(h.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||h.event.simulate("change",this.parentNode,e,!0)}),h._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return h.event.remove(this,"._change"),!K.test(this.nodeName)}}),l.focusinBubbles||h.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){h.event.simulate(t,e.target,h.event.fix(e),!0)};h.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=h._data(r,t);i||r.addEventListener(e,n,!0),h._data(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=h._data(r,t)-1;i?h._data(r,t,i):(r.removeEventListener(e,n,!0),h._removeData(r,t))}}}),h.fn.extend({on:function(e,t,n,r,i){var s,o;if("object"==typeof e){"string"!=typeof t&&(n=n||t,t=void 0);for(s in e)this.on(s,t,n,e[s],i);return this}if(null==n&&null==r?(r=t,n=t=void 0):null==r&&("string"==typeof t?(r=n,n=void 0):(r=n,n=t,t=void 0)),r===!1)r=tt;else if(!r)return this;return 1===i&&(o=r,r=function(e){return h().off(e),o.apply(this,arguments)},r.guid=o.guid||(o.guid=h.guid++)),this.each(function(){h.event.add(this,e,r,n,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,h(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return(t===!1||"function"==typeof t)&&(n=t,t=void 0),n===!1&&(n=tt),this.each(function(){h.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){h.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?h.event.trigger(e,t,n,!0):void 0}});var it="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",st=/ jQuery\d+="(?:null|\d+)"/g,ot=new RegExp("<(?:"+it+")[\\s/>]","i"),ut=/^\s+/,at=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ft=/<([\w:]+)/,lt=/<tbody/i,ct=/<|&#?\w+;/,ht=/<(?:script|style|link)/i,pt=/checked\s*(?:[^=]|=\s*.checked.)/i,dt=/^$|\/(?:java|ecma)script/i,vt=/^true\/(.*)/,mt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,gt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:l.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},yt=rt(T),bt=yt.appendChild(T.createElement("div"));gt.optgroup=gt.option,gt.tbody=gt.tfoot=gt.colgroup=gt.caption=gt.thead,gt.th=gt.td,h.extend({clone:function(e,t,n){var r,i,s,o,u,a=h.contains(e.ownerDocument,e);if(l.html5Clone||h.isXMLDoc(e)||!ot.test("<"+e.nodeName+">")?s=e.cloneNode(!0):(bt.innerHTML=e.outerHTML,bt.removeChild(s=bt.firstChild)),!(l.noCloneEvent&&l.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||h.isXMLDoc(e)))for(r=wt(s),u=wt(e),o=0;null!=(i=u[o]);++o)r[o]&&kt(i,r[o]);if(t)if(n)for(u=u||wt(e),r=r||wt(s),o=0;null!=(i=u[o]);o++)Ct(i,r[o]);else Ct(e,s);return r=wt(s,"script"),r.length>0&&Nt(r,!a&&wt(e,"script")),r=u=i=null,s},buildFragment:function(e,t,n,r){for(var i,s,o,u,a,f,c,p=e.length,d=rt(t),v=[],m=0;p>m;m++)if(s=e[m],s||0===s)if("object"===h.type(s))h.merge(v,s.nodeType?[s]:s);else if(ct.test(s)){u=u||d.appendChild(t.createElement("div")),a=(ft.exec(s)||["",""])[1].toLowerCase(),c=gt[a]||gt._default,u.innerHTML=c[1]+s.replace(at,"<$1></$2>")+c[2],i=c[0];while(i--)u=u.lastChild;if(!l.leadingWhitespace&&ut.test(s)&&v.push(t.createTextNode(ut.exec(s)[0])),!l.tbody){s="table"!==a||lt.test(s)?"<table>"!==c[1]||lt.test(s)?0:u:u.firstChild,i=s&&s.childNodes.length;while(i--)h.nodeName(f=s.childNodes[i],"tbody")&&!f.childNodes.length&&s.removeChild(f)}h.merge(v,u.childNodes),u.textContent="";while(u.firstChild)u.removeChild(u.firstChild);u=d.lastChild}else v.push(t.createTextNode(s));u&&d.removeChild(u),l.appendChecked||h.grep(wt(v,"input"),Et),m=0;while(s=v[m++])if((!r||-1===h.inArray(s,r))&&(o=h.contains(s.ownerDocument,s),u=wt(d.appendChild(s),"script"),o&&Nt(u),n)){i=0;while(s=u[i++])dt.test(s.type||"")&&n.push(s)}return u=null,d},cleanData:function(e,t){for(var r,i,s,o,u=0,a=h.expando,f=h.cache,c=l.deleteExpando,p=h.event.special;null!=(r=e[u]);u++)if((t||h.acceptData(r))&&(s=r[a],o=s&&f[s])){if(o.events)for(i in o.events)p[i]?h.event.remove(r,i):h.removeEvent(r,i,o.handle);f[s]&&(delete f[s],c?delete r[a]:typeof r.removeAttribute!==B?r.removeAttribute(a):r[a]=null,n.push(s))}}}),h.fn.extend({text:function(e){return $(this,function(e){return void 0===e?h.text(this):this.empty().append((this[0]&&this[0].ownerDocument||T).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=St(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=St(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,r=e?h.filter(e,this):this,i=0;null!=(n=r[i]);i++)t||1!==n.nodeType||h.cleanData(wt(n)),n.parentNode&&(t&&h.contains(n.ownerDocument,n)&&Nt(wt(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){1===e.nodeType&&h.cleanData(wt(e,!1));while(e.firstChild)e.removeChild(e.firstChild);e.options&&h.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return h.clone(this,e,t)})},html:function(e){return $(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e)return 1===t.nodeType?t.innerHTML.replace(st,""):void 0;if(!("string"!=typeof e||ht.test(e)||!l.htmlSerialize&&ot.test(e)||!l.leadingWhitespace&&ut.test(e)||gt[(ft.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(at,"<$1></$2>");try{for(;r>n;n++)t=this[n]||{},1===t.nodeType&&(h.cleanData(wt(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,h.cleanData(wt(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=i.apply([],e);var n,r,s,o,u,a,f=0,c=this.length,p=this,d=c-1,v=e[0],m=h.isFunction(v);if(m||c>1&&"string"==typeof v&&!l.checkClone&&pt.test(v))return this.each(function(n){var r=p.eq(n);m&&(e[0]=v.call(this,n,r.html())),r.domManip(e,t)});if(c&&(a=h.buildFragment(e,this[0].ownerDocument,!1,this),n=a.firstChild,1===a.childNodes.length&&(a=n),n)){for(o=h.map(wt(a,"script"),xt),s=o.length;c>f;f++)r=a,f!==d&&(r=h.clone(r,!0,!0),s&&h.merge(o,wt(r,"script"))),t.call(this[f],r,f);if(s)for(u=o[o.length-1].ownerDocument,h.map(o,Tt),f=0;s>f;f++)r=o[f],dt.test(r.type||"")&&!h._data(r,"globalEval")&&h.contains(u,r)&&(r.src?h._evalUrl&&h._evalUrl(r.src):h.globalEval((r.text||r.textContent||r.innerHTML||"").replace(mt,"")));a=n=null}return this}}),h.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){h.fn[e]=function(e){for(var n,r=0,i=[],o=h(e),u=o.length-1;u>=r;r++)n=r===u?this:this.clone(!0),h(o[r])[t](n),s.apply(i,n.get());return this.pushStack(i)}});var Lt,At={};!function(){var e;l.shrinkWrapBlocks=function(){if(null!=e)return e;e=!1;var t,n,r;return n=T.getElementsByTagName("body")[0],n&&n.style?(t=T.createElement("div"),r=T.createElement("div"),r.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(r).appendChild(t),typeof t.style.zoom!==B&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(T.createElement("div")).style.width="5px",e=3!==t.offsetWidth),n.removeChild(r),e):void 0}}();var _t=/^margin/,Dt=new RegExp("^("+W+")(?!px)[a-z%]+$","i"),Pt,Ht,Bt=/^(top|right|bottom|left)$/;e.getComputedStyle?(Pt=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)},Ht=function(e,t,n){var r,i,s,o,u=e.style;return n=n||Pt(e),o=n?n.getPropertyValue(t)||n[t]:void 0,n&&(""!==o||h.contains(e.ownerDocument,e)||(o=h.style(e,t)),Dt.test(o)&&_t.test(t)&&(r=u.width,i=u.minWidth,s=u.maxWidth,u.minWidth=u.maxWidth=u.width=o,o=n.width,u.width=r,u.minWidth=i,u.maxWidth=s)),void 0===o?o:o+""}):T.documentElement.currentStyle&&(Pt=function(e){return e.currentStyle},Ht=function(e,t,n){var r,i,s,o,u=e.style;return n=n||Pt(e),o=n?n[t]:void 0,null==o&&u&&u[t]&&(o=u[t]),Dt.test(o)&&!Bt.test(t)&&(r=u.left,i=e.runtimeStyle,s=i&&i.left,s&&(i.left=e.currentStyle.left),u.left="fontSize"===t?"1em":o,o=u.pixelLeft+"px",u.left=r,s&&(i.left=s)),void 0===o?o:o+""||"auto"}),!function(){var t,n,r,i,s,o,u;if(t=T.createElement("div"),t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",r=t.getElementsByTagName("a")[0],n=r&&r.style){n.cssText="float:left;opacity:.5",l.opacity="0.5"===n.opacity,l.cssFloat=!!n.cssFloat,t.style.backgroundClip="content-box",t.cloneNode(!0).style.backgroundClip="",l.clearCloneStyle="content-box"===t.style.backgroundClip,l.boxSizing=""===n.boxSizing||""===n.MozBoxSizing||""===n.WebkitBoxSizing,h.extend(l,{reliableHiddenOffsets:function(){return null==o&&a(),o},boxSizingReliable:function(){return null==s&&a(),s},pixelPosition:function(){return null==i&&a(),i},reliableMarginRight:function(){return null==u&&a(),u}});function a(){var t,n,r,a;n=T.getElementsByTagName("body")[0],n&&n.style&&(t=T.createElement("div"),r=T.createElement("div"),r.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(r).appendChild(t),t.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",i=s=!1,u=!0,e.getComputedStyle&&(i="1%"!==(e.getComputedStyle(t,null)||{}).top,s="4px"===(e.getComputedStyle(t,null)||{width:"4px"}).width,a=t.appendChild(T.createElement("div")),a.style.cssText=t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",a.style.marginRight=a.style.width="0",t.style.width="1px",u=!parseFloat((e.getComputedStyle(a,null)||{}).marginRight)),t.innerHTML="<table><tr><td></td><td>t</td></tr></table>",a=t.getElementsByTagName("td"),a[0].style.cssText="margin:0;border:0;padding:0;display:none",o=0===a[0].offsetHeight,o&&(a[0].style.display="",a[1].style.display="none",o=0===a[0].offsetHeight),n.removeChild(r))}}}(),h.swap=function(e,t,n,r){var i,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];i=n.apply(e,r||[]);for(s in t)e.style[s]=o[s];return i};var Ft=/alpha\([^)]*\)/i,It=/opacity\s*=\s*([^)]*)/,qt=/^(none|table(?!-c[ea]).+)/,Rt=new RegExp("^("+W+")(.*)$","i"),Ut=new RegExp("^([+-])=("+W+")","i"),zt={position:"absolute",visibility:"hidden",display:"block"},Wt={letterSpacing:"0",fontWeight:"400"},Xt=["Webkit","O","Moz","ms"];h.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ht(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":l.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,s,o,u=h.camelCase(t),a=e.style;if(t=h.cssProps[u]||(h.cssProps[u]=Vt(a,u)),o=h.cssHooks[t]||h.cssHooks[u],void 0===n)return o&&"get"in o&&void 0!==(i=o.get(e,!1,r))?i:a[t];if(s=typeof n,"string"===s&&(i=Ut.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(h.css(e,t)),s="number"),null!=n&&n===n&&("number"!==s||h.cssNumber[u]||(n+="px"),l.clearCloneStyle||""!==n||0!==t.indexOf("background")||(a[t]="inherit"),!(o&&"set"in o&&void 0===(n=o.set(e,n,r)))))try{a[t]=n}catch(f){}}},css:function(e,t,n,r){var i,s,o,u=h.camelCase(t);return t=h.cssProps[u]||(h.cssProps[u]=Vt(e.style,u)),o=h.cssHooks[t]||h.cssHooks[u],o&&"get"in o&&(s=o.get(e,!0,n)),void 0===s&&(s=Ht(e,t,r)),"normal"===s&&t in Wt&&(s=Wt[t]),""===n||n?(i=parseFloat(s),n===!0||h.isNumeric(i)?i||0:s):s}}),h.each(["height","width"],function(e,t){h.cssHooks[t]={get:function(e,n,r){return n?qt.test(h.css(e,"display"))&&0===e.offsetWidth?h.swap(e,zt,function(){return Qt(e,t,r)}):Qt(e,t,r):void 0},set:function(e,n,r){var i=r&&Pt(e);return Jt(e,n,r?Kt(e,t,r,l.boxSizing&&"border-box"===h.css(e,"boxSizing",!1,i),i):0)}}}),l.opacity||(h.cssHooks.opacity={get:function(e,t){return It.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=h.isNumeric(t)?"alpha(opacity="+100*t+")":"",s=r&&r.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===h.trim(s.replace(Ft,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||r&&!r.filter)||(n.filter=Ft.test(s)?s.replace(Ft,i):s+" "+i)}}),h.cssHooks.marginRight=jt(l.reliableMarginRight,function(e,t){return t?h.swap(e,{display:"inline-block"},Ht,[e,"marginRight"]):void 0}),h.each({margin:"",padding:"",border:"Width"},function(e,t){h.cssHooks[e+t]={expand:function(n){for(var r=0,i={},s="string"==typeof n?n.split(" "):[n];4>r;r++)i[e+X[r]+t]=s[r]||s[r-2]||s[0];return i}},_t.test(e)||(h.cssHooks[e+t].set=Jt)}),h.fn.extend({css:function(e,t){return $(this,function(e,t,n){var r,i,s={},o=0;if(h.isArray(t)){for(r=Pt(e),i=t.length;i>o;o++)s[t[o]]=h.css(e,t[o],!1,r);return s}return void 0!==n?h.style(e,t,n):h.css(e,t)},e,t,arguments.length>1)},show:function(){return $t(this,!0)},hide:function(){return $t(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){V(this)?h(this).show():h(this).hide()})}}),h.Tween=Gt,Gt.prototype={constructor:Gt,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(h.cssNumber[n]?"":"px")},cur:function(){var e=Gt.propHooks[this.prop];return e&&e.get?e.get(this):Gt.propHooks._default.get(this)},run:function(e){var t,n=Gt.propHooks[this.prop];return this.pos=t=this.options.duration?h.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Gt.propHooks._default.set(this),this}},Gt.prototype.init.prototype=Gt.prototype,Gt.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=h.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){h.fx.step[e.prop]?h.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[h.cssProps[e.prop]]||h.cssHooks[e.prop])?h.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Gt.propHooks.scrollTop=Gt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},h.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},h.fx=Gt.prototype.init,h.fx.step={};var Yt,Zt,en=/^(?:toggle|show|hide)$/,tn=new RegExp("^(?:([+-])=|)("+W+")([a-z%]*)$","i"),nn=/queueHooks$/,rn=[fn],sn={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=tn.exec(t),s=i&&i[3]||(h.cssNumber[e]?"":"px"),o=(h.cssNumber[e]||"px"!==s&&+r)&&tn.exec(h.css(n.elem,e)),u=1,a=20;if(o&&o[3]!==s){s=s||o[3],i=i||[],o=+r||1;do u=u||".5",o/=u,h.style(n.elem,e,o+s);while(u!==(u=n.cur()/r)&&1!==u&&--a)}return i&&(o=n.start=+o||+r||0,n.unit=s,n.end=i[1]?o+(i[1]+1)*i[2]:+i[2]),n}]};h.Animation=h.extend(cn,{tweener:function(e,t){h.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,r=0,i=e.length;i>r;r++)n=e[r],sn[n]=sn[n]||[],sn[n].unshift(t)},prefilter:function(e,t){t?rn.unshift(e):rn.push(e)}}),h.speed=function(e,t,n){var r=e&&"object"==typeof e?h.extend({},e):{complete:n||!n&&t||h.isFunction(e)&&e,duration:e,easing:n&&t||t&&!h.isFunction(t)&&t};return r.duration=h.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in h.fx.speeds?h.fx.speeds[r.duration]:h.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){h.isFunction(r.old)&&r.old.call(this),r.queue&&h.dequeue(this,r.queue)},r},h.fn.extend({fadeTo:function(e,t,n,r){return this.filter(V).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=h.isEmptyObject(e),s=h.speed(t,n,r),o=function(){var t=cn(this,h.extend({},e),s);(i||h._data(this,"finish"))&&t.stop(!0)};return o.finish=o,i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",s=h.timers,o=h._data(this);if(i)o[i]&&o[i].stop&&r(o[i]);else for(i in o)o[i]&&o[i].stop&&nn.test(i)&&r(o[i]);for(i=s.length;i--;)s[i].elem!==this||null!=e&&s[i].queue!==e||(s[i].anim.stop(n),t=!1,s.splice(i,1));(t||!n)&&h.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=h._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],s=h.timers,o=r?r.length:0;for(n.finish=!0,h.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;o>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),h.each(["toggle","show","hide"],function(e,t){var n=h.fn[t];h.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(un(t,!0),e,r,i)}}),h.each({slideDown:un("show"),slideUp:un("hide"),slideToggle:un("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){h.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),h.timers=[],h.fx.tick=function(){var e,t=h.timers,n=0;for(Yt=h.now();n<t.length;n++)e=t[n],e()||t[n]!==e||t.splice(n--,1);t.length||h.fx.stop(),Yt=void 0},h.fx.timer=function(e){h.timers.push(e),e()?h.fx.start():h.timers.pop()},h.fx.interval=13,h.fx.start=function(){Zt||(Zt=setInterval(h.fx.tick,h.fx.interval))},h.fx.stop=function(){clearInterval(Zt),Zt=null},h.fx.speeds={slow:600,fast:200,_default:400},h.fn.delay=function(e,t){return e=h.fx?h.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},function(){var e,t,n,r,i;t=T.createElement("div"),t.setAttribute("className","t"),t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",r=t.getElementsByTagName("a")[0],n=T.createElement("select"),i=n.appendChild(T.createElement("option")),e=t.getElementsByTagName("input")[0],r.style.cssText="top:1px",l.getSetAttribute="t"!==t.className,l.style=/top/.test(r.getAttribute("style")),l.hrefNormalized="/a"===r.getAttribute("href"),l.checkOn=!!e.value,l.optSelected=i.selected,l.enctype=!!T.createElement("form").enctype,n.disabled=!0,l.optDisabled=!i.disabled,e=T.createElement("input"),e.setAttribute("value",""),l.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),l.radioValue="t"===e.value}();var hn=/\r/g;h.fn.extend({val:function(e){var t,n,r,i=this[0];if(arguments.length)return r=h.isFunction(e),this.each(function(n){var i;1===this.nodeType&&(i=r?e.call(this,n,h(this).val()):e,null==i?i="":"number"==typeof i?i+="":h.isArray(i)&&(i=h.map(i,function(e){return null==e?"":e+""})),t=h.valHooks[this.type]||h.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))});if(i)return t=h.valHooks[i.type]||h.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:(n=i.value,"string"==typeof n?n.replace(hn,""):null==n?"":n)}}),h.extend({valHooks:{option:{get:function(e){var t=h.find.attr(e,"value");return null!=t?t:h.trim(h.text(e))}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,s="select-one"===e.type||0>i,o=s?null:[],u=s?i+1:r.length,a=0>i?u:s?i:0;u>a;a++)if(n=r[a],!(!n.selected&&a!==i||(l.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&h.nodeName(n.parentNode,"optgroup"))){if(t=h(n).val(),s)return t;o.push(t)}return o},set:function(e,t){var n,r,i=e.options,s=h.makeArray(t),o=i.length;while(o--)if(r=i[o],h.inArray(h.valHooks.option.get(r),s)>=0)try{r.selected=n=!0}catch(u){r.scrollHeight}else r.selected=!1;return n||(e.selectedIndex=-1),i}}}}),h.each(["radio","checkbox"],function(){h.valHooks[this]={set:function(e,t){return h.isArray(t)?e.checked=h.inArray(h(e).val(),t)>=0:void 0}},l.checkOn||(h.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var pn,dn,vn=h.expr.attrHandle,mn=/^(?:checked|selected)$/i,gn=l.getSetAttribute,yn=l.input;h.fn.extend({attr:function(e,t){return $(this,h.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){h.removeAttr(this,e)})}}),h.extend({attr:function(e,t,n){var r,i,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return typeof e.getAttribute===B?h.prop(e,t,n):(1===s&&h.isXMLDoc(e)||(t=t.toLowerCase(),r=h.attrHooks[t]||(h.expr.match.bool.test(t)?dn:pn)),void 0===n?r&&"get"in r&&null!==(i=r.get(e,t))?i:(i=h.find.attr(e,t),null==i?void 0:i):null!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):void h.removeAttr(e,t))},removeAttr:function(e,t){var n,r,i=0,s=t&&t.match(O);if(s&&1===e.nodeType)while(n=s[i++])r=h.propFix[n]||n,h.expr.match.bool.test(n)?yn&&gn||!mn.test(n)?e[r]=!1:e[h.camelCase("default-"+n)]=e[r]=!1:h.attr(e,n,""),e.removeAttribute(gn?n:r)},attrHooks:{type:{set:function(e,t){if(!l.radioValue&&"radio"===t&&h.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),dn={set:function(e,t,n){return t===!1?h.removeAttr(e,n):yn&&gn||!mn.test(n)?e.setAttribute(!gn&&h.propFix[n]||n,n):e[h.camelCase("default-"+n)]=e[n]=!0,n}},h.each(h.expr.match.bool.source.match(/\w+/g),function(e,t){var n=vn[t]||h.find.attr;vn[t]=yn&&gn||!mn.test(t)?function(e,t,r){var i,s;return r||(s=vn[t],vn[t]=i,i=null!=n(e,t,r)?t.toLowerCase():null,vn[t]=s),i}:function(e,t,n){return n?void 0:e[h.camelCase("default-"+t)]?t.toLowerCase():null}}),yn&&gn||(h.attrHooks.value={set:function(e,t,n){return h.nodeName(e,"input")?void (e.defaultValue=t):pn&&pn.set(e,t,n)}}),gn||(pn={set:function(e,t,n){var r=e.getAttributeNode(n);return r||e.setAttributeNode(r=e.ownerDocument.createAttribute(n)),r.value=t+="","value"===n||t===e.getAttribute(n)?t:void 0}},vn.id=vn.name=vn.coords=function(e,t,n){var r;return n?void 0:(r=e.getAttributeNode(t))&&""!==r.value?r.value:null},h.valHooks.button={get:function(e,t){var n=e.getAttributeNode(t);return n&&n.specified?n.value:void 0},set:pn.set},h.attrHooks.contenteditable={set:function(e,t,n){pn.set(e,""===t?!1:t,n)}},h.each(["width","height"],function(e,t){h.attrHooks[t]={set:function(e,n){return""===n?(e.setAttribute(t,"auto"),n):void 0}}})),l.style||(h.attrHooks.style={get:function(e){return e.style.cssText||void 0},set:function(e,t){return e.style.cssText=t+""}});var bn=/^(?:input|select|textarea|button|object)$/i,wn=/^(?:a|area)$/i;h.fn.extend({prop:function(e,t){return $(this,h.prop,e,t,arguments.length>1)},removeProp:function(e){return e=h.propFix[e]||e,this.each(function(){try{this[e]=void 0,delete this[e]}catch(t){}})}}),h.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var r,i,s,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return s=1!==o||!h.isXMLDoc(e),s&&(t=h.propFix[t]||t,i=h.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=h.find.attr(e,"tabindex");return t?parseInt(t,10):bn.test(e.nodeName)||wn.test(e.nodeName)&&e.href?0:-1}}}}),l.hrefNormalized||h.each(["href","src"],function(e,t){h.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),l.optSelected||(h.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),h.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){h.propFix[this.toLowerCase()]=this}),l.enctype||(h.propFix.enctype="encoding");var En=/[\t\r\n\f]/g;h.fn.extend({addClass:function(e){var t,n,r,i,s,o,u=0,a=this.length,f="string"==typeof e&&e;if(h.isFunction(e))return this.each(function(t){h(this).addClass(e.call(this,t,this.className))});if(f)for(t=(e||"").match(O)||[];a>u;u++)if(n=this[u],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(En," "):" ")){s=0;while(i=t[s++])r.indexOf(" "+i+" ")<0&&(r+=i+" ");o=h.trim(r),n.className!==o&&(n.className=o)}return this},removeClass:function(e){var t,n,r,i,s,o,u=0,a=this.length,f=0===arguments.length||"string"==typeof e&&e;if(h.isFunction(e))return this.each(function(t){h(this).removeClass(e.call(this,t,this.className))});if(f)for(t=(e||"").match(O)||[];a>u;u++)if(n=this[u],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(En," "):"")){s=0;while(i=t[s++])while(r.indexOf(" "+i+" ")>=0)r=r.replace(" "+i+" "," ");o=e?h.trim(r):"",n.className!==o&&(n.className=o)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):this.each(h.isFunction(e)?function(n){h(this).toggleClass(e.call(this,n,this.className,t),t)}:function(){if("string"===n){var t,r=0,i=h(this),s=e.match(O)||[];while(t=s[r++])i.hasClass(t)?i.removeClass(t):i.addClass(t)}else(n===B||"boolean"===n)&&(this.className&&h._data(this,"__className__",this.className),this.className=this.className||e===!1?"":h._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(En," ").indexOf(t)>=0)return!0;return!1}}),h.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){h.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),h.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var Sn=h.now(),xn=/\?/,Tn=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;h.parseJSON=function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t+"");var n,r=null,i=h.trim(t+"");return i&&!h.trim(i.replace(Tn,function(e,t,i,s){return n&&t&&(r=0),0===r?e:(n=i||t,r+=!s-!i,"")}))?Function("return "+i)():h.error("Invalid JSON: "+t)},h.parseXML=function(t){var n,r;if(!t||"string"!=typeof t)return null;try{e.DOMParser?(r=new DOMParser,n=r.parseFromString(t,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(t))}catch(i){n=void 0}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||h.error("Invalid XML: "+t),n};var Nn,Cn,kn=/#.*$/,Ln=/([?&])_=[^&]*/,An=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,On=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Mn=/^(?:GET|HEAD)$/,_n=/^\/\//,Dn=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Pn={},Hn={},Bn="*/".concat("*");try{Cn=location.href}catch(jn){Cn=T.createElement("a"),Cn.href="",Cn=Cn.href}Nn=Dn.exec(Cn.toLowerCase())||[],h.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Cn,type:"GET",isLocal:On.test(Nn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Bn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":h.parseJSON,"text xml":h.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?qn(qn(e,h.ajaxSettings),t):qn(h.ajaxSettings,e)},ajaxPrefilter:Fn(Pn),ajaxTransport:Fn(Hn),ajax:function(e,t){function x(e,t,n,r){var f,g,y,w,S,x=t;2!==b&&(b=2,o&&clearTimeout(o),a=void 0,s=r||"",E.readyState=e>0?4:0,f=e>=200&&300>e||304===e,n&&(w=Rn(l,E,n)),w=Un(l,w,E,f),f?(l.ifModified&&(S=E.getResponseHeader("Last-Modified"),S&&(h.lastModified[i]=S),S=E.getResponseHeader("etag"),S&&(h.etag[i]=S)),204===e||"HEAD"===l.type?x="nocontent":304===e?x="notmodified":(x=w.state,g=w.data,y=w.error,f=!y)):(y=x,(e||!x)&&(x="error",0>e&&(e=0))),E.status=e,E.statusText=(t||x)+"",f?d.resolveWith(c,[g,x,E]):d.rejectWith(c,[E,x,y]),E.statusCode(m),m=void 0,u&&p.trigger(f?"ajaxSuccess":"ajaxError",[E,l,f?g:y]),v.fireWith(c,[E,x]),u&&(p.trigger("ajaxComplete",[E,l]),--h.active||h.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,r,i,s,o,u,a,f,l=h.ajaxSetup({},t),c=l.context||l,p=l.context&&(c.nodeType||c.jquery)?h(c):h.event,d=h.Deferred(),v=h.Callbacks("once memory"),m=l.statusCode||{},g={},y={},b=0,w="canceled",E={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!f){f={};while(t=An.exec(s))f[t[1].toLowerCase()]=t[2]}t=f[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?s:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=y[n]=y[n]||e,g[e]=t),this},overrideMimeType:function(e){return b||(l.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)m[t]=[m[t],e[t]];else E.always(e[E.status]);return this},abort:function(e){var t=e||w;return a&&a.abort(t),x(0,t),this}};if(d.promise(E).complete=v.add,E.success=E.done,E.error=E.fail,l.url=((e||l.url||Cn)+"").replace(kn,"").replace(_n,Nn[1]+"//"),l.type=t.method||t.type||l.method||l.type,l.dataTypes=h.trim(l.dataType||"*").toLowerCase().match(O)||[""],null==l.crossDomain&&(n=Dn.exec(l.url.toLowerCase()),l.crossDomain=!(!n||n[1]===Nn[1]&&n[2]===Nn[2]&&(n[3]||("http:"===n[1]?"80":"443"))===(Nn[3]||("http:"===Nn[1]?"80":"443")))),l.data&&l.processData&&"string"!=typeof l.data&&(l.data=h.param(l.data,l.traditional)),In(Pn,l,t,E),2===b)return E;u=l.global,u&&0===h.active++&&h.event.trigger("ajaxStart"),l.type=l.type.toUpperCase(),l.hasContent=!Mn.test(l.type),i=l.url,l.hasContent||(l.data&&(i=l.url+=(xn.test(i)?"&":"?")+l.data,delete l.data),l.cache===!1&&(l.url=Ln.test(i)?i.replace(Ln,"$1_="+Sn++):i+(xn.test(i)?"&":"?")+"_="+Sn++)),l.ifModified&&(h.lastModified[i]&&E.setRequestHeader("If-Modified-Since",h.lastModified[i]),h.etag[i]&&E.setRequestHeader("If-None-Match",h.etag[i])),(l.data&&l.hasContent&&l.contentType!==!1||t.contentType)&&E.setRequestHeader("Content-Type",l.contentType),E.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+("*"!==l.dataTypes[0]?", "+Bn+"; q=0.01":""):l.accepts["*"]);for(r in l.headers)E.setRequestHeader(r,l.headers[r]);if(!l.beforeSend||l.beforeSend.call(c,E,l)!==!1&&2!==b){w="abort";for(r in{success:1,error:1,complete:1})E[r](l[r]);if(a=In(Hn,l,t,E)){E.readyState=1,u&&p.trigger("ajaxSend",[E,l]),l.async&&l.timeout>0&&(o=setTimeout(function(){E.abort("timeout")},l.timeout));try{b=1,a.send(g,x)}catch(S){if(!(2>b))throw S;x(-1,S)}}else x(-1,"No Transport");return E}return E.abort()},getJSON:function(e,t,n){return h.get(e,t,n,"json")},getScript:function(e,t){return h.get(e,void 0,t,"script")}}),h.each(["get","post"],function(e,t){h[t]=function(e,n,r,i){return h.isFunction(n)&&(i=i||r,r=n,n=void 0),h.ajax({url:e,type:t,dataType:i,data:n,success:r})}}),h.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){h.fn[t]=function(e){return this.on(t,e)}}),h._evalUrl=function(e){return h.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},h.fn.extend({wrapAll:function(e){if(h.isFunction(e))return this.each(function(t){h(this).wrapAll(e.call(this,t))});if(this[0]){var t=h(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&1===e.firstChild.nodeType)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return this.each(h.isFunction(e)?function(t){h(this).wrapInner(e.call(this,t))}:function(){var t=h(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=h.isFunction(e);return this.each(function(n){h(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){h.nodeName(this,"body")||h(this).replaceWith(this.childNodes)}).end()}}),h.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!l.reliableHiddenOffsets()&&"none"===(e.style&&e.style.display||h.css(e,"display"))},h.expr.filters.visible=function(e){return!h.expr.filters.hidden(e)};var zn=/%20/g,Wn=/\[\]$/,Xn=/\r?\n/g,Vn=/^(?:submit|button|image|reset|file)$/i,$n=/^(?:input|select|textarea|keygen)/i;h.param=function(e,t){var n,r=[],i=function(e,t){t=h.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=h.ajaxSettings&&h.ajaxSettings.traditional),h.isArray(e)||e.jquery&&!h.isPlainObject(e))h.each(e,function(){i(this.name,this.value)});else for(n in e)Jn(n,e[n],t,i);return r.join("&").replace(zn,"+")},h.fn.extend({serialize:function(){return h.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=h.prop(this,"elements");return e?h.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!h(this).is(":disabled")&&$n.test(this.nodeName)&&!Vn.test(e)&&(this.checked||!J.test(e))}).map(function(e,t){var n=h(this).val();return null==n?null:h.isArray(n)?h.map(n,function(e){return{name:t.name,value:e.replace(Xn,"\r\n")}}):{name:t.name,value:n.replace(Xn,"\r\n")}}).get()}}),h.ajaxSettings.xhr=void 0!==e.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&Yn()||Zn()}:Yn;var Kn=0,Qn={},Gn=h.ajaxSettings.xhr();e.ActiveXObject&&h(e).on("unload",function(){for(var e in Qn)Qn[e](void 0,!0)}),l.cors=!!Gn&&"withCredentials"in Gn,Gn=l.ajax=!!Gn,Gn&&h.ajaxTransport(function(e){if(!e.crossDomain||l.cors){var t;return{send:function(n,r){var i,s=e.xhr(),o=++Kn;if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)s[i]=e.xhrFields[i];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(i in n)void 0!==n[i]&&s.setRequestHeader(i,n[i]+"");s.send(e.hasContent&&e.data||null),t=function(n,i){var u,a,f;if(t&&(i||4===s.readyState))if(delete Qn[o],t=void 0,s.onreadystatechange=h.noop,i)4!==s.readyState&&s.abort();else{f={},u=s.status,"string"==typeof s.responseText&&(f.text=s.responseText);try{a=s.statusText}catch(l){a=""}u||!e.isLocal||e.crossDomain?1223===u&&(u=204):u=f.text?200:404}f&&r(u,a,f,s.getAllResponseHeaders())},e.async?4===s.readyState?setTimeout(t):s.onreadystatechange=Qn[o]=t:t()},abort:function(){t&&t(void 0,!0)}}}}),h.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return h.globalEval(e),e}}}),h.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),h.ajaxTransport("script",function(e){if(e.crossDomain){var t,n=T.head||h("head")[0]||T.documentElement;return{send:function(r,i){t=T.createElement("script"),t.async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,n){(n||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,n||i(200,"success"))},n.insertBefore(t,n.firstChild)},abort:function(){t&&t.onload(void 0,!0)}}}});var er=[],tr=/(=)\?(?=&|$)|\?\?/;h.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=er.pop()||h.expando+"_"+Sn++;return this[e]=!0,e}}),h.ajaxPrefilter("json jsonp",function(t,n,r){var i,s,o,u=t.jsonp!==!1&&(tr.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&tr.test(t.data)&&"data");return u||"jsonp"===t.dataTypes[0]?(i=t.jsonpCallback=h.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,u?t[u]=t[u].replace(tr,"$1"+i):t.jsonp!==!1&&(t.url+=(xn.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return o||h.error(i+" was not called"),o[0]},t.dataTypes[0]="json",s=e[i],e[i]=function(){o=arguments},r.always(function(){e[i]=s,t[i]&&(t.jsonpCallback=n.jsonpCallback,er.push(i)),o&&h.isFunction(s)&&s(o[0]),o=s=void 0}),"script"):void 0}),h.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||T;var r=w.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=h.buildFragment([e],t,i),i&&i.length&&h(i).remove(),h.merge([],r.childNodes))};var nr=h.fn.load;h.fn.load=function(e,t,n){if("string"!=typeof e&&nr)return nr.apply(this,arguments);var r,i,s,o=this,u=e.indexOf(" ");return u>=0&&(r=h.trim(e.slice(u,e.length)),e=e.slice(0,u)),h.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(s="POST"),o.length>0&&h.ajax({url:e,type:s,dataType:"html",data:t}).done(function(e){i=arguments,o.html(r?h("<div>").append(h.parseHTML(e)).find(r):e)}).complete(n&&function(e,t){o.each(n,i||[e.responseText,t,e])}),this},h.expr.filters.animated=function(e){return h.grep(h.timers,function(t){return e===t.elem}).length};var rr=e.document.documentElement;h.offset={setOffset:function(e,t,n){var r,i,s,o,u,a,f,l=h.css(e,"position"),c=h(e),p={};"static"===l&&(e.style.position="relative"),u=c.offset(),s=h.css(e,"top"),a=h.css(e,"left"),f=("absolute"===l||"fixed"===l)&&h.inArray("auto",[s,a])>-1,f?(r=c.position(),o=r.top,i=r.left):(o=parseFloat(s)||0,i=parseFloat(a)||0),h.isFunction(t)&&(t=t.call(e,n,u)),null!=t.top&&(p.top=t.top-u.top+o),null!=t.left&&(p.left=t.left-u.left+i),"using"in t?t.using.call(e,p):c.css(p)}},h.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){h.offset.setOffset(this,e,t)});var t,n,r={top:0,left:0},i=this[0],s=i&&i.ownerDocument;if(s)return t=s.documentElement,h.contains(t,i)?(typeof i.getBoundingClientRect!==B&&(r=i.getBoundingClientRect()),n=ir(s),{top:r.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0),left:r.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):r},position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return"fixed"===h.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),h.nodeName(e[0],"html")||(n=e.offset()),n.top+=h.css(e[0],"borderTopWidth",!0),n.left+=h.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-h.css(r,"marginTop",!0),left:t.left-n.left-h.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||rr;while(e&&!h.nodeName(e,"html")&&"static"===h.css(e,"position"))e=e.offsetParent;return e||rr})}}),h.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n=/Y/.test(t);h.fn[e]=function(r){return $(this,function(e,r,i){var s=ir(e);return void 0===i?s?t in s?s[t]:s.document.documentElement[r]:e[r]:void (s?s.scrollTo(n?h(s).scrollLeft():i,n?i:h(s).scrollTop()):e[r]=i)},e,r,arguments.length,null)}}),h.each(["top","left"],function(e,t){h.cssHooks[t]=jt(l.pixelPosition,function(e,n){return n?(n=Ht(e,t),Dt.test(n)?h(e).position()[t]+"px":n):void 0})}),h.each({Height:"height",Width:"width"},function(e,t){h.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){h.fn[r]=function(r,i){var s=arguments.length&&(n||"boolean"!=typeof r),o=n||(r===!0||i===!0?"margin":"border");return $(this,function(t,n,r){var i;return h.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===r?h.css(t,n,o):h.style(t,n,r,o)},t,s?r:void 0,s,null)}})}),h.fn.size=function(){return this.length},h.fn.andSelf=h.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return h});var sr=e.jQuery,or=e.$;return h.noConflict=function(t){return e.$===h&&(e.$=or),t&&e.jQuery===h&&(e.jQuery=sr),h},typeof t===B&&(e.jQuery=e.$=h),h});if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(e){"use strict";function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return{end:t[n]};return!1}e.fn.emulateTransitionEnd=function(t){var n=!1,r=this;e(this).one("bsTransitionEnd",function(){n=!0});var i=function(){n||e(r).trigger(e.support.transition.end)};return setTimeout(i,t),this},e(function(){e.support.transition=t(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){return e(t.target).is(this)?t.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var n=e(this),i=n.data("bs.alert");i||n.data("bs.alert",i=new r(this)),"string"==typeof t&&i[t].call(n)})}var n='[data-dismiss="alert"]',r=function(t){e(t).on("click",n,this.close)};r.VERSION="3.2.0",r.prototype.close=function(t){function n(){s.detach().trigger("closed.bs.alert").remove()}var r=e(this),i=r.attr("data-target");i||(i=r.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,""));var s=e(i);t&&t.preventDefault(),s.length||(s=r.hasClass("alert")?r:r.parent()),s.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(s.removeClass("in"),e.support.transition&&s.hasClass("fade")?s.one("bsTransitionEnd",n).emulateTransitionEnd(150):n())};var i=e.fn.alert;e.fn.alert=t,e.fn.alert.Constructor=r,e.fn.alert.noConflict=function(){return e.fn.alert=i,this},e(document).on("click.bs.alert.data-api",n,r.prototype.close)}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.button"),s="object"==typeof t&&t;i||r.data("bs.button",i=new n(this,s)),"toggle"==t?i.toggle():t&&i.setState(t)})}var n=function(t,r){this.$element=e(t),this.options=e.extend({},n.DEFAULTS,r),this.isLoading=!1};n.VERSION="3.2.0",n.DEFAULTS={loadingText:"loading..."},n.prototype.setState=function(t){var n="disabled",r=this.$element,i=r.is("input")?"val":"html",s=r.data();t+="Text",null==s.resetText&&r.data("resetText",r[i]()),r[i](null==s[t]?this.options[t]:s[t]),setTimeout(e.proxy(function(){"loadingText"==t?(this.isLoading=!0,r.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,r.removeClass(n).removeAttr(n))},this),0)},n.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var n=this.$element.find("input");"radio"==n.prop("type")&&(n.prop("checked")&&this.$element.hasClass("active")?e=!1:t.find(".active").removeClass("active")),e&&n.prop("checked",!this.$element.hasClass("active")).trigger("change")}e&&this.$element.toggleClass("active")};var r=e.fn.button;e.fn.button=t,e.fn.button.Constructor=n,e.fn.button.noConflict=function(){return e.fn.button=r,this},e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(n){var r=e(n.target);r.hasClass("btn")||(r=r.closest(".btn")),t.call(r,"toggle"),n.preventDefault()})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.carousel"),s=e.extend({},n.DEFAULTS,r.data(),"object"==typeof t&&t),o="string"==typeof t?t:s.slide;i||r.data("bs.carousel",i=new n(this,s)),"number"==typeof t?i.to(t):o?i[o]():s.interval&&i.pause().cycle()})}var n=function(t,n){this.$element=e(t).on("keydown.bs.carousel",e.proxy(this.keydown,this)),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};n.VERSION="3.2.0",n.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},n.prototype.keydown=function(e){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()},n.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},n.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},n.prototype.to=function(t){var n=this,r=this.getItemIndex(this.$active=this.$element.find(".item.active"));return t>this.$items.length-1||0>t?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){n.to(t)}):r==t?this.pause().cycle():this.slide(t>r?"next":"prev",e(this.$items[t]))},n.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},n.prototype.next=function(){return this.sliding?void 0:this.slide("next")},n.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},n.prototype.slide=function(t,n){var r=this.$element.find(".item.active"),i=n||r[t](),s=this.interval,o="next"==t?"left":"right",u="next"==t?"first":"last",f=this;if(!i.length){if(!this.options.wrap)return;i=this.$element.find(".item")[u]()}if(i.hasClass("active"))return this.sliding=!1;var l=i[0],c=e.Event("slide.bs.carousel",{relatedTarget:l,direction:o});if(this.$element.trigger(c),!c.isDefaultPrevented()){if(this.sliding=!0,s&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var h=e(this.$indicators.children()[this.getItemIndex(i)]);h&&h.addClass("active")}var p=e.Event("slid.bs.carousel",{relatedTarget:l,direction:o});return e.support.transition&&this.$element.hasClass("slide")?(i.addClass(t),i[0].offsetWidth,r.addClass(o),i.addClass(o),r.one("bsTransitionEnd",function(){i.removeClass([t,o].join(" ")).addClass("active"),r.removeClass(["active",o].join(" ")),f.sliding=!1,setTimeout(function(){f.$element.trigger(p)},0)}).emulateTransitionEnd(1e3*r.css("transition-duration").slice(0,-1))):(r.removeClass("active"),i.addClass("active"),this.sliding=!1,this.$element.trigger(p)),s&&this.cycle(),this}};var r=e.fn.carousel;e.fn.carousel=t,e.fn.carousel.Constructor=n,e.fn.carousel.noConflict=function(){return e.fn.carousel=r,this},e(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(n){var r,i=e(this),s=e(i.attr("data-target")||(r=i.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,""));if(s.hasClass("carousel")){var o=e.extend({},s.data(),i.data()),u=i.attr("data-slide-to");u&&(o.interval=!1),t.call(s,o),u&&s.data("bs.carousel").to(u),n.preventDefault()}}),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var n=e(this);t.call(n,n.data())})})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.collapse"),s=e.extend({},n.DEFAULTS,r.data(),"object"==typeof t&&t);!i&&s.toggle&&"show"==t&&(t=!t),i||r.data("bs.collapse",i=new n(this,s)),"string"==typeof t&&i[t]()})}var n=function(t,r){this.$element=e(t),this.options=e.extend({},n.DEFAULTS,r),this.transitioning=null,this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};n.VERSION="3.2.0",n.DEFAULTS={toggle:!0},n.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"},n.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var n=e.Event("show.bs.collapse");if(this.$element.trigger(n),!n.isDefaultPrevented()){var r=this.$parent&&this.$parent.find("> .panel > .in");if(r&&r.length){var i=r.data("bs.collapse");if(i&&i.transitioning)return;t.call(r,"hide"),i||r.data("bs.collapse",null)}var s=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[s](0),this.transitioning=1;var o=function(){this.$element.removeClass("collapsing").addClass("collapse in")[s](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return o.call(this);var u=e.camelCase(["scroll",s].join("-"));this.$element.one("bsTransitionEnd",e.proxy(o,this)).emulateTransitionEnd(350)[s](this.$element[0][u])}}},n.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var r=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return e.support.transition?void this.$element[n](0).one("bsTransitionEnd",e.proxy(r,this)).emulateTransitionEnd(350):r.call(this)}}},n.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var r=e.fn.collapse;e.fn.collapse=t,e.fn.collapse.Constructor=n,e.fn.collapse.noConflict=function(){return e.fn.collapse=r,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(n){var r,i=e(this),s=i.attr("data-target")||n.preventDefault()||(r=i.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,""),o=e(s),u=o.data("bs.collapse"),f=u?"toggle":i.data(),l=i.attr("data-parent"),c=l&&e(l);u&&u.transitioning||(c&&c.find('[data-toggle="collapse"][data-parent="'+l+'"]').not(i).addClass("collapsed"),i[o.hasClass("in")?"addClass":"removeClass"]("collapsed")),t.call(o,f)})}(jQuery),+function(e){"use strict";function t(t){t&&3===t.which||(e(i).remove(),e(s).each(function(){var r=n(e(this)),i={relatedTarget:this};r.hasClass("open")&&(r.trigger(t=e.Event("hide.bs.dropdown",i)),t.isDefaultPrevented()||r.removeClass("open").trigger("hidden.bs.dropdown",i))}))}function n(t){var n=t.attr("data-target");n||(n=t.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var r=n&&e(n);return r&&r.length?r:t.parent()}function r(t){return this.each(function(){var n=e(this),r=n.data("bs.dropdown");r||n.data("bs.dropdown",r=new o(this)),"string"==typeof t&&r[t].call(n)})}var i=".dropdown-backdrop",s='[data-toggle="dropdown"]',o=function(t){e(t).on("click.bs.dropdown",this.toggle)};o.VERSION="3.2.0",o.prototype.toggle=function(r){var i=e(this);if(!i.is(".disabled, :disabled")){var s=n(i),o=s.hasClass("open");if(t(),!o){"ontouchstart"in document.documentElement&&!s.closest(".navbar-nav").length&&e('<div class="dropdown-backdrop"/>').insertAfter(e(this)).on("click",t);var u={relatedTarget:this};if(s.trigger(r=e.Event("show.bs.dropdown",u)),r.isDefaultPrevented())return;i.trigger("focus"),s.toggleClass("open").trigger("shown.bs.dropdown",u)}return!1}},o.prototype.keydown=function(t){if(/(38|40|27)/.test(t.keyCode)){var r=e(this);if(t.preventDefault(),t.stopPropagation(),!r.is(".disabled, :disabled")){var i=n(r),o=i.hasClass("open");if(!o||o&&27==t.keyCode)return 27==t.which&&i.find(s).trigger("focus"),r.trigger("click");var u=" li:not(.divider):visible a",l=i.find('[role="menu"]'+u+', [role="listbox"]'+u);if(l.length){var h=l.index(l.filter(":focus"));38==t.keyCode&&h>0&&h--,40==t.keyCode&&h<l.length-1&&h++,~h||(h=0),l.eq(h).trigger("focus")}}}};var u=e.fn.dropdown;e.fn.dropdown=r,e.fn.dropdown.Constructor=o,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=u,this},e(document).on("click.bs.dropdown.data-api",t).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",s,o.prototype.toggle).on("keydown.bs.dropdown.data-api",s+', [role="menu"], [role="listbox"]',o.prototype.keydown)}(jQuery),+function(e){"use strict";function t(t,r){return this.each(function(){var i=e(this),s=i.data("bs.modal"),o=e.extend({},n.DEFAULTS,i.data(),"object"==typeof t&&t);s||i.data("bs.modal",s=new n(this,o)),"string"==typeof t?s[t](r):o.show&&s.show(r)})}var n=function(t,n){this.options=n,this.$body=e(document.body),this.$element=e(t),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.2.0",n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},n.prototype.show=function(t){var n=this,r=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(r),this.isShown||r.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.$body.addClass("modal-open"),this.setScrollbar(),this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.backdrop(function(){var r=e.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(n.$body),n.$element.show().scrollTop(0),r&&n.$element[0].offsetWidth,n.$element.addClass("in").attr("aria-hidden",!1),n.enforceFocus();var i=e.Event("shown.bs.modal",{relatedTarget:t});r?n.$element.find(".modal-dialog").one("bsTransitionEnd",function(){n.$element.trigger("focus").trigger(i)}).emulateTransitionEnd(300):n.$element.trigger("focus").trigger(i)}))},n.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.$body.removeClass("modal-open"),this.resetScrollbar(),this.escape(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},n.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},n.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(t){var n=this,r=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=e.support.transition&&r;if(this.$backdrop=e('<div class="modal-backdrop '+r+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;i?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(150):t()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var s=function(){n.removeBackdrop(),t&&t()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",s).emulateTransitionEnd(150):s()}else t&&t()},n.prototype.checkScrollbar=function(){document.body.clientWidth>=window.innerWidth||(this.scrollbarWidth=this.scrollbarWidth||this.measureScrollbar())},n.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.scrollbarWidth&&this.$body.css("padding-right",e+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},n.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var r=e.fn.modal;e.fn.modal=t,e.fn.modal.Constructor=n,e.fn.modal.noConflict=function(){return e.fn.modal=r,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var r=e(this),i=r.attr("href"),s=e(r.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),o=s.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(i)&&i},s.data(),r.data());r.is("a")&&n.preventDefault(),s.one("show.bs.modal",function(e){e.isDefaultPrevented()||s.one("hidden.bs.modal",function(){r.is(":visible")&&r.trigger("focus")})}),t.call(s,o,this)})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.tooltip"),s="object"==typeof t&&t;(i||"destroy"!=t)&&(i||r.data("bs.tooltip",i=new n(this,s)),"string"==typeof t&&i[t]())})}var n=function(e,t){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",e,t)};n.VERSION="3.2.0",n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(t,n,r){this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(r),this.$viewport=this.options.viewport&&e(this.options.viewport.selector||this.options.viewport);for(var i=this.options.trigger.split(" "),s=i.length;s--;){var o=i[s];if("click"==o)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=o){var u="hover"==o?"mouseenter":"focusin",f="hover"==o?"mouseleave":"focusout";this.$element.on(u+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(f+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},n.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,r){n[e]!=r&&(t[e]=r)}),t},n.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void (n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show()},n.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void (n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide()},n.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var n=e.contains(document.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!n)return;var r=this,i=this.tip(),s=this.getUID(this.type);this.setContent(),i.attr("id",s),this.$element.attr("aria-describedby",s),this.options.animation&&i.addClass("fade");var o="function"==typeof this.options.placement?this.options.placement.call(this,i[0],this.$element[0]):this.options.placement,u=/\s?auto?\s?/i,f=u.test(o);f&&(o=o.replace(u,"")||"top"),i.detach().css({top:0,left:0,display:"block"}).addClass(o).data("bs."+this.type,this),this.options.container?i.appendTo(this.options.container):i.insertAfter(this.$element);var l=this.getPosition(),c=i[0].offsetWidth,h=i[0].offsetHeight;if(f){var p=o,d=this.$element.parent(),v=this.getPosition(d);o="bottom"==o&&l.top+l.height+h-v.scroll>v.height?"top":"top"==o&&l.top-v.scroll-h<0?"bottom":"right"==o&&l.right+c>v.width?"left":"left"==o&&l.left-c<v.left?"right":o,i.removeClass(p).addClass(o)}var m=this.getCalculatedOffset(o,l,c,h);this.applyPlacement(m,o);var g=function(){r.$element.trigger("shown.bs."+r.type),r.hoverState=null};e.support.transition&&this.$tip.hasClass("fade")?i.one("bsTransitionEnd",g).emulateTransitionEnd(150):g()}},n.prototype.applyPlacement=function(t,n){var r=this.tip(),i=r[0].offsetWidth,s=r[0].offsetHeight,o=parseInt(r.css("margin-top"),10),u=parseInt(r.css("margin-left"),10);isNaN(o)&&(o=0),isNaN(u)&&(u=0),t.top=t.top+o,t.left=t.left+u,e.offset.setOffset(r[0],e.extend({using:function(e){r.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),r.addClass("in");var f=r[0].offsetWidth,l=r[0].offsetHeight;"top"==n&&l!=s&&(t.top=t.top+s-l);var c=this.getViewportAdjustedDelta(n,t,f,l);c.left?t.left+=c.left:t.top+=c.top;var h=c.left?2*c.left-i+f:2*c.top-s+l,p=c.left?"left":"top",d=c.left?"offsetWidth":"offsetHeight";r.offset(t),this.replaceArrow(h,r[0][d],p)},n.prototype.replaceArrow=function(e,t,n){this.arrow().css(n,e?50*(1-e/t)+"%":"")},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},n.prototype.hide=function(){function t(){"in"!=n.hoverState&&r.detach(),n.$element.trigger("hidden.bs."+n.type)}var n=this,r=this.tip(),i=e.Event("hide.bs."+this.type);return this.$element.removeAttr("aria-describedby"),this.$element.trigger(i),i.isDefaultPrevented()?void 0:(r.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",t).emulateTransitionEnd(150):t(),this.hoverState=null,this)},n.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(t){t=t||this.$element;var n=t[0],r="BODY"==n.tagName;return e.extend({},"function"==typeof n.getBoundingClientRect?n.getBoundingClientRect():null,{scroll:r?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop(),width:r?e(window).width():t.outerWidth(),height:r?e(window).height():t.outerHeight()},r?{top:0,left:0}:t.offset())},n.prototype.getCalculatedOffset=function(e,t,n,r){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-r,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-r/2,left:t.left-n}:{top:t.top+t.height/2-r/2,left:t.left+t.width}},n.prototype.getViewportAdjustedDelta=function(e,t,n,r){var i={top:0,left:0};if(!this.$viewport)return i;var s=this.options.viewport&&this.options.viewport.padding||0,o=this.getPosition(this.$viewport);if(/right|left/.test(e)){var u=t.top-s-o.scroll,a=t.top+s-o.scroll+r;u<o.top?i.top=o.top-u:a>o.top+o.height&&(i.top=o.top+o.height-a)}else{var f=t.left-s,l=t.left+s+n;f<o.left?i.left=o.left-f:l>o.width&&(i.left=o.left+o.width-l)}return i},n.prototype.getTitle=function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||("function"==typeof n.title?n.title.call(t[0]):n.title)},n.prototype.getUID=function(e){do e+=~~(1e6*Math.random());while(document.getElementById(e));return e},n.prototype.tip=function(){return this.$tip=this.$tip||e(this.options.template)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(t){var n=this;t&&(n=e(t.currentTarget).data("bs."+this.type),n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n))),n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var r=e.fn.tooltip;e.fn.tooltip=t,e.fn.tooltip.Constructor=n,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=r,this}}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.popover"),s="object"==typeof t&&t;(i||"destroy"!=t)&&(i||r.data("bs.popover",i=new n(this,s)),"string"==typeof t&&i[t]())})}var n=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");n.VERSION="3.2.0",n.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),n.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),n.prototype.constructor=n,n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").empty()[this.options.html?"string"==typeof n?"html":"append":"text"](n),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},n.prototype.hasContent=function(){return this.getTitle()||this.getContent()},n.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},n.prototype.tip=function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip};var r=e.fn.popover;e.fn.popover=t,e.fn.popover.Constructor=n,e.fn.popover.noConflict=function(){return e.fn.popover=r,this}}(jQuery),+function(e){"use strict";function t(n,r){var i=e.proxy(this.process,this);this.$body=e("body"),this.$scrollElement=e(e(n).is("body")?window:n),this.options=e.extend({},t.DEFAULTS,r),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",i),this.refresh(),this.process()}function n(n){return this.each(function(){var r=e(this),i=r.data("bs.scrollspy"),s="object"==typeof n&&n;i||r.data("bs.scrollspy",i=new t(this,s)),"string"==typeof n&&i[n]()})}t.VERSION="3.2.0",t.DEFAULTS={offset:10},t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},t.prototype.refresh=function(){var t="offset",n=0;e.isWindow(this.$scrollElement[0])||(t="position",n=this.$scrollElement.scrollTop()),this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight();var r=this;this.$body.find(this.selector).map(function(){var r=e(this),i=r.data("target")||r.attr("href"),s=/^#./.test(i)&&e(i);return s&&s.length&&s.is(":visible")&&[[s[t]().top+n,i]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){r.offsets.push(this[0]),r.targets.push(this[1])})},t.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),r=this.options.offset+n-this.$scrollElement.height(),i=this.offsets,s=this.targets,o=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),t>=r)return o!=(e=s[s.length-1])&&this.activate(e);if(o&&t<=i[0])return o!=(e=s[0])&&this.activate(e);for(e=i.length;e--;)o!=s[e]&&t>=i[e]&&(!i[e+1]||t<=i[e+1])&&this.activate(s[e])},t.prototype.activate=function(t){this.activeTarget=t,e(this.selector).parentsUntil(this.options.target,".active").removeClass("active");var n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',r=e(n).parents("li").addClass("active");r.parent(".dropdown-menu").length&&(r=r.closest("li.dropdown").addClass("active")),r.trigger("activate.bs.scrollspy")};var r=e.fn.scrollspy;e.fn.scrollspy=n,e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=r,this},e(window).on("load.bs.scrollspy.data-api",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);n.call(t,t.data())})})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.tab");i||r.data("bs.tab",i=new n(this)),"string"==typeof t&&i[t]()})}var n=function(t){this.element=e(t)};n.VERSION="3.2.0",n.prototype.show=function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),r=t.data("target");if(r||(r=t.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var i=n.find(".active:last a")[0],s=e.Event("show.bs.tab",{relatedTarget:i});if(t.trigger(s),!s.isDefaultPrevented()){var o=e(r);this.activate(t.closest("li"),n),this.activate(o,o.parent(),function(){t.trigger({type:"shown.bs.tab",relatedTarget:i})})}}},n.prototype.activate=function(t,n,r){function i(){s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),o?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),r&&r()}var s=n.find("> .active"),o=r&&e.support.transition&&s.hasClass("fade");o?s.one("bsTransitionEnd",i).emulateTransitionEnd(150):i(),s.removeClass("in")};var r=e.fn.tab;e.fn.tab=t,e.fn.tab.Constructor=n,e.fn.tab.noConflict=function(){return e.fn.tab=r,this},e(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(n){n.preventDefault(),t.call(e(this),"show")})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.affix"),s="object"==typeof t&&t;i||r.data("bs.affix",i=new n(this,s)),"string"==typeof t&&i[t]()})}var n=function(t,r){this.options=e.extend({},n.DEFAULTS,r),this.$target=e(this.options.target).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(t),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};n.VERSION="3.2.0",n.RESET="affix affix-top affix-bottom",n.DEFAULTS={offset:0,target:window},n.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(n.RESET).addClass("affix");var e=this.$target.scrollTop(),t=this.$element.offset();return this.pinnedOffset=t.top-e},n.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},n.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t=e(document).height(),r=this.$target.scrollTop(),i=this.$element.offset(),s=this.options.offset,o=s.top,u=s.bottom;"object"!=typeof s&&(u=o=s),"function"==typeof o&&(o=s.top(this.$element)),"function"==typeof u&&(u=s.bottom(this.$element));var f=null!=this.unpin&&r+this.unpin<=i.top?!1:null!=u&&i.top+this.$element.height()>=t-u?"bottom":null!=o&&o>=r?"top":!1;if(this.affixed!==f){null!=this.unpin&&this.$element.css("top","");var l="affix"+(f?"-"+f:""),h=e.Event(l+".bs.affix");this.$element.trigger(h),h.isDefaultPrevented()||(this.affixed=f,this.unpin="bottom"==f?this.getPinnedOffset():null,this.$element.removeClass(n.RESET).addClass(l).trigger(e.Event(l.replace("affix","affixed"))),"bottom"==f&&this.$element.offset({top:t-this.$element.height()-u}))}}};var r=e.fn.affix;e.fn.affix=t,e.fn.affix.Constructor=n,e.fn.affix.noConflict=function(){return e.fn.affix=r,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var n=e(this),r=n.data();r.offset=r.offset||{},r.offsetBottom&&(r.offset.bottom=r.offsetBottom),r.offsetTop&&(r.offset.top=r.offsetTop),t.call(n,r)})})}(jQuery),define("bootstrap",["jquery"],function(){}),define("messageControl",["jquery"],function(){var e="control-modal-tips",t=0,n=function(n,r){var i=!0,s=e+ ++t;n=n||{type:"alert"},r=r||function(e){console.log(e+":no callback")};var o=$("<div>").addClass("modal fade").attr("id",s).attr("tabindex","-1").attr("role","dialog").attr("aria-labelledby",e+"_title"),u=$("<div>").addClass("modal-dialog").attr("role","document"),a=$("<div>").addClass("modal-content"),f=$("<div>").addClass("modal-header").append($('<button type="button" class="close" aria-label="Close"><span aria-hidden="true">&times;</span></button>').click(function(){r("cancel"),o.modal("hide")})).append($('<h4 class="modal-title"></h4>').attr("id",e+"_title").text(n.title||"æç¤ºæ¶æ¯")),l=$("<div>").addClass("modal-body").append($("<p>").html(n.content||"")),c=$("<div>").addClass("modal-footer");n.type==="alert"?c.append($('<button type="button" class="btn btn-primary" data-dismiss="modal"></button>').text("ç¡®å®").click(function(){i=!1,o.modal("hide"),r("cancel")})):(c.append($('<button type="button" class="btn btn-primary"></button>').text(n.buttonTitle||"ç¡®å®").click(function(){o.modal("hide"),r("submit")})),c.append($('<button type="button" class="btn btn-default"></button>').text("åæ¶").click(function(){o.modal("hide"),r("cancel")}))),f.appendTo(a),l.appendTo(a),c.appendTo(a),a.appendTo(u),u.appendTo(o),o.appendTo($("body")),$(o).on("hidden.bs.modal",function(e){t--,$(this).remove()}),o.modal("show"),n.autoClose&&n.type==="alert"&&setTimeout(function(){i&&(o.modal("hide"),r("cancel"))},(n.timeout||3)*1e3)};return{show:n}}),!function(e){"function"==typeof define&&define.amd?define("cropper",["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){"use strict";function t(e){return"number"==typeof e}function n(e){return"undefined"==typeof e}function r(e,n){var r=[];return t(n)&&r.push(n),r.slice.apply(e,r)}function i(e,t){var n=r(arguments,2);return function(){return e.apply(t,n.concat(r(arguments)))}}function s(e){var t=e.match(/^(https?:)\/\/([^\:\/\?#]+):?(\d*)/i);return t&&(t[1]!==d.protocol||t[2]!==d.hostname||t[3]!==d.port)}function o(e){var t="timestamp="+(new Date).getTime();return e+(-1===e.indexOf("?")?"?":"&")+t}function u(e,t){return t.left<0&&e.width<t.left+t.width&&t.top<0&&e.height<t.top+t.height}function a(e){return e?"rotate("+e+"deg)":"none"}function f(e,t){var n,r,i=z(e.degree)%180,s=(i>90?180-i:i)*Math.PI/180,o=W(s),u=X(s),a=e.width,f=e.height,l=e.aspectRatio;return t?(n=a/(u+o/l),r=n/l):(n=a*u+f*o,r=a*o+f*u),{width:n,height:r}}function l(t,n){var r=e("<canvas>")[0],i=r.getContext("2d"),s=n.naturalWidth,o=n.naturalHeight,u=n.rotate,a=f({width:s,height:o,degree:u});return u?(r.width=a.width,r.height=a.height,i.save(),i.translate(a.width/2,a.height/2),i.rotate(u*Math.PI/180),i.drawImage(t,-s/2,-o/2,s,o),i.restore()):(r.width=s,r.height=o,i.drawImage(t,0,0,s,o)),r}function c(t,n){this.$element=e(t),this.options=e.extend({},c.DEFAULTS,e.isPlainObject(n)&&n),this.ready=!1,this.built=!1,this.rotated=!1,this.cropped=!1,this.disabled=!1,this.canvas=null,this.cropBox=null,this.load()}var h=e(window),p=e(document),d=window.location,v=".cropper",m="preview"+v,g=/^(e|n|w|s|ne|nw|sw|se|all|crop|move|zoom)$/,y="cropper-modal",b="cropper-hide",w="cropper-hidden",E="cropper-invisible",S="cropper-move",x="cropper-crop",T="cropper-disabled",N="cropper-bg",C="mousedown touchstart",k="mousemove touchmove",L="mouseup mouseleave touchend touchleave touchcancel",A="wheel mousewheel DOMMouseScroll",O="dblclick",M="resize"+v,_="build"+v,D="built"+v,P="dragstart"+v,H="dragmove"+v,B="dragend"+v,j="zoomin"+v,F="zoomout"+v,I=e.isFunction(e("<canvas>")[0].getContext),q=Math.sqrt,R=Math.min,U=Math.max,z=Math.abs,W=Math.sin,X=Math.cos,V=parseFloat,$={};$.load=function(t){var n,r,i,u,a=this.options,f=this.$element;if(!t)if(f.is("img")){if(!f.attr("src"))return;t=f.prop("src")}else f.is("canvas")&&I&&(t=f[0].toDataURL());t&&(i=e.Event(_),f.one(_,a.build).trigger(i),i.isDefaultPrevented()||(a.checkImageOrigin&&s(t)&&(n="anonymous",f.prop("crossOrigin")||(r=o(t))),this.$clone=u=e("<img>"),u.one("load",e.proxy(function(){var e=u.prop("naturalWidth")||u.width(),n=u.prop("naturalHeight")||u.height();this.image={naturalWidth:e,naturalHeight:n,aspectRatio:e/n,rotate:0},this.url=t,this.ready=!0,this.build()},this)).one("error",function(){u.remove()}).attr({src:r||t,crossOrigin:n}),u.addClass(b).insertAfter(f)))},$.build=function(){var t,n,r=this.$element,i=this.$clone,s=this.options;this.ready&&(this.built&&this.unbuild(),this.$cropper=t=e(c.TEMPLATE),r.addClass(w),i.removeClass(b),this.$container=r.parent().append(t),this.$canvas=t.find(".cropper-canvas").append(i),this.$dragBox=t.find(".cropper-drag-box"),this.$cropBox=n=t.find(".cropper-crop-box"),this.$viewBox=t.find(".cropper-view-box"),this.addListeners(),this.initPreview(),s.aspectRatio=V(s.aspectRatio)||0/0,s.autoCrop?(this.cropped=!0,s.modal&&this.$dragBox.addClass(y)):n.addClass(w),s.background&&t.addClass(N),s.highlight||n.find(".cropper-face").addClass(E),s.guides||n.find(".cropper-dashed").addClass(w),s.movable||n.find(".cropper-face").data("drag","move"),s.resizable||n.find(".cropper-line, .cropper-point").addClass(w),this.setDragMode(s.dragCrop?"crop":"move"),this.built=!0,this.render(),r.one(D,s.built).trigger(D))},$.unbuild=function(){this.built&&(this.built=!1,this.container=null,this.canvas=null,this.cropBox=null,this.removeListeners(),this.resetPreview(),this.$preview=null,this.$viewBox=null,this.$cropBox=null,this.$dragBox=null,this.$canvas=null,this.$container=null,this.$cropper.remove(),this.$cropper=null)},e.extend($,{render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var e=this.$element,t=this.$container,n=this.$cropper,r=this.options;n.addClass(w),e.removeClass(w),n.css(this.container={width:U(t.width(),V(r.minContainerWidth)||200),height:U(t.height(),V(r.minContainerHeight)||100)}),e.addClass(w),n.removeClass(w)},initCanvas:function(){var t=this.container,n=t.width,r=t.height,i=this.image,s=i.aspectRatio,o={aspectRatio:s,width:n,height:r};r*s>n?o.height=n/s:o.width=r*s,o.oldLeft=o.left=(n-o.width)/2,o.oldTop=o.top=(r-o.height)/2,this.canvas=o,this.limitCanvas(!0,!0),this.initialImage=e.extend({},i),this.initialCanvas=e.extend({},o)},limitCanvas:function(t,n){var r,i,s=this.options,o=s.strict,u=this.container,a=u.width,f=u.height,l=this.canvas,c=l.aspectRatio,h=this.cropBox,p=this.cropped&&h;t&&(r=V(s.minCanvasWidth)||0,i=V(s.minCanvasHeight)||0,r?(o&&(r=U(p?h.width:a,r)),i=r/c):i?(o&&(i=U(p?h.height:f,i)),r=i*c):o&&(p?(r=h.width,i=h.height,i*c>r?r=i*c:i=r/c):(r=a,i=f,i*c>r?i=r/c:r=i*c)),e.extend(l,{minWidth:r,minHeight:i,maxWidth:1/0,maxHeight:1/0})),n&&(o?p?(l.minLeft=R(h.left,h.left+h.width-l.width),l.minTop=R(h.top,h.top+h.height-l.height),l.maxLeft=h.left,l.maxTop=h.top):(l.minLeft=R(0,a-l.width),l.minTop=R(0,f-l.height),l.maxLeft=U(0,a-l.width),l.maxTop=U(0,f-l.height)):(l.minLeft=-l.width,l.minTop=-l.height,l.maxLeft=a,l.maxTop=f))},renderCanvas:function(e){var t,n,r=this.options,i=this.canvas,s=this.image;this.rotated&&(this.rotated=!1,n=f({width:s.width,height:s.height,degree:s.rotate}),t=n.width/n.height,t!==i.aspectRatio&&(i.left-=(n.width-i.width)/2,i.top-=(n.height-i.height)/2,i.width=n.width,i.height=n.height,i.aspectRatio=t,this.limitCanvas(!0,!1))),(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=R(U(i.width,i.minWidth),i.maxWidth),i.height=R(U(i.height,i.minHeight),i.maxHeight),this.limitCanvas(!1,!0),i.oldLeft=i.left=R(U(i.left,i.minLeft),i.maxLeft),i.oldTop=i.top=R(U(i.top,i.minTop),i.maxTop),this.$canvas.css({width:i.width,height:i.height,left:i.left,top:i.top}),this.renderImage(),this.cropped&&r.strict&&!u(this.container,i)&&this.limitCropBox(!0,!0),e&&this.output()},renderImage:function(){var t,n=this.canvas,r=this.image;r.rotate&&(t=f({width:n.width,height:n.height,degree:r.rotate,aspectRatio:r.aspectRatio},!0)),e.extend(r,t?{width:t.width,height:t.height,left:(n.width-t.width)/2,top:(n.height-t.height)/2}:{width:n.width,height:n.height,left:0,top:0}),this.$clone.css({width:r.width,height:r.height,marginLeft:r.left,marginTop:r.top,transform:a(r.rotate)})},initCropBox:function(){var t=this.options,n=this.canvas,r=t.aspectRatio,i=V(t.autoCropArea)||.8,s={width:n.width,height:n.height};r&&(n.height*r>n.width?s.height=s.width/r:s.width=s.height*r),this.cropBox=s,this.limitCropBox(!0,!0),s.width=R(U(s.width,s.minWidth),s.maxWidth),s.height=R(U(s.height,s.minHeight),s.maxHeight),s.width=U(s.minWidth,s.width*i),s.height=U(s.minHeight,s.height*i),s.oldLeft=s.left=n.left+(n.width-s.width)/2,s.oldTop=s.top=n.top+(n.height-s.height)/2,this.initialCropBox=e.extend({},s)},limitCropBox:function(e,t){var n,r,i=this.options,s=i.strict,o=this.container,u=o.width,a=o.height,f=this.canvas,l=this.cropBox,c=i.aspectRatio;e&&(n=V(i.minCropBoxWidth)||0,r=V(i.minCropBoxHeight)||0,l.minWidth=R(u,n),l.minHeight=R(a,r),l.maxWidth=R(u,s?f.width:u),l.maxHeight=R(a,s?f.height:a),c&&(l.maxHeight*c>l.maxWidth?(l.minHeight=l.minWidth/c,l.maxHeight=l.maxWidth/c):(l.minWidth=l.minHeight*c,l.maxWidth=l.maxHeight*c)),l.minWidth=R(l.maxWidth,l.minWidth),l.minHeight=R(l.maxHeight,l.minHeight)),t&&(s?(l.minLeft=U(0,f.left),l.minTop=U(0,f.top),l.maxLeft=R(u,f.left+f.width)-l.width,l.maxTop=R(a,f.top+f.height)-l.height):(l.minLeft=0,l.minTop=0,l.maxLeft=u-l.width,l.maxTop=a-l.height))},renderCropBox:function(){var e=this.options,t=this.container,n=t.width,r=t.height,i=this.$cropBox,s=this.cropBox;(s.width>s.maxWidth||s.width<s.minWidth)&&(s.left=s.oldLeft),(s.height>s.maxHeight||s.height<s.minHeight)&&(s.top=s.oldTop),s.width=R(U(s.width,s.minWidth),s.maxWidth),s.height=R(U(s.height,s.minHeight),s.maxHeight),this.limitCropBox(!1,!0),s.oldLeft=s.left=R(U(s.left,s.minLeft),s.maxLeft),s.oldTop=s.top=R(U(s.top,s.minTop),s.maxTop),e.movable&&i.find(".cropper-face").data("drag",s.width===n&&s.height===r?"move":"all"),i.css({width:s.width,height:s.height,left:s.left,top:s.top}),this.cropped&&e.strict&&!u(t,this.canvas)&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){var e=this.options;this.preview(),e.crop&&e.crop.call(this.$element,this.getData())}}),$.initPreview=function(){var t=this.url;this.$preview=e(this.options.preview),this.$viewBox.html('<img src="'+t+'">'),this.$preview.each(function(){var n=e(this);n.data(m,{width:n.width(),height:n.height(),original:n.html()}).html('<img src="'+t+'" style="display:block;width:100%;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation: 0deg!important">')})},$.resetPreview=function(){this.$preview.each(function(){var t=e(this);t.html(t.data(m).original).removeData(m)})},$.preview=function(){var t=this.image,n=this.canvas,r=this.cropBox,i=t.width,s=t.height,o=r.left-n.left-t.left,u=r.top-n.top-t.top,f=t.rotate;this.cropped&&!this.disabled&&(this.$viewBox.find("img").css({width:i,height:s,marginLeft:-o,marginTop:-u,transform:a(f)}),this.$preview.each(function(){var t=e(this),n=t.data(m),l=n.width/r.width,c=n.width,h=r.height*l;h>n.height&&(l=n.height/r.height,c=r.width*l,h=n.height),t.width(c).height(h).find("img").css({width:i*l,height:s*l,marginLeft:-o*l,marginTop:-u*l,transform:a(f)})}))},$.addListeners=function(){var t=this.options;this.$element.on(P,t.dragstart).on(H,t.dragmove).on(B,t.dragend).on(j,t.zoomin).on(F,t.zoomout),this.$cropper.on(C,e.proxy(this.dragstart,this)).on(O,e.proxy(this.dblclick,this)),t.zoomable&&t.mouseWheelZoom&&this.$cropper.on(A,e.proxy(this.wheel,this)),p.on(k,this._dragmove=i(this.dragmove,this)).on(L,this._dragend=i(this.dragend,this)),t.responsive&&h.on(M,this._resize=i(this.resize,this))},$.removeListeners=function(){var e=this.options;this.$element.off(P,e.dragstart).off(H,e.dragmove).off(B,e.dragend).off(j,e.zoomin).off(F,e.zoomout),this.$cropper.off(C,this.dragstart).off(O,this.dblclick),e.zoomable&&e.mouseWheelZoom&&this.$cropper.off(A,this.wheel),p.off(k,this._dragmove).off(L,this._dragend),e.responsive&&h.off(M,this._resize)},e.extend($,{resize:function(){var t,n,r,i=this.$container,s=this.container;this.disabled||(r=i.width()/s.width,(1!==r||i.height()!==s.height)&&(t=this.getCanvasData(),n=this.getCropBoxData(),this.render(),this.setCanvasData(e.each(t,function(e,n){t[e]=n*r})),this.setCropBoxData(e.each(n,function(e,t){n[e]=t*r}))))},dblclick:function(){this.disabled||this.setDragMode(this.$dragBox.hasClass(x)?"move":"crop")},wheel:function(e){var t=e.originalEvent,n=1;this.disabled||(e.preventDefault(),t.deltaY?n=t.deltaY>0?1:-1:t.wheelDelta?n=-t.wheelDelta/120:t.detail&&(n=t.detail>0?1:-1),this.zoom(.1*-n))},dragstart:function(t){var n,r,i,s=this.options,o=t.originalEvent,u=o&&o.touches,a=t;if(!this.disabled){if(u){if(i=u.length,i>1){if(!s.zoomable||!s.touchDragZoom||2!==i)return;a=u[1],this.startX2=a.pageX,this.startY2=a.pageY,n="zoom"}a=u[0]}if(n=n||e(a.target).data("drag"),g.test(n)){if(t.preventDefault(),r=e.Event(P,{originalEvent:o,dragType:n}),this.$element.trigger(r),r.isDefaultPrevented())return;this.dragType=n,this.cropping=!1,this.startX=a.pageX,this.startY=a.pageY,"crop"===n&&(this.cropping=!0,this.$dragBox.addClass(y))}}},dragmove:function(t){var n,r,i=this.options,s=t.originalEvent,o=s&&s.touches,u=t,a=this.dragType;if(!this.disabled){if(o){if(r=o.length,r>1){if(!i.zoomable||!i.touchDragZoom||2!==r)return;u=o[1],this.endX2=u.pageX,this.endY2=u.pageY}u=o[0]}if(a){if(t.preventDefault(),n=e.Event(H,{originalEvent:s,dragType:a}),this.$element.trigger(n),n.isDefaultPrevented())return;this.endX=u.pageX,this.endY=u.pageY,this.change()}}},dragend:function(t){var n,r=this.dragType;if(!this.disabled&&r){if(t.preventDefault(),n=e.Event(B,{originalEvent:t.originalEvent,dragType:r}),this.$element.trigger(n),n.isDefaultPrevented())return;this.cropping&&(this.cropping=!1,this.$dragBox.toggleClass(y,this.cropped&&this.options.modal)),this.dragType=""}}}),e.extend($,{reset:function(){this.built&&!this.disabled&&(this.image=e.extend({},this.initialImage),this.canvas=e.extend({},this.initialCanvas),this.renderCanvas(),this.cropped&&(this.cropBox=e.extend({},this.initialCropBox),this.renderCropBox()))},clear:function(){this.cropped&&!this.disabled&&(e.extend(this.cropBox,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(),this.renderCanvas(),this.$dragBox.removeClass(y),this.$cropBox.addClass(w))},destroy:function(){var e=this.$element;this.ready?(this.unbuild(),e.removeClass(w)):this.$clone.off("load").remove(),e.removeData("cropper")},replace:function(e){!this.disabled&&e&&this.load(e)},enable:function(){this.built&&(this.disabled=!1,this.$cropper.removeClass(T))},disable:function(){this.built&&(this.disabled=!0,this.$cropper.addClass(T))},move:function(e,n){var r=this.canvas;this.built&&!this.disabled&&t(e)&&t(n)&&(r.left+=e,r.top+=n,this.renderCanvas(!0))},zoom:function(t){var n,r,i,s=this.canvas;if(t=V(t),t&&this.built&&!this.disabled&&this.options.zoomable){if(n=e.Event(t>0?j:F),this.$element.trigger(n),n.isDefaultPrevented())return;t=-1>=t?1/(1-t):1>=t?1+t:t,r=s.width*t,i=s.height*t,s.left-=(r-s.width)/2,s.top-=(i-s.height)/2,s.width=r,s.height=i,this.renderCanvas(!0),this.setDragMode("move")}},rotate:function(e){var t=this.image;e=V(e),e&&this.built&&!this.disabled&&this.options.rotatable&&(t.rotate=(t.rotate+e)%360,this.rotated=!0,this.renderCanvas(!0))},getData:function(){var t,n,r=this.cropBox,i=this.canvas,s=this.image;return this.built&&this.cropped?(n={x:r.left-i.left,y:r.top-i.top,width:r.width,height:r.height},t=s.width/s.naturalWidth,e.each(n,function(e,r){r/=t,n[e]=r})):n={x:0,y:0,width:0,height:0},n.rotate=s.rotate,n},getContainerData:function(){return this.built?this.container:{}},getImageData:function(){return this.ready?this.image:{}},getCanvasData:function(){var e,t=this.canvas;return this.built&&(e={left:t.left,top:t.top,width:t.width,height:t.height}),e||{}},setCanvasData:function(n){var r=this.canvas,i=r.aspectRatio;this.built&&!this.disabled&&e.isPlainObject(n)&&(t(n.left)&&(r.left=n.left),t(n.top)&&(r.top=n.top),t(n.width)?(r.width=n.width,r.height=n.width/i):t(n.height)&&(r.height=n.height,r.width=n.height*i),this.renderCanvas(!0))},getCropBoxData:function(){var e,t=this.cropBox;return this.built&&this.cropped&&(e={left:t.left,top:t.top,width:t.width,height:t.height}),e||{}},setCropBoxData:function(n){var r=this.cropBox,i=this.options.aspectRatio;this.built&&this.cropped&&!this.disabled&&e.isPlainObject(n)&&(t(n.left)&&(r.left=n.left),t(n.top)&&(r.top=n.top),i?t(n.width)?(r.width=n.width,r.height=r.width/i):t(n.height)&&(r.height=n.height,r.width=r.height*i):(t(n.width)&&(r.width=n.width),t(n.height)&&(r.height=n.height)),this.renderCropBox())},getCroppedCanvas:function(t){var n,r,i,s,o,u,a,f,c,h,p;if(this.built&&this.cropped&&I)return e.isPlainObject(t)||(t={}),p=this.getData(),n=p.width,r=p.height,f=n/r,e.isPlainObject(t)&&(o=t.width,u=t.height,o?(u=o/f,a=o/n):u&&(o=u*f,a=u/r)),i=o||n,s=u||r,c=e("<canvas>")[0],c.width=i,c.height=s,h=c.getContext("2d"),t.fillColor&&(h.fillStyle=t.fillColor,h.fillRect(0,0,i,s)),h.drawImage.apply(h,function(){var e,t,i,s,o,u,f=l(this.$clone[0],this.image),c=f.width,h=f.height,d=[f],v=p.x,m=p.y;return-n>=v||v>c?v=e=i=o=0:0>=v?(i=-v,v=0,e=o=R(c,n+v)):c>=v&&(i=0,e=o=R(n,c-v)),0>=e||-r>=m||m>h?m=t=s=u=0:0>=m?(s=-m,m=0,t=u=R(h,r+m)):h>=m&&(s=0,t=u=R(r,h-m)),d.push(v,m,e,t),a&&(i*=a,s*=a,o*=a,u*=a),o>0&&u>0&&d.push(i,s,o,u),d}.call(this)),c},setAspectRatio:function(e){var t=this.options;this.disabled||n(e)||(t.aspectRatio=V(e)||0/0,this.built&&(this.initCropBox(),this.cropped&&this.renderCropBox()))},setDragMode:function(e){var t=this.$dragBox,n=!1,r=!1;if(this.ready&&!this.disabled){switch(e){case"crop":this.options.dragCrop?(n=!0,t.data("drag",e)):r=!0;break;case"move":r=!0,t.data("drag",e);break;default:t.removeData("drag")}t.toggleClass(x,n).toggleClass(S,r)}}}),$.change=function(){var e,t=this.dragType,n=this.options,r=this.canvas,i=this.container,s=this.cropBox,o=s.width,u=s.height,a=s.left,f=s.top,l=a+o,c=f+u,h=0,p=0,d=i.width,v=i.height,m=!0,g=n.aspectRatio,y={x:this.endX-this.startX,y:this.endY-this.startY};switch(n.strict&&(h=s.minLeft,p=s.minTop,d=h+R(i.width,r.width),v=p+R(i.height,r.height)),g&&(y.X=y.y*g,y.Y=y.x/g),t){case"all":a+=y.x,f+=y.y;break;case"e":if(y.x>=0&&(l>=d||g&&(p>=f||c>=v))){m=!1;break}o+=y.x,g&&(u=o/g,f-=y.Y/2),0>o&&(t="w",o=0);break;case"n":if(y.y<=0&&(p>=f||g&&(h>=a||l>=d))){m=!1;break}u-=y.y,f+=y.y,g&&(o=u*g,a+=y.X/2),0>u&&(t="s",u=0);break;case"w":if(y.x<=0&&(h>=a||g&&(p>=f||c>=v))){m=!1;break}o-=y.x,a+=y.x,g&&(u=o/g,f+=y.Y/2),0>o&&(t="e",o=0);break;case"s":if(y.y>=0&&(c>=v||g&&(h>=a||l>=d))){m=!1;break}u+=y.y,g&&(o=u*g,a-=y.X/2),0>u&&(t="n",u=0);break;case"ne":if(g){if(y.y<=0&&(p>=f||l>=d)){m=!1;break}u-=y.y,f+=y.y,o=u*g}else y.x>=0?d>l?o+=y.x:y.y<=0&&p>=f&&(m=!1):o+=y.x,y.y<=0?f>0&&(u-=y.y,f+=y.y):(u-=y.y,f+=y.y);0>o&&0>u?(t="sw",u=0,o=0):0>o?(t="nw",o=0):0>u&&(t="se",u=0);break;case"nw":if(g){if(y.y<=0&&(p>=f||h>=a)){m=!1;break}u-=y.y,f+=y.y,o=u*g,a+=y.X}else y.x<=0?a>0?(o-=y.x,a+=y.x):y.y<=0&&p>=f&&(m=!1):(o-=y.x,a+=y.x),y.y<=0?f>0&&(u-=y.y,f+=y.y):(u-=y.y,f+=y.y);0>o&&0>u?(t="se",u=0,o=0):0>o?(t="ne",o=0):0>u&&(t="sw",u=0);break;case"sw":if(g){if(y.x<=0&&(h>=a||c>=v)){m=!1;break}o-=y.x,a+=y.x,u=o/g}else y.x<=0?a>0?(o-=y.x,a+=y.x):y.y>=0&&c>=v&&(m=!1):(o-=y.x,a+=y.x),y.y>=0?v>c&&(u+=y.y):u+=y.y;0>o&&0>u?(t="ne",u=0,o=0):0>o?(t="se",o=0):0>u&&(t="nw",u=0);break;case"se":if(g){if(y.x>=0&&(l>=d||c>=v)){m=!1;break}o+=y.x,u=o/g}else y.x>=0?d>l?o+=y.x:y.y>=0&&c>=v&&(m=!1):o+=y.x,y.y>=0?v>c&&(u+=y.y):u+=y.y;0>o&&0>u?(t="nw",u=0,o=0):0>o?(t="sw",o=0):0>u&&(t="ne",u=0);break;case"move":r.left+=y.x,r.top+=y.y,this.renderCanvas(!0),m=!1;break;case"zoom":this.zoom(function(e,t,n,r){var i=q(e*e+t*t),s=q(n*n+r*r);return(s-i)/i}(z(this.startX-this.startX2),z(this.startY-this.startY2),z(this.endX-this.endX2),z(this.endY-this.endY2))),this.startX2=this.endX2,this.startY2=this.endY2,m=!1;break;case"crop":y.x&&y.y&&(e=this.$cropper.offset(),a=this.startX-e.left,f=this.startY-e.top,o=s.minWidth,u=s.minHeight,y.x>0?y.y>0?t="se":(t="ne",f-=u):y.y>0?(t="sw",a-=o):(t="nw",a-=o,f-=u),this.cropped||(this.cropped=!0,this.$cropBox.removeClass(w)))}m&&(s.width=o,s.height=u,s.left=a,s.top=f,this.dragType=t,this.renderCropBox()),this.startX=this.endX,this.startY=this.endY},e.extend(c.prototype,$),c.DEFAULTS={aspectRatio:0/0,autoCropArea:.8,crop:null,preview:"",strict:!0,responsive:!0,checkImageOrigin:!0,modal:!0,guides:!0,highlight:!0,background:!0,autoCrop:!0,dragCrop:!0,movable:!0,resizable:!0,rotatable:!0,zoomable:!0,touchDragZoom:!0,mouseWheelZoom:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,build:null,built:null,dragstart:null,dragmove:null,dragend:null,zoomin:null,zoomout:null},c.setDefaults=function(t){e.extend(c.DEFAULTS,t)},c.TEMPLATE=function(e,t){return t=t.split(","),e.replace(/\d+/g,function(e){return t[e]})}('<0 6="5-container"><0 6="5-canvas"></0><0 6="5-2-9" 3-2="move"></0><0 6="5-crop-9"><1 6="5-view-9"></1><1 6="5-8 8-h"></1><1 6="5-8 8-v"></1><1 6="5-face" 3-2="all"></1><1 6="5-7 7-e" 3-2="e"></1><1 6="5-7 7-n" 3-2="n"></1><1 6="5-7 7-w" 3-2="w"></1><1 6="5-7 7-s" 3-2="s"></1><1 6="5-4 4-e" 3-2="e"></1><1 6="5-4 4-n" 3-2="n"></1><1 6="5-4 4-w" 3-2="w"></1><1 6="5-4 4-s" 3-2="s"></1><1 6="5-4 4-ne" 3-2="ne"></1><1 6="5-4 4-nw" 3-2="nw"></1><1 6="5-4 4-sw" 3-2="sw"></1><1 6="5-4 4-se" 3-2="se"></1></0></0>',"div,span,drag,data,point,cropper,class,line,dashed,box"),c.other=e.fn.cropper,e.fn.cropper=function(t){var i,s=r(arguments,1);return this.each(function(){var n,r=e(this),o=r.data("cropper");o||r.data("cropper",o=new c(this,t)),"string"==typeof t&&e.isFunction(n=o[t])&&(i=n.apply(o,s))}),n(i)?this:i},e.fn.cropper.Constructor=c,e.fn.cropper.setDefaults=c.setDefaults,e.fn.cropper.noConflict=function(){return e.fn.cropper=c.other,this}}),function(e){"use strict";typeof define=="function"&&define.amd?define("form",["jquery"],e):e(typeof jQuery!="undefined"?jQuery:window.Zepto)}(function(e){"use strict";function r(t){var n=t.data;t.isDefaultPrevented()||(t.preventDefault(),e(t.target).ajaxSubmit(n))}function i(t){var n=t.target,r=e(n);if(!r.is("[type=submit],[type=image]")){var i=r.closest("[type=submit]");if(i.length===0)return;n=i[0]}var s=this;s.clk=n;if(n.type=="image")if(t.offsetX!==undefined)s.clk_x=t.offsetX,s.clk_y=t.offsetY;else if(typeof e.fn.offset=="function"){var o=r.offset();s.clk_x=t.pageX-o.left,s.clk_y=t.pageY-o.top}else s.clk_x=t.pageX-n.offsetLeft,s.clk_y=t.pageY-n.offsetTop;setTimeout(function(){s.clk=s.clk_x=s.clk_y=null},100)}function s(){if(!e.fn.ajaxSubmit.debug)return;var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}var t={};t.fileapi=e("<input type='file'/>").get(0).files!==undefined,t.formdata=window.FormData!==undefined;var n=!!e.fn.prop;e.fn.attr2=function(){if(!n)return this.attr.apply(this,arguments);var e=this.prop.apply(this,arguments);return e&&e.jquery||typeof e=="string"?e:this.attr.apply(this,arguments)},e.fn.ajaxSubmit=function(r){function k(t){var n=e.param(t,r.traditional).split("&"),i=n.length,s=[],o,u;for(o=0;o<i;o++)n[o]=n[o].replace(/\+/g," "),u=n[o].split("="),s.push([decodeURIComponent(u[0]),decodeURIComponent(u[1])]);return s}function L(t){var n=new FormData;for(var s=0;s<t.length;s++)n.append(t[s].name,t[s].value);if(r.extraData){var o=k(r.extraData);for(s=0;s<o.length;s++)o[s]&&n.append(o[s][0],o[s][1])}r.data=null;var u=e.extend(!0,{},e.ajaxSettings,r,{contentType:!1,processData:!1,cache:!1,type:i||"POST"});r.uploadProgress&&(u.xhr=function(){var t=e.ajaxSettings.xhr();return t.upload&&t.upload.addEventListener("progress",function(e){var t=0,n=e.loaded||e.position,i=e.total;e.lengthComputable&&(t=Math.ceil(n/i*100)),r.uploadProgress(e,n,i,t)},!1),t}),u.data=null;var a=u.beforeSend;return u.beforeSend=function(e,t){r.formData?t.data=r.formData:t.data=n,a&&a.call(this,e,t)},e.ajax(u)}function A(t){function T(e){var t=null;try{e.contentWindow&&(t=e.contentWindow.document)}catch(n){s("cannot get iframe.contentWindow document: "+n)}if(t)return t;try{t=e.contentDocument?e.contentDocument:e.document}catch(n){s("cannot get iframe.contentDocument: "+n),t=e.document}return t}function k(){function f(){try{var e=T(v).readyState;s("state = "+e),e&&e.toLowerCase()=="uninitialized"&&setTimeout(f,50)}catch(t){s("Server abort: ",t," (",t.name,")"),_(x),w&&clearTimeout(w),w=undefined}}var t=a.attr2("target"),n=a.attr2("action"),r="multipart/form-data",u=a.attr("enctype")||a.attr("encoding")||r;o.setAttribute("target",p),(!i||/post/i.test(i))&&o.setAttribute("method","POST"),n!=l.url&&o.setAttribute("action",l.url),!l.skipEncodingOverride&&(!i||/post/i.test(i))&&a.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),l.timeout&&(w=setTimeout(function(){b=!0,_(S)},l.timeout));var c=[];try{if(l.extraData)for(var h in l.extraData)l.extraData.hasOwnProperty(h)&&(e.isPlainObject(l.extraData[h])&&l.extraData[h].hasOwnProperty("name")&&l.extraData[h].hasOwnProperty("value")?c.push(e('<input type="hidden" name="'+l.extraData[h].name+'">').val(l.extraData[h].value).appendTo(o)[0]):c.push(e('<input type="hidden" name="'+h+'">').val(l.extraData[h]).appendTo(o)[0]));l.iframeTarget||d.appendTo("body"),v.attachEvent?v.attachEvent("onload",_):v.addEventListener("load",_,!1),setTimeout(f,15);try{o.submit()}catch(m){var g=document.createElement("form").submit;g.apply(o)}}finally{o.setAttribute("action",n),o.setAttribute("enctype",u),t?o.setAttribute("target",t):a.removeAttr("target"),e(c).remove()}}function _(t){if(m.aborted||M)return;A=T(v),A||(s("cannot access response document"),t=x);if(t===S&&m){m.abort("timeout"),E.reject(m,"timeout");return}if(t==x&&m){m.abort("server abort"),E.reject(m,"error","server abort");return}if(!A||A.location.href==l.iframeSrc)if(!b)return;v.detachEvent?v.detachEvent("onload",_):v.removeEventListener("load",_,!1);var n="success",r;try{if(b)throw"timeout";var i=l.dataType=="xml"||A.XMLDocument||e.isXMLDoc(A);s("isXml="+i);if(!i&&window.opera&&(A.body===null||!A.body.innerHTML)&&--O){s("requeing onLoad callback, DOM not available"),setTimeout(_,250);return}var o=A.body?A.body:A.documentElement;m.responseText=o?o.innerHTML:null,m.responseXML=A.XMLDocument?A.XMLDocument:A,i&&(l.dataType="xml"),m.getResponseHeader=function(e){var t={"content-type":l.dataType};return t[e.toLowerCase()]},o&&(m.status=Number(o.getAttribute("status"))||m.status,m.statusText=o.getAttribute("statusText")||m.statusText);var u=(l.dataType||"").toLowerCase(),a=/(json|script|text)/.test(u);if(a||l.textarea){var f=A.getElementsByTagName("textarea")[0];if(f)m.responseText=f.value,m.status=Number(f.getAttribute("status"))||m.status,m.statusText=f.getAttribute("statusText")||m.statusText;else if(a){var c=A.getElementsByTagName("pre")[0],p=A.getElementsByTagName("body")[0];c?m.responseText=c.textContent?c.textContent:c.innerText:p&&(m.responseText=p.textContent?p.textContent:p.innerText)}}else u=="xml"&&!m.responseXML&&m.responseText&&(m.responseXML=D(m.responseText));try{L=H(m,u,l)}catch(g){n="parsererror",m.error=r=g||n}}catch(g){s("error caught: ",g),n="error",m.error=r=g||n}m.aborted&&(s("upload aborted"),n=null),m.status&&(n=m.status>=200&&m.status<300||m.status===304?"success":"error"),n==="success"?(l.success&&l.success.call(l.context,L,"success",m),E.resolve(m.responseText,"success",m),h&&e.event.trigger("ajaxSuccess",[m,l])):n&&(r===undefined&&(r=m.statusText),l.error&&l.error.call(l.context,m,n,r),E.reject(m,"error",r),h&&e.event.trigger("ajaxError",[m,l,r])),h&&e.event.trigger("ajaxComplete",[m,l]),h&&!--e.active&&e.event.trigger("ajaxStop"),l.complete&&l.complete.call(l.context,m,n),M=!0,l.timeout&&clearTimeout(w),setTimeout(function(){l.iframeTarget?d.attr("src",l.iframeSrc):d.remove(),m.responseXML=null},100)}var o=a[0],u,f,l,h,p,d,v,m,g,y,b,w,E=e.Deferred();E.abort=function(e){m.abort(e)};if(t)for(f=0;f<c.length;f++)u=e(c[f]),n?u.prop("disabled",!1):u.removeAttr("disabled");l=e.extend(!0,{},e.ajaxSettings,r),l.context=l.context||l,p="jqFormIO"+(new Date).getTime(),l.iframeTarget?(d=e(l.iframeTarget),y=d.attr2("name"),y?p=y:d.attr2("name",p)):(d=e('<iframe name="'+p+'" src="'+l.iframeSrc+'" />'),d.css({position:"absolute",top:"-1000px",left:"-1000px"})),v=d[0],m={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var n=t==="timeout"?"timeout":"aborted";s("aborting upload... "+n),this.aborted=1;try{v.contentWindow.document.execCommand&&v.contentWindow.document.execCommand("Stop")}catch(r){}d.attr("src",l.iframeSrc),m.error=n,l.error&&l.error.call(l.context,m,n,t),h&&e.event.trigger("ajaxError",[m,l,n]),l.complete&&l.complete.call(l.context,m,n)}},h=l.global,h&&0===e.active++&&e.event.trigger("ajaxStart"),h&&e.event.trigger("ajaxSend",[m,l]);if(l.beforeSend&&l.beforeSend.call(l.context,m,l)===!1)return l.global&&e.active--,E.reject(),E;if(m.aborted)return E.reject(),E;g=o.clk,g&&(y=g.name,y&&!g.disabled&&(l.extraData=l.extraData||{},l.extraData[y]=g.value,g.type=="image"&&(l.extraData[y+".x"]=o.clk_x,l.extraData[y+".y"]=o.clk_y)));var S=1,x=2,N=e("meta[name=csrf-token]").attr("content"),C=e("meta[name=csrf-param]").attr("content");C&&N&&(l.extraData=l.extraData||{},l.extraData[C]=N),l.forceSync?k():setTimeout(k,10);var L,A,O=50,M,D=e.parseXML||function(e,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&t.documentElement.nodeName!="parsererror"?t:null},P=e.parseJSON||function(e){return window.eval("("+e+")")},H=function(t,n,r){var i=t.getResponseHeader("content-type")||"",s=n==="xml"||!n&&i.indexOf("xml")>=0,o=s?t.responseXML:t.responseText;return s&&o.documentElement.nodeName==="parsererror"&&e.error&&e.error("parsererror"),r&&r.dataFilter&&(o=r.dataFilter(o,n)),typeof o=="string"&&(n==="json"||!n&&i.indexOf("json")>=0?o=P(o):(n==="script"||!n&&i.indexOf("javascript")>=0)&&e.globalEval(o)),o};return E}if(!this.length)return s("ajaxSubmit: skipping submit process - no element selected"),this;var i,o,u,a=this;typeof r=="function"?r={success:r}:r===undefined&&(r={}),i=r.type||this.attr2("method"),o=r.url||this.attr2("action"),u=typeof o=="string"?e.trim(o):"",u=u||window.location.href||"",u&&(u=(u.match(/^([^#]+)/)||[])[1]),r=e.extend(!0,{url:u,success:e.ajaxSettings.success,type:i||e.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},r);var f={};this.trigger("form-pre-serialize",[this,r,f]);if(f.veto)return s("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(r.beforeSerialize&&r.beforeSerialize(this,r)===!1)return s("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var l=r.traditional;l===undefined&&(l=e.ajaxSettings.traditional);var c=[],h,p=this.formToArray(r.semantic,c);r.data&&(r.extraData=r.data,h=e.param(r.data,l));if(r.beforeSubmit&&r.beforeSubmit(p,this,r)===!1)return s("ajaxSubmit: submit aborted via beforeSubmit callback"),this;this.trigger("form-submit-validate",[p,this,r,f]);if(f.veto)return s("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var d=e.param(p,l);h&&(d=d?d+"&"+h:h),r.type.toUpperCase()=="GET"?(r.url+=(r.url.indexOf("?")>=0?"&":"?")+d,r.data=null):r.data=d;var v=[];r.resetForm&&v.push(function(){a.resetForm()}),r.clearForm&&v.push(function(){a.clearForm(r.includeHidden)});if(!r.dataType&&r.target){var m=r.success||function(){};v.push(function(t){var n=r.replaceTarget?"replaceWith":"html";e(r.target)[n](t).each(m,arguments)})}else r.success&&v.push(r.success);r.success=function(e,t,n){var i=r.context||this;for(var s=0,o=v.length;s<o;s++)v[s].apply(i,[e,t,n||a,a])};if(r.error){var g=r.error;r.error=function(e,t,n){var i=r.context||this;g.apply(i,[e,t,n,a])}}if(r.complete){var y=r.complete;r.complete=function(e,t){var n=r.context||this;y.apply(n,[e,t,a])}}var b=e("input[type=file]:enabled",this).filter(function(){return e(this).val()!==""}),w=b.length>0,E="multipart/form-data",S=a.attr("enctype")==E||a.attr("encoding")==E,x=t.fileapi&&t.formdata;s("fileAPI :"+x);var T=(w||S)&&!x,N;r.iframe!==!1&&(r.iframe||T)?r.closeKeepAlive?e.get(r.closeKeepAlive,function(){N=A(p)}):N=A(p):(w||S)&&x?N=L(p):N=e.ajax(r),a.removeData("jqxhr").data("jqxhr",N);for(var C=0;C<c.length;C++)c[C]=null;return this.trigger("form-submit-notify",[this,r]),this},e.fn.ajaxForm=function(t){t=t||{},t.delegation=t.delegation&&e.isFunction(e.fn.on);if(!t.delegation&&this.length===0){var n={s:this.selector,c:this.context};return!e.isReady&&n.s?(s("DOM not ready, queuing ajaxForm"),e(function(){e(n.s,n.c).ajaxForm(t)}),this):(s("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return t.delegation?(e(document).off("submit.form-plugin",this.selector,r).off("click.form-plugin",this.selector,i).on("submit.form-plugin",this.selector,t,r).on("click.form-plugin",this.selector,t,i),this):this.ajaxFormUnbind().bind("submit.form-plugin",t,r).bind("click.form-plugin",t,i)},e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(n,r){var i=[];if(this.length===0)return i;var s=this[0],o=this.attr("id"),u=n?s.getElementsByTagName("*"):s.elements,a;u&&!/MSIE [678]/.test(navigator.userAgent)&&(u=e(u).get()),o&&(a=e(':input[form="'+o+'"]').get(),a.length&&(u=(u||[]).concat(a)));if(!u||!u.length)return i;var f,l,c,h,p,d,v;for(f=0,d=u.length;f<d;f++){p=u[f],c=p.name;if(!c||p.disabled)continue;if(n&&s.clk&&p.type=="image"){s.clk==p&&(i.push({name:c,value:e(p).val(),type:p.type}),i.push({name:c+".x",value:s.clk_x},{name:c+".y",value:s.clk_y}));continue}h=e.fieldValue(p,!0);if(h&&h.constructor==Array){r&&r.push(p);for(l=0,v=h.length;l<v;l++)i.push({name:c,value:h[l]})}else if(t.fileapi&&p.type=="file"){r&&r.push(p);var m=p.files;if(m.length)for(l=0;l<m.length;l++)i.push({name:c,value:m[l],type:p.type});else i.push({name:c,value:"",type:p.type})}else h!==null&&typeof h!="undefined"&&(r&&r.push(p),i.push({name:c,value:h,type:p.type,required:p.required}))}if(!n&&s.clk){var g=e(s.clk),y=g[0];c=y.name,c&&!y.disabled&&y.type=="image"&&(i.push({name:c,value:g.val()}),i.push({name:c+".x",value:s.clk_x},{name:c+".y",value:s.clk_y}))}return i},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var n=[];return this.each(function(){var r=this.name;if(!r)return;var i=e.fieldValue(this,t);if(i&&i.constructor==Array)for(var s=0,o=i.length;s<o;s++)n.push({name:r,value:i[s]});else i!==null&&typeof i!="undefined"&&n.push({name:this.name,value:i})}),e.param(n)},e.fn.fieldValue=function(t){for(var n=[],r=0,i=this.length;r<i;r++){var s=this[r],o=e.fieldValue(s,t);if(o===null||typeof o=="undefined"||o.constructor==Array&&!o.length)continue;o.constructor==Array?e.merge(n,o):n.push(o)}return n},e.fieldValue=function(t,n){var r=t.name,i=t.type,s=t.tagName.toLowerCase();n===undefined&&(n=!0);if(n&&(!r||t.disabled||i=="reset"||i=="button"||(i=="checkbox"||i=="radio")&&!t.checked||(i=="submit"||i=="image")&&t.form&&t.form.clk!=t||s=="select"&&t.selectedIndex==-1))return null;if(s=="select"){var o=t.selectedIndex;if(o<0)return null;var u=[],a=t.options,f=i=="select-one",l=f?o+1:a.length;for(var c=f?o:0;c<l;c++){var h=a[c];if(h.selected){var p=h.value;p||(p=h.attributes&&h.attributes.value&&!h.attributes.value.specified?h.text:h.value);if(f)return p;u.push(p)}}return u}return e(t).val()},e.fn.clearForm=function(t){return this.each(function(){e("input,select,textarea",this).clearFields(t)})},e.fn.clearFields=e.fn.clearInputs=function(t){var n=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var r=this.type,i=this.tagName.toLowerCase();n.test(r)||i=="textarea"?this.value="":r=="checkbox"||r=="radio"?this.checked=!1:i=="select"?this.selectedIndex=-1:r=="file"?/MSIE/.test(navigator.userAgent)?e(this).replaceWith(e(this).clone(!0)):e(this).val(""):t&&(t===!0&&/hidden/.test(r)||typeof t=="string"&&e(this).is(t))&&(this.value="")})},e.fn.resetForm=function(){return this.each(function(){(typeof this.reset=="function"||typeof this.reset=="object"&&!this.reset.nodeType)&&this.reset()})},e.fn.enable=function(e){return e===undefined&&(e=!0),this.each(function(){this.disabled=!e})},e.fn.selected=function(t){return t===undefined&&(t=!0),this.each(function(){var n=this.type;if(n=="checkbox"||n=="radio")this.checked=t;else if(this.tagName.toLowerCase()=="option"){var r=e(this).parent("select");t&&r[0]&&r[0].type=="select-one"&&r.find("option").selected(!1),this.selected=t}})},e.fn.ajaxSubmit.debug=!1}),define("MTFCropper",["jquery","cropper","form"],function(e){function n(n,r,i,s,o){var u=e(this),a=e("#cropperDefaultImage"),f=e("#cropperForm"),l=e(u.data("target")),c=window.URL||window.webkitURL,h=e("#upload-submit"),p=e("#postInputImg"),d=document.getElementById("cropperInputImage"),v=e(f.find("#cropData")),m=e(f.find("#cropDataType")),g=e("#returnSize"),y,b,w;s=t({autoCropArea:.8,aspectRatio:1,preview:".img-preview",minCropBoxWidth:60,minCropBoxHeight:60,built:function(){a.cropper("setCropBoxData",b),a.cropper("setCanvasData",w)}},s,!0);var E;(E=u.attr("data-original"))&&a.attr("src",E),!E&&r&&e("#"+r).attr("src")&&a.attr("src",e("#"+r).attr("src")),i&&g.val(i),l.on("show.bs.modal",function(){a.cropper(s)}).on("hidden.bs.modal",function(){b=a.cropper("getCropBoxData"),w=a.cropper("getCanvasData"),a.cropper("destroy")}),c?d.onchange=function(){var e=this.files,t;e&&e.length&&(t=e[0],/^image\/\w+/.test(t.type)?(y=c.createObjectURL(t),a.cropper("reset"),a.cropper("replace",y)):window.alert("è¯·æ·»å å¾çæä»¶"))}:d.disabled=!0,h.on("click",function(e){v.val(JSON.stringify(a.cropper("getData"))),m.val(n);var t={target:"#cropperUploadIframe",dataType:"json",success:function(e){e.status?(a.cropper("destroy"),l.modal("hide"),p.val(e.data.val),u.attr("src",e.data.path),o&&o(e)):alert(e.msg)}};f.ajaxSubmit(t)})}var t=function(e,t,n){for(var r in t)t.hasOwnProperty(r)&&(!e.hasOwnProperty(r)||n)&&(e[r]=t[r]);return e};e.fn.extend({mtfImgUpload:n})}),!function(e){"function"==typeof define&&define.amd?define("validate",["jquery"],e):e(jQuery)}(function(e){e.extend(e.fn,{validate:function(t){if(!this.length)return void (t&&t.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."));var n=e.data(this[0],"validator");return n?n:(this.attr("novalidate","novalidate"),n=new e.validator(t,this[0]),e.data(this[0],"validator",n),n.settings.onsubmit&&(this.validateDelegate(":submit","click",function(t){n.settings.submitHandler&&(n.submitButton=t.target),e(t.target).hasClass("cancel")&&(n.cancelSubmit=!0),void 0!==e(t.target).attr("formnovalidate")&&(n.cancelSubmit=!0)}),this.submit(function(t){function r(){var r;return n.settings.submitHandler?(n.submitButton&&(r=e("<input type='hidden'/>").attr("name",n.submitButton.name).val(e(n.submitButton).val()).appendTo(n.currentForm)),n.settings.submitHandler.call(n,n.currentForm,t),n.submitButton&&r.remove(),!1):!0}return n.settings.debug&&t.preventDefault(),n.cancelSubmit?(n.cancelSubmit=!1,r()):n.form()?n.pendingRequest?(n.formSubmitted=!0,!1):r():(n.focusInvalid(),!1)})),n)},valid:function(){var t,n;return e(this[0]).is("form")?t=this.validate().form():(t=!0,n=e(this[0].form).validate(),this.each(function(){t=n.element(this)&&t})),t},removeAttrs:function(t){var n={},r=this;return e.each(t.split(/\s/),function(e,t){n[t]=r.attr(t),r.removeAttr(t)}),n},rules:function(t,n){var r,i,s,o,u,f,l=this[0];if(t)switch(r=e.data(l.form,"validator").settings,i=r.rules,s=e.validator.staticRules(l),t){case"add":e.extend(s,e.validator.normalizeRule(n)),delete s.messages,i[l.name]=s,n.messages&&(r.messages[l.name]=e.extend(r.messages[l.name],n.messages));break;case"remove":return n?(f={},e.each(n.split(/\s/),function(t,n){f[n]=s[n],delete s[n],"required"===n&&e(l).removeAttr("aria-required")}),f):(delete i[l.name],s)}return o=e.validator.normalizeRules(e.extend({},e.validator.classRules(l),e.validator.attributeRules(l),e.validator.dataRules(l),e.validator.staticRules(l)),l),o.required&&(u=o.required,delete o.required,o=e.extend({required:u},o),e(l).attr("aria-required","true")),o.remote&&(u=o.remote,delete o.remote,o=e.extend(o,{remote:u})),o}}),e.extend(e.expr[":"],{blank:function(t){return!e.trim(""+e(t).val())},filled:function(t){return!!e.trim(""+e(t).val())},unchecked:function(t){return!e(t).prop("checked")}}),e.validator=function(t,n){this.settings=e.extend(!0,{},e.validator.defaults,t),this.currentForm=n,this.init()},e.validator.format=function(t,n){return 1===arguments.length?function(){var n=e.makeArray(arguments);return n.unshift(t),e.validator.format.apply(this,n)}:(arguments.length>2&&n.constructor!==Array&&(n=e.makeArray(arguments).slice(1)),n.constructor!==Array&&(n=[n]),e.each(n,function(e,n){t=t.replace(new RegExp("\\{"+e+"\\}","g"),function(){return n})}),t)},e.extend(e.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:e([]),errorLabelContainer:e([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e){this.lastActive=e,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(e)))},onfocusout:function(e){this.checkable(e)||!(e.name in this.submitted)&&this.optional(e)||this.element(e)},onkeyup:function(e,t){(9!==t.which||""!==this.elementValue(e))&&(e.name in this.submitted||e===this.lastElement)&&this.element(e)},onclick:function(e){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(t,n,r){"radio"===t.type?this.findByName(t.name).addClass(n).removeClass(r):e(t).addClass(n).removeClass(r)},unhighlight:function(t,n,r){"radio"===t.type?this.findByName(t.name).removeClass(n).addClass(r):e(t).removeClass(n).addClass(r)}},setDefaults:function(t){e.extend(e.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date ( ISO ).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:e.validator.format("Please enter no more than {0} characters."),minlength:e.validator.format("Please enter at least {0} characters."),rangelength:e.validator.format("Please enter a value between {0} and {1} characters long."),range:e.validator.format("Please enter a value between {0} and {1}."),max:e.validator.format("Please enter a value less than or equal to {0}."),min:e.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function t(t){var n=e.data(this[0].form,"validator"),r="on"+t.type.replace(/^validate/,""),i=n.settings;i[r]&&!this.is(i.ignore)&&i[r].call(n,this[0],t)}this.labelContainer=e(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||e(this.currentForm),this.containers=e(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var n,r=this.groups={};e.each(this.settings.groups,function(t,n){"string"==typeof n&&(n=n.split(/\s/)),e.each(n,function(e,n){r[n]=t})}),n=this.settings.rules,e.each(n,function(t,r){n[t]=e.validator.normalizeRule(r)}),e(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox']","focusin focusout keyup",t).validateDelegate("select, option, [type='radio'], [type='checkbox']","click",t),this.settings.invalidHandler&&e(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler),e(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){return this.checkForm(),e.extend(this.submitted,this.errorMap),this.invalid=e.extend({},this.errorMap),this.valid()||e(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(t){var n=this.clean(t),r=this.validationTargetFor(n),i=!0;return this.lastElement=r,void 0===r?delete this.invalid[n.name]:(this.prepareElement(r),this.currentElements=e(r),i=this.check(r)!==!1,i?delete this.invalid[r.name]:this.invalid[r.name]=!0),e(t).attr("aria-invalid",!i),this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),i},showErrors:function(t){if(t){e.extend(this.errorMap,t),this.errorList=[];for(var n in t)this.errorList.push({message:t[n],element:this.findByName(n)[0]});this.successList=e.grep(this.successList,function(e){return!(e.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){e.fn.resetForm&&e(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue").removeAttr("aria-invalid")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t,n=0;for(t in e)n++;return n},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(e){e.not(this.containers).text(""),this.addWrapper(e).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{e(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var t=this.lastActive;return t&&1===e.grep(this.errorList,function(e){return e.element.name===t.name}).length&&t},elements:function(){var t=this,n={};return e(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in n||!t.objectLength(e(this).rules())?!1:(n[this.name]=!0,!0)})},clean:function(t){return e(t)[0]},errors:function(){var t=this.settings.errorClass.split(" ").join(".");return e(this.settings.errorElement+"."+t,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=e([]),this.toHide=e([]),this.currentElements=e([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},elementValue:function(t){var n,r=e(t),i=t.type;return"radio"===i||"checkbox"===i?e("input[name='"+t.name+"']:checked").val():"number"===i&&"undefined"!=typeof t.validity?t.validity.badInput?!1:r.val():(n=r.val(),"string"==typeof n?n.replace(/\r/g,""):n)},check:function(t){t=this.validationTargetFor(this.clean(t));var n,r,i,s=e(t).rules(),o=e.map(s,function(e,t){return t}).length,u=!1,f=this.elementValue(t);for(r in s){i={method:r,parameters:s[r]};try{if(n=e.validator.methods[r].call(this,f,t,i.parameters),"dependency-mismatch"===n&&1===o){u=!0;continue}if(u=!1,"pending"===n)return void (this.toHide=this.toHide.not(this.errorsFor(t)));if(!n)return this.formatAndAdd(t,i),!1}catch(l){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+t.id+", check the '"+i.method+"' method.",l),l}}if(!u)return this.objectLength(s)&&this.successList.push(t),!0},customDataMessage:function(t,n){return e(t).data("msg"+n.charAt(0).toUpperCase()+n.substring(1).toLowerCase())||e(t).data("msg")},customMessage:function(e,t){var n=this.settings.messages[e];return n&&(n.constructor===String?n:n[t])},findDefined:function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e];return void 0},defaultMessage:function(t,n){return this.findDefined(this.customMessage(t.name,n),this.customDataMessage(t,n),!this.settings.ignoreTitle&&t.title||void 0,e.validator.messages[n],"<strong>Warning: No message defined for "+t.name+"</strong>")},formatAndAdd:function(t,n){var r=this.defaultMessage(t,n.method),i=/\$?\{(\d+)\}/g;"function"==typeof r?r=r.call(this,n.parameters,t):i.test(r)&&(r=e.validator.format(r.replace(i,"{$1}"),n.parameters)),this.errorList.push({message:r,element:t,method:n.method}),this.errorMap[t.name]=r,this.submitted[t.name]=r},addWrapper:function(e){return this.settings.wrapper&&(e=e.add(e.parent(this.settings.wrapper))),e},defaultShowErrors:function(){var e,t,n;for(e=0;this.errorList[e];e++)n=this.errorList[e],this.settings.highlight&&this.settings.highlight.call(this,n.element,this.settings.errorClass,this.settings.validClass),this.showLabel(n.element,n.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(e=0;this.successList[e];e++)this.showLabel(this.successList[e]);if(this.settings.unhighlight)for(e=0,t=this.validElements();t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return e(this.errorList).map(function(){return this.element})},showLabel:function(t,n){var r,i,s,o=this.errorsFor(t),u=this.idOrName(t),f=e(t).attr("aria-describedby");o.length?(o.removeClass(this.settings.validClass).addClass(this.settings.errorClass),o.html(n)):(o=e("<"+this.settings.errorElement+">").attr("id",u+"-error").addClass(this.settings.errorClass).html(n||""),r=o,this.settings.wrapper&&(r=o.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(r):this.settings.errorPlacement?this.settings.errorPlacement(r,e(t)):r.insertAfter(t),o.is("label")?o.attr("for",u):0===o.parents("label[for='"+u+"']").length&&(s=o.attr("id"),f?f.match(new RegExp("\b"+s+"\b"))||(f+=" "+s):f=s,e(t).attr("aria-describedby",f),i=this.groups[t.name],i&&e.each(this.groups,function(t,n){n===i&&e("[name='"+t+"']",this.currentForm).attr("aria-describedby",o.attr("id"))}))),!n&&this.settings.success&&(o.text(""),"string"==typeof this.settings.success?o.addClass(this.settings.success):this.settings.success(o,t)),this.toShow=this.toShow.add(o)},errorsFor:function(t){var n=this.idOrName(t),r=e(t).attr("aria-describedby"),i="label[for='"+n+"'], label[for='"+n+"'] *";return r&&(i=i+", #"+r.replace(/\s+/g,", #")),this.errors().filter(i)},idOrName:function(e){return this.groups[e.name]||(this.checkable(e)?e.name:e.id||e.name)},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name).not(this.settings.ignore)[0]),e},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(t){return e(this.currentForm).find("[name='"+t+"']")},getLength:function(t,n){switch(n.nodeName.toLowerCase()){case"select":return e("option:selected",n).length;case"input":if(this.checkable(n))return this.findByName(n.name).filter(":checked").length}return t.length},depend:function(e,t){return this.dependTypes[typeof e]?this.dependTypes[typeof e](e,t):!0},dependTypes:{"boolean":function(e){return e},string:function(t,n){return!!e(t,n.form).length},"function":function(e,t){return e(t)}},optional:function(t){var n=this.elementValue(t);return!e.validator.methods.required.call(this,n,t)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,this.pending[e.name]=!0)},stopRequest:function(t,n){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[t.name],n&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(e(this.currentForm).submit(),this.formSubmitted=!1):!n&&0===this.pendingRequest&&this.formSubmitted&&(e(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t){return e.data(t,"previousValue")||e.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,n){t.constructor===String?this.classRuleSettings[t]=n:e.extend(this.classRuleSettings,t)},classRules:function(t){var n={},r=e(t).attr("class");return r&&e.each(r.split(" "),function(){this in e.validator.classRuleSettings&&e.extend(n,e.validator.classRuleSettings[this])}),n},attributeRules:function(t){var n,r,i={},s=e(t),o=t.getAttribute("type");for(n in e.validator.methods)"required"===n?(r=t.getAttribute(n),""===r&&(r=!0),r=!!r):r=s.attr(n),/min|max/.test(n)&&(null===o||/number|range|text/.test(o))&&(r=Number(r)),r||0===r?i[n]=r:o===n&&"range"!==o&&(i[n]=!0);return i.maxlength&&/-1|2147483647|524288/.test(i.maxlength)&&delete i.maxlength,i},dataRules:function(t){var n,r,i={},s=e(t);for(n in e.validator.methods)r=s.data("rule"+n.charAt(0).toUpperCase()+n.substring(1).toLowerCase()),void 0!==r&&(i[n]=r);return i},staticRules:function(t){var n={},r=e.data(t.form,"validator");return r.settings.rules&&(n=e.validator.normalizeRule(r.settings.rules[t.name])||{}),n},normalizeRules:function(t,n){return e.each(t,function(r,i){if(i===!1)return void delete t[r];if(i.param||i.depends){var s=!0;switch(typeof i.depends){case"string":s=!!e(i.depends,n.form).length;break;case"function":s=i.depends.call(n,n)}s?t[r]=void 0!==i.param?i.param:!0:delete t[r]}}),e.each(t,function(r,i){t[r]=e.isFunction(i)?i(n):i}),e.each(["minlength","maxlength"],function(){t[this]&&(t[this]=Number(t[this]))}),e.each(["rangelength","range"],function(){var n;t[this]&&(e.isArray(t[this])?t[this]=[Number(t[this][0]),Number(t[this][1])]:"string"==typeof t[this]&&(n=t[this].replace(/[\[\]]/g,"").split(/[\s,]+/),t[this]=[Number(n[0]),Number(n[1])]))}),e.validator.autoCreateRanges&&(t.min&&t.max&&(t.range=[t.min,t.max],delete t.min,delete t.max),t.minlength&&t.maxlength&&(t.rangelength=[t.minlength,t.maxlength],delete t.minlength,delete t.maxlength)),t},normalizeRule:function(t){if("string"==typeof t){var n={};e.each(t.split(/\s/),function(){n[this]=!0}),t=n}return t},addMethod:function(t,n,r){e.validator.methods[t]=n,e.validator.messages[t]=void 0!==r?r:e.validator.messages[t],n.length<3&&e.validator.addClassRules(t,e.validator.normalizeRule(t))},methods:{required:function(t,n,r){if(!this.depend(r,n))return"dependency-mismatch";if("select"===n.nodeName.toLowerCase()){var i=e(n).val();return i&&i.length>0}return this.checkable(n)?this.getLength(t,n)>0:e.trim(t).length>0},email:function(e,t){return this.optional(t)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)},url:function(e,t){return this.optional(t)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},date:function(e,t){return this.optional(t)||!/Invalid|NaN/.test((new Date(e)).toString())},dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(e)},number:function(e,t){return this.optional(t)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},creditcard:function(e,t){if(this.optional(t))return"dependency-mismatch";if(/[^0-9 \-]+/.test(e))return!1;var n,r,i=0,s=0,o=!1;if(e=e.replace(/\D/g,""),e.length<13||e.length>19)return!1;for(n=e.length-1;n>=0;n--)r=e.charAt(n),s=parseInt(r,10),o&&(s*=2)>9&&(s-=9),i+=s,o=!o;return i%10===0},minlength:function(t,n,r){var i=e.isArray(t)?t.length:this.getLength(e.trim(t),n);return this.optional(n)||i>=r},maxlength:function(t,n,r){var i=e.isArray(t)?t.length:this.getLength(e.trim(t),n);return this.optional(n)||r>=i},rangelength:function(t,n,r){var i=e.isArray(t)?t.length:this.getLength(e.trim(t),n);return this.optional(n)||i>=r[0]&&i<=r[1]},min:function(e,t,n){return this.optional(t)||e>=n},max:function(e,t,n){return this.optional(t)||n>=e},range:function(e,t,n){return this.optional(t)||e>=n[0]&&e<=n[1]},equalTo:function(t,n,r){var i=e(r);return this.settings.onfocusout&&i.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){e(n).valid()}),t===i.val()},remote:function(t,n,r){if(this.optional(n))return"dependency-mismatch";var i,s,o=this.previousValue(n);return this.settings.messages[n.name]||(this.settings.messages[n.name]={}),o.originalMessage=this.settings.messages[n.name].remote,this.settings.messages[n.name].remote=o.message,r="string"==typeof r&&{url:r}||r,o.old===t?o.valid:(o.old=t,i=this,this.startRequest(n),s={},s[n.name]=t,e.ajax(e.extend(!0,{url:r,mode:"abort",port:"validate"+n.name,dataType:"json",data:s,context:i.currentForm,success:function(r){var s,u,f,l=r===!0||"true"===r;i.settings.messages[n.name].remote=o.originalMessage,l?(f=i.formSubmitted,i.prepareElement(n),i.formSubmitted=f,i.successList.push(n),delete i.invalid[n.name],i.showErrors()):(s={},u=r||i.defaultMessage(n,"remote"),s[n.name]=o.message=e.isFunction(u)?u(t):u,i.invalid[n.name]=!0,i.showErrors(s)),o.valid=l,i.stopRequest(n,l)}},r)),"pending")}}}),e.format=function(){throw"$.format has been deprecated. Please use $.validator.format instead."};var t,n={};e.ajaxPrefilter?e.ajaxPrefilter(function(e,t,r){var i=e.port;"abort"===e.mode&&(n[i]&&n[i].abort(),n[i]=r)}):(t=e.ajax,e.ajax=function(r){var i=("mode"in r?r:e.ajaxSettings).mode,s=("port"in r?r:e.ajaxSettings).port;return"abort"===i?(n[s]&&n[s].abort(),n[s]=t.apply(this,arguments),n[s]):t.apply(this,arguments)}),e.extend(e.fn,{validateDelegate:function(t,n,r){return this.bind(n,function(n){var i=e(n.target);return i.is(t)?r.apply(i,arguments):void 0})}})}),function(e,t){function r(e){return e}function i(e){return decodeURIComponent(e.replace(n," "))}var n=/\+/g;e.cookie=function(n,s,o){if(arguments.length>1&&(!/Object/.test(Object.prototype.toString.call(s))||s==null)){o=e.extend({},e.cookie.defaults,o),s==null&&(o.expires=-1);if(typeof o.expires=="number"){var u=o.expires,a=o.expires=new Date;a.setDate(a.getDate()+u)}return s=String(s),t.cookie=[encodeURIComponent(n),"=",o.raw?s:encodeURIComponent(s),o.expires?"; expires="+o.expires.toUTCString():"",o.path?"; path="+o.path:"",o.domain?"; domain="+o.domain:"",o.secure?"; secure":""].join("")}o=s||e.cookie.defaults||{};var f=o.raw?r:i,l=t.cookie.split("; ");for(var c=0,h;h=l[c]&&l[c].split("=");c++)if(f(h.shift())===n)return f(h.join("="));return null},e.cookie.defaults={expires:365,domain:"meetelf.com",path:"/"}}(jQuery,document),define("cookie",["jquery"],function(e){return function(){var t,n;return t||e.jQuery.fn.cookie}}(this)),function(e){"use strict";e.fn.pin=function(t){var n=0,r=[],i=!1,s=e(window);t=t||{};var o=function(){for(var n=0,o=r.length;n<o;n++){var u=r[n];if(t.minWidth&&s.width()<=t.minWidth){u.parent().is(".pin-wrapper")&&u.unwrap(),u.css({width:"",left:"",top:"",position:""}),t.activeClass&&u.removeClass(t.activeClass),i=!0;continue}i=!1;var a=t.containerSelector?u.closest(t.containerSelector):e(document.body),f=u.offset(),l=a.offset(),c=u.offsetParent().offset();u.parent().is(".pin-wrapper")||u.wrap("<div class='pin-wrapper'>");var h=e.extend({top:0,bottom:0},t.padding||{});u.data("pin",{pad:h,from:(t.containerSelector?l.top:f.top)-h.top,to:l.top+a.height()-u.outerHeight()-h.bottom,end:l.top+a.height(),parentTop:c.top}),u.css({width:u.outerWidth()}),u.parent().css("height",u.outerHeight())}},u=function(){if(i)return;n=s.scrollTop();var o=[];for(var u=0,a=r.length;u<a;u++){var f=e(r[u]),l=f.data("pin");if(!l)continue;o.push(f);var c=l.from-l.pad.bottom,h=l.to-l.pad.top;if(c+f.outerHeight()>l.end){f.css("position","");continue}c<n&&h>n?(f.css("position")!="fixed"&&f.css({left:f.offset().left,top:l.pad.top}).css("position","fixed"),t.activeClass&&f.addClass(t.activeClass)):n>=h?(f.css({left:"",top:h-l.parentTop+l.pad.top}).css("position","absolute"),t.activeClass&&f.addClass(t.activeClass)):(f.css({position:"",top:"",left:""}),t.activeClass&&f.removeClass(t.activeClass))}r=o},a=function(){o(),u()};return this.each(function(){var t=e(this),n=e(this).data("pin")||{};if(n&&n.update)return;r.push(t),e("img",this).one("load",o),n.update=a,e(this).data("pin",n)}),s.scroll(u),s.resize(function(){o()}),o(),s.load(a),this}}(jQuery),define("pin",["jquery"],function(e){return function(){var t,n;return t||e.jQuery.fn.pin}}(this)),function(e){typeof define=="function"&&define.amd?define("datepicker",["jquery"],e):typeof exports=="object"?module.exports=e(require("jquery")):e(jQuery)}(function(e){function i(i,s){this.element=i,this.settings=e.extend({},n,s),this.dataObject=r,this._defaults=n,this._name=t,this.init()}var t="DateTimePicker",n={mode:"date",defaultDate:new Date,dateSeparator:"-",timeSeparator:":",timeMeridiemSeparator:" ",dateTimeSeparator:" ",dateTimeFormat:"yyyy-MM-dd HH:mm:ss",dateFormat:"yyyy-MM-dd",timeFormat:"HH:mm",maxDate:null,minDate:null,maxTime:null,minTime:null,maxDateTime:null,minDateTime:null,shortDayNames:["å¨æ¥","å¨ä¸","å¨äº","å¨ä¸","å¨å","å¨äº","å¨å­"],fullDayNames:["æææ¥","ææä¸","ææäº","ææä¸","ææå","ææäº","ææå­"],shortMonthNames:["1","2","3","4","5","6","7","8","9","10","11","12"],fullMonthNames:["1","2","3","4","5","6","7","8","9","10","11","12"],formatHumanDate:function(e){return e.yyyy+"å¹´ "+e.month+"æ "+e.dd+"æ¥"},formdayShort:function(e){return e.dayShort},minuteInterval:1,roundOffMinutes:!0,titleContentDate:"è®¾ç½®æ¥æ",titleContentTime:"è®¾ç½®æ¶é´",titleContentDateTime:"è®¾ç½®æ¥æåæ¶é´",buttonsToDisplay:["HeaderCloseButton","SetButton","ClearButton"],setButtonContent:"ç¡®å®",clearButtonContent:"æ¸ç©º",setValueInTextboxOnEveryClick:!1,animationDuration:400,isPopup:!0,parentElement:null,addEventHandlers:null,beforeShow:null,afterShow:null,beforeHide:null,afterHide:null,buttonClicked:null},r={dCurrentDate:new Date,iCurrentDay:0,iCurrentMonth:0,iCurrentYear:0,iCurrentHour:0,iCurrentMinutes:0,sCurrentMeridiem:"",iMaxNumberOfDays:0,sDateFormat:"",sTimeFormat:"",sDateTimeFormat:"",dMinValue:null,dMaxValue:null,sArrInputDateFormats:[],sArrInputTimeFormats:[],sArrInputDateTimeFormats:[],oInputElement:null,iTabIndex:0,bElemFocused:!1,bIs12Hour:!1};e.fn.DateTimePicker=function(n){return this.each(function(){e.removeData(this,"plugin_"+t),e.data(this,"plugin_"+t)||e.data(this,"plugin_"+t,new i(this,n))})},i.prototype={init:function(){var t=this;t._setDateFormatArray(),t._setTimeFormatArray(),t._setDateTimeFormatArray(),t.settings.isPopup&&(t._createPicker(),e(t.element).addClass("dtpicker-mobile")),t._addEventHandlersForInput()},_setDateFormatArray:function(){var e=this;e.dataObject.sArrInputDateFormats=new Array;var t="";t="dd"+e.settings.dateSeparator+"MM"+e.settings.dateSeparator+"yyyy",e.dataObject.sArrInputDateFormats.push(t),t="MM"+e.settings.dateSeparator+"dd"+e.settings.dateSeparator+"yyyy",e.dataObject.sArrInputDateFormats.push(t),t="yyyy"+e.settings.dateSeparator+"MM"+e.settings.dateSeparator+"dd",e.dataObject.sArrInputDateFormats.push(t),t="dd"+e.settings.dateSeparator+"MMM"+e.settings.dateSeparator+"yyyy",e.dataObject.sArrInputDateFormats.push(t)},_setTimeFormatArray:function(){var e=this;e.dataObject.sArrInputTimeFormats=new Array;var t="";t="hh"+e.settings.timeSeparator+"mm"+e.settings.timeMeridiemSeparator+"AA",e.dataObject.sArrInputTimeFormats.push(t),t="HH"+e.settings.timeSeparator+"mm",e.dataObject.sArrInputTimeFormats.push(t)},_setDateTimeFormatArray:function(){var e=this;e.dataObject.sArrInputDateTimeFormats=new Array;var t="",n="",r="";t="dd"+e.settings.dateSeparator+"MM"+e.settings.dateSeparator+"yyyy",n="HH"+e.settings.timeSeparator+"mm"+e.settings.timeSeparator+"ss",r=t+e.settings.dateTimeSeparator+n,e.dataObject.sArrInputDateTimeFormats.push(r),t="dd"+e.settings.dateSeparator+"MM"+e.settings.dateSeparator+"yyyy",n="hh"+e.settings.timeSeparator+"mm"+e.settings.timeSeparator+"ss"+e.settings.timeMeridiemSeparator+"AA",r=t+e.settings.dateTimeSeparator+n,e.dataObject.sArrInputDateTimeFormats.push(r),t="MM"+e.settings.dateSeparator+"dd"+e.settings.dateSeparator+"yyyy",n="HH"+e.settings.timeSeparator+"mm"+e.settings.timeSeparator+"ss",r=t+e.settings.dateTimeSeparator+n,e.dataObject.sArrInputDateTimeFormats.push(r),t="MM"+e.settings.dateSeparator+"dd"+e.settings.dateSeparator+"yyyy",n="hh"+e.settings.timeSeparator+"mm"+e.settings.timeSeparator+"ss"+e.settings.timeMeridiemSeparator+"AA",r=t+e.settings.dateTimeSeparator+n,e.dataObject.sArrInputDateTimeFormats.push(r),t="yyyy"+e.settings.dateSeparator+"MM"+e.settings.dateSeparator+"dd",n="HH"+e.settings.timeSeparator+"mm"+e.settings.timeSeparator+"ss",r=t+e.settings.dateTimeSeparator+n,e.dataObject.sArrInputDateTimeFormats.push(r),t="yyyy"+e.settings.dateSeparator+"MM"+e.settings.dateSeparator+"dd",n="hh"+e.settings.timeSeparator+"mm"+e.settings.timeSeparator+"ss"+e.settings.timeMeridiemSeparator+"AA",r=t+e.settings.dateTimeSeparator+n,e.dataObject.sArrInputDateTimeFormats.push(r),t="dd"+e.settings.dateSeparator+"MMM"+e.settings.dateSeparator+"yyyy",n="hh"+e.settings.timeSeparator+"mm"+e.settings.timeSeparator+"ss",r=t+e.settings.dateTimeSeparator+n,e.dataObject.sArrInputDateTimeFormats.push(r),t="dd"+e.settings.dateSeparator+"MMM"+e.settings.dateSeparator+"yyyy",n="hh"+e.settings.timeSeparator+"mm"+e.settings.timeSeparator+"ss"+e.settings.timeMeridiemSeparator+"AA",r=t+e.settings.dateTimeSeparator+n,e.dataObject.sArrInputDateTimeFormats.push(r)},_createPicker:function(){var t=this;e(t.element).addClass("dtpicker-overlay"),e(".dtpicker-overlay").click(function(e){t._hidePicker("")});var n="";n+="<div class='dtpicker-bg'>",n+="<div class='dtpicker-cont'>",n+="<div class='dtpicker-content'>",n+="<div class='dtpicker-subcontent'>",n+="</div>",n+="</div>",n+="</div>",n+="</div>",e(t.element).html(n)},_addEventHandlersForInput:function(){var t=this;t.dataObject.oInputElement=null;var n=undefined;t.settings.parentElement!=undefined?(e(t.settings.parentElement).find("input[type='date'], input[type='time'], input[type='datetime']").each(function(){var t=e(this).attr("type");e(this).attr("type","text"),e(this).attr("data-field",t)}),n=e(t.settings.parentElement).find("[data-field='date'], [data-field='time'], [data-field='datetime']")):(e("input[type='date'], input[type='time'], input[type='datetime']").each(function(){var t=e(this).attr("type");e(this).attr("type","text"),e(this).attr("data-field",t)}),n=e("[data-field='date'], [data-field='time'], [data-field='datetime']")),e(n).unbind("focus",t._inputFieldFocus),e(n).on("focus",{obj:t},t._inputFieldFocus),e(n).not("input").click(function(e){t.dataObject.oInputElement==null&&t.showDateTimePicker(this)}),e(n).click(function(e){e.stopPropagation()}),t.settings.addEventHandlers&&t.settings.addEventHandlers.call(t)},_inputFieldFocus:function(e){var t=e.data.obj;t.dataObject.oInputElement==null&&t.showDateTimePicker(e.target),t.dataObject.bMouseDown=!1},setDateTimeStringInInputField:function(t,n){var r=this;n=n||r.dataObject.dCurrentDate;var i=undefined;t!==null&&t!==undefined?(i=[],typeof t=="string"?i.push(t):typeof t=="object"&&(i=t)):r.settings.parentElement!==null&&r.settings.parentElement!==undefined?i=e(r.settings.parentElement).find("[data-field='date'], [data-field='time'], [data-field='datetime']"):i=e("[data-field='date'], [data-field='time'], [data-field='datetime']"),i.each(function(){var t=this,i,s,o;i=e(t).data("field"),r._compare(i,"date")?s=e(t).data("format")||r.settings.dateFormat:r._compare(i,"time")?s=e(t).data("format")||r.settings.timeFormat:r._compare(i,"datetime")&&(s=e(t).data("format")||r.settings.dateTimeFormat),o=r.getIs12Hour(i,s);var u=r._setOutput(i,s,o,n);e(t).val(u)})},getDateTimeStringInFormat:function(e,t,n){var r=this,i=r.getIs12Hour(e,t);return r._setOutput(e,t,i,n)},showDateTimePicker:function(t){var n=this;if(n.dataObject.oInputElement==null){n.dataObject.oInputElement=t,n.dataObject.iTabIndex=parseInt(e(t).attr("tabIndex"));var r=e(t).data("field")||"",i=e(t).data("min")||"",s=e(t).data("max")||"",o=e(t).data("format")||"",u=e(t).data("view")||"",a=e(t).data("startend")||"",f=e(t).data("startendelem")||"",l=n._getValueOfElement(t)||"";u!=""&&(n._compare(u,"Popup")?n.setIsPopup(!0):n.setIsPopup(!1));if(!n.settings.isPopup){n._createPicker();var c=e(n.dataObject.oInputElement).offset().top+e(n.dataObject.oInputElement).outerHeight(),h=e(n.dataObject.oInputElement).offset().left,p=e(n.dataObject.oInputElement).outerWidth();e(n.element).css({position:"absolute",top:c,left:h,width:p,height:"auto"})}n._showPicker(r,i,s,o,l,t,a,f)}},_setButtonAction:function(e){var t=this;if(t.dataObject.oInputElement!=null){var n=t._setOutput();t._setValueOfElement(n),e?t._hidePicker(0):t._hidePicker("")}},_setOutput:function(e,t,n,r){var i=this;e=e||i.settings.mode,i._compare(e,"date")?t=t||i.dataObject.sDateFormat:i._compare(e,"time")?t=t||i.dataObject.sTimeFormat:i._compare(e,"datetime")&&(t=t||i.dataObject.sDateTimeFormat),r=r||i.dataObject.dCurrentDate,n=n||i.dataObject.bIs12Hour;var s="",o=r.getDate(),u=r.getMonth(),a=r.getFullYear(),f=r.getHours(),l=r.getMinutes(),c,h,p,d,v,m="",g="";if(i._compare(e,"date"))i._compare(t,i.dataObject.sArrInputDateFormats[0])?(u++,c=o<10?"0"+o:o,h=u<10?"0"+u:u,s=c+i.settings.dateSeparator+h+i.settings.dateSeparator+a):i._compare(t,i.dataObject.sArrInputDateFormats[1])?(u++,c=o<10?"0"+o:o,h=u<10?"0"+u:u,s=h+i.settings.dateSeparator+c+i.settings.dateSeparator+a):i._compare(t,i.dataObject.sArrInputDateFormats[2])?(u++,c=o<10?"0"+o:o,h=u<10?"0"+u:u,s=a+i.settings.dateSeparator+h+i.settings.dateSeparator+c):i._compare(t,i.dataObject.sArrInputDateFormats[3])&&(c=o<10?"0"+o:o,h=i.settings.shortMonthNames[u],s=c+i.settings.dateSeparator+h+i.settings.dateSeparator+a);else if(i._compare(e,"time"))i._compare(t,i.dataObject.sArrInputTimeFormats[0])?(p=i._determineMeridiemFromHourAndMinutes(f,l),f==0&&p=="AM"?f=12:f>12&&p=="PM"&&(f-=12),d=f<10?"0"+f:f,v=l<10?"0"+l:l,s=d+i.settings.timeSeparator+v+i.settings.timeMeridiemSeparator+p):i._compare(t,i.dataObject.sArrInputTimeFormats[1])&&(d=f<10?"0"+f:f,v=l<10?"0"+l:l,s=d+i.settings.timeSeparator+v);else if(i._compare(e,"datetime")){if(i._compare(t,i.dataObject.sArrInputDateTimeFormats[0])||i._compare(i.dataObject.sDateTimeFormat,i.dataObject.sArrInputDateTimeFormats[1]))u++,c=o<10?"0"+o:o,h=u<10?"0"+u:u,m=c+i.settings.dateSeparator+h+i.settings.dateSeparator+a;else if(i._compare(t,i.dataObject.sArrInputDateTimeFormats[2])||i._compare(i.dataObject.sDateTimeFormat,i.dataObject.sArrInputDateTimeFormats[3]))u++,c=o<10?"0"+o:o,h=u<10?"0"+u:u,m=h+i.settings.dateSeparator+c+i.settings.dateSeparator+a;else if(i._compare(t,i.dataObject.sArrInputDateTimeFormats[4])||i._compare(i.dataObject.sDateTimeFormat,i.dataObject.sArrInputDateTimeFormats[5]))u++,c=o<10?"0"+o:o,h=u<10?"0"+u:u,m=a+i.settings.dateSeparator+h+i.settings.dateSeparator+c;else if(i._compare(t,i.dataObject.sArrInputDateTimeFormats[6])||i._compare(i.dataObject.sDateTimeFormat,i.dataObject.sArrInputDateTimeFormats[7]))c=o<10?"0"+o:o,h=i.settings.shortMonthNames[u],m=c+i.settings.dateSeparator+h+i.settings.dateSeparator+a;n?(p=i._determineMeridiemFromHourAndMinutes(f,l),f==0&&p=="AM"?f=12:f>12&&p=="PM"&&(f-=12),d=f<10?"0"+f:f,v=l<10?"0"+l:l,g=d+i.settings.timeSeparator+v+i.settings.timeMeridiemSeparator+p):(d=f<10?"0"+f:f,v=l<10?"0"+l:l,g=d+i.settings.timeSeparator+v),s=m+i.settings.dateTimeSeparator+g}return s},_clearButtonAction:function(){var e=this;e.dataObject.oInputElement!=null&&e._setValueOfElement(""),e._hidePicker("")},_setOutputOnIncrementOrDecrement:function(){var e=this;if(e.dataObject.oInputElement!=null&&e.settings.setValueInTextboxOnEveryClick){var t=e._setOutput();e._setValueOfElement(t)}},_showPicker:function(t,n,r,i,s,o,u,a){var f=this;f.settings.beforeShow&&f.settings.beforeShow.call(f,o),t!=""&&(f.settings.mode=t),f.dataObject.dMinValue=null,f.dataObject.dMaxValue=null,f.dataObject.bIs12Hour=!1;if(f._compare(f.settings.mode,"date")){var l=n||f.settings.minDate,c=r||f.settings.maxDate,h=i||f.settings.dateFormat;h!=""&&h!=null&&(f.dataObject.sDateFormat=h),l!=""&&l!=null&&(f.dataObject.dMinValue=f._parseDate(l)),c!=""&&c!=null&&(f.dataObject.dMaxValue=f._parseDate(c));if(u!=""&&(f._compare(u,"start")||f._compare(u,"end"))&&a!=""&&e(a).length>=1){var p=f._getValueOfElement(e(a));if(p!=""){var d=f._parseDate(p);f._compare(u,"start")?c!=""&&c!=null?f._compareDates(d,f.dataObject.dMaxValue)<0&&(f.dataObject.dMaxValue=new Date(d)):f.dataObject.dMaxValue=new Date(d):f._compare(u,"end")&&(l!=""&&l!=null?f._compareDates(d,f.dataObject.dMinValue)>0&&(f.dataObject.dMinValue=new Date(d)):f.dataObject.dMinValue=new Date(d))}}f.dataObject.dCurrentDate=f._parseDate(s),f.dataObject.dCurrentDate.setHours(0),f.dataObject.dCurrentDate.setMinutes(0),f.dataObject.dCurrentDate.setSeconds(0)}else if(f._compare(f.settings.mode,"time")){var l=n||f.settings.minTime,c=r||f.settings.maxTime,v=i||f.settings.timeFormat;v!=""&&v!=null&&(f.dataObject.sTimeFormat=v),l!=""&&l!=null&&(f.dataObject.dMinValue=f._parseTime(l)),c!=""&&c!=null&&(f.dataObject.dMaxValue=f._parseTime(c));if(u!=""&&(f._compare(u,"start")||f._compare(u,"end"))&&a!=""&&e(a).length>=1){var m=f._getValueOfElement(e(a));if(m!=""){var g=f._parseTime(m);f._compare(u,"start")?(g.setMinutes(g.getMinutes()-1),c!=""&&c!=null?f._compareTime(g,f.dataObject.dMaxValue)==2&&(f.dataObject.dMaxValue=new Date(g)):f.dataObject.dMaxValue=new Date(g)):f._compare(u,"end")&&(g.setMinutes(g.getMinutes()+1),l!=""&&l!=null?f._compareTime(g,f.dataObject.dMinValue)==3&&(f.dataObject.dMinValue=new Date(g)):f.dataObject.dMinValue=new Date(g))}}f.dataObject.bIs12Hour=f.getIs12Hour("time",f.dataObject.sTimeFormat),f.dataObject.dCurrentDate=f._parseTime(s)}else if(f._compare(f.settings.mode,"datetime")){var l=n||f.settings.minDateTime,c=r||f.settings.maxDateTime,y=i||f.settings.dateTimeFormat;y!=""&&y!=null&&(f.dataObject.sDateTimeFormat=y),l!=""&&l!=null&&(f.dataObject.dMinValue=f._parseDateTime(l)),c!=""&&c!=null&&(f.dataObject.dMaxValue=f._parseDateTime(c));if(u!=""&&(f._compare(u,"start")||f._compare(u,"end"))&&a!=""&&e(a).length>=1){var b=f._getValueOfElement(e(a));if(b!=""){var w=f._parseDateTime(b);f._compare(u,"start")?c!=""&&c!=null?f._compareDateTime(w,f.dataObject.dMaxValue)<0&&(f.dataObject.dMaxValue=new Date(w)):f.dataObject.dMaxValue=new Date(w):f._compare(u,"end")&&(l!=""&&l!=null?f._compareDateTime(w,f.dataObject.dMinValue)>0&&(f.dataObject.dMinValue=new Date(w)):f.dataObject.dMinValue=new Date(w))}}f.dataObject.bIs12Hour=f.getIs12Hour("datetime",f.dataObject.sDateTimeFormat),f.dataObject.dCurrentDate=f._parseDateTime(s)}f._setVariablesForDate(),f._modifyPicker(),e(f.element).fadeIn(f.settings.animationDuration),f.settings.afterShow&&setTimeout(function(){f.settings.afterShow.call(f,o)},f.settings.animationDuration)},_hidePicker:function(t){var n=this,r=n.dataObject.oInputElement;n.settings.beforeHide&&n.settings.beforeHide.call(n,r);if(t===""||t===undefined||t===null)t=n.settings.animationDuration;n.dataObject.oInputElement!=null&&(e(n.dataObject.oInputElement).blur(),n.dataObject.oInputElement=null),e(n.element).fadeOut(t),t==0?e(n.element).find(".dtpicker-subcontent").html(""):setTimeout(function(){e(n.element).find(".dtpicker-subcontent").html("")},t),e(document).unbind("click.DateTimePicker"),e(document).unbind("keydown.DateTimePicker"),e(document).unbind("keyup.DateTimePicker"),n.settings.afterHide&&setTimeout(function(){n.settings.afterHide.call(n,r)},t)},_modifyPicker:function(){var t=this,n,r,i=new Array;t._compare(t.settings.mode,"date")?(n=t.settings.titleContentDate,r=3,t._compare(t.dataObject.sDateFormat,t.dataObject.sArrInputDateFormats[0])?i=["day","month","year"]:t._compare(t.dataObject.sDateFormat,t.dataObject.sArrInputDateFormats[1])?i=["month","day","year"]:t._compare(t.dataObject.sDateFormat,t.dataObject.sArrInputDateFormats[2])?i=["year","month","day"]:t._compare(t.dataObject.sDateFormat,t.dataObject.sArrInputDateFormats[3])&&(i=["day","month","year"])):t._compare(t.settings.mode,"time")?(n=t.settings.titleContentTime,t._compare(t.dataObject.sTimeFormat,t.dataObject.sArrInputTimeFormats[0])?(r=3,i=["hour","minutes","meridiem"]):t._compare(t.dataObject.sTimeFormat,t.dataObject.sArrInputTimeFormats[1])&&(r=2,i=["hour","minutes"])):t._compare(t.settings.mode,"datetime")&&(n=t.settings.titleContentDateTime,t._compare(t.dataObject.sDateTimeFormat,t.dataObject.sArrInputDateTimeFormats[0])?(r=5,i=["day","month","year","hour","minutes"]):t._compare(t.dataObject.sDateTimeFormat,t.dataObject.sArrInputDateTimeFormats[1])?(r=6,i=["day","month","year","hour","minutes","meridiem"]):t._compare(t.dataObject.sDateTimeFormat,t.dataObject.sArrInputDateTimeFormats[2])?(r=5,i=["month","day","year","hour","minutes"]):t._compare(t.dataObject.sDateTimeFormat,t.dataObject.sArrInputDateTimeFormats[3])?(r=6,i=["month","day","year","hour","minutes","meridiem"]):t._compare(t.dataObject.sDateTimeFormat,t.dataObject.sArrInputDateTimeFormats[4])?(r=5,i=["year","month","day","hour","minutes"]):t._compare(t.dataObject.sDateTimeFormat,t.dataObject.sArrInputDateTimeFormats[5])?(r=6,i=["year","month","day","hour","minutes","meridiem"]):t._compare(t.dataObject.sDateTimeFormat,t.dataObject.sArrInputDateTimeFormats[6])?(r=5,i=["day","month","year","hour","minutes"]):t._compare(t.dataObject.sDateTimeFormat,t.dataObject.sArrInputDateTimeFormats[7])&&(r=6,i=["day","month","year","hour","minutes","meridiem"]));var s="dtpicker-comp"+r,o=!1,u=!1,a=!1;for(var f=0;f<t.settings.buttonsToDisplay.length;f++)t._compare(t.settings.buttonsToDisplay[f],"HeaderCloseButton")?o=!0:t._compare(t.settings.buttonsToDisplay[f],"SetButton")?u=!0:t._compare(t.settings.buttonsToDisplay[f],"ClearButton")&&(a=!0);var l="";l+="<div class='dtpicker-header'>",l+="<div class='dtpicker-title'>"+n+"</div>",o&&(l+="<a class='dtpicker-close'>&times;</a>"),l+="<div class='dtpicker-value'></div>",l+="</div>";var c="";c+="<div class='dtpicker-components'>";var h={year:"å¹´",month:"æ",day:"æ¥",hour:"æ¶",minutes:"å",meridiem:"ç§"};for(var f=0;f<r;f++){var p=i[f],d=h[p];c+="<div class='dtpicker-compOutline "+s+"'>",c+="<div class='dtpicker-comp "+p+"'>",c+="<a class='dtpicker-compButton increment'>+</a>",c+="<input type='text' class='dtpicker-compValue'></input><p style='font-size: 15px;'>"+d+"</p>",c+="<a class='dtpicker-compButton decrement'>-</a>",c+="</div>",c+="</div>"}c+="</div>";var v="";u&&a?v=" dtpicker-twoButtons":v=" dtpicker-singleButton";var m="";m+="<div class='dtpicker-buttonCont"+v+"'>",u&&(m+="<a class='dtpicker-button dtpicker-buttonSet'>"+t.settings.setButtonContent+"</a>"),a&&(m+="<a class='dtpicker-button dtpicker-buttonClear'>"+t.settings.clearButtonContent+"</a>"),m+="</div>",sTempStr=l+c+m,e(t.element).find(".dtpicker-subcontent").html(sTempStr),t._setCurrentDate(),t._addEventHandlersForPicker()},_addEventHandlersForPicker:function(){var t=this;e(document).on("click.DateTimePicker",function(e){t._hidePicker("")}),e(document).on("keydown.DateTimePicker",function(n){if(!e(".dtpicker-compValue").is(":focus")&&(n.keyCode?n.keyCode:n.which)=="9")return t._setButtonAction(!0),e("[tabIndex="+(t.dataObject.iTabIndex+1)+"]").focus(),!1}),e(document).on("keydown.DateTimePicker",function(n){!e(".dtpicker-compValue").is(":focus")&&(n.keyCode?n.keyCode:n.which)!="9"&&t._hidePicker("")}),e(".dtpicker-cont *").click(function(e){e.stopPropagation()}),e(".dtpicker-compValue").not(".month .dtpicker-compValue, .meridiem .dtpicker-compValue").keyup(function(){this.value=this.value.replace(/[^0-9\.]/g,"")}),e(".dtpicker-compValue").focus(function(){t.dataObject.bElemFocused=!0}),e(".dtpicker-compValue").blur(function(){t._getValuesFromInputBoxes(),t._setCurrentDate(),t.dataObject.bElemFocused=!1;var n=e(this).parent().parent();setTimeout(function(){n.is(":last-child")&&!t.dataObject.bElemFocused&&t._setButtonAction(!1)},50)}),e(".dtpicker-compValue").keyup(function(){var t=e(this),n=t.val(),r=n.length;if(t.parent().hasClass("day")||t.parent().hasClass("hour")||t.parent().hasClass("minutes")||t.parent().hasClass("meridiem")){if(r>2){var i=n.slice(0,2);t.val(i)}}else if(t.parent().hasClass("month")){if(r>3){var i=n.slice(0,3);t.val(i)}}else if(t.parent().hasClass("year")&&r>4){var i=n.slice(0,4);t.val(i)}}),e(t.element).find(".dtpicker-close").click(function(e){t.settings.buttonClicked&&t.settings.buttonClicked.call(t,"CLOSE",t.dataObject.oInputElement),t._hidePicker("")}),e(t.element).find(".dtpicker-buttonSet").click(function(e){t.settings.buttonClicked&&t.settings.buttonClicked.call(t,"SET",t.dataObject.oInputElement),t._setButtonAction(!1)}),e(t.element).find(".dtpicker-buttonClear").click(function(e){t.settings.buttonClicked&&t.settings.buttonClicked.call(t,"CLEAR",t.dataObject.oInputElement),t._clearButtonAction()}),e(t.element).find(".day .increment").click(function(e){t.dataObject.iCurrentDay++,t._setCurrentDate(),t._setOutputOnIncrementOrDecrement()}),e(t.element).find(".day .decrement").click(function(e){t.dataObject.iCurrentDay--,t._setCurrentDate(),t._setOutputOnIncrementOrDecrement()}),e(t.element).find(".month .increment").click(function(e){t.dataObject.iCurrentMonth++,t._setCurrentDate(),t._setOutputOnIncrementOrDecrement()}),e(t.element).find(".month .decrement").click(function(e){t.dataObject.iCurrentMonth--,t._setCurrentDate(),t._setOutputOnIncrementOrDecrement()}),e(t.element).find(".year .increment").click(function(e){t.dataObject.iCurrentYear++,t._setCurrentDate(),t._setOutputOnIncrementOrDecrement()}),e(t.element).find(".year .decrement").click(function(e){t.dataObject.iCurrentYear--,t._setCurrentDate(),t._setOutputOnIncrementOrDecrement()}),e(t.element).find(".hour .increment").click(function(e){t.dataObject.iCurrentHour++,t._setCurrentDate(),t._setOutputOnIncrementOrDecrement()}),e(t.element).find(".hour .decrement").click(function(e){t.dataObject.iCurrentHour--,t._setCurrentDate(),t._setOutputOnIncrementOrDecrement()}),e(t.element).find(".minutes .increment").click(function(e){t.dataObject.iCurrentMinutes+=t.settings.minuteInterval,t._setCurrentDate(),t._setOutputOnIncrementOrDecrement()}),e(t.element).find(".minutes .decrement").click(function(e){t.dataObject.iCurrentMinutes-=t.settings.minuteInterval,t._setCurrentDate(),t._setOutputOnIncrementOrDecrement()}),e(t.element).find(".meridiem .dtpicker-compButton").click(function(e){t._compare(t.dataObject.sCurrentMeridiem,"AM")?(t.dataObject.sCurrentMeridiem="PM",t.dataObject.iCurrentHour+=12):t._compare(t.dataObject.sCurrentMeridiem,"PM")&&(t.dataObject.sCurrentMeridiem="AM",t.dataObject.iCurrentHour-=12),t._setCurrentDate(),t._setOutputOnIncrementOrDecrement()})},_adjustMinutes:function(e){var t=this;return t.settings.roundOffMinutes&&t.settings.minuteInterval!=1&&(e=e%t.settings.minuteInterval?e-e%t.settings.minuteInterval+t.settings.minuteInterval:e),e},_getValueOfElement:function(t){var n=this,r="";return n._compare(e(t).prop("tagName"),"INPUT")?r=e(t).val():r=e(t).html(),r},_setValueOfElement:function(t){var n=this,r=e(n.dataObject.oInputElement);return n._compare(r.prop("tagName"),"INPUT")?r.val(t):r.html(t),r.change(),t},_parseDate:function(e){var t=this,n=new Date(t.settings.defaultDate),r=n.getDate(),i=n.getMonth(),s=n.getFullYear();if(e!=""&&e!=undefined&&e!=null){var o=e.split(t.settings.dateSeparator);t._compare(t.dataObject.sDateFormat,t.dataObject.sArrInputDateFormats[0])?(r=parseInt(o[0]),i=parseInt(o[1]-1),s=parseInt(o[2])):t._compare(t.dataObject.sDateFormat,t.dataObject.sArrInputDateFormats[1])?(i=parseInt(o[0]-1),r=parseInt(o[1]),s=parseInt(o[2])):t._compare(t.dataObject.sDateFormat,t.dataObject.sArrInputDateFormats[2])?(s=parseInt(o[0]),i=parseInt(o[1]-1),r=parseInt(o[2])):t._compare(t.dataObject.sDateFormat,t.dataObject.sArrInputDateFormats[3])&&(r=parseInt(o[0]),i=t._getShortMonthIndex(o[1]),s=parseInt(o[2]))}return n=new Date(s,i,r,0,0,0,0),n},_parseTime:function(e){var t=this,n=new Date(t.settings.defaultDate),r=n.getDate(),i=n.getMonth(),s=n.getFullYear(),o=n.getHours(),u=n.getMinutes();if(e!=""&&e!=undefined&&e!=null)if(t._compare(t.dataObject.sTimeFormat,t.dataObject.sArrInputTimeFormats[0])){var a=e.split(t.settings.timeMeridiemSeparator),f=a[1],l=a[0].split(t.settings.timeSeparator);o=parseInt(l[0]),u=parseInt(l[1]),o==12&&t._compare(f,"AM")?o=0:o<12&&t._compare(f,"PM")&&(o+=12)}else if(t._compare(t.dataObject.sTimeFormat,t.dataObject.sArrInputTimeFormats[1])){var l=e.split(t.settings.timeSeparator);o=parseInt(l[0]),u=parseInt(l[1])}return u=t._adjustMinutes(u),n=new Date(s,i,r,o,u,0,0),n},_parseDateTime:function(e){var t=this,n=new Date(t.settings.defaultDate),r=n.getDate(),i=n.getMonth(),s=n.getFullYear(),o=n.getHours(),u=n.getMinutes(),a="";if(e!=""&&e!=undefined&&e!=null){var f=e.split(t.settings.dateTimeSeparator),l=f[0].split(t.settings.dateSeparator);if(t._compare(t.dataObject.sDateTimeFormat,t.dataObject.sArrInputDateTimeFormats[0])||t._compare(t.dataObject.sDateTimeFormat,t.dataObject.sArrInputDateTimeFormats[1]))r=parseInt(l[0]),i=parseInt(l[1]-1),s=parseInt(l[2]);else if(t._compare(t.dataObject.sDateTimeFormat,t.dataObject.sArrInputDateTimeFormats[2])||t._compare(t.dataObject.sDateTimeFormat,t.dataObject.sArrInputDateTimeFormats[3]))i=parseInt(l[0]-1),r=parseInt(l[1]),s=parseInt(l[2]);else if(t._compare(t.dataObject.sDateTimeFormat,t.dataObject.sArrInputDateTimeFormats[4])||t._compare(t.dataObject.sDateTimeFormat,t.dataObject.sArrInputDateTimeFormats[5]))s=parseInt(l[0]),i=parseInt(l[1]-1),r=parseInt(l[2]);else if(t._compare(t.dataObject.sDateTimeFormat,t.dataObject.sArrInputDateTimeFormats[6])||t._compare(t.dataObject.sDateTimeFormat,t.dataObject.sArrInputDateTimeFormats[7]))r=parseInt(l[0]),i=t._getShortMonthIndex(l[1]),s=parseInt(l[2]);var c=f[1];if(t.dataObject.bIs12Hour){if(t._compare(t.settings.dateTimeSeparator,t.settings.timeMeridiemSeparator)&&f.length==3)a=f[2];else{var h=c.split(t.settings.timeMeridiemSeparator);c=h[0],a=h[1]}!t._compare(a,"AM")&&!t._compare(a,"PM")&&(a="")}var p=c.split(t.settings.timeSeparator);o=parseInt(p[0]),u=parseInt(p[1]),o==12&&t._compare(a,"AM")?o=0:o<12&&t._compare(a,"PM")&&(o+=12)}return u=t._adjustMinutes(u),n=new Date(s,i,r,o,u,0,0),n},_getShortMonthIndex:function(e){var t=this;for(var n=0;n<t.settings.shortMonthNames.length;n++)if(t._compare(e,t.settings.shortMonthNames[n]))return n},getIs12Hour:function(e,t){var n=this,r=!1;return n._compare(e,"time")?r=n._compare(t,n.dataObject.sArrInputTimeFormats[0]):n._compare(e,"datetime")&&(r=n._compare(t,n.dataObject.sArrInputDateTimeFormats[1])||n._compare(t,n.dataObject.sArrInputDateTimeFormats[3])||n._compare(t,n.dataObject.sArrInputDateTimeFormats[5])||n._compare(t,n.dataObject.sArrInputDateTimeFormats[7])),r},_setVariablesForDate:function(){var e=this;e.dataObject.iCurrentDay=e.dataObject.dCurrentDate.getDate(),e.dataObject.iCurrentMonth=e.dataObject.dCurrentDate.getMonth(),e.dataObject.iCurrentYear=e.dataObject.dCurrentDate.getFullYear();if(e._compare(e.settings.mode,"time"))e.dataObject.iCurrentHour=e.dataObject.dCurrentDate.getHours(),e.dataObject.iCurrentMinutes=e.dataObject.dCurrentDate.getMinutes(),e._compare(e.dataObject.sTimeFormat,e.dataObject.sArrInputTimeFormats[0])&&(e.dataObject.sCurrentMeridiem=e._determineMeridiemFromHourAndMinutes(e.dataObject.iCurrentHour,e.dataObject.iCurrentMinutes));else if(e._compare(e.settings.mode,"datetime")){e.dataObject.iCurrentHour=e.dataObject.dCurrentDate.getHours(),e.dataObject.iCurrentMinutes=e.dataObject.dCurrentDate.getMinutes();if(e._compare(e.dataObject.sDateTimeFormat,e.dataObject.sArrInputDateTimeFormats[1])||e._compare(e.dataObject.sDateTimeFormat,e.dataObject.sArrInputDateTimeFormats[3])||e._compare(e.dataObject.sDateTimeFormat,e.dataObject.sArrInputDateTimeFormats[5])||e._compare(e.dataObject.sDateTimeFormat,e.dataObject.sArrInputDateTimeFormats[7]))e.dataObject.sCurrentMeridiem=e._determineMeridiemFromHourAndMinutes(e.dataObject.iCurrentHour,e.dataObject.iCurrentMinutes)}},_getValuesFromInputBoxes:function(){var t=this;if(t._compare(t.settings.mode,"date")||t._compare(t.settings.mode,"datetime")){var n=e(t.element).find(".month .dtpicker-compValue").val();n.length>1&&(n=n.charAt(0).toUpperCase()+n.slice(1));var r=t.settings.shortMonthNames.indexOf(n);r!=-1?t.dataObject.iCurrentMonth=parseInt(r):n.match("^[+|-]?[0-9]+$")&&(t.dataObject.iCurrentMonth=parseInt(n-1)),t.dataObject.iCurrentDay=parseInt(e(t.element).find(".day .dtpicker-compValue").val())||t.dataObject.iCurrentDay,t.dataObject.iCurrentYear=parseInt(e(t.element).find(".year .dtpicker-compValue").val())||t.dataObject.iCurrentYear}if(t._compare(t.settings.mode,"time")||t._compare(t.settings.mode,"datetime")){t.dataObject.iCurrentHour=parseInt(e(t.element).find(".hour .dtpicker-compValue").val()),t.dataObject.iCurrentMinutes=t._adjustMinutes(parseInt(e(t.element).find(".minutes .dtpicker-compValue").val()));if(t._compare(t.settings.mode,"time"))if(t.dataObject.bIs12Hour){t.dataObject.iCurrentHour>12&&(t.dataObject.iCurrentHour=t.dataObject.iCurrentHour%12);if(t.dataObject.iCurrentMinutes>59){var i=t.dataObject.iCurrentMinutes/60,s=t.dataObject.iCurrentMinutes%59,o=t.dataObject.iCurrentHour+i;o>12&&(t.dataObject.iCurrentHour=o%12),t.dataObject.iCurrentMinutes=s}}else{t.dataObject.iCurrentHour>23&&(t.dataObject.iCurrentHour=t.dataObject.iCurrentHour%23);if(t.dataObject.iCurrentMinutes>59){var i=t.dataObject.iCurrentMinutes/60,s=t.dataObject.iCurrentMinutes%59,o=t.dataObject.iCurrentHour+i;o>23&&(t.dataObject.iCurrentHour=o%23),t.dataObject.iCurrentMinutes=s}}if(t.dataObject.bIs12Hour){var u=e(t.element).find(".meridiem .dtpicker-compValue").val();if(t._compare(u,"AM")||t._compare(u,"PM"))t.dataObject.sCurrentMeridiem=u;t._compare(t.dataObject.sCurrentMeridiem,"PM")&&t.dataObject.iCurrentHour<13&&(t.dataObject.iCurrentHour+=12),t._compare(t.dataObject.sCurrentMeridiem,"AM")&&t.dataObject.iCurrentHour==12&&(t.dataObject.iCurrentHour=0)}}},_setCurrentDate:function(){var t=this,n=new Date(t.dataObject.iCurrentYear,t.dataObject.iCurrentMonth,t.dataObject.iCurrentDay,t.dataObject.iCurrentHour,t.dataObject.iCurrentMinutes,0,0),r=!1,i=!1;t.dataObject.dMaxValue!=null&&(r=n.getTime()>t.dataObject.dMaxValue.getTime()),t.dataObject.dMinValue!=null&&(i=n.getTime()<t.dataObject.dMinValue.getTime());if(r||i){var s=!1,o=!1;t.dataObject.dMaxValue!=null&&(s=t.dataObject.dCurrentDate.getTime()>t.dataObject.dMaxValue.getTime()),t.dataObject.dMinValue!=null&&(o=t.dataObject.dCurrentDate.getTime()<t.dataObject.dMinValue.getTime()),!s&&!o?n=new Date(t.dataObject.dCurrentDate):(s&&(n=new Date(t.dataObject.dMaxValue)),o&&(n=new Date(t.dataObject.dMinValue)))}t.dataObject.dCurrentDate=new Date(n),t._setVariablesForDate();if(t._compare(t.settings.mode,"date")){var u=t.dataObject.iCurrentDay;u=u<10?"0"+u:u;var a=t.dataObject.iCurrentMonth,f=t.dataObject.iCurrentMonth;f=f<10?"0"+f:f;var l=t.settings.shortMonthNames[a],c=t.settings.fullMonthNames[a],h=t.dataObject.iCurrentYear,p=t.dataObject.dCurrentDate.getDay(),d=t.settings.shortDayNames[p],v=t.settings.fullDayNames[p];e(t.element).find(".day .dtpicker-compValue").val(u),e(t.element).find(".month .dtpicker-compValue").val(l),e(t.element).find(".year .dtpicker-compValue").val(h);var m=t.settings.formatHumanDate({dd:u,MM:f,yyyy:h,day:v,dayShort:d,month:c,monthShort:l});e(t.element).find(".dtpicker-value").html(m)}else if(t._compare(t.settings.mode,"time")){var g=t.dataObject.iCurrentHour;t.dataObject.bIs12Hour&&(g>12&&(g-=12),e(t.element).find(".meridiem .dtpicker-compValue").val(t.dataObject.sCurrentMeridiem)),g=g<10?"0"+g:g,t.dataObject.bIs12Hour&&g=="00"&&(g=12);var y=t.dataObject.iCurrentMinutes;y=y<10?"0"+y:y,e(t.element).find(".hour .dtpicker-compValue").val(g),e(t.element).find(".minutes .dtpicker-compValue").val(y);var b=g+t.settings.timeSeparator+y;t.dataObject.bIs12Hour&&(b+=t.settings.timeMeridiemSeparator+t.dataObject.sCurrentMeridiem),e(t.element).find(".dtpicker-value").html(b)}else if(t._compare(t.settings.mode,"datetime")){var u=t.dataObject.iCurrentDay;u=u<10?"0"+u:u;var a=t.dataObject.iCurrentMonth,f=a<10?"0"+a:a,l=t.settings.shortMonthNames[a],c=t.settings.fullMonthNames[a],h=t.dataObject.iCurrentYear,p=t.dataObject.dCurrentDate.getDay(),d=t.settings.shortDayNames[p],v=t.settings.fullDayNames[p];e(t.element).find(".day .dtpicker-compValue").val(u),e(t.element).find(".month .dtpicker-compValue").val(l),e(t.element).find(".year .dtpicker-compValue").val(h);var m=t.settings.formatHumanDate({dd:u,MM:f,yyyy:h,day:v,dayShort:d,month:c,monthShort:l}),w=t.settings.formdayShort({dayShort:d}),g=t.dataObject.iCurrentHour;t.dataObject.bIs12Hour&&(g>12&&(g-=12),e(t.element).find(".meridiem .dtpicker-compValue").val(t.dataObject.sCurrentMeridiem)),g=g<10?"0"+g:g,t.dataObject.bIs12Hour&&g=="00"&&(g=12);var y=t.dataObject.iCurrentMinutes;y=y<10?"0"+y:y,e(t.element).find(".hour .dtpicker-compValue").val(g),e(t.element).find(".minutes .dtpicker-compValue").val(y);var b=g+t.settings.timeSeparator+y;t.dataObject.bIs12Hour&&(b+=t.settings.timeMeridiemSeparator+t.dataObject.sCurrentMeridiem);var E=m+t.settings.dateTimeSeparator+b;e(t.element).find(".dtpicker-value").html(E+" "+w)}t._setButtons()},_setButtons:function(){var t=this;e(t.element).find(".dtpicker-compButton").removeClass("dtpicker-compButtonDisable").addClass("dtpicker-compButtonEnable");var n;t.dataObject.dMaxValue!=null&&(t._compare(t.settings.mode,"time")?((t.dataObject.iCurrentHour+1>t.dataObject.dMaxValue.getHours()||t.dataObject.iCurrentHour+1==t.dataObject.dMaxValue.getHours()&&t.dataObject.iCurrentMinutes>t.dataObject.dMaxValue.getMinutes())&&e(t.element).find(".hour .increment").removeClass("dtpicker-compButtonEnable").addClass("dtpicker-compButtonDisable"),t.dataObject.iCurrentHour>=t.dataObject.dMaxValue.getHours()&&t.dataObject.iCurrentMinutes+1>t.dataObject.dMaxValue.getMinutes()&&e(t.element).find(".minutes .increment").removeClass("dtpicker-compButtonEnable").addClass("dtpicker-compButtonDisable")):(n=new Date(t.dataObject.iCurrentYear,t.dataObject.iCurrentMonth,t.dataObject.iCurrentDay+1,t.dataObject.iCurrentHour,t.dataObject.iCurrentMinutes,0,0),n.getTime()>t.dataObject.dMaxValue.getTime()&&e(t.element).find(".day .increment").removeClass("dtpicker-compButtonEnable").addClass("dtpicker-compButtonDisable"),n=new Date(t.dataObject.iCurrentYear,t.dataObject.iCurrentMonth+1,t.dataObject.iCurrentDay,t.dataObject.iCurrentHour,t.dataObject.iCurrentMinutes,0,0),n.getTime()>t.dataObject.dMaxValue.getTime()&&e(t.element).find(".month .increment").removeClass("dtpicker-compButtonEnable").addClass("dtpicker-compButtonDisable"),n=new Date(t.dataObject.iCurrentYear+1,t.dataObject.iCurrentMonth,t.dataObject.iCurrentDay,t.dataObject.iCurrentHour,t.dataObject.iCurrentMinutes,0,0),n.getTime()>t.dataObject.dMaxValue.getTime()&&e(t.element).find(".year .increment").removeClass("dtpicker-compButtonEnable").addClass("dtpicker-compButtonDisable"),n=new Date(t.dataObject.iCurrentYear,t.dataObject.iCurrentMonth,t.dataObject.iCurrentDay,t.dataObject.iCurrentHour+1,t.dataObject.iCurrentMinutes,0,0),n.getTime()>t.dataObject.dMaxValue.getTime()&&e(t.element).find(".hour .increment").removeClass("dtpicker-compButtonEnable").addClass("dtpicker-compButtonDisable"),n=new Date(t.dataObject.iCurrentYear,t.dataObject.iCurrentMonth,t.dataObject.iCurrentDay,t.dataObject.iCurrentHour,t.dataObject.iCurrentMinutes+1,0,0),n.getTime()>t.dataObject.dMaxValue.getTime()&&e(t.element).find(".minutes .increment").removeClass("dtpicker-compButtonEnable").addClass("dtpicker-compButtonDisable"))),t.dataObject.dMinValue!=null&&(t._compare(t.settings.mode,"time")?((t.dataObject.iCurrentHour-1<t.dataObject.dMinValue.getHours()||t.dataObject.iCurrentHour-1==t.dataObject.dMinValue.getHours()&&t.dataObject.iCurrentMinutes<t.dataObject.dMinValue.getMinutes())&&e(t.element).find(".hour .decrement").removeClass("dtpicker-compButtonEnable").addClass("dtpicker-compButtonDisable"),t.dataObject.iCurrentHour<=t.dataObject.dMinValue.getHours()&&t.dataObject.iCurrentMinutes-1<t.dataObject.dMinValue.getMinutes()&&e(t.element).find(".minutes .decrement").removeClass("dtpicker-compButtonEnable").addClass("dtpicker-compButtonDisable")):(n=new Date(t.dataObject.iCurrentYear,t.dataObject.iCurrentMonth,t.dataObject.iCurrentDay-1,t.dataObject.iCurrentHour,t.dataObject.iCurrentMinutes,0,0),n.getTime()<t.dataObject.dMinValue.getTime()&&e(t.element).find(".day .decrement").removeClass("dtpicker-compButtonEnable").addClass("dtpicker-compButtonDisable"),n=new Date(t.dataObject.iCurrentYear,t.dataObject.iCurrentMonth-1,t.dataObject.iCurrentDay,t.dataObject.iCurrentHour,t.dataObject.iCurrentMinutes,0,0),n.getTime()<t.dataObject.dMinValue.getTime()&&e(t.element).find(".month .decrement").removeClass("dtpicker-compButtonEnable").addClass("dtpicker-compButtonDisable"),n=new Date(t.dataObject.iCurrentYear-1,t.dataObject.iCurrentMonth,t.dataObject.iCurrentDay,t.dataObject.iCurrentHour,t.dataObject.iCurrentMinutes,0,0),n.getTime()<t.dataObject.dMinValue.getTime()&&e(t.element).find(".year .decrement").removeClass("dtpicker-compButtonEnable").addClass("dtpicker-compButtonDisable"),n=new Date(t.dataObject.iCurrentYear,t.dataObject.iCurrentMonth,t.dataObject.iCurrentDay,t.dataObject.iCurrentHour-1,t.dataObject.iCurrentMinutes,0,0),n.getTime()<t.dataObject.dMinValue.getTime()&&e(t.element).find(".hour .decrement").removeClass("dtpicker-compButtonEnable").addClass("dtpicker-compButtonDisable"),n=new Date(t.dataObject.iCurrentYear,t.dataObject.iCurrentMonth,t.dataObject.iCurrentDay,t.dataObject.iCurrentHour,t.dataObject.iCurrentMinutes-1,0,0),n.getTime()<t.dataObject.dMinValue.getTime()&&e(t.element).find(".minutes .decrement").removeClass("dtpicker-compButtonEnable").addClass("dtpicker-compButtonDisable")));if(t.dataObject.bIs12Hour)if(t.dataObject.dMaxValue!=null||t.dataObject.dMinValue!=null){var r=t.dataObject.iCurrentHour;t._compare(t.dataObject.sCurrentMeridiem,"AM")?r+=12:t._compare(t.dataObject.sCurrentMeridiem,"PM")&&(r-=12),n=new Date(t.dataObject.iCurrentYear,t.dataObject.iCurrentMonth,t.dataObject.iCurrentDay,r,t.dataObject.iCurrentMinutes,0,0);if(t.dataObject.dMaxValue!=null)if(t._compare(t.settings.mode,"time")){var i=t.dataObject.iCurrentMinutes;(r>t.dataObject.dMaxValue.getHours()||r==t.dataObject.dMaxValue.getHours()&&i>t.dataObject.dMaxValue.getMinutes())&&e(t.element).find(".meridiem .dtpicker-compButton").removeClass("dtpicker-compButtonEnable").addClass("dtpicker-compButtonDisable")}else n.getTime()>t.dataObject.dMaxValue.getTime()&&e(t.element).find(".meridiem .dtpicker-compButton").removeClass("dtpicker-compButtonEnable").addClass("dtpicker-compButtonDisable");if(t.dataObject.dMinValue!=null)if(t._compare(t.settings.mode,"time")){var i=t.dataObject.iCurrentMinutes;(r<t.dataObject.dMinValue.getHours()||r==t.dataObject.dMinValue.getHours()&&i<t.dataObject.dMinValue.getMinutes())&&e(t.element).find(".meridiem .dtpicker-compButton").removeClass("dtpicker-compButtonEnable").addClass("dtpicker-compButtonDisable")}else n.getTime()<t.dataObject.dMinValue.getTime()&&e(t.element).find(".meridiem .dtpicker-compButton").removeClass("dtpicker-compButtonEnable").addClass("dtpicker-compButtonDisable")}},_compare:function(e,t){var n=e!==undefined&&e!==null,r=t!==undefined&&t!==null;if(n&&r)return e.toLowerCase()==t.toLowerCase()?!0:!1;!1},setIsPopup:function(t){var n=this;n.settings.isPopup=t,e(n.element).css("display")!="none"&&n._hidePicker(0);if(n.settings.isPopup)e(n.element).addClass("dtpicker-mobile"),e(n.element).css({position:"fixed",top:0,left:0,width:"100%",height:"100%"});else{e(n.element).removeClass("dtpicker-mobile");if(n.dataObject.oInputElement!=null){var r=e(n.dataObject.oInputElement).offset().top+e(n.dataObject.oInputElement).outerHeight(),i=e(n.dataObject.oInputElement).offset().left,s=e(n.dataObject.oInputElement).outerWidth();e(n.element).css({position:"absolute",top:r,left:i,width:s,height:"auto"})}}},_compareDates:function(e,t){e=new Date(e.getDate(),e.getMonth(),e.getFullYear(),0,0,0,0),e=new Date(e.getDate(),e.getMonth(),e.getFullYear(),0,0,0,0);var n=(e.getTime()-t.getTime())/864e5;return n==0?n:n/Math.abs(n)},_compareTime:function(e,t){var n=0;return e.getHours()==t.getHours()&&e.getMinutes()==t.getMinutes()?n=1:e.getHours()<t.getHours()?n=2:e.getHours()>t.getHours()?n=3:e.getHours()==t.getHours()&&(e.getMinutes()<t.getMinutes()?n=2:e.getMinutes()>t.getMinutes()&&(n=3)),n},_compareDateTime:function(e,t){var n=(e.getTime()-t.getTime())/6e4;return n==0?n:n/Math.abs(n)},_determineMeridiemFromHourAndMinutes:function(e,t){return e>12?"PM":e==12&&t>=0?"PM":"AM"}}}),!function(e){"use strict";var t=function(t,n){this.options=e.extend({},e.fn.combobox.defaults,n),this.template=this.options.template||this.template,this.$source=e(t),this.$container=this.setup(),this.$element=this.$container.find("input[type=text]"),this.$target=this.$container.find("input[type=hidden]"),this.$button=this.$container.find(".dropdown-toggle"),this.$menu=e(this.options.menu).appendTo("body"),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.shown=!1,this.selected=!1,this.refresh(),this.transferAttributes(),this.listen()};t.prototype={constructor:t,setup:function(){var t=e(this.template());return this.$source.before(t),this.$source.hide(),t},disable:function(){this.$element.prop("disabled",!0),this.$button.attr("disabled",!0),this.disabled=!0,this.$container.addClass("combobox-disabled")},enable:function(){this.$element.prop("disabled",!1),this.$button.attr("disabled",!1),this.disabled=!1,this.$container.removeClass("combobox-disabled")},parse:function(){var t=this,n={},r=[],i=!1,s="";return this.$source.find("option").each(function(){var o=e(this);if(o.val()===""){t.options.placeholder=o.text();return}n[o.text()]=o.val(),r.push(o.text()),o.prop("selected")&&(i=o.text(),s=o.val())}),this.map=n,i&&(this.$element.val(i),this.$target.val(s),this.$container.addClass("combobox-selected"),this.selected=!0),r},transferAttributes:function(){this.options.placeholder=this.$source.attr("data-placeholder")||this.options.placeholder,this.$element.attr("placeholder",this.options.placeholder),this.$target.val(this.$source.val()),this.$source.removeAttr("name"),this.$element.attr("required",this.$source.attr("required")),this.$element.attr("rel",this.$source.attr("rel")),this.$element.attr("title",this.$source.attr("title")),this.$element.attr("class",this.$source.attr("class")),this.$element.attr("tabindex",this.$source.attr("tabindex")),this.$source.removeAttr("tabindex"),this.$source.attr("disabled")!==undefined&&this.disable()},select:function(){var e=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(e)).trigger("change"),this.$target.val(this.map[e]).trigger("change"),this.$source.val(this.map[e]).trigger("change"),this.$container.addClass("combobox-selected"),this.selected=!0,this.hide()},updater:function(e){return e},show:function(){var t=e.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:t.top+t.height,left:t.left}).show(),e(".dropdown-menu").on("mousedown",e.proxy(this.scrollSafety,this)),this.shown=!0,this},hide:function(){return this.$menu.hide(),e(".dropdown-menu").off("mousedown",e.proxy(this.scrollSafety,this)),this.$element.on("blur",e.proxy(this.blur,this)),this.shown=!1,this},lookup:function(e){return this.query=this.$element.val(),this.process(this.source)},process:function(t){var n=this;return t=e.grep(t,function(e){return n.matcher(e)}),t=this.sorter(t),t.length?this.render(t.slice(0,this.options.items)).show():this.shown?this.hide():this},template:function(){return this.options.bsVersion=="2"?'<div class="combobox-container"><input type="hidden" /> <div class="input-append"> <input type="text" autocomplete="off" /> <span class="add-on dropdown-toggle" data-dropdown="dropdown"> <span class="caret"/> <i class="icon-remove"/> </span> </div> </div>':'<div class="combobox-container"> <input type="hidden" name="'+this.options.guid+'"/> <div class="input-group"> <input type="text" autocomplete="off" name="'+this.options.name+'" /> <span class="input-group-addon dropdown-toggle" data-dropdown="dropdown"> <span class="caret" /> <span class="glyphicon glyphicon-remove" /> </span> </div> </div>'},matcher:function(e){return~e.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(e){var t=[],n=[],r=[],i;while(i=e.shift())i.toLowerCase().indexOf(this.query.toLowerCase())?~i.indexOf(this.query)?n.push(i):r.push(i):t.push(i);return t.concat(n,r)},highlighter:function(e){var t=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return e.replace(new RegExp("("+t+")","ig"),function(e,t){return"<strong>"+t+"</strong>"})},render:function(t){var n=this;return t=e(t).map(function(t,r){return t=e(n.options.item).attr("data-value",r),t.find("a").html(n.highlighter(r)),t[0]}),t.first().addClass("active"),this.$menu.html(t),this},next:function(t){var n=this.$menu.find(".active").removeClass("active"),r=n.next();r.length||(r=e(this.$menu.find("li")[0])),r.addClass("active")},prev:function(e){var t=this.$menu.find(".active").removeClass("active"),n=t.prev();n.length||(n=this.$menu.find("li").last()),n.addClass("active")},toggle:function(){this.disabled||(this.$container.hasClass("combobox-selected")?(this.clearTarget(),this.triggerChange(),this.clearElement()):this.shown?this.hide():(this.clearElement(),this.lookup()))},scrollSafety:function(e){e.target.tagName=="UL"&&this.$element.off("blur")},clearElement:function(){this.$element.val("").focus()},clearTarget:function(){this.$source.val(""),this.$target.val(""),this.$container.removeClass("combobox-selected"),this.selected=!1},triggerChange:function(){this.$source.trigger("change")},refresh:function(){this.source=this.parse(),this.options.items=this.source.length},listen:function(){this.$element.on("focus",e.proxy(this.focus,this)).on("blur",e.proxy(this.blur,this)).on("keypress",e.proxy(this.keypress,this)).on("keyup",e.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",e.proxy(this.keydown,this)),this.$menu.on("click",e.proxy(this.click,this)).on("mouseenter","li",e.proxy(this.mouseenter,this)).on("mouseleave","li",e.proxy(this.mouseleave,this)),this.$button.on("click",e.proxy(this.toggle,this))},eventSupported:function(e){var t=e in this.$element;return t||(this.$element.setAttribute(e,"return;"),t=typeof this.$element[e]=="function"),t},move:function(e){if(!this.shown)return;switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault(),this.prev();break;case 40:e.preventDefault(),this.next()}e.stopPropagation()},keydown:function(t){this.suppressKeyPressRepeat=~e.inArray(t.keyCode,[40,38,9,13,27]),this.move(t)},keypress:function(e){if(this.suppressKeyPressRepeat)return;this.move(e)},keyup:function(e){switch(e.keyCode){case 40:case 39:case 38:case 37:case 36:case 35:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.clearTarget(),this.lookup()}e.stopPropagation(),e.preventDefault()},focus:function(e){this.focused=!0},blur:function(e){var t=this;this.focused=!1;var n=this.$element.val();!this.selected&&n!==""&&(this.$source.val("").trigger("change"),this.$target.val("").trigger("change")),!this.mousedover&&this.shown&&setTimeout(function(){t.hide()},200)},click:function(e){e.stopPropagation(),e.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(t){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),e(t.currentTarget).addClass("active")},mouseleave:function(e){this.mousedover=!1}},e.fn.combobox=function(n){return this.each(function(){var r=e(this),i=r.data("combobox"),s=typeof n=="object"&&n;i||r.data("combobox",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.combobox.defaults={bsVersion:"3",menu:'<ul class="typeahead typeahead-long dropdown-menu"></ul>',item:'<li><a href="#"></a></li>'},e.fn.combobox.Constructor=t}(window.jQuery),define("combobox",["jquery"],function(e){return function(){var t,n;return t||e.jQuery.fn.combobox}}(this)),function(){function t(e,t){return r(e||self.document.URL||self.location.href,t||n())}function n(){var e=document.getElementsByTagName("script");return e[e.length-1].src}function r(e,t){var n=t;return/^(\/|\\\\)/.test(t)?n=/^.+?\w(\/|\\\\)/.exec(e)[0]+t.replace(/^(\/|\\\\)/,""):/^[a-z]+:/i.test(t)||(e=e.split("#")[0].split("?")[0].replace(/[^\\\/]+$/,""),n=e+""+t),i(n)}function i(e){var t=/^[a-z]+:\/\//.exec(e)[0],n=null,r=[];e=e.replace(t,"").split("?")[0].split("#")[0],e=e.replace(/\\/g,"/").split(/\//),e[e.length-1]="";while(e.length)(n=e.shift())===".."?r.pop():n!=="."&&r.push(n);return t+r.join("/")}window.UEDITOR_HOME_URL="/Public/ueditor/";var e=window.UEDITOR_HOME_URL||t();window.UEDITOR_CONFIG={UEDITOR_HOME_URL:e,serverUrl:e+"php/controller.php",toolbars:[["selectall","|","undo","redo","|","bold","italic","underline","strikethrough","forecolor","backcolor","|","insertunorderedlist","insertorderedlist","unlink","link","|","justifyleft","justifycenter","justifyright","justifyjustify","fullscreen"],["fontfamily","fontsize","|","imagenone","imageleft","imagecenter","imageright","|","simpleupload","|","pagebreak","anchor","horizontal","|","inserttable","mergecells","insertcol","insertrow","deletecol","deleterow"],[]],lang:"zh-cn",langPath:e+"lang/"},window.UE={getUEBasePath:t}}(),define("ueditorconfig",["jquery"],function(){}),function(){function getListener(e,t,n){var r;return t=t.toLowerCase(),(r=e.__allListeners||n&&(e.__allListeners={}))&&(r[t]||n&&(r[t]=[]))}function getDomNode(e,t,n,r,i,s){var o=r&&e[t],u;!o&&(o=e[n]);while(!o&&(u=(u||e).parentNode)){if(u.tagName=="BODY"||s&&!s(u))return null;o=u[n]}return o&&i&&!i(o)?getDomNode(o,t,n,!1,i):o}UEDITOR_CONFIG=window.UEDITOR_CONFIG||{};var baidu=window.baidu||{};window.baidu=baidu,window.UE=baidu.editor=window.UE||{},UE.plugins={},UE.commands={},UE.instants={},UE.I18N={},UE._customizeUI={},UE.version="1.4.3";var dom=UE.dom={},browser=UE.browser=function(){var e=navigator.userAgent.toLowerCase(),t=window.opera,n={ie:/(msie\s|trident.*rv:)([\w.]+)/.test(e),opera:!!t&&t.version,webkit:e.indexOf(" applewebkit/")>-1,mac:e.indexOf("macintosh")>-1,quirks:document.compatMode=="BackCompat"};n.gecko=navigator.product=="Gecko"&&!n.webkit&&!n.opera&&!n.ie;var r=0;if(n.ie){var i=e.match(/(?:msie\s([\w.]+))/),s=e.match(/(?:trident.*rv:([\w.]+))/);i&&s&&i[1]&&s[1]?r=Math.max(i[1]*1,s[1]*1):i&&i[1]?r=i[1]*1:s&&s[1]?r=s[1]*1:r=0,n.ie11Compat=document.documentMode==11,n.ie9Compat=document.documentMode==9,n.ie8=!!document.documentMode,n.ie8Compat=document.documentMode==8,n.ie7Compat=r==7&&!document.documentMode||document.documentMode==7,n.ie6Compat=r<7||n.quirks,n.ie9above=r>8,n.ie9below=r<9,n.ie11above=r>10,n.ie11below=r<11}if(n.gecko){var o=e.match(/rv:([\d\.]+)/);o&&(o=o[1].split("."),r=o[0]*1e4+(o[1]||0)*100+(o[2]||0)*1)}return/chrome\/(\d+\.\d)/i.test(e)&&(n.chrome=+RegExp.$1),/(\d+\.\d)?(?:\.\d)?\s+safari\/?(\d+\.\d+)?/i.test(e)&&!/chrome/i.test(e)&&(n.safari=+(RegExp.$1||RegExp.$2)),n.opera&&(r=parseFloat(t.version())),n.webkit&&(r=parseFloat(e.match(/ applewebkit\/(\d+)/)[1])),n.version=r,n.isCompatible=!n.mobile&&(n.ie&&r>=6||n.gecko&&r>=10801||n.opera&&r>=9.5||n.air&&r>=1||n.webkit&&r>=522||!1),n}(),ie=browser.ie,webkit=browser.webkit,gecko=browser.gecko,opera=browser.opera,utils=UE.utils={each:function(e,t,n){if(e==null)return;if(e.length===+e.length){for(var r=0,i=e.length;r<i;r++)if(t.call(n,e[r],r,e)===!1)return!1}else for(var s in e)if(e.hasOwnProperty(s)&&t.call(n,e[s],s,e)===!1)return!1},makeInstance:function(e){var t=new Function;return t.prototype=e,e=new t,t.prototype=null,e},extend:function(e,t,n){if(t)for(var r in t)if(!n||!e.hasOwnProperty(r))e[r]=t[r];return e},extend2:function(e){var t=arguments;for(var n=1;n<t.length;n++){var r=t[n];for(var i in r)e.hasOwnProperty(i)||(e[i]=r[i])}return e},inherits:function(e,t){var n=e.prototype,r=utils.makeInstance(t.prototype);return utils.extend(r,n,!0),e.prototype=r,r.constructor=e},bind:function(e,t){return function(){return e.apply(t,arguments)}},defer:function(e,t,n){var r;return function(){n&&clearTimeout(r),r=setTimeout(e,t)}},indexOf:function(e,t,n){var r=-1;return n=this.isNumber(n)?n:0,this.each(e,function(e,i){if(i>=n&&e===t)return r=i,!1}),r},removeItem:function(e,t){for(var n=0,r=e.length;n<r;n++)e[n]===t&&(e.splice(n,1),n--)},trim:function(e){return e.replace(/(^[ \t\n\r]+)|([ \t\n\r]+$)/g,"")},listToMap:function(e){if(!e)return{};e=utils.isArray(e)?e:e.split(",");for(var t=0,n,r={};n=e[t++];)r[n.toUpperCase()]=r[n]=1;return r},unhtml:function(e,t){return e?e.replace(t||/[&<">'](?:(amp|lt|quot|gt|#39|nbsp|#\d+);)?/g,function(e,t){return t?e:{"<":"&lt;","&":"&amp;",'"':"&quot;",">":"&gt;","'":"&#39;"}[e]}):""},html:function(e){return e?e.replace(/&((g|l|quo)t|amp|#39|nbsp);/g,function(e){return{"&lt;":"<","&amp;":"&","&quot;":'"',"&gt;":">","&#39;":"'","&nbsp;":" "}[e]}):""},cssStyleToDomStyle:function(){var e=document.createElement("div").style,t={"float":e.cssFloat!=undefined?"cssFloat":e.styleFloat!=undefined?"styleFloat":"float"};return function(e){return t[e]||(t[e]=e.toLowerCase().replace(/-./g,function(e){return e.charAt(1).toUpperCase()}))}}(),loadFile:function(){function t(t,n){try{for(var r=0,i;i=e[r++];)if(i.doc===t&&i.url==(n.src||n.href))return i}catch(s){return null}}var e=[];return function(n,r,i){var s=t(n,r);if(s){s.ready?i&&i():s.funs.push(i);return}e.push({doc:n,url:r.src||r.href,funs:[i]});if(!n.body){var o=[];for(var u in r){if(u=="tag")continue;o.push(u+'="'+r[u]+'"')}n.write("<"+r.tag+" "+o.join(" ")+" ></"+r.tag+">");return}if(r.id&&n.getElementById(r.id))return;var a=n.createElement(r.tag);delete r.tag;for(var u in r)a.setAttribute(u,r[u]);a.onload=a.onreadystatechange=function(){if(!this.readyState||/loaded|complete/.test(this.readyState)){s=t(n,r);if(s.funs.length>0){s.ready=1;for(var e;e=s.funs.pop();)e()}a.onload=a.onreadystatechange=null}},a.onerror=function(){throw Error("The load "+(r.href||r.src)+" fails,check the url settings of file ueditor.config.js ")},n.getElementsByTagName("head")[0].appendChild(a)}}(),isEmptyObject:function(e){if(e==null)return!0;if(this.isArray(e)||this.isString(e))return e.length===0;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},fixColor:function(e,t){if(/color/i.test(e)&&/rgba?/.test(t)){var n=t.split(",");if(n.length>3)return"";t="#";for(var r=0,i;i=n[r++];)i=parseInt(i.replace(/[^\d]/gi,""),10).toString(16),t+=i.length==1?"0"+i:i;t=t.toUpperCase()}return t},optCss:function(e){function i(e,t){if(!e)return"";var n=e.top,r=e.bottom,i=e.left,s=e.right,o="";if(!n||!i||!r||!s)for(var u in e)o+=";"+t+"-"+u+":"+e[u]+";";else o+=";"+t+":"+(n==r&&r==i&&i==s?n:n==r&&i==s?n+" "+i:i==s?n+" "+i+" "+r:n+" "+s+" "+r+" "+i)+";";return o}var t,n,r;return e=e.replace(/(padding|margin|border)\-([^:]+):([^;]+);?/gi,function(e,r,i,s){if(s.split(" ").length==1)switch(r){case"padding":return!t&&(t={}),t[i]=s,"";case"margin":return!n&&(n={}),n[i]=s,"";case"border":return s=="initial"?"":e}return e}),e+=i(t,"padding")+i(n,"margin"),e.replace(/^[ \n\r\t;]*|[ \n\r\t]*$/,"").replace(/;([ \n\r\t]+)|\1;/g,";").replace(/(&((l|g)t|quot|#39))?;{2,}/g,function(e,t){return t?t+";;":";"})},clone:function(e,t){var n;t=t||{};for(var r in e)e.hasOwnProperty(r)&&(n=e[r],typeof n=="object"?(t[r]=utils.isArray(n)?[]:{},utils.clone(e[r],t[r])):t[r]=n);return t},transUnitToPx:function(e){if(!/(pt|cm)/.test(e))return e;var t;e.replace(/([\d.]+)(\w+)/,function(n,r,i){e=r,t=i});switch(t){case"cm":e=parseFloat(e)*25;break;case"pt":e=Math.round(parseFloat(e)*96/72)}return e+(e?"px":"")},domReady:function(){function t(t){t.isReady=!0;for(var n;n=e.pop();n());}var e=[];return function(n,r){r=r||window;var i=r.document;n&&e.push(n),i.readyState==="complete"?t(i):(i.isReady&&t(i),browser.ie&&browser.version!=11?(function(){if(i.isReady)return;try{i.documentElement.doScroll("left")}catch(e){setTimeout(arguments.callee,0);return}t(i)}(),r.attachEvent("onload",function(){t(i)})):(i.addEventListener("DOMContentLoaded",function(){i.removeEventListener("DOMContentLoaded",arguments.callee,!1),t(i)},!1),r.addEventListener("load",function(){t(i)},!1)))}}(),cssRule:browser.ie&&browser.version!=11?function(e,t,n){var r,i;if(t===undefined||t&&t.nodeType&&t.nodeType==9)return n=t&&t.nodeType&&t.nodeType==9?t:n||document,r=n.indexList||(n.indexList={}),i=r[e],i!==undefined?n.styleSheets[i].cssText:undefined;n=n||document,r=n.indexList||(n.indexList={}),i=r[e];if(t==="")return i!==undefined?(n.styleSheets[i].cssText="",delete r[e],!0):!1;i!==undefined?sheetStyle=n.styleSheets[i]:(sheetStyle=n.createStyleSheet("",i=n.styleSheets.length),r[e]=i),sheetStyle.cssText=t}:function(e,t,n){var r,i;if(t===undefined||t&&t.nodeType&&t.nodeType==9)return n=t&&t.nodeType&&t.nodeType==9?t:n||document,i=n.getElementById(e),i?i.innerHTML:undefined;n=n||document,i=n.getElementById(e);if(t==="")return i?(i.parentNode.removeChild(i),!0):!1;i?i.innerHTML=t:(i=n.createElement("style"),i.id=e,i.innerHTML=t,n.getElementsByTagName("head")[0].appendChild(i))},sort:function(e,t){t=t||function(e,t){return e.localeCompare(t)};for(var n=0,r=e.length;n<r;n++)for(var i=n,s=e.length;i<s;i++)if(t(e[n],e[i])>0){var o=e[n];e[n]=e[i],e[i]=o}return e},serializeParam:function(e){var t=[];for(var n in e){if(n=="method"||n=="timeout"||n=="async")continue;if((typeof e[n]).toLowerCase()!="function"&&(typeof e[n]).toLowerCase()!="object")t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));else if(utils.isArray(e[n]))for(var r=0;r<e[n].length;r++)t.push(encodeURIComponent(n)+"[]="+encodeURIComponent(e[n][r]))}return t.join("&")},formatUrl:function(e){var t=e.replace(/&&/g,"&");return t=t.replace(/\?&/g,"?"),t=t.replace(/&$/g,""),t=t.replace(/&#/g,"#"),t=t.replace(/&+/g,"&"),t},isCrossDomainUrl:function(e){var t=document.createElement("a");return t.href=e,browser.ie&&(t.href=t.href),t.protocol!=location.protocol||t.hostname!=location.hostname||!(t.port==location.port||t.port=="80"&&location.port==""||t.port==""&&location.port=="80")},clearEmptyAttrs:function(e){for(var t in e)e[t]===""&&delete e[t];return e},str2json:function(e){return utils.isString(e)?window.JSON?JSON.parse(e):(new Function("return "+utils.trim(e||"")))():null},json2str:function(){if(window.JSON)return JSON.stringify;var e={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function t(t){return/["\\\x00-\x1f]/.test(t)&&(t=t.replace(/["\\\x00-\x1f]/g,function(t){var n=e[t];return n?n:(n=t.charCodeAt(),"\\u00"+Math.floor(n/16).toString(16)+(n%16).toString(16))})),'"'+t+'"'}function n(e){var t=["["],n=e.length,r,i,s;for(i=0;i<n;i++){s=e[i];switch(typeof s){case"undefined":case"function":case"unknown":break;default:r&&t.push(","),t.push(utils.json2str(s)),r=1}}return t.push("]"),t.join("")}function r(e){return e<10?"0"+e:e}function i(e){return'"'+e.getFullYear()+"-"+r(e.getMonth()+1)+"-"+r(e.getDate())+"T"+r(e.getHours())+":"+r(e.getMinutes())+":"+r(e.getSeconds())+'"'}return function(e){switch(typeof e){case"undefined":return"undefined";case"number":return isFinite(e)?String(e):"null";case"string":return t(e);case"boolean":return String(e);default:if(e===null)return"null";if(utils.isArray(e))return n(e);if(utils.isDate(e))return i(e);var r=["{"],s=utils.json2str,o,u;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){u=e[a];switch(typeof u){case"undefined":case"unknown":case"function":break;default:o&&r.push(","),o=1,r.push(s(a)+":"+s(u))}}return r.push("}"),r.join("")}}}()};utils.each(["String","Function","Array","Number","RegExp","Object","Date"],function(e){UE.utils["is"+e]=function(t){return Object.prototype.toString.apply(t)=="[object "+e+"]"}});var EventBase=UE.EventBase=function(){};EventBase.prototype={addListener:function(e,t){e=utils.trim(e).split(/\s+/);for(var n=0,r;r=e[n++];)getListener(this,r,!0).push(t)},on:function(e,t){return this.addListener(e,t)},off:function(e,t){return this.removeListener(e,t)},trigger:function(){return this.fireEvent.apply(this,arguments)},removeListener:function(e,t){e=utils.trim(e).split(/\s+/);for(var n=0,r;r=e[n++];)utils.removeItem(getListener(this,r)||[],t)},fireEvent:function(){var e=arguments[0];e=utils.trim(e).split(" ");for(var t=0,n;n=e[t++];){var r=getListener(this,n),i,s,o;if(r){o=r.length;while(o--){if(!r[o])continue;s=r[o].apply(this,arguments);if(s===!0)return s;s!==undefined&&(i=s)}}if(s=this["on"+n.toLowerCase()])i=s.apply(this,arguments)}return i}};var dtd=dom.dtd=function(){function e(e){for(var t in e)e[t.toUpperCase()]=e[t];return e}var t=utils.extend2,n=e({isindex:1,fieldset:1}),r=e({input:1,button:1,select:1,textarea:1,label:1}),i=t(e({a:1}),r),s=t({iframe:1},i),o=e({hr:1,ul:1,menu:1,div:1,blockquote:1,noscript:1,table:1,center:1,address:1,dir:1,pre:1,h5:1,dl:1,h4:1,noframes:1,h6:1,ol:1,h1:1,h3:1,h2:1}),u=e({ins:1,del:1,script:1,style:1}),a=t(e({b:1,acronym:1,bdo:1,"var":1,"#":1,abbr:1,code:1,br:1,i:1,cite:1,kbd:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,dfn:1,span:1}),u),f=t(e({sub:1,img:1,embed:1,object:1,sup:1,basefont:1,map:1,applet:1,font:1,big:1,small:1}),a),l=t(e({p:1}),f),c=t(e({iframe:1}),f,r),h=e({img:1,embed:1,noscript:1,br:1,kbd:1,center:1,button:1,basefont:1,h5:1,h4:1,samp:1,h6:1,ol:1,h1:1,h3:1,h2:1,form:1,font:1,"#":1,select:1,menu:1,ins:1,abbr:1,label:1,code:1,table:1,script:1,cite:1,input:1,iframe:1,strong:1,textarea:1,noframes:1,big:1,small:1,span:1,hr:1,sub:1,bdo:1,"var":1,div:1,object:1,sup:1,strike:1,dir:1,map:1,dl:1,applet:1,del:1,isindex:1,fieldset:1,ul:1,b:1,acronym:1,a:1,blockquote:1,i:1,u:1,s:1,tt:1,address:1,q:1,pre:1,p:1,em:1,dfn:1}),p=t(e({a:0}),c),d=e({tr:1}),v=e({"#":1}),m=t(e({param:1}),h),g=t(e({form:1}),n,s,o,l),y=e({li:1,ol:1,ul:1}),b=e({style:1,script:1}),w=e({base:1,link:1,meta:1,title:1}),E=t(w,b),S=e({head:1,body:1}),x=e({html:1}),T=e({address:1,blockquote:1,center:1,dir:1,div:1,dl:1,fieldset:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,hr:1,isindex:1,menu:1,noframes:1,ol:1,p:1,pre:1,table:1,ul:1}),N=e({area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1});return e({$nonBodyContent:t(x,S,w),$block:T,$inline:p,$inlineWithA:t(e({a:1}),p),$body:t(e({script:1,style:1}),T),$cdata:e({script:1,style:1}),$empty:N,$nonChild:e({iframe:1,textarea:1}),$listItem:e({dd:1,dt:1,li:1}),$list:e({ul:1,ol:1,dl:1}),$isNotEmpty:e({table:1,ul:1,ol:1,dl:1,iframe:1,area:1,base:1,col:1,hr:1,img:1,embed:1,input:1,link:1,meta:1,param:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1}),$removeEmpty:e({a:1,abbr:1,acronym:1,address:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,"var":1}),$removeEmptyBlock:e({p:1,div:1}),$tableContent:e({caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1,table:1}),$notTransContent:e({pre:1,script:1,style:1,textarea:1}),html:S,head:E,style:v,script:v,body:g,base:{},link:{},meta:{},title:v,col:{},tr:e({td:1,th:1}),img:{},embed:{},colgroup:e({thead:1,col:1,tbody:1,tr:1,tfoot:1}),noscript:g,td:g,br:{},th:g,center:g,kbd:p,button:t(l,o),basefont:{},h5:p,h4:p,samp:p,h6:p,ol:y,h1:p,h3:p,option:v,h2:p,form:t(n,s,o,l),select:e({optgroup:1,option:1}),font:p,ins:p,menu:y,abbr:p,label:p,table:e({thead:1,col:1,tbody:1,tr:1,colgroup:1,caption:1,tfoot:1}),code:p,tfoot:d,cite:p,li:g,input:{},iframe:g,strong:p,textarea:v,noframes:g,big:p,small:p,span:e({"#":1,br:1,b:1,strong:1,u:1,i:1,em:1,sub:1,sup:1,strike:1,span:1}),hr:p,dt:p,sub:p,optgroup:e({option:1}),param:{},bdo:p,"var":p,div:g,object:m,sup:p,dd:g,strike:p,area:{},dir:y,map:t(e({area:1,form:1,p:1}),n,u,o),applet:m,dl:e({dt:1,dd:1}),del:p,isindex:{},fieldset:t(e({legend:1}),h),thead:d,ul:y,acronym:p,b:p,a:t(e({a:1}),c),blockquote:t(e({td:1,tr:1,tbody:1,li:1}),g),caption:p,i:p,u:p,tbody:d,s:p,address:t(s,l),tt:p,legend:p,q:p,pre:t(a,i),p:t(e({a:1}),p),em:p,dfn:p})}(),attrFix=ie&&browser.version<9?{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder"}:{tabindex:"tabIndex",readonly:"readOnly"},styleBlock=utils.listToMap(["-webkit-box","-moz-box","block","list-item","table","table-row-group","table-header-group","table-footer-group","table-row","table-column-group","table-column","table-cell","table-caption"]),domUtils=dom.domUtils={NODE_ELEMENT:1,NODE_DOCUMENT:9,NODE_TEXT:3,NODE_COMMENT:8,NODE_DOCUMENT_FRAGMENT:11,POSITION_IDENTICAL:0,POSITION_DISCONNECTED:1,POSITION_FOLLOWING:2,POSITION_PRECEDING:4,POSITION_IS_CONTAINED:8,POSITION_CONTAINS:16,fillChar:ie&&browser.version=="6"?"ï»¿":"â",keys:{8:1,46:1,16:1,17:1,18:1,37:1,38:1,39:1,40:1,13:1},getPosition:function(e,t){if(e===t)return 0;var n,r=[e],i=[t];n=e;while(n=n.parentNode){if(n===t)return 10;r.push(n)}n=t;while(n=n.parentNode){if(n===e)return 20;i.push(n)}r.reverse(),i.reverse();if(r[0]!==i[0])return 1;var s=-1;while(s++,r[s]===i[s]);e=r[s],t=i[s];while(e=e.nextSibling)if(e===t)return 4;return 2},getNodeIndex:function(e,t){var n=e,r=0;while(n=n.previousSibling){if(t&&n.nodeType==3){n.nodeType!=n.nextSibling.nodeType&&r++;continue}r++}return r},inDoc:function(e,t){return domUtils.getPosition(e,t)==10},findParent:function(e,t,n){if(e&&!domUtils.isBody(e)){e=n?e:e.parentNode;while(e){if(!t||t(e)||domUtils.isBody(e))return t&&!t(e)&&domUtils.isBody(e)?null:e;e=e.parentNode}}return null},findParentByTagName:function(e,t,n,r){return t=utils.listToMap(utils.isArray(t)?t:[t]),domUtils.findParent(e,function(e){return t[e.tagName]&&(!r||!r(e))},n)},findParents:function(e,t,n,r){var i=t&&(n&&n(e)||!n)?[e]:[];while(e=domUtils.findParent(e,n))i.push(e);return r?i:i.reverse()},insertAfter:function(e,t){return e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t)},remove:function(e,t){var n=e.parentNode,r;if(n){if(t&&e.hasChildNodes())while(r=e.firstChild)n.insertBefore(r,e);n.removeChild(e)}return e},getNextDomNode:function(e,t,n,r){return getDomNode(e,"firstChild","nextSibling",t,n,r)},getPreDomNode:function(e,t,n,r){return getDomNode(e,"lastChild","previousSibling",t,n,r)},isBookmarkNode:function(e){return e.nodeType==1&&e.id&&/^_baidu_bookmark_/i.test(e.id)},getWindow:function(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow},getCommonAncestor:function(e,t){if(e===t)return e;var n=[e],r=[t],i=e,s=-1;while(i=i.parentNode){if(i===t)return i;n.push(i)}i=t;while(i=i.parentNode){if(i===e)return i;r.push(i)}n.reverse(),r.reverse();while(s++,n[s]===r[s]);return s==0?null:n[s-1]},clearEmptySibling:function(e,t,n){function r(e,t){var n;while(e&&!domUtils.isBookmarkNode(e)&&(domUtils.isEmptyInlineElement(e)||!(new RegExp("[^	\n\r"+domUtils.fillChar+"]")).test(e.nodeValue)))n=e[t],domUtils.remove(e),e=n}!t&&r(e.nextSibling,"nextSibling"),!n&&r(e.previousSibling,"previousSibling")},split:function(e,t){var n=e.ownerDocument;if(browser.ie&&t==e.nodeValue.length){var r=n.createTextNode("");return domUtils.insertAfter(e,r)}var i=e.splitText(t);if(browser.ie8){var s=n.createTextNode("");domUtils.insertAfter(i,s),domUtils.remove(s)}return i},isWhitespace:function(e){return!(new RegExp("[^ 	\n\r"+domUtils.fillChar+"]")).test(e.nodeValue)},getXY:function(e){var t=0,n=0;while(e.offsetParent)n+=e.offsetTop,t+=e.offsetLeft,e=e.offsetParent;return{x:t,y:n}},on:function(e,t,n){var r=utils.isArray(t)?t:utils.trim(t).split(/\s+/),i=r.length;if(i)while(i--){t=r[i];if(e.addEventListener)e.addEventListener(t,n,!1);else{n._d||(n._d={els:[]});var s=t+n.toString(),o=utils.indexOf(n._d.els,e);if(!n._d[s]||o==-1)o==-1&&n._d.els.push(e),n._d[s]||(n._d[s]=function(e){return n.call(e.srcElement,e||window.event)}),e.attachEvent("on"+t,n._d[s])}}e=null},un:function(e,t,n){var r=utils.isArray(t)?t:utils.trim(t).split(/\s+/),i=r.length;if(i)while(i--){t=r[i];if(e.removeEventListener)e.removeEventListener(t,n,!1);else{var s=t+n.toString();try{e.detachEvent("on"+t,n._d?n._d[s]:n)}catch(o){}if(n._d&&n._d[s]){var u=utils.indexOf(n._d.els,e);u!=-1&&n._d.els.splice(u,1),n._d.els.length==0&&delete n._d[s]}}}},isSameElement:function(e,t){if(e.tagName!=t.tagName)return!1;var n=e.attributes,r=t.attributes;if(!ie&&n.length!=r.length)return!1;var i,s,o=0,u=0;for(var a=0;i=n[a++];){if(i.nodeName=="style"){i.specified&&o++;if(domUtils.isSameStyle(e,t))continue;return!1}if(ie){if(!i.specified)continue;o++,s=r.getNamedItem(i.nodeName)}else s=t.attributes[i.nodeName];if(!s.specified||i.nodeValue!=s.nodeValue)return!1}if(ie){for(a=0;s=r[a++];)s.specified&&u++;if(o!=u)return!1}return!0},isSameStyle:function(e,t){var n=e.style.cssText.replace(/( ?; ?)/g,";").replace(/( ?: ?)/g,":"),r=t.style.cssText.replace(/( ?; ?)/g,";").replace(/( ?: ?)/g,":");if(browser.opera){n=e.style,r=t.style;if(n.length!=r.length)return!1;for(var i in n){if(/^(\d+|csstext)$/i.test(i))continue;if(n[i]!=r[i])return!1}return!0}if(!n||!r)return n==r;n=n.split(";"),r=r.split(";");if(n.length!=r.length)return!1;for(var s=0,o;o=n[s++];)if(utils.indexOf(r,o)==-1)return!1;return!0},isBlockElm:function(e){return e.nodeType==1&&(dtd.$block[e.tagName]||styleBlock[domUtils.getComputedStyle(e,"display")])&&!dtd.$nonChild[e.tagName]},isBody:function(e){return e&&e.nodeType==1&&e.tagName.toLowerCase()=="body"},breakParent:function(e,t){var n,r=e,i=e,s,o;do{r=r.parentNode,s?(n=r.cloneNode(!1),n.appendChild(s),s=n,n=r.cloneNode(!1),n.appendChild(o),o=n):(s=r.cloneNode(!1),o=s.cloneNode(!1));while(n=i.previousSibling)s.insertBefore(n,s.firstChild);while(n=i.nextSibling)o.appendChild(n);i=r}while(t!==r);return n=t.parentNode,n.insertBefore(s,t),n.insertBefore(o,t),n.insertBefore(e,o),domUtils.remove(t),e},isEmptyInlineElement:function(e){if(e.nodeType!=1||!dtd.$removeEmpty[e.tagName])return 0;e=e.firstChild;while(e){if(domUtils.isBookmarkNode(e))return 0;if(e.nodeType==1&&!domUtils.isEmptyInlineElement(e)||e.nodeType==3&&!domUtils.isWhitespace(e))return 0;e=e.nextSibling}return 1},trimWhiteTextNode:function(e){function t(t){var n;while((n=e[t])&&n.nodeType==3&&domUtils.isWhitespace(n))e.removeChild(n)}t("firstChild"),t("lastChild")},mergeChild:function(e,t,n){var r=domUtils.getElementsByTagName(e,e.tagName.toLowerCase());for(var i=0,s;s=r[i++];){if(!s.parentNode||domUtils.isBookmarkNode(s))continue;if(s.tagName.toLowerCase()=="span"){if(e===s.parentNode){domUtils.trimWhiteTextNode(e);if(e.childNodes.length==1){e.style.cssText=s.style.cssText+";"+e.style.cssText,domUtils.remove(s,!0);continue}}s.style.cssText=e.style.cssText+";"+s.style.cssText;if(n){var o=n.style;if(o){o=o.split(";");for(var u=0,a;a=o[u++];)s.style[utils.cssStyleToDomStyle(a.split(":")[0])]=a.split(":")[1]}}domUtils.isSameStyle(s,e)&&domUtils.remove(s,!0);continue}domUtils.isSameElement(e,s)&&domUtils.remove(s,!0)}},getElementsByTagName:function(e,t,n){if(n&&utils.isString(n)){var r=n;n=function(e){return domUtils.hasClass(e,r)}}t=utils.trim(t).replace(/[ ]{2,}/g," ").split(" ");var i=[];for(var s=0,o;o=t[s++];){var u=e.getElementsByTagName(o);for(var a=0,f;f=u[a++];)(!n||n(f))&&i.push(f)}return i},mergeToParent:function(e){var t=e.parentNode;while(t&&dtd.$removeEmpty[t.tagName]){if(t.tagName==e.tagName||t.tagName=="A"){domUtils.trimWhiteTextNode(t);if(t.tagName=="SPAN"&&!domUtils.isSameStyle(t,e)||t.tagName=="A"&&e.tagName=="SPAN"){if(t.childNodes.length>1||t!==e.parentNode){e.style.cssText=t.style.cssText+";"+e.style.cssText,t=t.parentNode;continue}t.style.cssText+=";"+e.style.cssText,t.tagName=="A"&&(t.style.textDecoration="underline")}if(t.tagName!="A"){t===e.parentNode&&domUtils.remove(e,!0);break}}t=t.parentNode}},mergeSibling:function(e,t,n){function r(e,t,n){var r;if((r=n[e])&&!domUtils.isBookmarkNode(r)&&r.nodeType==1&&domUtils.isSameElement(n,r)){while(r.firstChild)t=="firstChild"?n.insertBefore(r.lastChild,n.firstChild):n.appendChild(r.firstChild);domUtils.remove(r)}}!t&&r("previousSibling","firstChild",e),!n&&r("nextSibling","lastChild",e)},unSelectable:ie&&browser.ie9below||browser.opera?function(e){e.onselectstart=function(){return!1},e.onclick=e.onkeyup=e.onkeydown=function(){return!1},e.unselectable="on",e.setAttribute("unselectable","on");for(var t=0,n;n=e.all[t++];)switch(n.tagName.toLowerCase()){case"iframe":case"textarea":case"input":case"select":break;default:n.unselectable="on",e.setAttribute("unselectable","on")}}:function(e){e.style.MozUserSelect=e.style.webkitUserSelect=e.style.msUserSelect=e.style.KhtmlUserSelect="none"},removeAttributes:function(e,t){t=utils.isArray(t)?t:utils.trim(t).replace(/[ ]{2,}/g," ").split(" ");for(var n=0,r;r=t[n++];){r=attrFix[r]||r;switch(r){case"className":e[r]="";break;case"style":e.style.cssText="";var i=e.getAttributeNode("style");!browser.ie&&i&&e.removeAttributeNode(i)}e.removeAttribute(r)}},createElement:function(e,t,n){return domUtils.setAttributes(e.createElement(t),n)},setAttributes:function(e,t){for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];switch(n){case"class":e.className=r;break;case"style":e.style.cssText=e.style.cssText+";"+r;break;case"innerHTML":e[n]=r;break;case"value":e.value=r;break;default:e.setAttribute(attrFix[n]||n,r)}}return e},getComputedStyle:function(e,t){var n="width height top left";if(n.indexOf(t)>-1)return e["offset"+t.replace(/^\w/,function(e){return e.toUpperCase()})]+"px";e.nodeType==3&&(e=e.parentNode);if(browser.ie&&browser.version<9&&t=="font-size"&&!e.style.fontSize&&!dtd.$empty[e.tagName]&&!dtd.$nonChild[e.tagName]){var r=e.ownerDocument.createElement("span");r.style.cssText="padding:0;border:0;font-family:simsun;",r.innerHTML=".",e.appendChild(r);var i=r.offsetHeight;return e.removeChild(r),r=null,i+"px"}try{var s=domUtils.getStyle(e,t)||(window.getComputedStyle?domUtils.getWindow(e).getComputedStyle(e,"").getPropertyValue(t):(e.currentStyle||e.style)[utils.cssStyleToDomStyle(t)])}catch(o){return""}return utils.transUnitToPx(utils.fixColor(t,s))},removeClasses:function(e,t){t=utils.isArray(t)?t:utils.trim(t).replace(/[ ]{2,}/g," ").split(" ");for(var n=0,r,i=e.className;r=t[n++];)i=i.replace(new RegExp("\\b"+r+"\\b"),"");i=utils.trim(i).replace(/[ ]{2,}/g," "),i?e.className=i:domUtils.removeAttributes(e,["class"])},addClass:function(e,t){if(!e)return;t=utils.trim(t).replace(/[ ]{2,}/g," ").split(" ");for(var n=0,r,i=e.className;r=t[n++];)(new RegExp("\\b"+r+"\\b")).test(i)||(i+=" "+r);e.className=utils.trim(i)},hasClass:function(e,t){if(utils.isRegExp(t))return t.test(e.className);t=utils.trim(t).replace(/[ ]{2,}/g," ").split(" ");for(var n=0,r,i=e.className;r=t[n++];)if(!(new RegExp("\\b"+r+"\\b","i")).test(i))return!1;return n-1==t.length},preventDefault:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},removeStyle:function(e,t){browser.ie?(t=="color"&&(t="(^|;)"+t),e.style.cssText=e.style.cssText.replace(new RegExp(t+"[^:]*:[^;]+;?","ig"),"")):e.style.removeProperty?e.style.removeProperty(t):e.style.removeAttribute(utils.cssStyleToDomStyle(t)),e.style.cssText||domUtils.removeAttributes(e,["style"])},getStyle:function(e,t){var n=e.style[utils.cssStyleToDomStyle(t)];return utils.fixColor(t,n)},setStyle:function(e,t,n){e.style[utils.cssStyleToDomStyle(t)]=n,utils.trim(e.style.cssText)||this.removeAttributes(e,"style")},setStyles:function(e,t){for(var n in t)t.hasOwnProperty(n)&&domUtils.setStyle(e,n,t[n])},removeDirtyAttr:function(e){for(var t=0,n,r=e.getElementsByTagName("*");n=r[t++];)n.removeAttribute("_moz_dirty");e.removeAttribute("_moz_dirty")},getChildCount:function(e,t){var n=0,r=e.firstChild;t=t||function(){return 1};while(r)t(r)&&n++,r=r.nextSibling;return n},isEmptyNode:function(e){return!e.firstChild||domUtils.getChildCount(e,function(e){return!domUtils.isBr(e)&&!domUtils.isBookmarkNode(e)&&!domUtils.isWhitespace(e)})==0},clearSelectedArr:function(e){var t;while(t=e.pop())domUtils.removeAttributes(t,["class"])},scrollToView:function(e,t,n){var r=function(){var e=t.document,n=e.compatMode=="CSS1Compat";return{width:(n?e.documentElement.clientWidth:e.body.clientWidth)||0,height:(n?e.documentElement.clientHeight:e.body.clientHeight)||0}},i=function(e){if("pageXOffset"in e)return{x:e.pageXOffset||0,y:e.pageYOffset||0};var t=e.document;return{x:t.documentElement.scrollLeft||t.body.scrollLeft||0,y:t.documentElement.scrollTop||t.body.scrollTop||0}},s=r().height,o=s*-1+n;o+=e.offsetHeight||0;var u=domUtils.getXY(e);o+=u.y;var a=i(t).y;(o>a||o<a-s)&&t.scrollTo(0,o+(o<0?-20:20))},isBr:function(e){return e.nodeType==1&&e.tagName=="BR"},isFillChar:function(e,t){if(e.nodeType!=3)return!1;var n=e.nodeValue;return t?(new RegExp("^"+domUtils.fillChar)).test(n):!n.replace(new RegExp(domUtils.fillChar,"g"),"").length},isStartInblock:function(e){var t=e.cloneRange(),n=0,r=t.startContainer,i;if(r.nodeType==1&&r.childNodes[t.startOffset]){r=r.childNodes[t.startOffset];var s=r.previousSibling;while(s&&domUtils.isFillChar(s))r=s,s=s.previousSibling}this.isFillChar(r,!0)&&t.startOffset==1&&(t.setStartBefore(r),r=t.startContainer);while(r&&domUtils.isFillChar(r))i=r,r=r.previousSibling;i&&(t.setStartBefore(i),r=t.startContainer),r.nodeType==1&&domUtils.isEmptyNode(r)&&t.startOffset==1&&t.setStart(r,0).collapse(!0);while(!t.startOffset){r=t.startContainer;if(domUtils.isBlockElm(r)||domUtils.isBody(r)){n=1;break}var s=t.startContainer.previousSibling,o;if(!s)t.setStartBefore(t.startContainer);else{while(s&&domUtils.isFillChar(s))o=s,s=s.previousSibling;o?t.setStartBefore(o):t.setStartBefore(t.startContainer)}}return n&&!domUtils.isBody(t.startContainer)?1:0},isEmptyBlock:function(e,t){if(e.nodeType!=1)return 0;t=t||new RegExp("[ Â 	\r\n"+domUtils.fillChar+"]","g");if(e[browser.ie?"innerText":"textContent"].replace(t,"").length>0)return 0;for(var n in dtd.$isNotEmpty)if(e.getElementsByTagName(n).length)return 0;return 1},setViewportOffset:function(e,t){var n=parseInt(e.style.left)|0,r=parseInt(e.style.top)|0,i=e.getBoundingClientRect(),s=t.left-i.left,o=t.top-i.top;s&&(e.style.left=n+s+"px"),o&&(e.style.top=r+o+"px")},fillNode:function(e,t){var n=browser.ie?e.createTextNode(domUtils.fillChar):e.createElement("br");t.innerHTML="",t.appendChild(n)},moveChild:function(e,t,n){while(e.firstChild)n&&t.firstChild?t.insertBefore(e.lastChild,t.firstChild):t.appendChild(e.firstChild)},hasNoAttributes:function(e){return browser.ie?/^<\w+\s*?>/.test(e.outerHTML):e.attributes.length==0},isCustomeNode:function(e){return e.nodeType==1&&e.getAttribute("_ue_custom_node_")},isTagNode:function(e,t){return e.nodeType==1&&(new RegExp("\\b"+e.tagName+"\\b","i")).test(t)},filterNodeList:function(e,t,n){var r=[];if(!utils.isFunction(t)){var i=t;t=function(e){return utils.indexOf(utils.isArray(i)?i:i.split(" "),e.tagName.toLowerCase())!=-1}}return utils.each(e,function(e){t(e)&&r.push(e)}),r.length==0?null:r.length==1||!n?r[0]:r},isInNodeEndBoundary:function(e,t){var n=e.startContainer;if(n.nodeType==3&&e.startOffset!=n.nodeValue.length)return 0;if(n.nodeType==1&&e.startOffset!=n.childNodes.length)return 0;while(n!==t){if(n.nextSibling)return 0;n=n.parentNode}return 1},isBoundaryNode:function(e,t){var n;while(!domUtils.isBody(e)){n=e,e=e.parentNode;if(n!==e[t])return!1}return!0},fillHtml:browser.ie11below?"&nbsp;":"<br/>"},fillCharReg=new RegExp(domUtils.fillChar,"g");(function(){function r(e){e.collapsed=e.startContainer&&e.endContainer&&e.startContainer===e.endContainer&&e.startOffset==e.endOffset}function i(e){return!e.collapsed&&e.startContainer.nodeType==1&&e.startContainer===e.endContainer&&e.endOffset-e.startOffset==1}function s(e,t,n,i){return t.nodeType==1&&(dtd.$empty[t.tagName]||dtd.$nonChild[t.tagName])&&(n=domUtils.getNodeIndex(t)+(e?0:1),t=t.parentNode),e?(i.startContainer=t,i.startOffset=n,i.endContainer||i.collapse(!0)):(i.endContainer=t,i.endOffset=n,i.startContainer||i.collapse(!1)),r(i),i}function o(e,t){var n=e.startContainer,r=e.endContainer,i=e.startOffset,s=e.endOffset,o=e.document,u=o.createDocumentFragment(),a,f;n.nodeType==1&&(n=n.childNodes[i]||(a=n.appendChild(o.createTextNode("")))),r.nodeType==1&&(r=r.childNodes[s]||(f=r.appendChild(o.createTextNode(""))));if(n===r&&n.nodeType==3)return u.appendChild(o.createTextNode(n.substringData(i,s-i))),t&&(n.deleteData(i,s-i),e.collapse(!0)),u;var l,c,h=u,p=domUtils.findParents(n,!0),d=domUtils.findParents(r,!0);for(var v=0;p[v]==d[v];)v++;for(var m=v,g;g=p[m];m++){l=g.nextSibling,g==n?a||(e.startContainer.nodeType==3?(h.appendChild(o.createTextNode(n.nodeValue.slice(i))),t&&n.deleteData(i,n.nodeValue.length-i)):h.appendChild(t?n:n.cloneNode(!0))):(c=g.cloneNode(!1),h.appendChild(c));while(l){if(l===r||l===d[m])break;g=l.nextSibling,h.appendChild(t?l:l.cloneNode(!0)),l=g}h=c}h=u,p[v]||(h.appendChild(p[v-1].cloneNode(!1)),h=h.firstChild);for(var m=v,y;y=d[m];m++){l=y.previousSibling,y==r?!f&&e.endContainer.nodeType==3&&(h.appendChild(o.createTextNode(r.substringData(0,s))),t&&r.deleteData(0,s)):(c=y.cloneNode(!1),h.appendChild(c));if(m!=v||!p[v])while(l){if(l===n)break;y=l.previousSibling,h.insertBefore(t?l:l.cloneNode(!0),h.firstChild),l=y}h=c}return t&&e.setStartBefore(d[v]?p[v]?d[v]:p[v-1]:d[v-1]).collapse(!0),a&&domUtils.remove(a),f&&domUtils.remove(f),u}function a(e,t){try{if(n&&domUtils.inDoc(n,e))if(!n.nodeValue.replace(fillCharReg,"").length){var r=n.parentNode;domUtils.remove(n);while(r&&domUtils.isEmptyInlineElement(r)&&(browser.safari?!(domUtils.getPosition(r,t)&domUtils.POSITION_CONTAINS):!r.contains(t)))n=r.parentNode,domUtils.remove(r),r=n}else n.nodeValue=n.nodeValue.replace(fillCharReg,"")}catch(i){}}function f(e,t){var n;e=e[t];while(e&&domUtils.isFillChar(e))n=e[t],domUtils.remove(e),e=n}var e=0,t=domUtils.fillChar,n,u=dom.Range=function(e){var t=this;t.startContainer=t.startOffset=t.endContainer=t.endOffset=null,t.document=e,t.collapsed=!0};u.prototype={cloneContents:function(){return this.collapsed?null:o(this,0)},deleteContents:function(){var e;return this.collapsed||o(this,1),browser.webkit&&(e=this.startContainer,e.nodeType==3&&!e.nodeValue.length&&(this.setStartBefore(e).collapse(!0),domUtils.remove(e))),this},extractContents:function(){return this.collapsed?null:o(this,2)},setStart:function(e,t){return s(!0,e,t,this)},setEnd:function(e,t){return s(!1,e,t,this)},setStartAfter:function(e){return this.setStart(e.parentNode,domUtils.getNodeIndex(e)+1)},setStartBefore:function(e){return this.setStart(e.parentNode,domUtils.getNodeIndex(e))},setEndAfter:function(e){return this.setEnd(e.parentNode,domUtils.getNodeIndex(e)+1)},setEndBefore:function(e){return this.setEnd(e.parentNode,domUtils.getNodeIndex(e))},setStartAtFirst:function(e){return this.setStart(e,0)},setStartAtLast:function(e){return this.setStart(e,e.nodeType==3?e.nodeValue.length:e.childNodes.length)},setEndAtFirst:function(e){return this.setEnd(e,0)},setEndAtLast:function(e){return this.setEnd(e,e.nodeType==3?e.nodeValue.length:e.childNodes.length)},selectNode:function(e){return this.setStartBefore(e).setEndAfter(e)},selectNodeContents:function(e){return this.setStart(e,0).setEndAtLast(e)},cloneRange:function(){var e=this;return(new u(e.document)).setStart(e.startContainer,e.startOffset).setEnd(e.endContainer,e.endOffset)},collapse:function(e){var t=this;return e?(t.endContainer=t.startContainer,t.endOffset=t.startOffset):(t.startContainer=t.endContainer,t.startOffset=t.endOffset),t.collapsed=!0,t},shrinkBoundary:function(e){function i(e){return e.nodeType==1&&!domUtils.isBookmarkNode(e)&&!dtd.$empty[e.tagName]&&!dtd.$nonChild[e.tagName]}var t=this,n,r=t.collapsed;while(t.startContainer.nodeType==1&&(n=t.startContainer.childNodes[t.startOffset])&&i(n))t.setStart(n,0);if(r)return t.collapse(!0);if(!e)while(t.endContainer.nodeType==1&&t.endOffset>0&&(n=t.endContainer.childNodes[t.endOffset-1])&&i(n))t.setEnd(n,n.childNodes.length);return t},getCommonAncestor:function(e,t){var n=this,r=n.startContainer,s=n.endContainer;if(r===s){if(e&&i(this)){r=r.childNodes[n.startOffset];if(r.nodeType==1)return r}return t&&r.nodeType==3?r.parentNode:r}return domUtils.getCommonAncestor(r,s)},trimBoundary:function(e){this.txtToElmBoundary();var t=this.startContainer,n=this.startOffset,r=this.collapsed,i=this.endContainer;if(t.nodeType==3){if(n==0)this.setStartBefore(t);else if(n>=t.nodeValue.length)this.setStartAfter(t);else{var s=domUtils.split(t,n);t===i?this.setEnd(s,this.endOffset-n):t.parentNode===i&&(this.endOffset+=1),this.setStartBefore(s)}if(r)return this.collapse(!0)}return e||(n=this.endOffset,i=this.endContainer,i.nodeType==3&&(n==0?this.setEndBefore(i):(n<i.nodeValue.length&&domUtils.split(i,n),this.setEndAfter(i)))),this},txtToElmBoundary:function(e){function t(e,t){var n=e[t+"Container"],r=e[t+"Offset"];n.nodeType==3&&(r?r>=n.nodeValue.length&&e["set"+t.replace(/(\w)/,function(e){return e.toUpperCase()})+"After"](n):e["set"+t.replace(/(\w)/,function(e){return e.toUpperCase()})+"Before"](n))}if(e||!this.collapsed)t(this,"start"),t(this,"end");return this},insertNode:function(e){var t=e,n=1;e.nodeType==11&&(t=e.firstChild,n=e.childNodes.length),this.trimBoundary(!0);var r=this.startContainer,i=this.startOffset,s=r.childNodes[i];return s?r.insertBefore(e,s):r.appendChild(e),t.parentNode===this.endContainer&&(this.endOffset=this.endOffset+n),this.setStartBefore(t)},setCursor:function(e,t){return this.collapse(!e).select(t)},createBookmark:function(t,n){var r,i=this.document.createElement("span");return i.style.cssText="display:none;line-height:0px;",i.appendChild(this.document.createTextNode("â")),i.id="_baidu_bookmark_start_"+(n?"":e++),this.collapsed||(r=i.cloneNode(!0),r.id="_baidu_bookmark_end_"+(n?"":e++)),this.insertNode(i),r&&this.collapse().insertNode(r).setEndBefore(r),this.setStartAfter(i),{start:t?i.id:i,end:r?t?r.id:r:null,id:t}},moveToBookmark:function(e){var t=e.id?this.document.getElementById(e.start):e.start,n=e.end&&e.id?this.document.getElementById(e.end):e.end;return this.setStartBefore(t),domUtils.remove(t),n?(this.setEndBefore(n),domUtils.remove(n)):this.collapse(!0),this},enlarge:function(e,t){var n=domUtils.isBody,r,i,s=this.document.createTextNode("");if(e){i=this.startContainer,i.nodeType==1?i.childNodes[this.startOffset]?r=i=i.childNodes[this.startOffset]:(i.appendChild(s),r=i=s):r=i;for(;;){if(domUtils.isBlockElm(i)){i=r;while((r=i.previousSibling)&&!domUtils.isBlockElm(r))i=r;this.setStartBefore(i);break}r=i,i=i.parentNode}i=this.endContainer,i.nodeType==1?((r=i.childNodes[this.endOffset])?i.insertBefore(s,r):i.appendChild(s),r=i=s):r=i;for(;;){if(domUtils.isBlockElm(i)){i=r;while((r=i.nextSibling)&&!domUtils.isBlockElm(r))i=r;this.setEndAfter(i);break}r=i,i=i.parentNode}s.parentNode===this.endContainer&&this.endOffset--,domUtils.remove(s)}if(!this.collapsed){while(this.startOffset==0){if(t&&t(this.startContainer))break;if(n(this.startContainer))break;this.setStartBefore(this.startContainer)}while(this.endOffset==(this.endContainer.nodeType==1?this.endContainer.childNodes.length:this.endContainer.nodeValue.length)){if(t&&t(this.endContainer))break;if(n(this.endContainer))break;this.setEndAfter(this.endContainer)}}return this},enlargeToBlockElm:function(e){while(!domUtils.isBlockElm(this.startContainer))this.setStartBefore(this.startContainer);if(!e)while(!domUtils.isBlockElm(this.endContainer))this.setEndAfter(this.endContainer);return this},adjustmentBoundary:function(){if(!this.collapsed){while(!domUtils.isBody(this.startContainer)&&this.startOffset==this.startContainer[this.startContainer.nodeType==3?"nodeValue":"childNodes"].length&&this.startContainer[this.startContainer.nodeType==3?"nodeValue":"childNodes"].length)this.setStartAfter(this.startContainer);while(!domUtils.isBody(this.endContainer)&&!this.endOffset&&this.endContainer[this.endContainer.nodeType==3?"nodeValue":"childNodes"].length)this.setEndBefore(this.endContainer)}return this},applyInlineStyle:function(e,t,n){if(this.collapsed)return this;this.trimBoundary().enlarge(!1,function(e){return e.nodeType==1&&domUtils.isBlockElm(e)}).adjustmentBoundary();var r=this.createBookmark(),i=r.end,s=function(e){return e.nodeType==1?e.tagName.toLowerCase()!="br":!domUtils.isWhitespace(e)},o=domUtils.getNextDomNode(r.start,!1,s),u,a,f=this.cloneRange();while(o&&domUtils.getPosition(o,i)&domUtils.POSITION_PRECEDING)if(o.nodeType==3||dtd[e][o.tagName]){f.setStartBefore(o),u=o;while(u&&(u.nodeType==3||dtd[e][u.tagName])&&u!==i)a=u,u=domUtils.getNextDomNode(u,u.nodeType==1,null,function(t){return dtd[e][t.tagName]});var l=f.setEndAfter(a).extractContents(),c;if(n&&n.length>0){var h,p;p=h=n[0].cloneNode(!1);for(var d=1,v;v=n[d++];)h.appendChild(v.cloneNode(!1)),h=h.firstChild;c=h}else c=f.document.createElement(e);t&&domUtils.setAttributes(c,t),c.appendChild(l),f.insertNode(n?p:c);var m;e=="span"&&t.style&&/text\-decoration/.test(t.style)&&(m=domUtils.findParentByTagName(c,"a",!0))?(domUtils.setAttributes(m,t),domUtils.remove(c,!0),c=m):(domUtils.mergeSibling(c),domUtils.clearEmptySibling(c)),domUtils.mergeChild(c,t),o=domUtils.getNextDomNode(c,!1,s),domUtils.mergeToParent(c);if(u===i)break}else o=domUtils.getNextDomNode(o,!0,s);return this.moveToBookmark(r)},removeInlineStyle:function(e){if(this.collapsed)return this;e=utils.isArray(e)?e:[e],this.shrinkBoundary().adjustmentBoundary();var t=this.startContainer,n=this.endContainer;for(;;){if(t.nodeType==1){if(utils.indexOf(e,t.tagName.toLowerCase())>-1)break;if(t.tagName.toLowerCase()=="body"){t=null;break}}t=t.parentNode}for(;;){if(n.nodeType==1){if(utils.indexOf(e,n.tagName.toLowerCase())>-1)break;if(n.tagName.toLowerCase()=="body"){n=null;break}}n=n.parentNode}var r=this.createBookmark(),i,s;t&&(s=this.cloneRange().setEndBefore(r.start).setStartBefore(t),i=s.extractContents(),s.insertNode(i),domUtils.clearEmptySibling(t,!0),t.parentNode.insertBefore(r.start,t)),n&&(s=this.cloneRange().setStartAfter(r.end).setEndAfter(n),i=s.extractContents(),s.insertNode(i),domUtils.clearEmptySibling(n,!1,!0),n.parentNode.insertBefore(r.end,n.nextSibling));var o=domUtils.getNextDomNode(r.start,!1,function(e){return e.nodeType==1}),u;while(o&&o!==r.end)u=domUtils.getNextDomNode(o,!0,function(e){return e.nodeType==1}),utils.indexOf(e,o.tagName.toLowerCase())>-1&&domUtils.remove(o,!0),o=u;return this.moveToBookmark(r)},getClosedNode:function(){var e;if(!this.collapsed){var t=this.cloneRange().adjustmentBoundary().shrinkBoundary();if(i(t)){var n=t.startContainer.childNodes[t.startOffset];n&&n.nodeType==1&&(dtd.$empty[n.tagName]||dtd.$nonChild[n.tagName])&&(e=n)}}return e},select:browser.ie?function(e,r){var i;this.collapsed||this.shrinkBoundary();var s=this.getClosedNode();if(s&&!r){try{i=this.document.body.createControlRange(),i.addElement(s),i.select()}catch(o){}return this}var u=this.createBookmark(),l=u.start,c;i=this.document.body.createTextRange(),i.moveToElementText(l),i.moveStart("character",1);if(!this.collapsed){var h=this.document.body.createTextRange();c=u.end,h.moveToElementText(c),i.setEndPoint("EndToEnd",h)}else if(!e&&this.startContainer.nodeType!=3){var p=this.document.createTextNode(t),d=this.document.createElement("span");d.appendChild(this.document.createTextNode(t)),l.parentNode.insertBefore(d,l),l.parentNode.insertBefore(p,l),a(this.document,p),n=p,f(d,"previousSibling"),f(l,"nextSibling"),i.moveStart("character",-1),i.collapse(!0)}this.moveToBookmark(u),d&&domUtils.remove(d);try{i.select()}catch(o){}return this}:function(e){function r(e){function t(t,n,r){t.nodeType==3&&t.nodeValue.length<n&&(e[r+"Offset"]=t.nodeValue.length)}t(e.startContainer,e.startOffset,"start"),t(e.endContainer,e.endOffset,"end")}var i=domUtils.getWindow(this.document),s=i.getSelection(),o;browser.gecko?this.document.body.focus():i.focus();if(s){s.removeAllRanges();if(this.collapsed&&!e){var u=this.startContainer,l=u;u.nodeType==1&&(l=u.childNodes[this.startOffset]),(u.nodeType!=3||!this.startOffset)&&(l?!l.previousSibling||l.previousSibling.nodeType!=3:!u.lastChild||u.lastChild.nodeType!=3)&&(o=this.document.createTextNode(t),this.insertNode(o),a(this.document,o),f(o,"previousSibling"),f(o,"nextSibling"),n=o,this.setStart(o,browser.webkit?1:0).collapse(!0))}var c=this.document.createRange();if(this.collapsed&&browser.opera&&this.startContainer.nodeType==1){var l=this.startContainer.childNodes[this.startOffset];if(!l)l=this.startContainer.lastChild,l&&domUtils.isBr(l)&&this.setStartBefore(l).collapse(!0);else{while(l&&domUtils.isBlockElm(l)){if(l.nodeType!=1||!l.childNodes[0])break;l=l.childNodes[0]}l&&this.setStartBefore(l).collapse(!0)}}r(this),c.setStart(this.startContainer,this.startOffset),c.setEnd(this.endContainer,this.endOffset),s.addRange(c)}return this},scrollToView:function(e,t){e=e?window:domUtils.getWindow(this.document);var n=this,r=n.document.createElement("span");return r.innerHTML="&nbsp;",n.cloneRange().insertNode(r),domUtils.scrollToView(r,e,t),domUtils.remove(r),n},inFillChar:function(){var e=this.startContainer;return this.collapsed&&e.nodeType==3&&e.nodeValue.replace(new RegExp("^"+domUtils.fillChar),"").length+1==e.nodeValue.length?!0:!1},createAddress:function(e,t){function i(e){var n=e?r.startContainer:r.endContainer,i=domUtils.findParents(n,!0,function(e){return!domUtils.isBody(e)}),s=[];for(var o=0,u;u=i[o++];)s.push(domUtils.getNodeIndex(u,t));var a=0;if(t)if(n.nodeType==3){var f=n.previousSibling;while(f&&f.nodeType==3)a+=f.nodeValue.replace(fillCharReg,"").length,f=f.previousSibling;a+=e?r.startOffset:r.endOffset}else{n=n.childNodes[e?r.startOffset:r.endOffset];if(n)a=domUtils.getNodeIndex(n,t);else{n=e?r.startContainer:r.endContainer;var l=n.firstChild;while(l){if(domUtils.isFillChar(l)){l=l.nextSibling;continue}a++;if(l.nodeType==3)while(l&&l.nodeType==3)l=l.nextSibling;else l=l.nextSibling}}}else a=e?domUtils.isFillChar(n)?0:r.startOffset:r.endOffset;return a<0&&(a=0),s.push(a),s}var n={},r=this;return n.startAddress=i(!0),e||(n.endAddress=r.collapsed?[].concat(n.startAddress):i()),n},moveToAddress:function(e,t){function r(e,t){var r=n.document.body,i,s;for(var o=0,u,a=e.length;o<a;o++){u=e[o],i=r,r=r.childNodes[u];if(!r){s=u;break}}t?r?n.setStartBefore(r):n.setStart(i,s):r?n.setEndBefore(r):n.setEnd(i,s)}var n=this;return r(e.startAddress,!0),!t&&e.endAddress&&r(e.endAddress),n},equals:function(e){for(var t in this)if(this.hasOwnProperty(t)&&this[t]!==e[t])return!1;return!0},traversal:function(e,t){if(this.collapsed)return this;var n=this.createBookmark(),r=n.end,i=domUtils.getNextDomNode(n.start,!1,t);while(i&&i!==r&&domUtils.getPosition(i,r)&domUtils.POSITION_PRECEDING){var s=domUtils.getNextDomNode(i,!1,t);e(i),i=s}return this.moveToBookmark(n)}}})(),function(){function e(e,t){var n=domUtils.getNodeIndex;e=e.duplicate(),e.collapse(t);var r=e.parentElement();if(!r.hasChildNodes())return{container:r,offset:0};var i=r.children,s,o=e.duplicate(),u=0,a=i.length-1,f=-1,l;while(u<=a){f=Math.floor((u+a)/2),s=i[f],o.moveToElementText(s);var c=o.compareEndPoints("StartToStart",e);if(c>0)a=f-1;else{if(!(c<0))return{container:r,offset:n(s)};u=f+1}}if(f==-1){o.moveToElementText(r),o.setEndPoint("StartToStart",e),l=o.text.replace(/(\r\n|\r)/g,"\n").length,i=r.childNodes;if(!l)return s=i[i.length-1],{container:s,offset:s.nodeValue.length};var h=i.length;while(l>0)l-=i[--h].nodeValue.length;return{container:i[h],offset:-l}}o.collapse(c>0),o.setEndPoint(c>0?"StartToStart":"EndToStart",e),l=o.text.replace(/(\r\n|\r)/g,"\n").length;if(!l)return dtd.$empty[s.tagName]||dtd.$nonChild[s.tagName]?{container:r,offset:n(s)+(c>0?0:1)}:{container:s,offset:c>0?0:s.childNodes.length};while(l>0)try{var p=s;s=s[c>0?"previousSibling":"nextSibling"],l-=s.nodeValue.length}catch(d){return{container:r,offset:n(p)}}return{container:s,offset:c>0?-l:s.nodeValue.length+l}}function t(t,n){if(t.item)n.selectNode(t.item(0));else{var r=e(t,!0);n.setStart(r.container,r.offset),t.compareEndPoints("StartToEnd",t)!=0&&(r=e(t,!1),n.setEnd(r.container,r.offset))}return n}function n(e){var t;try{t=e.getNative().createRange()}catch(n){return null}var r=t.item?t.item(0):t.parentElement();return(r.ownerDocument||r)===e.document?t:null}var r=dom.Selection=function(e){var t=this,r;t.document=e,browser.ie9below&&(r=domUtils.getWindow(e).frameElement,domUtils.on(r,"beforedeactivate",function(){t._bakIERange=t.getIERange()}),domUtils.on(r,"activate",function(){try{!n(t)&&t._bakIERange&&t._bakIERange.select()}catch(e){}t._bakIERange=null})),r=e=null};r.prototype={rangeInBody:function(e,t){var n=browser.ie9below||t?e.item?e.item():e.parentElement():e.startContainer;return n===this.document.body||domUtils.inDoc(n,this.document)},getNative:function(){var e=this.document;try{return e?browser.ie9below?e.selection:domUtils.getWindow(e).getSelection():null}catch(t){return null}},getIERange:function(){var e=n(this);return!e&&this._bakIERange?this._bakIERange:e},cache:function(){this.clear(),this._cachedRange=this.getRange(),this._cachedStartElement=this.getStart(),this._cachedStartElementPath=this.getStartElementPath()},getStartElementPath:function(){if(this._cachedStartElementPath)return this._cachedStartElementPath;var e=this.getStart();return e?domUtils.findParents(e,!0,null,!0):[]},clear:function(){this._cachedStartElementPath=this._cachedRange=this._cachedStartElement=null},isFocus:function(){try{if(browser.ie9below){var e=n(this);return!!e&&!!this.rangeInBody(e)}return!!this.getNative().rangeCount}catch(t){return!1}},getRange:function(){function n(t){var n=e.document.body.firstChild,r=t.collapsed;while(n&&n.firstChild)t.setStart(n,0),n=n.firstChild;t.startContainer||t.setStart(e.document.body,0),r&&t.collapse(!0)}var e=this;if(e._cachedRange!=null)return this._cachedRange;var r=new baidu.editor.dom.Range(e.document);if(browser.ie9below){var i=e.getIERange();if(i)try{t(i,r)}catch(s){n(r)}else n(r)}else{var o=e.getNative();if(o&&o.rangeCount){var u=o.getRangeAt(0),a=o.getRangeAt(o.rangeCount-1);r.setStart(u.startContainer,u.startOffset).setEnd(a.endContainer,a.endOffset),r.collapsed&&domUtils.isBody(r.startContainer)&&!r.startOffset&&n(r)}else{if(this._bakRange&&domUtils.inDoc(this._bakRange.startContainer,this.document))return this._bakRange;n(r)}}return this._bakRange=r},getStart:function(){if(this._cachedStartElement)return this._cachedStartElement;var e=browser.ie9below?this.getIERange():this.getRange(),t,n,r,i;if(browser.ie9below){if(!e)return this.document.body.firstChild;if(e.item)return e.item(0);t=e.duplicate(),t.text.length>0&&t.moveStart("character",1),t.collapse(1),n=t.parentElement(),i=r=e.parentElement();while(r=r.parentNode)if(r==n){n=i;break}}else{e.shrinkBoundary(),n=e.startContainer,n.nodeType==1&&n.hasChildNodes()&&(n=n.childNodes[Math.min(n.childNodes.length-1,e.startOffset)]);if(n.nodeType==3)return n.parentNode}return n},getText:function(){var e,t;return this.isFocus()&&(e=this.getNative())?(t=browser.ie9below?e.createRange():e.getRangeAt(0),browser.ie9below?t.text:t.toString()):""},clearRange:function(){this.getNative()[browser.ie9below?"empty":"removeAllRanges"]()}}}(),function(){function n(e,t){var n;if(t.textarea)if(utils.isString(t.textarea)){for(var r=0,i,s=domUtils.getElementsByTagName(e,"textarea");i=s[r++];)if(i.id=="ueditor_textarea_"+t.options.textarea){n=i;break}}else n=t.textarea;n||(e.appendChild(n=domUtils.createElement(document,"textarea",{name:t.options.textarea,id:"ueditor_textarea_"+t.options.textarea,style:"display:none"})),t.textarea=n),!n.getAttribute("name")&&n.setAttribute("name",t.options.textarea),n.value=t.hasContents()?t.options.allHtmlEnabled?t.getAllHtml():t.getContent(null,null,!0):""}function r(e){for(var t in UE.plugins)UE.plugins[t].call(e)}function i(e){for(var t in e)return t}function s(e){e.langIsReady=!0,e.fireEvent("langReady")}var e=0,t,o=UE.Editor=function(t){var n=this;n.uid=e++,EventBase.call(n),n.commands={},n.options=utils.extend(utils.clone(t||{}),UEDITOR_CONFIG,!0),n.shortcutkeys={},n.inputRules=[],n.outputRules=[],n.setOpt(o.defaultOptions(n)),n.loadServerConfig(),utils.isEmptyObject(UE.I18N)?utils.loadFile(document,{src:n.options.langPath+n.options.lang+"/"+n.options.lang+".js",tag:"script",type:"text/javascript",defer:"defer"},function(){UE.plugin.load(n),s(n)}):(n.options.lang=i(UE.I18N),UE.plugin.load(n),s(n)),UE.instants["ueditorInstant"+n.uid]=n};o.prototype={registerCommand:function(e,t){this.commands[e]=t},ready:function(e){var t=this;e&&(t.isReady?e.apply(t):t.addListener("ready",e))},setOpt:function(e,t){var n={};utils.isString(e)?n[e]=t:n=e,utils.extend(this.options,n,!0)},getOpt:function(e){return this.options[e]},destroy:function(){var e=this;e.fireEvent("destroy");var t=e.container.parentNode,n=e.textarea;n?n.style.display="":(n=document.createElement("textarea"),t.parentNode.insertBefore(n,t)),n.style.width=e.iframe.offsetWidth+"px",n.style.height=e.iframe.offsetHeight+"px",n.value=e.getContent(),n.id=e.key,t.innerHTML="",domUtils.remove(t);var r=e.key;for(var i in e)e.hasOwnProperty(i)&&delete this[i];UE.delEditor(r)},render:function(e){var t=this,n=t.options,r=function(t){return parseInt(domUtils.getComputedStyle(e,t))};utils.isString(e)&&(e=document.getElementById(e));if(e){n.initialFrameWidth?n.minFrameWidth=n.initialFrameWidth:n.minFrameWidth=n.initialFrameWidth=e.offsetWidth,n.initialFrameHeight?n.minFrameHeight=n.initialFrameHeight:n.initialFrameHeight=n.minFrameHeight=e.offsetHeight,e.style.width=/%$/.test(n.initialFrameWidth)?"100%":n.initialFrameWidth-r("padding-left")-r("padding-right")+"px",e.style.height=/%$/.test(n.initialFrameHeight)?"100%":n.initialFrameHeight-r("padding-top")-r("padding-bottom")+"px",e.style.zIndex=n.zIndex;var i=(ie&&browser.version<9?"":"<!DOCTYPE html>")+"<html xmlns='http://www.w3.org/1999/xhtml' class='view' ><head>"+"<style type='text/css'>"+".view{padding:0;word-wrap:break-word;cursor:text;height:90%;}\n"+"body{margin:8px;font-family:sans-serif;font-size:16px;}"+"p{margin:5px 0;}</style>"+(n.iframeCssUrl?"<link rel='stylesheet' type='text/css' href='"+utils.unhtml(n.iframeCssUrl)+"'/>":"")+(n.initialStyle?"<style>"+n.initialStyle+"</style>":"")+"</head><body class='view' ></body>"+"<script type='text/javascript' "+(ie?"defer='defer'":"")+" id='_initialScript'>"+"setTimeout(function(){editor = window.parent.UE.instants['ueditorInstant"+t.uid+"'];editor._setup(document);},0);"+"var _tmpScript = document.getElementById('_initialScript');_tmpScript.parentNode.removeChild(_tmpScript);</script></html>";e.appendChild(domUtils.createElement(document,"iframe",{id:"ueditor_"+t.uid,width:"100%",height:"100%",frameborder:"0",src:"javascript:void(function(){document.open();"+(n.customDomain&&document.domain!=location.hostname?'document.domain="'+document.domain+'";':"")+'document.write("'+i+'");document.close();}())'})),e.style.overflow="hidden",setTimeout(function(){/%$/.test(n.initialFrameWidth)&&(n.minFrameWidth=n.initialFrameWidth=e.offsetWidth),/%$/.test(n.initialFrameHeight)&&(n.minFrameHeight=n.initialFrameHeight=e.offsetHeight,e.style.height=n.initialFrameHeight+"px")})}},_setup:function(e){var t=this,r=t.options;ie?(e.body.disabled=!0,e.body.contentEditable=!0,e.body.disabled=!1):e.body.contentEditable=!0,e.body.spellcheck=!1,t.document=e,t.window=e.defaultView||e.parentWindow,t.iframe=t.window.frameElement,t.body=e.body,t.selection=new dom.Selection(e);var i;browser.gecko&&(i=this.selection.getNative())&&i.removeAllRanges(),this._initEvents();for(var s=this.iframe.parentNode;!domUtils.isBody(s);s=s.parentNode)if(s.tagName=="FORM"){t.form=s,t.options.autoSyncData?domUtils.on(t.window,"blur",function(){n(s,t)}):domUtils.on(s,"submit",function(){n(this,t)});break}if(r.initialContent)if(r.autoClearinitialContent){var o=t.execCommand;t.execCommand=function(){return t.fireEvent("firstBeforeExecCommand"),o.apply(t,arguments)},this._setDefaultContent(r.initialContent)}else this.setContent(r.initialContent,!1,!0);domUtils.isEmptyNode(t.body)&&(t.body.innerHTML="<p>"+(browser.ie?"":"<br/>")+"</p>"),r.focus&&setTimeout(function(){t.focus(t.options.focusInEnd),!t.options.autoClearinitialContent&&t._selectionChange()},0),t.container||(t.container=this.iframe.parentNode),r.fullscreen&&t.ui&&t.ui.setFullScreen(!0);try{t.document.execCommand("2D-position",!1,!1)}catch(u){}try{t.document.execCommand("enableInlineTableEditing",!1,!1)}catch(u){}try{t.document.execCommand("enableObjectResizing",!1,!1)}catch(u){}t._bindshortcutKeys(),t.isReady=1,t.fireEvent("ready"),r.onready&&r.onready.call(t),browser.ie9below||domUtils.on(t.window,["blur","focus"],function(e){if(e.type=="blur"){t._bakRange=t.selection.getRange();try{t._bakNativeRange=t.selection.getNative().getRangeAt(0),t.selection.getNative().removeAllRanges()}catch(e){t._bakNativeRange=null}}else try{t._bakRange&&t._bakRange.select()}catch(e){}}),browser.gecko&&browser.version<=10902&&(t.body.contentEditable=!1,setTimeout(function(){t.body.contentEditable=!0},100),setInterval(function(){t.body.style.height=t.iframe.offsetHeight-20+"px"},100)),!r.isShow&&t.setHide(),r.readonly&&t.setDisabled()},sync:function(e){var t=this,r=e?document.getElementById(e):domUtils.findParent(t.iframe.parentNode,function(e){return e.tagName=="FORM"},!0);r&&n(r,t)},setHeight:function(e,t){e!==parseInt(this.iframe.parentNode.style.height)&&(this.iframe.parentNode.style.height=e+"px"),!t&&(this.options.minFrameHeight=this.options.initialFrameHeight=e),this.body.style.height=e+"px",!t&&this.trigger("setHeight")},addshortcutkey:function(e,t){var n={};t?n[e]=t:n=e,utils.extend(this.shortcutkeys,n)},_bindshortcutKeys:function(){var e=this,t=this.shortcutkeys;e.addListener("keydown",function(n,r){var i=r.keyCode||r.which;for(var s in t){var o=t[s].split(",");for(var u=0,a;a=o[u++];){a=a.split(":");var f=a[0],l=a[1];if(/^(ctrl)(\+shift)?\+(\d+)$/.test(f.toLowerCase())||/^(\d+)$/.test(f))if((RegExp.$1=="ctrl"?r.ctrlKey||r.metaKey:0)&&(RegExp.$2!=""?r[RegExp.$2.slice(1)+"Key"]:1)&&i==RegExp.$3||i==RegExp.$1)e.queryCommandState(s,l)!=-1&&e.execCommand(s,l),domUtils.preventDefault(r)}}})},getContent:function(e,t,n,r,i){var s=this;e&&utils.isFunction(e)&&(t=e,e="");if(t?!t():!this.hasContents())return"";s.fireEvent("beforegetcontent");var o=UE.htmlparser(s.body.innerHTML,r);return s.filterOutputRule(o),s.fireEvent("aftergetcontent",e,o),o.toHtml(i)},getAllHtml:function(){var e=this,t=[],n="";e.fireEvent("getAllHtml",t);if(browser.ie&&browser.version>8){var r="";utils.each(e.document.styleSheets,function(e){r+=e.href?'<link rel="stylesheet" type="text/css" href="'+e.href+'" />':"<style>"+e.cssText+"</style>"}),utils.each(e.document.getElementsByTagName("script"),function(e){r+=e.outerHTML})}return"<html><head>"+(e.options.charset?'<meta http-equiv="Content-Type" content="text/html; charset='+e.options.charset+'"/>':"")+(r||e.document.getElementsByTagName("head")[0].innerHTML)+t.join("\n")+"</head>"+"<body "+(ie&&browser.version<9?'class="view"':"")+">"+e.getContent(null,null,!0)+"</body></html>"},getPlainTxt:function(){var e=new RegExp(domUtils.fillChar,"g"),t=this.body.innerHTML.replace(/[\n\r]/g,"");return t=t.replace(/<(p|div)[^>]*>(<br\/?>|&nbsp;)<\/\1>/gi,"\n").replace(/<br\/?>/gi,"\n").replace(/<[^>/]+>/g,"").replace(/(\n)?<\/([^>]+)>/g,function(e,t,n){return dtd.$block[n]?"\n":t?t:""}),t.replace(e,"").replace(/\u00a0/g," ").replace(/&nbsp;/g," ")},getContentTxt:function(){var e=new RegExp(domUtils.fillChar,"g");return this.body[browser.ie?"innerText":"textContent"].replace(e,"").replace(/\u00a0/g," ")},setContent:function(e,t,r){function o(e){return e.tagName=="DIV"&&e.getAttribute("cdata_tag")}var i=this;i.fireEvent("beforesetcontent",e);var s=UE.htmlparser(e);i.filterInputRule(s),e=s.toHtml(),i.body.innerHTML=(t?i.body.innerHTML:"")+e;if(i.options.enterTag=="p"){var u=this.body.firstChild,a;if(!u||u.nodeType==1&&(dtd.$cdata[u.tagName]||o(u)||domUtils.isCustomeNode(u))&&u===this.body.lastChild)this.body.innerHTML="<p>"+(browser.ie?"&nbsp;":"<br/>")+"</p>"+this.body.innerHTML;else{var f=i.document.createElement("p");while(u){while(u&&(u.nodeType==3||u.nodeType==1&&dtd.p[u.tagName]&&!dtd.$cdata[u.tagName]))a=u.nextSibling,f.appendChild(u),u=a;if(f.firstChild){if(!u){i.body.appendChild(f);break}u.parentNode.insertBefore(f,u),f=i.document.createElement("p")}u=u.nextSibling}}}i.fireEvent("aftersetcontent"),i.fireEvent("contentchange"),!r&&i._selectionChange(),i._bakRange=i._bakIERange=i._bakNativeRange=null;var l;browser.gecko&&(l=this.selection.getNative())&&l.removeAllRanges(),i.options.autoSyncData&&i.form&&n(i.form,i)},focus:function(e){try{var t=this,n=t.selection.getRange();if(e){var r=t.body.lastChild;r&&r.nodeType==1&&!dtd.$empty[r.tagName]&&(domUtils.isEmptyBlock(r)?n.setStartAtFirst(r):n.setStartAtLast(r),n.collapse(!0)),n.setCursor(!0)}else{if(!n.collapsed&&domUtils.isBody(n.startContainer)&&n.startOffset==0){var r=t.body.firstChild;r&&r.nodeType==1&&!dtd.$empty[r.tagName]&&n.setStartAtFirst(r).collapse(!0)}n.select(!0)}this.fireEvent("focus selectionchange")}catch(i){}},isFocus:function(){return this.selection.isFocus()},blur:function(){var e=this.selection.getNative();if(e.empty&&browser.ie){var t=document.body.createTextRange();t.moveToElementText(document.body),t.collapse(!0),t.select(),e.empty()}else e.removeAllRanges()},_initEvents:function(){var e=this,t=e.document,n=e.window;e._proxyDomEvent=utils.bind(e._proxyDomEvent,e),domUtils.on(t,["click","contextmenu","mousedown","keydown","keyup","keypress","mouseup","mouseover","mouseout","selectstart"],e._proxyDomEvent),domUtils.on(n,["focus","blur"],e._proxyDomEvent),domUtils.on(e.body,"drop",function(t){browser.gecko&&t.stopPropagation&&t.stopPropagation(),e.fireEvent("contentchange")}),domUtils.on(t,["mouseup","keydown"],function(t){if(t.type=="keydown"&&(t.ctrlKey||t.metaKey||t.shiftKey||t.altKey))return;if(t.button==2)return;e._selectionChange(250,t)})},_proxyDomEvent:function(e){return this.fireEvent("before"+e.type.replace(/^on/,"").toLowerCase())===!1?!1:this.fireEvent(e.type.replace(/^on/,""),e)===!1?!1:this.fireEvent("after"+e.type.replace(/^on/,"").toLowerCase())},_selectionChange:function(e,n){var r=this,i=!1,s,o;if(browser.ie&&browser.version<9&&n&&n.type=="mouseup"){var u=this.selection.getRange();u.collapsed||(i=!0,s=n.clientX,o=n.clientY)}clearTimeout(t),t=setTimeout(function(){if(!r.selection||!r.selection.getNative())return;var e;if(i&&r.selection.getNative().type=="None"){e=r.document.body.createTextRange();try{e.moveToPoint(s,o)}catch(t){e=null}}var u;e&&(u=r.selection.getIERange,r.selection.getIERange=function(){return e}),r.selection.cache(),u&&(r.selection.getIERange=u),r.selection._cachedRange&&r.selection._cachedStartElement&&(r.fireEvent("beforeselectionchange"),r.fireEvent("selectionchange",!!n),r.fireEvent("afterselectionchange"),r.selection.clear())},e||50)},_callCmdFn:function(e,t){var n=t[0].toLowerCase(),r,i;r=this.commands[n]||UE.commands[n],i=r&&r[e];if((!r||!i)&&e=="queryCommandState")return 0;if(i)return i.apply(this,t)},execCommand:function(e){e=e.toLowerCase();var t=this,n,r=t.commands[e]||UE.commands[e];return!r||!r.execCommand?null:(!r.notNeedUndo&&!t.__hasEnterExecCommand?(t.__hasEnterExecCommand=!0,t.queryCommandState.apply(t,arguments)!=-1&&(t.fireEvent("saveScene"),t.fireEvent.apply(t,["beforeexeccommand",e].concat(arguments)),n=this._callCmdFn("execCommand",arguments),t.fireEvent.apply(t,["afterexeccommand",e].concat(arguments)),t.fireEvent("saveScene")),t.__hasEnterExecCommand=!1):(n=this._callCmdFn("execCommand",arguments),!t.__hasEnterExecCommand&&!r.ignoreContentChange&&!t._ignoreContentChange&&t.fireEvent("contentchange")),!t.__hasEnterExecCommand&&!r.ignoreContentChange&&!t._ignoreContentChange&&t._selectionChange(),n)},queryCommandState:function(e){return this._callCmdFn("queryCommandState",arguments)},queryCommandValue:function(e){return this._callCmdFn("queryCommandValue",arguments)},hasContents:function(e){if(e)for(var t=0,n;n=e[t++];)if(this.document.getElementsByTagName(n).length>0)return!0;if(!domUtils.isEmptyBlock(this.body))return!0;e=["div"];for(t=0;n=e[t++];){var r=domUtils.getElementsByTagName(this.document,n);for(var i=0,s;s=r[i++];)if(domUtils.isCustomeNode(s))return!0}return!1},reset:function(){this.fireEvent("reset")},setEnabled:function(){var e=this,t;if(e.body.contentEditable=="false"){e.body.contentEditable=!0,t=e.selection.getRange();try{t.moveToBookmark(e.lastBk),delete e.lastBk}catch(n){t.setStartAtFirst(e.body).collapse(!0)}t.select(!0),e.bkqueryCommandState&&(e.queryCommandState=e.bkqueryCommandState,delete e.bkqueryCommandState),e.bkqueryCommandValue&&(e.queryCommandValue=e.bkqueryCommandValue,delete e.bkqueryCommandValue),e.fireEvent("selectionchange")}},enable:function(){return this.setEnabled()},setDisabled:function(e){var t=this;e=e?utils.isArray(e)?e:[e]:[],t.body.contentEditable=="true"&&(t.lastBk||(t.lastBk=t.selection.getRange().createBookmark(!0)),t.body.contentEditable=!1,t.bkqueryCommandState=t.queryCommandState,t.bkqueryCommandValue=t.queryCommandValue,t.queryCommandState=function(n){return utils.indexOf(e,n)!=-1?t.bkqueryCommandState.apply(t,arguments):-1},t.queryCommandValue=function(n){return utils.indexOf(e,n)!=-1?t.bkqueryCommandValue.apply(t,arguments):null},t.fireEvent("selectionchange"))},disable:function(e){return this.setDisabled(e)},_setDefaultContent:function(){function e(){var t=this;t.document.getElementById("initContent")&&(t.body.innerHTML="<p>"+(ie?"":"<br/>")+"</p>",t.removeListener("firstBeforeExecCommand focus",e),setTimeout(function(){t.focus(),t._selectionChange()},0))}return function(t){var n=this;n.body.innerHTML='<p id="initContent">'+t+"</p>",n.addListener("firstBeforeExecCommand focus",e)}}(),setShow:function(){var e=this,t=e.selection.getRange();if(e.container.style.display=="none"){try{t.moveToBookmark(e.lastBk),delete e.lastBk}catch(n){t.setStartAtFirst(e.body).collapse(!0)}setTimeout(function(){t.select(!0)},100),e.container.style.display=""}},show:function(){return this.setShow()},setHide:function(){var e=this;e.lastBk||(e.lastBk=e.selection.getRange().createBookmark(!0)),e.container.style.display="none"},hide:function(){return this.setHide()},getLang:function(e){var t=UE.I18N[this.options.lang];if(!t)throw Error("not import language file");e=(e||"").split(".");for(var n=0,r;r=e[n++];){t=t[r];if(!t)break}return t},getContentLength:function(e,t){var n=this.getContent(!1,!1,!0).length;if(e){t=(t||[]).concat(["hr","img","iframe"]),n=this.getContentTxt().replace(/[\t\r\n]+/g,"").length;for(var r=0,i;i=t[r++];)n+=this.document.getElementsByTagName(i).length}return n},addInputRule:function(e){this.inputRules.push(e)},filterInputRule:function(e){for(var t=0,n;n=this.inputRules[t++];)n.call(this,e)},addOutputRule:function(e){this.outputRules.push(e)},filterOutputRule:function(e){for(var t=0,n;n=this.outputRules[t++];)n.call(this,e)},getActionUrl:function(e){var t=this.getOpt(e)||e,n=this.getOpt("imageUrl"),r=this.getOpt("serverUrl");return!r&&n&&(r=n.replace(/^(.*[\/]).+([\.].+)$/,"$1controller$2")),r?(r=r+(r.indexOf("?")==-1?"?":"&")+"action="+(t||""),utils.formatUrl(r)):""}},utils.inherits(o,EventBase)}(),UE.Editor.defaultOptions=function(e){var t=e.options.UEDITOR_HOME_URL;return{isShow:!0,initialContent:"",initialStyle:"",autoClearinitialContent:!1,iframeCssUrl:t+"themes/iframe.css",textarea:"editorValue",focus:!1,focusInEnd:!0,autoClearEmptyNode:!0,fullscreen:!1,readonly:!1,zIndex:999,imagePopup:!0,enterTag:"p",customDomain:!1,lang:"zh-cn",langPath:t+"lang/",theme:"default",themePath:t+"themes/",allHtmlEnabled:!1,scaleEnabled:!1,tableNativeEditInFF:!1,autoSyncData:!0,fileNameFormat:"{time}{rand:6}"}},function(){UE.Editor.prototype.loadServerConfig=function(){function showErrorMsg(e){console&&console.error(e)}var me=this;setTimeout(function(){try{me.options.imageUrl&&me.setOpt("serverUrl",me.options.imageUrl.replace(/^(.*[\/]).+([\.].+)$/,"$1controller$2"));var configUrl=me.getActionUrl("config"),isJsonp=utils.isCrossDomainUrl(configUrl);me._serverConfigLoaded=!1,configUrl&&UE.ajax.request(configUrl,{method:"GET",dataType:isJsonp?"jsonp":"",onsuccess:function(r){try{var config=isJsonp?r:eval("("+r.responseText+")");utils.extend(me.options,config),me.fireEvent("serverConfigLoaded"),me._serverConfigLoaded=!0}catch(e){showErrorMsg(me.getLang("loadconfigFormatError"))}},onerror:function(){showErrorMsg(me.getLang("loadconfigHttpError"))}})}catch(e){showErrorMsg(me.getLang("loadconfigError"))}})},UE.Editor.prototype.isServerConfigLoaded=function(){var e=this;return e._serverConfigLoaded||!1},UE.Editor.prototype.afterConfigReady=function(e){if(!e||!utils.isFunction(e))return;var t=this,n=function(){e.apply(t,arguments),t.removeListener("serverConfigLoaded",n)};t.isServerConfigLoaded()?e.call(t,"serverConfigLoaded"):t.addListener("serverConfigLoaded",n)}}(),UE.ajax=function(){function r(e){var t=[];for(var n in e){if(n=="method"||n=="timeout"||n=="async"||n=="dataType"||n=="callback")continue;if(e[n]==undefined||e[n]==null)continue;if((typeof e[n]).toLowerCase()!="function"&&(typeof e[n]).toLowerCase()!="object")t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));else if(utils.isArray(e[n]))for(var r=0;r<e[n].length;r++)t.push(encodeURIComponent(n)+"[]="+encodeURIComponent(e[n][r]))}return t.join("&")}function i(e,t){var i=n(),s=!1,o={method:"POST",timeout:5e3,async:!0,data:{},onsuccess:function(){},onerror:function(){}};typeof e=="object"&&(t=e,e=t.url);if(!i||!e)return;var u=t?utils.extend(o,t):o,a=r(u);utils.isEmptyObject(u.data)||(a+=(a?"&":"")+r(u.data));var f=setTimeout(function(){i.readyState!=4&&(s=!0,i.abort(),clearTimeout(f))},u.timeout),l=u.method.toUpperCase(),c=e+(e.indexOf("?")==-1?"?":"&")+(l=="POST"?"":a+"&noCache="+ +(new Date));i.open(l,c,u.async),i.onreadystatechange=function(){i.readyState==4&&(!s&&i.status==200?u.onsuccess(i):u.onerror(i))},l=="POST"?(i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.send(a)):i.send(null)}function s(e,t){function d(e,t,n){e.setAttribute("type","text/javascript"),e.setAttribute("defer","defer"),n&&e.setAttribute("charset",n),e.setAttribute("src",t),document.getElementsByTagName("head")[0].appendChild(e)}function v(e){return function(){try{if(e)s.onerror&&s.onerror();else try{clearTimeout(l),n.apply(window,arguments)}catch(t){}}catch(r){s.onerror&&s.onerror.call(window,r)}finally{s.oncomplete&&s.oncomplete.apply(window,arguments),i.parentNode&&i.parentNode.removeChild(i),window[a]=null;try{delete window[a]}catch(t){}}}}var n=t.onsuccess||function(){},i=document.createElement("SCRIPT"),s=t||{},o=s.charset,u=s.jsonp||"callback",a,f=s.timeOut||0,l,c=new RegExp("(\\?|&)"+u+"=([^&]*)"),h;if(utils.isFunction(n))a="bd__editor__"+Math.floor(Math.random()*2147483648).toString(36),window[a]=v(0);else if(utils.isString(n))a=n;else if(h=c.exec(e))a=h[2];e=e.replace(c,"$1"+u+"="+a),e.search(c)<0&&(e+=(e.indexOf("?")<0?"?":"&")+u+"="+a);var p=r(t);utils.isEmptyObject(t.data)||(p+=(p?"&":"")+r(t.data)),p&&(e=e.replace(/\?/,"?"+p+"&")),i.onerror=v(1),f&&(l=setTimeout(v(1),f)),d(i,e,o)}var e="XMLHttpRequest()";try{new ActiveXObject("Msxml2.XMLHTTP"),e="ActiveXObject('Msxml2.XMLHTTP')"}catch(t){try{new ActiveXObject("Microsoft.XMLHTTP"),e="ActiveXObject('Microsoft.XMLHTTP')"}catch(t){}}var n=new Function("return new "+e);return{request:function(e,t){t&&t.dataType=="jsonp"?s(e,t):i(e,t)},getJSONP:function(e,t,n){var r={data:t,oncomplete:n};s(e,r)}}}();var filterWord=UE.filterWord=function(){function e(e){return/(class="?Mso|style="[^"]*\bmso\-|w:WordDocument|<(v|o):|lang=)/ig.test(e)}function t(e){return e=e.replace(/[\d.]+\w+/g,function(e){return utils.transUnitToPx(e)}),e}function n(e){return e.replace(/[\t\r\n]+/g," ").replace(/<!--[\s\S]*?-->/ig,"").replace(/<v:shape [^>]*>[\s\S]*?.<\/v:shape>/gi,function(e){if(browser.opera)return"";try{if(/Bitmap/i.test(e))return"";var n=e.match(/width:([ \d.]*p[tx])/i)[1],r=e.match(/height:([ \d.]*p[tx])/i)[1],i=e.match(/src=\s*"([^"]*)"/i)[1];return'<img width="'+t(n)+'" height="'+t(r)+'" src="'+i+'" />'}catch(s){return""}}).replace(/<\/?div[^>]*>/g,"").replace(/v:\w+=(["']?)[^'"]+\1/g,"").replace(/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|xml|meta|link|style|\w+:\w+)(?=[\s\/>]))[^>]*>/gi,"").replace(/<p [^>]*class="?MsoHeading"?[^>]*>(.*?)<\/p>/gi,"<p><strong>$1</strong></p>").replace(/\s+(class|lang|align)\s*=\s*(['"]?)([\w-]+)\2/ig,function(e,t,n,r){return t=="class"&&r=="MsoListParagraph"?e:""}).replace(/<(font|span)[^>]*>(\s*)<\/\1>/gi,function(e,t,n){return n.replace(/[\t\r\n ]+/g," ")}).replace(/(<[a-z][^>]*)\sstyle=(["'])([^\2]*?)\2/gi,function(e,n,r,i){var s=[],o=i.replace(/^\s+|\s+$/,"").replace(/&#39;/g,"'").replace(/&quot;/gi,"'").replace(/[\d.]+(cm|pt)/g,function(e){return utils.transUnitToPx(e)}).split(/;\s*/g);for(var u=0,a;a=o[u];u++){var f,l,c=a.split(":");if(c.length==2){f=c[0].toLowerCase(),l=c[1].toLowerCase();if(/^(background)\w*/.test(f)&&l.replace(/(initial|\s)/g,"").length==0||/^(margin)\w*/.test(f)&&/^0\w+$/.test(l))continue;switch(f){case"mso-padding-alt":case"mso-padding-top-alt":case"mso-padding-right-alt":case"mso-padding-bottom-alt":case"mso-padding-left-alt":case"mso-margin-alt":case"mso-margin-top-alt":case"mso-margin-right-alt":case"mso-margin-bottom-alt":case"mso-margin-left-alt":case"mso-height":case"mso-width":case"mso-vertical-align-alt":/<table/.test(n)||(s[u]=f.replace(/^mso-|-alt$/g,"")+":"+t(l));continue;case"horiz-align":s[u]="text-align:"+l;continue;case"vert-align":s[u]="vertical-align:"+l;continue;case"font-color":case"mso-foreground":s[u]="color:"+l;continue;case"mso-background":case"mso-highlight":s[u]="background:"+l;continue;case"mso-default-height":s[u]="min-height:"+t(l);continue;case"mso-default-width":s[u]="min-width:"+t(l);continue;case"mso-padding-between-alt":s[u]="border-collapse:separate;border-spacing:"+t(l);continue;case"text-line-through":if(l=="single"||l=="double")s[u]="text-decoration:line-through";continue;case"mso-zero-height":l=="yes"&&(s[u]="display:none");continue;case"margin":if(!/[1-9]/.test(l))continue}if(/^(mso|column|font-emph|lang|layout|line-break|list-image|nav|panose|punct|row|ruby|sep|size|src|tab-|table-border|text-(?:decor|trans)|top-bar|version|vnd|word-break)/.test(f)||/text\-indent|padding|margin/.test(f)&&/\-[\d.]+/.test(l))continue;s[u]=f+":"+c[1]}}return n+(s.length?' style="'+s.join(";").replace(/;{2,}/g,";")+'"':"")})}return function(t){return e(t)?n(t):t}}();(function(){function s(e,t,n){return e.push(i),t+(n?1:-1)}function o(e,t){for(var n=0;n<t;n++)e.push(r)}function u(e,t,n,r){switch(e.type){case"root":for(var i=0,c;c=e.children[i++];)n&&c.type=="element"&&!dtd.$inlineWithA[c.tagName]&&i>1&&(s(t,r,!0),o(t,r)),u(c,t,n,r);break;case"text":a(e,t);break;case"element":f(e,t,n,r);break;case"comment":l(e,t,n)}return t}function a(e,t){e.parentNode.tagName=="pre"?t.push(e.data):t.push(n[e.parentNode.tagName]?utils.html(e.data):e.data.replace(/[ ]{2}/g," &nbsp;"))}function f(e,n,r,i){var a="";if(e.attrs){a=[];var f=e.attrs;for(var l in f)a.push(l+(f[l]!==undefined?'="'+(t[l]?utils.html(f[l]).replace(/["]/g,function(e){return"&quot;"}):utils.unhtml(f[l]))+'"':""));a=a.join(" ")}n.push("<"+e.tagName+(a?" "+a:"")+(dtd.$empty[e.tagName]?"/":"")+">"),r&&!dtd.$inlineWithA[e.tagName]&&e.tagName!="pre"&&e.children&&e.children.length&&(i=s(n,i,!0),o(n,i));if(e.children&&e.children.length)for(var c=0,h;h=e.children[c++];)r&&h.type=="element"&&!dtd.$inlineWithA[h.tagName]&&c>1&&(s(n,i),o(n,i)),u(h,n,r,i);dtd.$empty[e.tagName]||(r&&!dtd.$inlineWithA[e.tagName]&&e.tagName!="pre"&&e.children&&e.children.length&&(i=s(n,i),o(n,i)),n.push("</"+e.tagName+">"))}function l(e,t){t.push("<!--"+e.data+"-->")}function c(e,t){var n;if(e.type=="element"&&e.getAttr("id")==t)return e;if(e.children&&e.children.length)for(var r=0,i;i=e.children[r++];)if(n=c(i,t))return n}function h(e,t,n){e.type=="element"&&e.tagName==t&&n.push(e);if(e.children&&e.children.length)for(var r=0,i;i=e.children[r++];)h(i,t,n)}function p(e,t){if(e.children&&e.children.length)for(var n=0,r;r=e.children[n];)p(r,t),r.parentNode&&(r.children&&r.children.length&&t(r),r.parentNode&&n++);else t(e)}var e=UE.uNode=function(e){this.type=e.type,this.data=e.data,this.tagName=e.tagName,this.parentNode=e.parentNode,this.attrs=e.attrs||{},this.children=e.children},t={href:1,src:1,_src:1,_href:1,cdata_data:1},n={style:1,script:1},r="    ",i="\n";e.createElement=function(t){return/[<>]/.test(t)?UE.htmlparser(t).children[0]:new e({type:"element",children:[],tagName:t})},e.createText=function(e,t){return new UE.uNode({type:"text",data:t?e:utils.unhtml(e||"")})},e.prototype={toHtml:function(e){var t=[];return u(this,t,e,0),t.join("")},innerHTML:function(e){if(this.type!="element"||dtd.$empty[this.tagName])return this;if(utils.isString(e)){if(this.children)for(var t=0,n;n=this.children[t++];)n.parentNode=null;this.children=[];var r=UE.htmlparser(e);for(var t=0,n;n=r.children[t++];)this.children.push(n),n.parentNode=this;return this}var r=new UE.uNode({type:"root",children:this.children});return r.toHtml()},innerText:function(t,n){if(this.type!="element"||dtd.$empty[this.tagName])return this;if(t){if(this.children)for(var r=0,i;i=this.children[r++];)i.parentNode=null;return this.children=[],this.appendChild(e.createText(t,n)),this}return this.toHtml().replace(/<[^>]+>/g,"")},getData:function(){return this.type=="element"?"":this.data},firstChild:function(){return this.children?this.children[0]:null},lastChild:function(){return this.children?this.children[this.children.length-1]:null},previousSibling:function(){var e=this.parentNode;for(var t=0,n;n=e.children[t];t++)if(n===this)return t==0?null:e.children[t-1]},nextSibling:function(){var e=this.parentNode;for(var t=0,n;n=e.children[t++];)if(n===this)return e.children[t]},replaceChild:function(e,t){if(this.children){e.parentNode&&e.parentNode.removeChild(e);for(var n=0,r;r=this.children[n];n++)if(r===t)return this.children.splice(n,1,e),t.parentNode=null,e.parentNode=this,e}},appendChild:function(e){if(this.type=="root"||this.type=="element"&&!dtd.$empty[this.tagName]){this.children||(this.children=[]),e.parentNode&&e.parentNode.removeChild(e);for(var t=0,n;n=this.children[t];t++)if(n===e){this.children.splice(t,1);break}return this.children.push(e),e.parentNode=this,e}},insertBefore:function(e,t){if(this.children){e.parentNode&&e.parentNode.removeChild(e);for(var n=0,r;r=this.children[n];n++)if(r===t)return this.children.splice(n,0,e),e.parentNode=this,e}},insertAfter:function(e,t){if(this.children){e.parentNode&&e.parentNode.removeChild(e);for(var n=0,r;r=this.children[n];n++)if(r===t)return this.children.splice(n+1,0,e),e.parentNode=this,e}},removeChild:function(e,t){if(this.children)for(var n=0,r;r=this.children[n];n++)if(r===e){this.children.splice(n,1),r.parentNode=null;if(t&&r.children&&r.children.length)for(var i=0,s;s=r.children[i];i++)this.children.splice(n+i,0,s),s.parentNode=this;return r}},getAttr:function(e){return this.attrs&&this.attrs[e.toLowerCase()]},setAttr:function(e,t){if(!e){delete this.attrs;return}this.attrs||(this.attrs={});if(utils.isObject(e))for(var n in e)e[n]?this.attrs[n.toLowerCase()]=e[n]:delete this.attrs[n];else t?this.attrs[e.toLowerCase()]=t:delete this.attrs[e]},getIndex:function(){var e=this.parentNode;for(var t=0,n;n=e.children[t];t++)if(n===this)return t;return-1},getNodeById:function(e){var t;if(this.children&&this.children.length)for(var n=0,r;r=this.children[n++];)if(t=c(r,e))return t},getNodesByTagName:function(e){e=utils.trim(e).replace(/[ ]{2,}/g," ").split(" ");var t=[],n=this;return utils.each(e,function(e){if(n.children&&n.children.length)for(var r=0,i;i=n.children[r++];)h(i,e,t)}),t},getStyle:function(e){var t=this.getAttr("style");if(!t)return"";var n=new RegExp("(^|;)\\s*"+e+":([^;]+)","i"),r=t.match(n);return r&&r[0]?r[2]:""},setStyle:function(e,t){function n(e,t){var n=new RegExp("(^|;)\\s*"+e+":([^;]+;?)","gi");r=r.replace(n,"$1"),t&&(r=e+":"+utils.unhtml(t)+";"+r)}var r=this.getAttr("style");r||(r="");if(utils.isObject(e))for(var i in e)n(i,e[i]);else n(e,t);this.setAttr("style",utils.trim(r))},traversal:function(e){return this.children&&this.children.length&&p(this,e),this}}})();var htmlparser=UE.htmlparser=function(e,t){function f(e,t){if(a[e.tagName]){var n=o.createElement(a[e.tagName]);e.appendChild(n),n.appendChild(o.createText(t)),e=n}else e.appendChild(o.createText(t))}function l(e,t,n){var i;if(i=u[t]){var a=e,f;while(a.type!="root"){if(utils.isArray(i)?utils.indexOf(i,a.tagName)!=-1:i==a.tagName){e=a,f=!0;break}a=a.parentNode}f||(e=l(e,utils.isArray(i)?i[0]:i))}var c=new o({parentNode:e,type:"element",tagName:t.toLowerCase(),children:dtd.$empty[t]?null:[]});if(n){var h={},p;while(p=r.exec(n))h[p[1].toLowerCase()]=s[p[1].toLowerCase()]?p[2]||p[3]||p[4]:utils.unhtml(p[2]||p[3]||p[4]);c.attrs=h}return e.children.push(c),dtd.$empty[t]?e:c}function c(e,t){e.children.push(new o({type:"comment",data:t,parentNode:e}))}var n=/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)-->)|(?:([^\s\/<>]+)\s*((?:(?:"[^"]*")|(?:'[^']*')|[^"'<>])*)\/?>))/g,r=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,i={b:1,code:1,i:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,span:1,sub:1,img:1,sup:1,font:1,big:1,small:1,iframe:1,a:1,br:1,pre:1};e=e.replace(new RegExp(domUtils.fillChar,"g"),""),t||(e=e.replace(new RegExp("[\\r\\t\\n"+(t?"":" ")+"]*</?(\\w+)\\s*(?:[^>]*)>[\\r\\t\\n"+(t?"":" ")+"]*","g"),function(e,n){return n&&i[n.toLowerCase()]?e.replace(/(^[\n\r]+)|([\n\r]+$)/g,""):e.replace(new RegExp("^[\\r\\n"+(t?"":" ")+"]+"),"").replace(new RegExp("[\\r\\n"+(t?"":" ")+"]+$"),"")}));var s={href:1,src:1},o=UE.uNode,u={td:"tr",tr:["tbody","thead","tfoot"],tbody:"table",th:"tr",thead:"table",tfoot:"table",caption:"table",li:["ul","ol"],dt:"dl",dd:"dl",option:"select"},a={ol:"li",ul:"li"},h,p=0,d=0,v=new o({type:"root",children:[]}),m=v;while(h=n.exec(e)){p=h.index;try{p>d&&f(m,e.slice(d,p));if(h[3])dtd.$cdata[m.tagName]?f(m,h[0]):m=l(m,h[3].toLowerCase(),h[4]);else if(h[1]){if(m.type!="root")if(dtd.$cdata[m.tagName]&&!dtd.$cdata[h[1]])f(m,h[0]);else{var g=m;while(m.type=="element"&&m.tagName!=h[1].toLowerCase()){m=m.parentNode;if(m.type=="root")throw m=g,"break"}m=m.parentNode}}else h[2]&&c(m,h[2])}catch(y){}d=n.lastIndex}return d<e.length&&f(m,e.slice(d)),v},filterNode=UE.filterNode=function(){function e(t,n){switch(t.type){case"text":break;case"element":var r;if(r=n[t.tagName])if(r==="-")t.parentNode.removeChild(t);else if(utils.isFunction(r)){var i=t.parentNode,s=t.getIndex();r(t);if(t.parentNode){if(t.children)for(var o=0,u;u=t.children[o];)e(u,n),u.parentNode&&o++}else for(var o=s,u;u=i.children[o];)e(u,n),u.parentNode&&o++}else{var a=r.$;if(a&&t.attrs){var f={},l;for(var c in a){l=t.getAttr(c);if(c=="style"&&utils.isArray(a[c])){var h=[];utils.each(a[c],function(e){var n;(n=t.getStyle(e))&&h.push(e+":"+n)}),l=h.join(";")}l&&(f[c]=l)}t.attrs=f}if(t.children)for(var o=0,u;u=t.children[o];)e(u,n),u.parentNode&&o++}else if(dtd.$cdata[t.tagName])t.parentNode.removeChild(t);else{var i=t.parentNode,s=t.getIndex();t.parentNode.removeChild(t,!0);for(var o=s,u;u=i.children[o];)e(u,n),u.parentNode&&o++}break;case"comment":t.parentNode.removeChild(t)}}return function(t,n){if(utils.isEmptyObject(n))return t;var r;(r=n["-"])&&utils.each(r.split(" "),function(e){n[e]="-"});for(var i=0,s;s=t.children[i];)e(s,n),s.parentNode&&i++;return t}}();UE.plugin=function(){var e={};return{register:function(t,n,r,i){r&&utils.isFunction(r)&&(i=r,r=null),e[t]={optionName:r||t,execFn:n,afterDisabled:i}},load:function(t){utils.each(e,function(e){var n=e.execFn.call(t);t.options[e.optionName]!==!1?n&&utils.each(n,function(e,n){switch(n.toLowerCase()){case"shortcutkey":t.addshortcutkey(e);break;case"bindevents":utils.each(e,function(e,n){t.addListener(n,e)});break;case"bindmultievents":utils.each(utils.isArray(e)?e:[e],function(e){var n=utils.trim(e.type).split(/\s+/);utils.each(n,function(n){t.addListener(n,e.handler)})});break;case"commands":utils.each(e,function(e,n){t.commands[n]=e});break;case"outputrule":t.addOutputRule(e);break;case"inputrule":t.addInputRule(e);break;case"defaultoptions":t.setOpt(e)}}):e.afterDisabled&&e.afterDisabled.call(t)}),utils.each(UE.plugins,function(e){e.call(t)})},run:function(t,n){var r=e[t];r&&r.exeFn.call(n)}}}();var keymap=UE.keymap={Backspace:8,Tab:9,Enter:13,Shift:16,Control:17,Alt:18,CapsLock:20,Esc:27,Spacebar:32,PageUp:33,PageDown:34,End:35,Home:36,Left:37,Up:38,Right:39,Down:40,Insert:45,Del:46,NumLock:144,Cmd:91,"=":187,"-":189,b:66,i:73,z:90,y:89,v:86,x:88,s:83,n:78},LocalStorage=UE.LocalStorage=function(){function n(){var e=document.createElement("div");return e.style.display="none",e.addBehavior?(e.addBehavior("#default#userdata"),{getItem:function(n){var r=null;try{document.body.appendChild(e),e.load(t),r=e.getAttribute(n),document.body.removeChild(e)}catch(i){}return r},setItem:function(n,r){document.body.appendChild(e),e.setAttribute(n,r),e.save(t),document.body.removeChild(e)},removeItem:function(n){document.body.appendChild(e),e.removeAttribute(n),e.save(t),document.body.removeChild(e)}}):null}var e=window.localStorage||n()||null,t="localStorage";return{saveLocalData:function(t,n){return e&&n?(e.setItem(t,n),!0):!1},getLocalData:function(t){return e?e.getItem(t):null},removeItem:function(t){e&&e.removeItem(t)}}}();(function(){var e="ueditor_preference";UE.Editor.prototype.setPreferences=function(t,n){var r={};utils.isString(t)?r[t]=n:r=t;var i=LocalStorage.getLocalData(e);i&&(i=utils.str2json(i))?utils.extend(i,r):i=r,i&&LocalStorage.saveLocalData(e,utils.json2str(i))},UE.Editor.prototype.getPreferences=function(t){var n=LocalStorage.getLocalData(e);return n&&(n=utils.str2json(n))?t?n[t]:n:null},UE.Editor.prototype.removePreferences=function(t){var n=LocalStorage.getLocalData(e);n&&(n=utils.str2json(n))&&(n[t]=undefined,delete n[t]),n&&LocalStorage.saveLocalData(e,utils.json2str(n))}})(),UE.plugins.defaultfilter=function(){var e=this;e.setOpt({allowDivTransToP:!0,disabledTableInTable:!0}),e.addInputRule(function(t){function i(e){while(e&&e.type=="element"){if(e.tagName=="td")return!0;e=e.parentNode}return!1}var n=this.options.allowDivTransToP,r;t.traversal(function(t){if(t.type=="element"){if(!dtd.$cdata[t.tagName]&&e.options.autoClearEmptyNode&&dtd.$inline[t.tagName]&&!dtd.$empty[t.tagName]&&(!t.attrs||utils.isEmptyObject(t.attrs))){t.firstChild()?t.tagName=="span"&&(!t.attrs||utils.isEmptyObject(t.attrs))&&t.parentNode.removeChild(t,!0):t.parentNode.removeChild(t);return}switch(t.tagName){case"style":case"script":t.setAttr({cdata_tag:t.tagName,cdata_data:t.innerHTML()||"",_ue_custom_node_:"true"}),t.tagName="div",t.innerHTML("");break;case"a":(r=t.getAttr("href"))&&t.setAttr("_href",r);break;case"img":if(r=t.getAttr("src"))if(/^data:/.test(r)){t.parentNode.removeChild(t);break}t.setAttr("_src",t.getAttr("src"));break;case"span":browser.webkit&&(r=t.getStyle("white-space"))&&/nowrap|normal/.test(r)&&(t.setStyle("white-space",""),e.options.autoClearEmptyNode&&utils.isEmptyObject(t.attrs)&&t.parentNode.removeChild(t,!0)),r=t.getAttr("id"),r&&/^_baidu_bookmark_/i.test(r)&&t.parentNode.removeChild(t);break;case"p":if(r=t.getAttr("align"))t.setAttr("align"),t.setStyle("text-align",r);utils.each(t.children,function(e){if(e.type=="element"&&e.tagName=="p"){var n=e.nextSibling();t.parentNode.insertAfter(e,t);var r=e;while(n){var i=n.nextSibling();t.parentNode.insertAfter(n,r),r=n,n=i}return!1}}),t.firstChild()||t.innerHTML(browser.ie?"&nbsp;":"<br/>");break;case"div":if(t.getAttr("cdata_tag"))break;r=t.getAttr("class");if(r&&/^line number\d+/.test(r))break;if(!n)break;var s,o=UE.uNode.createElement("p");while(s=t.firstChild())s.type=="text"||!UE.dom.dtd.$block[s.tagName]?o.appendChild(s):o.firstChild()?(t.parentNode.insertBefore(o,t),o=UE.uNode.createElement("p")):t.parentNode.insertBefore(s,t);o.firstChild()&&t.parentNode.insertBefore(o,t),t.parentNode.removeChild(t);break;case"dl":t.tagName="ul";break;case"dt":case"dd":t.tagName="li";break;case"li":var u=t.getAttr("class");(!u||!/list\-/.test(u))&&t.setAttr();var a=t.getNodesByTagName("ol ul");UE.utils.each(a,function(e){t.parentNode.insertAfter(e,t)});break;case"td":case"th":case"caption":(!t.children||!t.children.length)&&t.appendChild(browser.ie11below?UE.uNode.createText(" "):UE.uNode.createElement("br"));break;case"table":e.options.disabledTableInTable&&i(t)&&(t.parentNode.insertBefore(UE.uNode.createText(t.innerText()),t),t.parentNode.removeChild(t))}}})}),e.addOutputRule(function(t){var n;t.traversal(function(t){if(t.type=="element"){if(e.options.autoClearEmptyNode&&dtd.$inline[t.tagName]&&!dtd.$empty[t.tagName]&&(!t.attrs||utils.isEmptyObject(t.attrs))){t.firstChild()?t.tagName=="span"&&(!t.attrs||utils.isEmptyObject(t.attrs))&&t.parentNode.removeChild(t,!0):t.parentNode.removeChild(t);return}switch(t.tagName){case"div":if(n=t.getAttr("cdata_tag"))t.tagName=n,t.appendChild(UE.uNode.createText(t.getAttr("cdata_data"))),t.setAttr({cdata_tag:"",cdata_data:"",_ue_custom_node_:""});break;case"a":(n=t.getAttr("_href"))&&t.setAttr({href:utils.html(n),_href:""});break;case"span":n=t.getAttr("id"),n&&/^_baidu_bookmark_/i.test(n)&&t.parentNode.removeChild(t);break;case"img":(n=t.getAttr("_src"))&&t.setAttr({src:t.getAttr("_src"),_src:""})}}})})},UE.commands.inserthtml={execCommand:function(e,t,n){var r=this,i,s;if(!t)return;if(r.fireEvent("beforeinserthtml",t)===!0)return;i=r.selection.getRange(),s=i.document.createElement("div"),s.style.display="inline";if(!n){var o=UE.htmlparser(t);r.options.filterRules&&UE.filterNode(o,r.options.filterRules),r.filterInputRule(o),t=o.toHtml()}s.innerHTML=utils.trim(t);if(!i.collapsed){var u=i.startContainer;domUtils.isFillChar(u)&&i.setStartBefore(u),u=i.endContainer,domUtils.isFillChar(u)&&i.setEndAfter(u),i.txtToElmBoundary(),i.endContainer&&i.endContainer.nodeType==1&&(u=i.endContainer.childNodes[i.endOffset],u&&domUtils.isBr(u)&&i.setEndAfter(u)),i.startOffset==0&&(u=i.startContainer,domUtils.isBoundaryNode(u,"firstChild")&&(u=i.endContainer,i.endOffset==(u.nodeType==3?u.nodeValue.length:u.childNodes.length)&&domUtils.isBoundaryNode(u,"lastChild")&&(r.body.innerHTML="<p>"+(browser.ie?"":"<br/>")+"</p>",i.setStart(r.body.firstChild,0).collapse(!0)))),!i.collapsed&&i.deleteContents();if(i.startContainer.nodeType==1){var a=i.startContainer.childNodes[i.startOffset],f;if(a&&domUtils.isBlockElm(a)&&(f=a.previousSibling)&&domUtils.isBlockElm(f)){i.setEnd(f,f.childNodes.length).collapse();while(a.firstChild)f.appendChild(a.firstChild);domUtils.remove(a)}}}var a,l,f,c,h=0,p;i.inFillChar()&&(a=i.startContainer,domUtils.isFillChar(a)?(i.setStartBefore(a).collapse(!0),domUtils.remove(a)):domUtils.isFillChar(a,!0)&&(a.nodeValue=a.nodeValue.replace(fillCharReg,""),i.startOffset--,i.collapsed&&i.collapse(!0)));var d=domUtils.findParentByTagName(i.startContainer,"li",!0);if(d){var v,m;while(a=s.firstChild){while(a&&(a.nodeType==3||!domUtils.isBlockElm(a)||a.tagName=="HR"))v=a.nextSibling,i.insertNode(a).collapse(),m=a,a=v;if(a)if(/^(ol|ul)$/i.test(a.tagName)){while(a.firstChild)m=a.firstChild,domUtils.insertAfter(d,a.firstChild),d=d.nextSibling;domUtils.remove(a)}else{var g;v=a.nextSibling,g=r.document.createElement("li"),domUtils.insertAfter(d,g),g.appendChild(a),m=a,a=v,d=g}}d=domUtils.findParentByTagName(i.startContainer,"li",!0),domUtils.isEmptyBlock(d)&&domUtils.remove(d),m&&i.setStartAfter(m).collapse(!0).select(!0)}else{while(a=s.firstChild){if(h){var y=r.document.createElement("p");while(a&&(a.nodeType==3||!dtd.$block[a.tagName]))p=a.nextSibling,y.appendChild(a),a=p;y.firstChild&&(a=y)}i.insertNode(a),p=a.nextSibling;if(!h&&a.nodeType==domUtils.NODE_ELEMENT&&domUtils.isBlockElm(a)){l=domUtils.findParent(a,function(e){return domUtils.isBlockElm(e)});if(l&&l.tagName.toLowerCase()!="body"&&(!dtd[l.tagName][a.nodeName]||a.parentNode!==l)){if(!dtd[l.tagName][a.nodeName])f=l;else{c=a.parentNode;while(c!==l)f=c,c=c.parentNode}domUtils.breakParent(a,f||c);var f=a.previousSibling;domUtils.trimWhiteTextNode(f),f.childNodes.length||domUtils.remove(f),!browser.ie&&(v=a.nextSibling)&&domUtils.isBlockElm(v)&&v.lastChild&&!domUtils.isBr(v.lastChild)&&v.appendChild(r.document.createElement("br")),h=1}}var v=a.nextSibling;if(!s.firstChild&&v&&domUtils.isBlockElm(v)){i.setStart(v,0).collapse(!0);break}i.setEndAfter(a).collapse()}a=i.startContainer,p&&domUtils.isBr(p)&&domUtils.remove(p);if(domUtils.isBlockElm(a)&&domUtils.isEmptyNode(a))if(p=a.nextSibling)domUtils.remove(a),p.nodeType==1&&dtd.$block[p.tagName]&&i.setStart(p,0).collapse(!0).shrinkBoundary();else try{a.innerHTML=browser.ie?domUtils.fillChar:"<br/>"}catch(b){i.setStartBefore(a),domUtils.remove(a)}try{i.select(!0)}catch(b){}}setTimeout(function(){i=r.selection.getRange(),i.scrollToView(r.autoHeightEnabled,r.autoHeightEnabled?domUtils.getXY(r.iframe).y:0),r.fireEvent("afterinserthtml",t)},200)}},UE.plugins.autotypeset=function(){function o(e,t){if(!e||e.nodeType==3)return 0;if(domUtils.isBr(e))return 1;if(e&&e.parentNode&&i[e.tagName.toLowerCase()])return s&&s.contains(e)||e.getAttribute("pagebreak")?0:t?!domUtils.isEmptyBlock(e):domUtils.isEmptyBlock(e,new RegExp("[\\s"+domUtils.fillChar+"]","g"))}function u(e){e.style.cssText||(domUtils.removeAttributes(e,["style"]),e.tagName.toLowerCase()=="span"&&domUtils.hasNoAttributes(e)&&domUtils.remove(e,!0))}function a(e,i){var a=this,c;if(i){if(!t.pasteFilter)return;c=a.document.createElement("div"),c.innerHTML=i.html}else c=a.document.body;var h=domUtils.getElementsByTagName(c,"*");for(var p=0,d;d=h[p++];){if(a.fireEvent("excludeNodeinautotype",d)===!0)continue;t.clearFontSize&&d.style.fontSize&&(domUtils.removeStyle(d,"font-size"),u(d)),t.clearFontFamily&&d.style.fontFamily&&(domUtils.removeStyle(d,"font-family"),u(d));if(o(d)){if(t.mergeEmptyline){var v=d.nextSibling,m,g=domUtils.isBr(d);while(o(v)){m=v,v=m.nextSibling;if(g&&(!v||v&&!domUtils.isBr(v)))break;domUtils.remove(m)}}if(t.removeEmptyline&&domUtils.inDoc(d,c)&&!r[d.parentNode.tagName.toLowerCase()]){if(domUtils.isBr(d)){v=d.nextSibling;if(v&&!domUtils.isBr(v))continue}domUtils.remove(d);continue}}o(d,!0)&&d.tagName!="SPAN"&&(t.indent&&(d.style.textIndent=t.indentValue),t.textAlign&&(d.style.textAlign=t.textAlign));if(t.removeClass&&d.className&&!n[d.className.toLowerCase()]){if(s&&s.contains(d))continue;domUtils.removeAttributes(d,["class"])}if(t.imageBlockLine&&d.tagName.toLowerCase()=="img"&&!d.getAttribute("emotion"))if(i){var y=d;switch(t.imageBlockLine){case"left":case"right":case"none":var b=y.parentNode,m,w,v;while(dtd.$inline[b.tagName]||b.tagName=="A")b=b.parentNode;m=b;if(m.tagName=="P"&&domUtils.getStyle(m,"text-align")=="center"&&!domUtils.isBody(m)&&domUtils.getChildCount(m,function(e){return!domUtils.isBr(e)&&!domUtils.isWhitespace(e)})==1){w=m.previousSibling,v=m.nextSibling;if(w&&v&&w.nodeType==1&&v.nodeType==1&&w.tagName==v.tagName&&domUtils.isBlockElm(w)){w.appendChild(m.firstChild);while(v.firstChild)w.appendChild(v.firstChild);domUtils.remove(m),domUtils.remove(v)}else domUtils.setStyle(m,"text-align","")}domUtils.setStyle(y,"float",t.imageBlockLine);break;case"center":if(a.queryCommandValue("imagefloat")!="center"){b=y.parentNode,domUtils.setStyle(y,"float","none"),m=y;while(b&&domUtils.getChildCount(b,function(e){return!domUtils.isBr(e)&&!domUtils.isWhitespace(e)})==1&&(dtd.$inline[b.tagName]||b.tagName=="A"))m=b,b=b.parentNode;var E=a.document.createElement("p");domUtils.setAttributes(E,{style:"text-align:center"}),m.parentNode.insertBefore(E,m),E.appendChild(m),domUtils.setStyle(m,"float","")}}}else{var S=a.selection.getRange();S.selectNode(d).select(),a.execCommand("imagefloat",t.imageBlockLine)}t.removeEmptyNode&&t.removeTagNames[d.tagName.toLowerCase()]&&domUtils.hasNoAttributes(d)&&domUtils.isEmptyBlock(d)&&domUtils.remove(d)}if(t.tobdc){var x=UE.htmlparser(c.innerHTML);x.traversal(function(e){e.type=="text"&&(e.data=l(e.data))}),c.innerHTML=x.toHtml()}if(t.bdc2sb){var x=UE.htmlparser(c.innerHTML);x.traversal(function(e){e.type=="text"&&(e.data=f(e.data))}),c.innerHTML=x.toHtml()}i&&(i.html=c.innerHTML)}function f(e){var t="";for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);r>=65281&&r<=65373?t+=String.fromCharCode(e.charCodeAt(n)-65248):r==12288?t+=String.fromCharCode(e.charCodeAt(n)-12288+32):t+=e.charAt(n)}return t}function l(e){e=utils.html(e);var t="",n="";for(var r=0;r<e.length;r++)e.charCodeAt(r)==32?t+=String.fromCharCode(12288):e.charCodeAt(r)<127?t+=String.fromCharCode(e.charCodeAt(r)+65248):t+=e.charAt(r);return t}function c(){var t=e.getPreferences("autotypeset");utils.extend(e.options.autotypeset,t)}this.setOpt({autotypeset:{mergeEmptyline:!0,removeClass:!0,removeEmptyline:!1,textAlign:"left",imageBlockLine:"center",pasteFilter:!1,clearFontSize:!1,clearFontFamily:!1,removeEmptyNode:!1,removeTagNames:utils.extend({div:1},dtd.$removeEmpty),indent:!1,indentValue:"2em",bdc2sb:!1,tobdc:!1}});var e=this,t=e.options.autotypeset,n={selectTdClass:1,pagebreak:1,anchorclass:1},r={li:1},i={div:1,p:1,blockquote:1,center:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,span:1},s;if(!t)return;c(),t.pasteFilter&&e.addListener("beforepaste",a),e.commands.autotypeset={execCommand:function(){e.removeListener("beforepaste",a),t.pasteFilter&&e.addListener("beforepaste",a),a.call(e)}}},UE.plugin.register("autosubmit",function(){return{shortcutkey:{autosubmit:"ctrl+13"},commands:{autosubmit:{execCommand:function(){var e=this,t=domUtils.findParentByTagName(e.iframe,"form",!1);if(t){if(e.fireEvent("beforesubmit")===!1)return;e.sync(),t.submit()}}}}}}),UE.plugin.register("background",function(){function i(e){var t={},n=e.split(";");return utils.each(n,function(e){var n=e.indexOf(":"),r=utils.trim(e.substr(0,n)).toLowerCase();r&&(t[r]=utils.trim(e.substr(n+1)||""))}),t}function s(n){if(n){var r=[];for(var i in n)n.hasOwnProperty(i)&&r.push(i+":"+n[i]+"; ");utils.cssRule(t,r.length?"body{"+r.join("")+"}":"",e.document)}else utils.cssRule(t,"",e.document)}var e=this,t="editor_background",n,r=new RegExp("body[\\s]*\\{(.+)\\}","i"),o=e.hasContents;return e.hasContents=function(){return e.queryCommandValue("background")?!0:o.apply(e,arguments)},{bindEvents:{getAllHtml:function(t,n){var r=this.body,i=domUtils.getComputedStyle(r,"background-image"),s="";i.indexOf(e.options.imagePath)>0?s=i.substring(i.indexOf(e.options.imagePath),i.length-1).replace(/"|\(|\)/ig,""):s=i!="none"?i.replace(/url\("?|"?\)/ig,""):"";var o='<style type="text/css">body{',u={"background-color":domUtils.getComputedStyle(r,"background-color")||"#ffffff","background-image":s?"url("+s+")":"","background-repeat":domUtils.getComputedStyle(r,"background-repeat")||"","background-position":browser.ie?domUtils.getComputedStyle(r,"background-position-x")+" "+domUtils.getComputedStyle(r,"background-position-y"):domUtils.getComputedStyle(r,"background-position"),height:domUtils.getComputedStyle(r,"height")};for(var a in u)u.hasOwnProperty(a)&&(o+=a+":"+u[a]+"; ");o+="}</style> ",n.push(o)},aftersetcontent:function(){n==0&&s()}},inputRule:function(e){n=!1,utils.each(e.getNodesByTagName("p"),function(e){var t=e.getAttr("data-background");t&&(n=!0,s(i(t)),e.parentNode.removeChild(e))})},outputRule:function(e){var n=this,i=(utils.cssRule(t,n.document)||"").replace(/[\n\r]+/g,"").match(r);i&&e.appendChild(UE.uNode.createElement('<p style="display:none;" data-background="'+utils.trim(i[1].replace(/"/g,"").replace(/[\s]+/g," "))+'"><br/></p>'))},commands:{background:{execCommand:function(e,t){s(t)},queryCommandValue:function(){var e=this,n=(utils.cssRule(t,e.document)||"").replace(/[\n\r]+/g,"").match(r);return n?i(n[1]):null},notNeedUndo:!0}}}}),UE.commands.imagefloat={execCommand:function(e,t){var n=this,r=n.selection.getRange();if(!r.collapsed){var i=r.getClosedNode();if(i&&i.tagName=="IMG")switch(t){case"left":case"right":case"none":var s=i.parentNode,o,u,a;while(dtd.$inline[s.tagName]||s.tagName=="A")s=s.parentNode;o=s;if(o.tagName=="P"&&domUtils.getStyle(o,"text-align")=="center"){if(!domUtils.isBody(o)&&domUtils.getChildCount(o,function(e){return!domUtils.isBr(e)&&!domUtils.isWhitespace(e)})==1){u=o.previousSibling,a=o.nextSibling;if(u&&a&&u.nodeType==1&&a.nodeType==1&&u.tagName==a.tagName&&domUtils.isBlockElm(u)){u.appendChild(o.firstChild);while(a.firstChild)u.appendChild(a.firstChild);domUtils.remove(o),domUtils.remove(a)}else domUtils.setStyle(o,"text-align","")}r.selectNode(i).select()}domUtils.setStyle(i,"float",t=="none"?"":t),t=="none"&&domUtils.removeAttributes(i,"align");break;case"center":if(n.queryCommandValue("imagefloat")!="center"){s=i.parentNode,domUtils.setStyle(i,"float",""),domUtils.removeAttributes(i,"align"),o=i;while(s&&domUtils.getChildCount(s,function(e){return!domUtils.isBr(e)&&!domUtils.isWhitespace(e)})==1&&(dtd.$inline[s.tagName]||s.tagName=="A"))o=s,s=s.parentNode;r.setStartBefore(o).setCursor(!1),s=n.document.createElement("div"),s.appendChild(o),domUtils.setStyle(o,"float",""),n.execCommand("insertHtml",'<p id="_img_parent_tmp" style="text-align:center">'+s.innerHTML+"</p>"),o=n.document.getElementById("_img_parent_tmp"),o.removeAttribute("id"),o=o.firstChild,r.selectNode(o).select(),a=o.parentNode.nextSibling,a&&domUtils.isEmptyNode(a)&&domUtils.remove(a)}}}},queryCommandValue:function(){var e=this.selection.getRange(),t,n;return e.collapsed?"none":(t=e.getClosedNode(),t&&t.nodeType==1&&t.tagName=="IMG"?(n=domUtils.getComputedStyle(t,"float")||t.getAttribute("align"),n=="none"&&(n=domUtils.getComputedStyle(t.parentNode,"text-align")=="center"?"center":n),{left:1,right:1,center:1}[n]?n:"none"):"none")},queryCommandState:function(){var e=this.selection.getRange(),t;return e.collapsed?-1:(t=e.getClosedNode(),t&&t.nodeType==1&&t.tagName=="IMG"?0:-1)}},UE.commands.insertimage={execCommand:function(e,t){t=utils.isArray(t)?t:[t];if(!t.length)return;var n=this,r=n.selection.getRange(),i=r.getClosedNode();if(n.fireEvent("beforeinsertimage",t)===!0)return;if(i&&/img/i.test(i.tagName)&&(i.className!="edui-faked-video"||i.className.indexOf("edui-upload-video")!=-1)&&!i.getAttribute("word_img")){var s=t.shift(),o=s.floatStyle;delete s.floatStyle,domUtils.setAttributes(i,s),n.execCommand("imagefloat",o),t.length>0&&(r.setStartAfter(i).setCursor(!1,!0),n.execCommand("insertimage",t))}else{var u=[],a="",f;f=t[0];if(t.length==1)a='<img src="'+f.src+'" '+(f._src?' _src="'+f._src+'" ':"")+(f.width?'width="'+f.width+'" ':"")+(f.height?' height="'+f.height+'" ':"")+(f["floatStyle"]=="left"||f["floatStyle"]=="right"?' style="float:'+f.floatStyle+';"':"")+(f.title&&f.title!=""?' title="'+f.title+'"':"")+(f.border&&f.border!="0"?' border="'+f.border+'"':"")+(f.alt&&f.alt!=""?' alt="'+f.alt+'"':"")+(f.hspace&&f.hspace!="0"?' hspace = "'+f.hspace+'"':"")+(f.vspace&&f.vspace!="0"?' vspace = "'+f.vspace+'"':"")+"/>",f["floatStyle"]=="center"&&(a='<p style="text-align: center">'+a+"</p>"),u.push(a);else for(var l=0;f=t[l++];)a="<p "+(f["floatStyle"]=="center"?'style="text-align: center" ':"")+'><img src="'+f.src+'" '+(f.width?'width="'+f.width+'" ':"")+(f._src?' _src="'+f._src+'" ':"")+(f.height?' height="'+f.height+'" ':"")+' style="'+(f.floatStyle&&f["floatStyle"]!="center"?"float:"+f.floatStyle+";":"")+(f.border||"")+'" '+(f.title?' title="'+f.title+'"':"")+" /></p>",u.push(a);n.execCommand("insertHtml",u.join(""))}n.fireEvent("afterinsertimage",t)}},UE.plugins.justify=function(){var e=this,t=domUtils.isBlockElm,n={left:1,right:1,center:1,justify:1},r=function(e,n){var r=e.createBookmark(),i=function(e){return e.nodeType==1?e.tagName.toLowerCase()!="br"&&!domUtils.isBookmarkNode(e):!domUtils.isWhitespace(e)};e.enlarge(!0);var s=e.createBookmark(),o=domUtils.getNextDomNode(s.start,!1,i),u=e.cloneRange(),a;while(o&&!(domUtils.getPosition(o,s.end)&domUtils.POSITION_FOLLOWING))if(o.nodeType==3||!t(o)){u.setStartBefore(o);while(o&&o!==s.end&&!t(o))a=o,o=domUtils.getNextDomNode(o,!1,null,function(e){return!t(e)});u.setEndAfter(a);var f=u.getCommonAncestor();if(!domUtils.isBody(f)&&t(f))domUtils.setStyles(f,utils.isString(n)?{"text-align":n}:n),o=f;else{var l=e.document.createElement("p");domUtils.setStyles(l,utils.isString(n)?{"text-align":n}:n);var c=u.extractContents();l.appendChild(c),u.insertNode(l),o=l}o=domUtils.getNextDomNode(o,!1,i)}else o=domUtils.getNextDomNode(o,!0,i);return e.moveToBookmark(s).moveToBookmark(r)};UE.commands.justify={execCommand:function(e,t){var n=this.selection.getRange(),i;return n.collapsed&&(i=this.document.createTextNode("p"),n.insertNode(i)),r(n,t),i&&(n.setStartBefore(i).collapse(!0),domUtils.remove(i)),n.select(),!0},queryCommandValue:function(){var e=this.selection.getStart(),t=domUtils.getComputedStyle(e,"text-align");return n[t]?t:"left"},queryCommandState:function(){var e=this.selection.getStart(),t=e&&domUtils.findParentByTagName(e,["td","th","caption"],!0);return t?-1:0}}},UE.plugins.font=function(){function i(e){var t;while(t=e.parentNode){if(t.tagName!="SPAN"||domUtils.getChildCount(t,function(e){return!domUtils.isBookmarkNode(e)&&!domUtils.isBr(e)})!=1)break;t.style.cssText+=e.style.cssText,domUtils.remove(e,!0),e=t}}function s(e,t,n){if(r[t]){e.adjustmentBoundary();if(!e.collapsed&&e.startContainer.nodeType==1){var i=e.startContainer.childNodes[e.startOffset];if(i&&domUtils.isTagNode(i,"span")){var s=e.createBookmark();utils.each(domUtils.getElementsByTagName(i,"span"),function(e){if(!e.parentNode||domUtils.isBookmarkNode(e))return;if(t=="backcolor"&&domUtils.getComputedStyle(e,"background-color").toLowerCase()===n)return;domUtils.removeStyle(e,r[t]),e.style.cssText.replace(/^\s+$/,"").length==0&&domUtils.remove(e,!0)}),e.moveToBookmark(s)}}}}function o(e,t,n){var r=e.collapsed,o=e.createBookmark(),u;if(r){u=o.start.parentNode;while(dtd.$inline[u.tagName])u=u.parentNode}else u=domUtils.getCommonAncestor(o.start,o.end);utils.each(domUtils.getElementsByTagName(u,"span"),function(e){if(!e.parentNode||domUtils.isBookmarkNode(e))return;if(/\s*border\s*:\s*none;?\s*/i.test(e.style.cssText)){/^\s*border\s*:\s*none;?\s*$/.test(e.style.cssText)?domUtils.remove(e,!0):domUtils.removeStyle(e,"border");return}/border/i.test(e.style.cssText)&&e.parentNode.tagName=="SPAN"&&/border/i.test(e.parentNode.style.cssText)&&(e.style.cssText=e.style.cssText.replace(/border[^:]*:[^;]+;?/gi,""));if(t!="fontborder"||n!="none"){var r=e.nextSibling;while(r&&r.nodeType==1&&r.tagName=="SPAN"){if(domUtils.isBookmarkNode(r)&&t=="fontborder"){e.appendChild(r),r=e.nextSibling;continue}r.style.cssText==e.style.cssText&&(domUtils.moveChild(r,e),domUtils.remove(r));if(e.nextSibling===r)break;r=e.nextSibling}}i(e);if(browser.ie&&browser.version>8){var s=domUtils.findParent(e,function(e){return e.tagName=="SPAN"&&/background-color/.test(e.style.cssText)});s&&!/background-color/.test(e.style.cssText)&&(e.style.backgroundColor=s.style.backgroundColor)}}),e.moveToBookmark(o),s(e,t,n)}var e=this,t={forecolor:"color",backcolor:"background-color",fontsize:"font-size",fontfamily:"font-family",underline:"text-decoration",strikethrough:"text-decoration",fontborder:"border"},n={underline:1,strikethrough:1,fontborder:1},r={forecolor:"color",backcolor:"background-color",fontsize:"font-size",fontfamily:"font-family"};e.setOpt({fontfamily:[{name:"songti",val:"å®ä½,SimSun"},{name:"yahei",val:"å¾®è½¯éé»,Microsoft YaHei"},{name:"kaiti",val:"æ¥·ä½,æ¥·ä½_GB2312, SimKai"},{name:"heiti",val:"é»ä½, SimHei"},{name:"lishu",val:"é¶ä¹¦, SimLi"},{name:"andaleMono",val:"andale mono"},{name:"arial",val:"arial, helvetica,sans-serif"},{name:"arialBlack",val:"arial black,avant garde"},{name:"comicSansMs",val:"comic sans ms"},{name:"impact",val:"impact,chicago"},{name:"timesNewRoman",val:"times new roman"}],fontsize:[10,11,12,14,16,18,20,24,36]}),e.addInputRule(function(e){utils.each(e.getNodesByTagName("u s del font strike"),function(e){if(e.tagName=="font"){var t=[];for(var n in e.attrs)switch(n){case"size":t.push("font-size:"+({1:"10",2:"12",3:"16",4:"18",5:"24",6:"32",7:"48"}[e.attrs[n]]||e.attrs[n])+"px");break;case"color":t.push("color:"+e.attrs[n]);break;case"face":t.push("font-family:"+e.attrs[n]);break;case"style":t.push(e.attrs[n])}e.attrs={style:t.join(";")}}else{var r=e.tagName=="u"?"underline":"line-through";e.attrs={style:(e.getAttr("style")||"")+"text-decoration:"+r+";"}}e.tagName="span"})});for(var u in t)(function(e,t){UE.commands[e]={execCommand:function(r,i){i=i||(this.queryCommandState(r)?"none":r=="underline"?"underline":r=="fontborder"?"1px solid #000":"line-through");var s=this,u=this.selection.getRange(),a;if(i=="default")u.collapsed&&(a=s.document.createTextNode("font"),u.insertNode(a).select()),s.execCommand("removeFormat","span,a",t),a&&(u.setStartBefore(a).collapse(!0),domUtils.remove(a)),o(u,r,i),u.select();else if(!u.collapsed)n[e]&&s.queryCommandValue(e)&&s.execCommand("removeFormat","span,a",t),u=s.selection.getRange(),u.applyInlineStyle("span",{style:t+":"+i}),o(u,r,i),u.select();else{var f=domUtils.findParentByTagName(u.startContainer,"span",!0);a=s.document.createTextNode("font");if(f&&!f.children.length&&!f[browser.ie?"innerText":"textContent"].replace(fillCharReg,"").length)u.insertNode(a),n[e]&&(u.selectNode(a).select(),s.execCommand("removeFormat","span,a",t,null),f=domUtils.findParentByTagName(a,"span",!0),u.setStartBefore(a)),f&&(f.style.cssText+=";"+t+":"+i),u.collapse(!0).select();else{u.insertNode(a),u.selectNode(a).select(),f=u.document.createElement("span");if(n[e]){if(domUtils.findParentByTagName(a,"a",!0)){u.setStartBefore(a).setCursor(),domUtils.remove(a);return}s.execCommand("removeFormat","span,a",t)}f.style.cssText=t+":"+i,a.parentNode.insertBefore(f,a);if(!browser.ie||browser.ie&&browser.version==9){var l=f.parentNode;while(!domUtils.isBlockElm(l))l.tagName=="SPAN"&&(f.style.cssText=l.style.cssText+";"+f.style.cssText),l=l.parentNode}opera?setTimeout(function(){u.setStart(f,0).collapse(!0),o(u,r,i),u.select()}):(u.setStart(f,0).collapse(!0),o(u,r,i),u.select())}domUtils.remove(a)}return!0},queryCommandValue:function(e){var n=this.selection.getStart();if(e=="underline"||e=="strikethrough"){var r=n,i;while(r&&!domUtils.isBlockElm(r)&&!domUtils.isBody(r)){if(r.nodeType==1){i=domUtils.getComputedStyle(r,t);if(i!="none")return i}r=r.parentNode}return"none"}if(e=="fontborder"){var s=n,o;while(s&&dtd.$inline[s.tagName]){if(o=domUtils.getComputedStyle(s,"border"))if(/1px/.test(o)&&/solid/.test(o))return o;s=s.parentNode}return""}if(e=="FontSize"){var u=domUtils.getComputedStyle(n,t),s=/^([\d\.]+)(\w+)$/.exec(u);return s?Math.floor(s[1])+s[2]:u}return domUtils.getComputedStyle(n,t)},queryCommandState:function(e){if(!n[e])return 0;var t=this.queryCommandValue(e);return e=="fontborder"?/1px/.test(t)&&/solid/.test(t):e=="underline"?/underline/.test(t):/line\-through/.test(t)}}})(u,t[u])},UE.plugins.link=function(){function e(e){var t=e.startContainer,n=e.endContainer;(t=domUtils.findParentByTagName(t,"a",!0))&&e.setStartBefore(t),(n=domUtils.findParentByTagName(n,"a",!0))&&e.setEndAfter(n)}function t(t,n,r){var i=t.cloneRange(),s=r.queryCommandValue("link");e(t=t.adjustmentBoundary());var o=t.startContainer;o.nodeType==1&&s&&(o=o.childNodes[t.startOffset],o&&o.nodeType==1&&o.tagName=="A"&&/^(?:https?|ftp|file)\s*:\s*\/\//.test(o[browser.ie?"innerText":"textContent"])&&(o[browser.ie?"innerText":"textContent"]=utils.html(n.textValue||n.href)));if(!i.collapsed||s)t.removeInlineStyle("a"),i=t.cloneRange();if(i.collapsed){var u=t.document.createElement("a"),a="";n.textValue?(a=utils.html(n.textValue),delete n.textValue):a=utils.html(n.href),domUtils.setAttributes(u,n),o=domUtils.findParentByTagName(i.startContainer,"a",!0),o&&domUtils.isInNodeEndBoundary(i,o)&&t.setStartAfter(o).collapse(!0),u[browser.ie?"innerText":"textContent"]=a,t.insertNode(u).selectNode(u)}else t.applyInlineStyle("a",n)}UE.commands.unlink={execCommand:function(){var t=this.selection.getRange(),n;if(t.collapsed&&!domUtils.findParentByTagName(t.startContainer,"a",!0))return;n=t.createBookmark(),e(t),t.removeInlineStyle("a").moveToBookmark(n).select()},queryCommandState:function(){return!this.highlight&&this.queryCommandValue("link")?0:-1}},UE.commands.link={execCommand:function(e,n){var r;n._href&&(n._href=utils.unhtml(n._href,/[<">]/g)),n.href&&(n.href=utils.unhtml(n.href,/[<">]/g)),n.textValue&&(n.textValue=utils.unhtml(n.textValue,/[<">]/g)),t(r=this.selection.getRange(),n,this),r.collapse().select(!0)},queryCommandValue:function(){var e=this.selection.getRange(),t;if(!e.collapsed){e.shrinkBoundary();var n=e.startContainer.nodeType==3||!e.startContainer.childNodes[e.startOffset]?e.startContainer:e.startContainer.childNodes[e.startOffset],r=e.endContainer.nodeType==3||e.endOffset==0?e.endContainer:e.endContainer.childNodes[e.endOffset-1],i=e.getCommonAncestor();t=domUtils.findParentByTagName(i,"a",!0);if(!t&&i.nodeType==1){var s=i.getElementsByTagName("a"),o,u;for(var a=0,f;f=s[a++];){o=domUtils.getPosition(f,n),u=domUtils.getPosition(f,r);if((o&domUtils.POSITION_FOLLOWING||o&domUtils.POSITION_CONTAINS)&&(u&domUtils.POSITION_PRECEDING||u&domUtils.POSITION_CONTAINS)){t=f;break}}}return t}t=e.startContainer,t=t.nodeType==1?t:t.parentNode;if(t&&(t=domUtils.findParentByTagName(t,"a",!0))&&!domUtils.isInNodeEndBoundary(e,t))return t},queryCommandState:function(){var e=this.selection.getRange().getClosedNode(),t=e&&(e.className=="edui-faked-video"||e.className.indexOf("edui-upload-video")!=-1);return t?-1:0}}},UE.plugins.insertframe=function(){function t(){e._iframe&&delete e._iframe}var e=this;e.addListener("selectionchange",function(){t()})},UE.commands.scrawl={queryCommandState:function(){return browser.ie&&browser.version<=8?-1:0}},UE.plugins.removeformat=function(){var e=this;e.setOpt({removeFormatTags:"b,big,code,del,dfn,em,font,i,ins,kbd,q,samp,small,span,strike,strong,sub,sup,tt,u,var",removeFormatAttributes:"class,style,lang,width,height,align,hspace,valign"}),e.commands.removeformat={execCommand:function(e,t,n,r,i){function h(e){if(e.nodeType==3||e.tagName.toLowerCase()!="span")return 0;if(browser.ie){var t=e.attributes;if(t.length){for(var n=0,r=t.length;n<r;n++)if(t[n].specified)return 0;return 1}}return!e.attributes.length}function p(e){var t=e.createBookmark();e.collapsed&&e.enlarge(!0);if(!i){var r=domUtils.findParentByTagName(e.startContainer,"a",!0);r&&e.setStartBefore(r),r=domUtils.findParentByTagName(e.endContainer,"a",!0),r&&e.setEndAfter(r)}a=e.createBookmark(),d=a.start;while((l=d.parentNode)&&!domUtils.isBlockElm(l))domUtils.breakParent(d,l),domUtils.clearEmptySibling(d);if(a.end){d=a.end;while((l=d.parentNode)&&!domUtils.isBlockElm(l))domUtils.breakParent(d,l),domUtils.clearEmptySibling(d);var u=domUtils.getNextDomNode(a.start,!1,c),f;while(u){if(u==a.end)break;f=domUtils.getNextDomNode(u,!0,c),!dtd.$empty[u.tagName.toLowerCase()]&&!domUtils.isBookmarkNode(u)&&(s.test(u.tagName)?n?(domUtils.removeStyle(u,n),h(u)&&n!="text-decoration"&&domUtils.remove(u,!0)):domUtils.remove(u,!0):!dtd.$tableContent[u.tagName]&&!dtd.$list[u.tagName]&&(domUtils.removeAttributes(u,o),h(u)&&domUtils.remove(u,!0))),u=f}}var p=a.start.parentNode;domUtils.isBlockElm(p)&&!dtd.$tableContent[p.tagName]&&!dtd.$list[p.tagName]&&domUtils.removeAttributes(p,o),p=a.end.parentNode,a.end&&domUtils.isBlockElm(p)&&!dtd.$tableContent[p.tagName]&&!dtd.$list[p.tagName]&&domUtils.removeAttributes(p,o),e.moveToBookmark(a).moveToBookmark(t);var d=e.startContainer,v,m=e.collapsed;while(d.nodeType==1&&domUtils.isEmptyNode(d)&&dtd.$removeEmpty[d.tagName])v=d.parentNode,e.setStartBefore(d),e.startContainer===e.endContainer&&e.endOffset--,domUtils.remove(d),d=v;if(!m){d=e.endContainer;while(d.nodeType==1&&domUtils.isEmptyNode(d)&&dtd.$removeEmpty[d.tagName])v=d.parentNode,e.setEndBefore(d),domUtils.remove(d),d=v}}var s=new RegExp("^(?:"+(t||this.options.removeFormatTags).replace(/,/g,"|")+")$","i"),o=n?[]:(r||this.options.removeFormatAttributes).split(","),u=new dom.Range(this.document),a,f,l,c=function(e){return e.nodeType==1};u=this.selection.getRange(),p(u),u.select()}}},UE.plugins.blockquote=function(){function t(e){return domUtils.filterNodeList(e.selection.getStartElementPath(),"blockquote")}var e=this;e.commands.blockquote={execCommand:function(e,n){var r=this.selection.getRange(),i=t(this),s=dtd.blockquote,o=r.createBookmark();if(i){var u=r.startContainer,a=domUtils.isBlockElm(u)?u:domUtils.findParent(u,function(e){return domUtils.isBlockElm(e)}),f=r.endContainer,l=domUtils.isBlockElm(f)?f:domUtils.findParent(f,function(e){return domUtils.isBlockElm(e)});a=domUtils.findParentByTagName(a,"li",!0)||a,l=domUtils.findParentByTagName(l,"li",!0)||l,a.tagName=="LI"||a.tagName=="TD"||a===i||domUtils.isBody(a)?domUtils.remove(i,!0):domUtils.breakParent(a,i),a!==l&&(i=domUtils.findParentByTagName(l,"blockquote"),i&&(l.tagName=="LI"||l.tagName=="TD"||domUtils.isBody(l)?i.parentNode&&domUtils.remove(i,!0):domUtils.breakParent(l,i)));var c=domUtils.getElementsByTagName(this.document,"blockquote");for(var h=0,p;p=c[h++];)p.childNodes.length?domUtils.getPosition(p,a)&domUtils.POSITION_FOLLOWING&&domUtils.getPosition(p,l)&domUtils.POSITION_PRECEDING&&domUtils.remove(p,!0):domUtils.remove(p)}else{var d=r.cloneRange(),v=d.startContainer.nodeType==1?d.startContainer:d.startContainer.parentNode,m=v,g=1;for(;;){if(domUtils.isBody(v)){m!==v?r.collapsed?(d.selectNode(m),g=0):d.setStartBefore(m):d.setStart(v,0);break}if(!s[v.tagName]){r.collapsed?d.selectNode(m):d.setStartBefore(m);break}m=v,v=v.parentNode}if(g){m=v=v=d.endContainer.nodeType==1?d.endContainer:d.endContainer.parentNode;for(;;){if(domUtils.isBody(v)){m!==v?d.setEndAfter(m):d.setEnd(v,v.childNodes.length);break}if(!s[v.tagName]){d.setEndAfter(m);break}m=v,v=v.parentNode}}v=r.document.createElement("blockquote"),domUtils.setAttributes(v,n),v.appendChild(d.extractContents()),d.insertNode(v);var y=domUtils.getElementsByTagName(v,"blockquote");for(var h=0,b;b=y[h++];)b.parentNode&&domUtils.remove(b,!0)}r.moveToBookmark(o).select()},queryCommandState:function(){return t(this)?1:0}}},UE.commands.touppercase=UE.commands.tolowercase={execCommand:function(e){var t=this,n=t.selection.getRange();if(n.collapsed)return n;var r=n.createBookmark(),i=r.end,s=function(e){return!domUtils.isBr(e)&&!domUtils.isWhitespace(e)},o=domUtils.getNextDomNode(r.start,!1,s);while(o&&domUtils.getPosition(o,i)&domUtils.POSITION_PRECEDING){o.nodeType==3&&(o.nodeValue=o.nodeValue[e=="touppercase"?"toUpperCase":"toLowerCase"]()),o=domUtils.getNextDomNode(o,!0,s);if(o===i)break}n.moveToBookmark(r).select()}},UE.commands.indent={execCommand:function(){var e=this,t=e.queryCommandState("indent")?"0em":e.options.indentValue||"2em";e.execCommand("Paragraph","p",{style:"text-indent:"+t})},queryCommandState:function(){var e=domUtils.filterNodeList(this.selection.getStartElementPath(),"p h1 h2 h3 h4 h5 h6");return e&&e.style.textIndent&&parseInt(e.style.textIndent)?1:0}},UE.commands.print={execCommand:function(){this.window.print()},notNeedUndo:1},UE.commands.preview={execCommand:function(){var e=window.open("","_blank",""),t=e.document;t.open(),t.write('<!DOCTYPE html><html><head><meta charset="utf-8"/><script src="'+this.options.UEDITOR_HOME_URL+'ueditor.parse.js"></script><script>'+"setTimeout(function(){uParse('div',{rootPath: '"+this.options.UEDITOR_HOME_URL+"'})},300)"+"</script></head><body><div>"+this.getContent(null,null,!0)+"</div></body></html>"),t.close()},notNeedUndo:1},UE.plugins.selectall=function(){var e=this;e.commands.selectall={execCommand:function(){var e=this,t=e.body,n=e.selection.getRange();n.selectNodeContents(t),domUtils.isEmptyBlock(t)&&(browser.opera&&t.firstChild&&t.firstChild.nodeType==1&&n.setStartAtFirst(t.firstChild),n.collapse(!0)),n.select(!0)},notNeedUndo:1},e.addshortcutkey({selectAll:"ctrl+65"})},UE.plugins.paragraph=function(){var e=this,t=domUtils.isBlockElm,n=["TD","LI","PRE"],r=function(e,r,i,s){var o=e.createBookmark(),u=function(e){return e.nodeType==1?e.tagName.toLowerCase()!="br"&&!domUtils.isBookmarkNode(e):!domUtils.isWhitespace(e)},a;e.enlarge(!0);var f=e.createBookmark(),l=domUtils.getNextDomNode(f.start,!1,u),c=e.cloneRange(),h;while(l&&!(domUtils.getPosition(l,f.end)&domUtils.POSITION_FOLLOWING))if(l.nodeType==3||!t(l)){c.setStartBefore(l);while(l&&l!==f.end&&!t(l))h=l,l=domUtils.getNextDomNode(l,!1,null,function(e){return!t(e)});c.setEndAfter(h),a=e.document.createElement(r),i&&(domUtils.setAttributes(a,i),s&&s=="customstyle"&&i.style&&(a.style.cssText=i.style)),a.appendChild(c.extractContents()),domUtils.isEmptyNode(a)&&domUtils.fillChar(e.document,a),c.insertNode(a);var p=a.parentNode;if(t(p)&&!domUtils.isBody(a.parentNode)&&utils.indexOf(n,p.tagName)==-1){if(!s||s!="customstyle")p.getAttribute("dir")&&a.setAttribute("dir",p.getAttribute("dir")),p.style.cssText&&(a.style.cssText=p.style.cssText+";"+a.style.cssText),p.style.textAlign&&!a.style.textAlign&&(a.style.textAlign=p.style.textAlign),p.style.textIndent&&!a.style.textIndent&&(a.style.textIndent=p.style.textIndent),p.style.padding&&!a.style.padding&&(a.style.padding=p.style.padding);i&&/h\d/i.test(p.tagName)&&!/h\d/i.test(a.tagName)?(domUtils.setAttributes(p,i),s&&s=="customstyle"&&i.style&&(p.style.cssText=i.style),domUtils.remove(a,!0),a=p):domUtils.remove(a.parentNode,!0)}utils.indexOf(n,p.tagName)!=-1?l=p:l=a,l=domUtils.getNextDomNode(l,!1,u)}else l=domUtils.getNextDomNode(l,!0,u);return e.moveToBookmark(f).moveToBookmark(o)};e.setOpt("paragraph",{p:"",h1:"",h2:"",h3:"",h4:"",h5:"",h6:""}),e.commands.paragraph={execCommand:function(e,t,n,i){var s=this.selection.getRange();if(s.collapsed){var o=this.document.createTextNode("p");s.insertNode(o);if(browser.ie){var u=o.previousSibling;u&&domUtils.isWhitespace(u)&&domUtils.remove(u),u=o.nextSibling,u&&domUtils.isWhitespace(u)&&domUtils.remove(u)}}s=r(s,t,n,i),o&&(s.setStartBefore(o).collapse(!0),pN=o.parentNode,domUtils.remove(o),domUtils.isBlockElm(pN)&&domUtils.isEmptyNode(pN)&&domUtils.fillNode(this.document,pN));if(browser.gecko&&s.collapsed&&s.startContainer.nodeType==1){var a=s.startContainer.childNodes[s.startOffset];a&&a.nodeType==1&&a.tagName.toLowerCase()==t&&s.setStart(a,0).collapse(!0)}return s.select(),!0},queryCommandValue:function(){var e=domUtils.filterNodeList(this.selection.getStartElementPath(),"p h1 h2 h3 h4 h5 h6");return e?e.tagName.toLowerCase():""}}},function(){var e=domUtils.isBlockElm,t=function(e){return domUtils.filterNodeList(e.selection.getStartElementPath(),function(e){return e&&e.nodeType==1&&e.getAttribute("dir")})},n=function(n,r,i){var s,o=function(e){return e.nodeType==1?!domUtils.isBookmarkNode(e):!domUtils.isWhitespace(e)},u=t(r);if(u&&n.collapsed)return u.setAttribute("dir",i),n;s=n.createBookmark(),n.enlarge(!0);var a=n.createBookmark(),f=domUtils.getNextDomNode(a.start,!1,o),l=n.cloneRange(),c;while(f&&!(domUtils.getPosition(f,a.end)&domUtils.POSITION_FOLLOWING))if(f.nodeType==3||!e(f)){l.setStartBefore(f);while(f&&f!==a.end&&!e(f))c=f,f=domUtils.getNextDomNode(f,!1,null,function(t){return!e(t)});l.setEndAfter(c);var h=l.getCommonAncestor();if(!domUtils.isBody(h)&&e(h))h.setAttribute("dir",i),f=h;else{var p=n.document.createElement("p");p.setAttribute("dir",i);var d=l.extractContents();p.appendChild(d),l.insertNode(p),f=p}f=domUtils.getNextDomNode(f,!1,o)}else f=domUtils.getNextDomNode(f,!0,o);return n.moveToBookmark(a).moveToBookmark(s)};UE.commands.directionality={execCommand:function(e,t){var r=this.selection.getRange();if(r.collapsed){var i=this.document.createTextNode("d");r.insertNode(i)}return n(r,this,t),i&&(r.setStartBefore(i).collapse(!0),domUtils.remove(i)),r.select(),!0},queryCommandValue:function(){var e=t(this);return e?e.getAttribute("dir"):"ltr"}}}(),UE.plugins.horizontal=function(){var e=this;e.commands.horizontal={execCommand:function(e){var t=this;if(t.queryCommandState(e)!==-1){t.execCommand("insertHtml","<hr>");var n=t.selection.getRange(),r=n.startContainer;if(r.nodeType==1&&!r.childNodes[n.startOffset]){var i;(i=r.childNodes[n.startOffset-1])&&i.nodeType==1&&i.tagName=="HR"&&(t.options.enterTag=="p"?(i=t.document.createElement("p"),n.insertNode(i),n.setStart(i,0).setCursor()):(i=t.document.createElement("br"),n.insertNode(i),n.setStartBefore(i).setCursor()))}return!0}},queryCommandState:function(){return domUtils.filterNodeList(this.selection.getStartElementPath(),"table")?-1:0}},e.addListener("delkeydown",function(e,t){var n=this.selection.getRange();n.txtToElmBoundary(!0);if(domUtils.isStartInblock(n)){var r=n.startContainer,i=r.previousSibling;if(i&&domUtils.isTagNode(i,"hr"))return domUtils.remove(i),n.select(),domUtils.preventDefault(t),!0}})},UE.commands.time=UE.commands.date={execCommand:function(e,t){function r(e,t){var n=("0"+e.getHours()).slice(-2),r=("0"+e.getMinutes()).slice(-2),i=("0"+e.getSeconds()).slice(-2);return t=t||"hh:ii:ss",t.replace(/hh/ig,n).replace(/ii/ig,r).replace(/ss/ig,i)}function i(e,t){var n=("000"+e.getFullYear()).slice(-4),r=n.slice(-2),i=("0"+(e.getMonth()+1)).slice(-2),s=("0"+e.getDate()).slice(-2);return t=t||"yyyy-mm-dd",t.replace(/yyyy/ig,n).replace(/yy/ig,r).replace(/mm/ig,i).replace(/dd/ig,s)}var n=new Date;this.execCommand("insertHtml",e=="time"?r(n,t):i(n,t))}},UE.plugins.rowspacing=function(){var e=this;e.setOpt({rowspacingtop:["5","10","15","20","25"],rowspacingbottom:["5","10","15","20","25"]}),e.commands.rowspacing={execCommand:function(e,t,n){return this.execCommand("paragraph","p",{style:"margin-"+n+":"+t+"px"}),!0},queryCommandValue:function(e,t){var n=domUtils.filterNodeList(this.selection.getStartElementPath(),function(e){return domUtils.isBlockElm(e)}),r;return n?(r=domUtils.getComputedStyle(n,"margin-"+t).replace(/[^\d]/g,""),r?r:0):0}}},UE.plugins.lineheight=function(){var e=this;e.setOpt({lineheight:["1","1.5","1.75","2","3","4","5"]}),e.commands.lineheight={execCommand:function(e,t){return this.execCommand("paragraph","p",{style:"line-height:"+(t=="1"?"normal":t+"em")}),!0},queryCommandValue:function(){var e=domUtils.filterNodeList(this.selection.getStartElementPath(),function(e){return domUtils.isBlockElm(e)});if(e){var t=domUtils.getComputedStyle(e,"line-height");return t=="normal"?1:t.replace(/[^\d.]*/ig,"")}}}},UE.plugins.insertcode=function(){var e=this;e.ready(function(){utils.cssRule("pre","pre{margin:.5em 0;padding:.4em .6em;border-radius:8px;background:#f8f8f8;}",e.document)}),e.setOpt("insertcode",{as3:"ActionScript3",bash:"Bash/Shell",cpp:"C/C++",css:"Css",cf:"CodeFunction","c#":"C#",delphi:"Delphi",diff:"Diff",erlang:"Erlang",groovy:"Groovy",html:"Html",java:"Java",jfx:"JavaFx",js:"Javascript",pl:"Perl",php:"Php",plain:"Plain Text",ps:"PowerShell",python:"Python",ruby:"Ruby",scala:"Scala",sql:"Sql",vb:"Vb",xml:"Xml"}),e.commands.insertcode={execCommand:function(e,t){var n=this,r=n.selection.getRange(),i=domUtils.findParentByTagName(r.startContainer,"pre",!0);if(i)i.className="brush:"+t+";toolbar:false;";else{var s="";if(r.collapsed)s=browser.ie&&browser.ie11below?browser.version<=8?"&nbsp;":"":"<br/>";else{var o=r.extractContents(),u=n.document.createElement("div");u.appendChild(o),utils.each(UE.filterNode(UE.htmlparser(u.innerHTML.replace(/[\r\t]/g,"")),n.options.filterTxtRules).children,function(e){if(browser.ie&&browser.ie11below&&browser.version>8)e.type=="element"?e.tagName=="br"?s+="\n":dtd.$empty[e.tagName]||(utils.each(e.children,function(t){t.type=="element"?t.tagName=="br"?s+="\n":dtd.$empty[e.tagName]||(s+=t.innerText()):s+=t.data}),/\n$/.test(s)||(s+="\n")):s+=e.data+"\n",!e.nextSibling()&&/\n$/.test(s)&&(s=s.replace(/\n$/,""));else if(browser.ie&&browser.ie11below)e.type=="element"?e.tagName=="br"?s+="<br>":dtd.$empty[e.tagName]||(utils.each(e.children,function(t){t.type=="element"?t.tagName=="br"?s+="<br>":dtd.$empty[e.tagName]||(s+=t.innerText()):s+=t.data}),/br>$/.test(s)||(s+="<br>")):s+=e.data+"<br>",!e.nextSibling()&&/<br>$/.test(s)&&(s=s.replace(/<br>$/,""));else{s+=e.type=="element"?dtd.$empty[e.tagName]?"":e.innerText():e.data;if(!/br\/?\s*>$/.test(s)){if(!e.nextSibling())return;s+="<br>"}}})}n.execCommand("inserthtml",'<pre id="coder"class="brush:'+t+';toolbar:false">'+s+"</pre>",!0),i=n.document.getElementById("coder"),domUtils.removeAttributes(i,"id");var a=i.previousSibling;a&&(a.nodeType==3&&a.nodeValue.length==1&&browser.ie&&browser.version==6||domUtils.isEmptyBlock(a))&&domUtils.remove(a);var r=n.selection.getRange();domUtils.isEmptyBlock(i)?r.setStart(i,0).setCursor(!1,!0):r.selectNodeContents(i).select()}},queryCommandValue:function(){var e=this.selection.getStartElementPath(),t="";return utils.each(e,function(e){if(e.nodeName=="PRE"){var n=e.className.match(/brush:([^;]+)/);return t=n&&n[1]?n[1]:"",!1}}),t}},e.addInputRule(function(e){utils.each(e.getNodesByTagName("pre"),function(e){var t=e.getNodesByTagName("br");if(t.length){browser.ie&&browser.ie11below&&browser.version>8&&utils.each(t,function(e){var t=UE.uNode.createText("\n");e.parentNode.insertBefore(t,e),e.parentNode.removeChild(e)});return}if(browser.ie&&browser.ie11below&&browser.version>8)return;var n=e.innerText().split(/\n/);e.innerHTML(""),utils.each(n,function(t){t.length&&e.appendChild(UE.uNode.createText(t)),e.appendChild(UE.uNode.createElement("br"))})})}),e.addOutputRule(function(e){utils.each(e.getNodesByTagName("pre"),function(e){var t="";utils.each(e.children,function(e){e.type=="text"?t+=e.data.replace(/[ ]/g,"&nbsp;").replace(/\n$/,""):e.tagName=="br"?t+="\n":t+=dtd.$empty[e.tagName]?e.innerText():""}),e.innerText(t.replace(/(&nbsp;|\n)+$/,""))})}),e.notNeedCodeQuery={help:1,undo:1,redo:1,source:1,print:1,searchreplace:1,fullscreen:1,preview:1,insertparagraph:1,elementpath:1,insertcode:1,inserthtml:1,selectall:1};var t=e.queryCommandState;e.queryCommandState=function(e){var t=this;return!t.notNeedCodeQuery[e.toLowerCase()]&&t.selection&&t.queryCommandValue("insertcode")?-1:UE.Editor.prototype.queryCommandState.apply(this,arguments)},e.addListener("beforeenterkeydown",function(){var t=e.selection.getRange(),n=domUtils.findParentByTagName(t.startContainer,"pre",!0);if(n){e.fireEvent("saveScene"),t.collapsed||t.deleteContents();if(!browser.ie||browser.ie9above){var r=e.document.createElement("br"),n;t.insertNode(r).setStartAfter(r).collapse(!0);var i=r.nextSibling;!i&&(!browser.ie||browser.version>10)?t.insertNode(r.cloneNode(!1)):t.setStartAfter(r),n=r.previousSibling;var s;while(n){s=n,n=n.previousSibling;if(!n||n.nodeName=="BR"){n=s;break}}if(n){var o="";while(n&&n.nodeName!="BR"&&(new RegExp("^[\\s"+domUtils.fillChar+"]*$")).test(n.nodeValue))o+=n.nodeValue,n=n.nextSibling;if(n.nodeName!="BR"){var u=n.nodeValue.match(new RegExp("^([\\s"+domUtils.fillChar+"]+)"));u&&u[1]&&(o+=u[1])}o&&(o=e.document.createTextNode(o),t.insertNode(o).setStartAfter(o))}t.collapse(!0).select(!0)}else if(browser.version>8){var a=e.document.createTextNode("\n"),f=t.startContainer;if(t.startOffset==0){var l=f.previousSibling;if(l){t.insertNode(a);var c=e.document.createTextNode(" ");t.setStartAfter(a).insertNode(c).setStart(c,0).collapse(!0).select(!0)}}else{t.insertNode(a).setStartAfter(a);var c=e.document.createTextNode(" ");f=t.startContainer.childNodes[t.startOffset],f&&!/^\n/.test(f.nodeValue)&&t.setStartBefore(a),t.insertNode(c).setStart(c,0).collapse(!0).select(!0)}}else{var r=e.document.createElement("br");t.insertNode(r),t.insertNode(e.document.createTextNode(domUtils.fillChar)),t.setStartAfter(r),n=r.previousSibling;var s;while(n){s=n,n=n.previousSibling;if(!n||n.nodeName=="BR"){n=s;break}}if(n){var o="";while(n&&n.nodeName!="BR"&&(new RegExp("^[ "+domUtils.fillChar+"]*$")).test(n.nodeValue))o+=n.nodeValue,n=n.nextSibling;if(n.nodeName!="BR"){var u=n.nodeValue.match(new RegExp("^([ "+domUtils.fillChar+"]+)"));u&&u[1]&&(o+=u[1])}o=e.document.createTextNode(o),t.insertNode(o).setStartAfter(o)}t.collapse(!0).select()}return e.fireEvent("saveScene"),!0}}),e.addListener("tabkeydown",function(t,n){var r=e.selection.getRange(),i=domUtils.findParentByTagName(r.startContainer,"pre",!0);if(i){e.fireEvent("saveScene");if(!n.shiftKey)if(!r.collapsed){var s=r.createBookmark(),o=s.start.previousSibling;while(o){if(i.firstChild===o&&!domUtils.isBr(o)){i.insertBefore(e.document.createTextNode("    "),o);break}if(domUtils.isBr(o)){i.insertBefore(e.document.createTextNode("    "),o.nextSibling);break}o=o.previousSibling}var u=s.end;o=s.start.nextSibling,i.firstChild===s.start&&i.insertBefore(e.document.createTextNode("    "),o.nextSibling);while(o&&o!==u){if(domUtils.isBr(o)&&o.nextSibling){if(o.nextSibling===u)break;i.insertBefore(e.document.createTextNode("    "),o.nextSibling)}o=o.nextSibling}r.moveToBookmark(s).select()}else{var a=e.document.createTextNode("    ");r.insertNode(a).setStartAfter(a).collapse(!0).select(!0)}return e.fireEvent("saveScene"),!0}}),e.addListener("beforeinserthtml",function(e,t){var n=this,r=n.selection.getRange(),i=domUtils.findParentByTagName(r.startContainer,"pre",!0);if(i){r.collapsed||r.deleteContents();var s="";if(browser.ie&&browser.version>8){utils.each(UE.filterNode(UE.htmlparser(t),n.options.filterTxtRules).children,function(e){e.type=="element"?e.tagName=="br"?s+="\n":dtd.$empty[e.tagName]||(utils.each(e.children,function(t){t.type=="element"?t.tagName=="br"?s+="\n":dtd.$empty[e.tagName]||(s+=t.innerText()):s+=t.data}),/\n$/.test(s)||(s+="\n")):s+=e.data+"\n",!e.nextSibling()&&/\n$/.test(s)&&(s=s.replace(/\n$/,""))});var o=n.document.createTextNode(utils.html(s.replace(/&nbsp;/g," ")));r.insertNode(o).selectNode(o).select()}else{var u=n.document.createDocumentFragment();utils.each(UE.filterNode(UE.htmlparser(t),n.options.filterTxtRules).children,function(e){e.type=="element"?e.tagName=="br"?u.appendChild(n.document.createElement("br")):dtd.$empty[e.tagName]||(utils.each(e.children,function(t){t.type=="element"?t.tagName=="br"?u.appendChild(n.document.createElement("br")):dtd.$empty[e.tagName]||u.appendChild(n.document.createTextNode(utils.html(t.innerText().replace(/&nbsp;/g," ")))):u.appendChild(n.document.createTextNode(utils.html(t.data.replace(/&nbsp;/g," "))))}),u.lastChild.nodeName!="BR"&&u.appendChild(n.document.createElement("br"))):u.appendChild(n.document.createTextNode(utils.html(e.data.replace(/&nbsp;/g," ")))),!e.nextSibling()&&u.lastChild.nodeName=="BR"&&u.removeChild(u.lastChild)}),r.insertNode(u).select()}return!0}}),e.addListener("keydown",function(e,t){var n=this,r=t.keyCode||t.which;if(r==40){var i=n.selection.getRange(),s,o=i.startContainer;if(i.collapsed&&(s=domUtils.findParentByTagName(i.startContainer,"pre",!0))&&!s.nextSibling){var u=s.lastChild;while(u&&u.nodeName=="BR")u=u.previousSibling;if(u===o||i.startContainer===s&&i.startOffset==s.childNodes.length)n.execCommand("insertparagraph"),domUtils.preventDefault(t)}}}),e.addListener("delkeydown",function(t,n){var r=this.selection.getRange();r.txtToElmBoundary(!0);var i=r.startContainer;if(domUtils.isTagNode(i,"pre")&&r.collapsed&&domUtils.isStartInblock(r)){var s=e.document.createElement("p");return domUtils.fillNode(e.document,s),i.parentNode.insertBefore(s,i),domUtils.remove(i),r.setStart(s,0).setCursor(!1,!0),domUtils.preventDefault(n),!0}})},UE.commands.cleardoc={execCommand:function(e){var t=this,n=t.options.enterTag,r=t.selection.getRange();n=="br"?(t.body.innerHTML="<br/>",r.setStart(t.body,0).setCursor()):(t.body.innerHTML="<p>"+(ie?"":"<br/>")+"</p>",r.setStart(t.body.firstChild,0).setCursor(!1,!0)),setTimeout(function(){t.fireEvent("clearDoc")},0)}},UE.plugin.register("anchor",function(){return{bindEvents:{ready:function(){utils.cssRule("anchor",".anchorclass{background: url('"+this.options.themePath+this.options.theme+"/images/anchor.gif') no-repeat scroll left center transparent;cursor: auto;display: inline-block;height: 16px;width: 15px;}",this.document)}},outputRule:function(e){utils.each(e.getNodesByTagName("img"),function(e){var t;if(t=e.getAttr("anchorname"))e.tagName="a",e.setAttr({anchorname:"",name:t,"class":""})})},inputRule:function(e){utils.each(e.getNodesByTagName("a"),function(e){var t;(t=e.getAttr("name"))&&!e.getAttr("href")&&(e.tagName="img",e.setAttr({anchorname:e.getAttr("name"),"class":"anchorclass"}),e.setAttr("name"))})},commands:{anchor:{execCommand:function(e,t){var n=this.selection.getRange(),r=n.getClosedNode();if(r&&r.getAttribute("anchorname"))t?r.setAttribute("anchorname",t):(n.setStartBefore(r).setCursor(),domUtils.remove(r));else if(t){var i=this.document.createElement("img");n.collapse(!0),domUtils.setAttributes(i,{anchorname:t,"class":"anchorclass"}),n.insertNode(i).setStartAfter(i).setCursor(!1,!0)}}}}}}),UE.plugins.wordcount=function(){var e=this;e.setOpt("wordCount",!0),e.addListener("contentchange",function(){e.fireEvent("wordcount")});var t;e.addListener("ready",function(){var e=this;domUtils.on(e.body,"keyup",function(n){var r=n.keyCode||n.which,i={16:1,18:1,20:1,37:1,38:1,39:1,40:1};if(r in i)return;clearTimeout(t),t=setTimeout(function(){e.fireEvent("wordcount")},200)})})},UE.plugins.pagebreak=function(){function n(t){if(domUtils.isEmptyBlock(t)){var n=t.firstChild,r;while(n&&n.nodeType==1&&domUtils.isEmptyBlock(n))r=n,n=n.firstChild;!r&&(r=t),domUtils.fillNode(e.document,r)}}function r(e){return e&&e.nodeType==1&&e.tagName=="HR"&&e.className=="pagebreak"}var e=this,t=["td"];e.setOpt("pageBreakTag","_ueditor_page_break_tag_"),e.ready(function(){utils.cssRule("pagebreak",".pagebreak{display:block;clear:both !important;cursor:default !important;width: 100% !important;margin:0;}",e.document)}),e.addInputRule(function(t){t.traversal(function(t){if(t.type=="text"&&t.data==e.options.pageBreakTag){var n=UE.uNode.createElement('<hr class="pagebreak" noshade="noshade" size="5" style="-webkit-user-select: none;">');t.parentNode.insertBefore(n,t),t.parentNode.removeChild(t)}})}),e.addOutputRule(function(t){utils.each(t.getNodesByTagName("hr"),function(t){if(t.getAttr("class")=="pagebreak"){var n=UE.uNode.createText(e.options.pageBreakTag);t.parentNode.insertBefore(n,t),t.parentNode.removeChild(t)}})}),e.commands.pagebreak={execCommand:function(){var i=e.selection.getRange(),s=e.document.createElement("hr");domUtils.setAttributes(s,{"class":"pagebreak",noshade:"noshade",size:"5"}),domUtils.unSelectable(s);var o=domUtils.findParentByTagName(i.startContainer,t,!0),u=[],a;if(o)switch(o.tagName){case"TD":a=o.parentNode;if(!a.previousSibling){var f=domUtils.findParentByTagName(a,"table");f.parentNode.insertBefore(s,f),u=domUtils.findParents(s,!0)}else a.parentNode.insertBefore(s,a),u=domUtils.findParents(s);a=u[1],s!==a&&domUtils.breakParent(s,a),e.fireEvent("afteradjusttable",e.document)}else{if(!i.collapsed){i.deleteContents();var l=i.startContainer;while(!domUtils.isBody(l)&&domUtils.isBlockElm(l)&&domUtils.isEmptyNode(l))i.setStartBefore(l).collapse(!0),domUtils.remove(l),l=i.startContainer}i.insertNode(s);var a=s.parentNode,c;while(!domUtils.isBody(a))domUtils.breakParent(s,a),c=s.nextSibling,c&&domUtils.isEmptyBlock(c)&&domUtils.remove(c),a=s.parentNode;c=s.nextSibling;var h=s.previousSibling;r(h)?domUtils.remove(h):h&&n(h);if(!c){var p=e.document.createElement("p");s.parentNode.appendChild(p),domUtils.fillNode(e.document,p),i.setStart(p,0).collapse(!0)}else r(c)?domUtils.remove(c):n(c),i.setEndAfter(s).collapse(!1);i.select(!0)}}}},UE.plugin.register("wordimage",function(){var e=this,t=[];return{commands:{wordimage:{execCommand:function(){var t=domUtils.getElementsByTagName(e.body,"img"),n=[];for(var r=0,i;i=t[r++];){var s=i.getAttribute("word_img");s&&n.push(s)}return n},queryCommandState:function(){t=domUtils.getElementsByTagName(e.body,"img");for(var n=0,r;r=t[n++];)if(r.getAttribute("word_img"))return 1;return-1},notNeedUndo:!0}},inputRule:function(t){utils.each(t.getNodesByTagName("img"),function(t){var n=t.attrs,r=parseInt(n.width)<128||parseInt(n.height)<43,i=e.options,s=i.UEDITOR_HOME_URL+"themes/default/images/spacer.gif";n.src&&/^(?:(file:\/+))/.test(n.src)&&t.setAttr({width:n.width,height:n.height,alt:n.alt,word_img:n.src,src:s,style:"background:url("+(r?i.themePath+i.theme+"/images/word.gif":i.langPath+i.lang+"/images/localimage.png")+") no-repeat center center;border:1px solid #ddd"})})}}}),UE.plugins.dragdrop=function(){var e=this;e.ready(function(){domUtils.on(this.body,"dragend",function(){var t=e.selection.getRange(),n=t.getClosedNode()||e.selection.getStart();if(n&&n.tagName=="IMG"){var r=n.previousSibling,i;while(i=n.nextSibling){if(i.nodeType!=1||i.tagName!="SPAN"||!!i.firstChild)break;domUtils.remove(i)}(r&&r.nodeType==1&&!domUtils.isEmptyBlock(r)||!r)&&(!i||i&&!domUtils.isEmptyBlock(i))&&(r&&r.tagName=="P"&&!domUtils.isEmptyBlock(r)?(r.appendChild(n),domUtils.moveChild(i,r),domUtils.remove(i)):i&&i.tagName=="P"&&!domUtils.isEmptyBlock(i)&&i.insertBefore(n,i.firstChild),r&&r.tagName=="P"&&domUtils.isEmptyBlock(r)&&domUtils.remove(r),i&&i.tagName=="P"&&domUtils.isEmptyBlock(i)&&domUtils.remove(i),t.selectNode(n).select(),e.fireEvent("saveScene"))}})}),e.addListener("keyup",function(t,n){var r=n.keyCode||n.which;if(r==13){var i=e.selection.getRange(),s;(s=domUtils.findParentByTagName(i.startContainer,"p",!0))&&domUtils.getComputedStyle(s,"text-align")=="center"&&domUtils.removeStyle(s,"text-align")}})},UE.plugins.undo=function(){function u(e,t){if(e.length!=t.length)return 0;for(var n=0,r=e.length;n<r;n++)if(e[n]!=t[n])return 0;return 1}function a(e,t){return e.collapsed!=t.collapsed?0:!u(e.startAddress,t.startAddress)||!u(e.endAddress,t.endAddress)?0:1}function f(){this.list=[],this.index=0,this.hasUndo=!1,this.hasRedo=!1,this.undo=function(){if(this.hasUndo){if(!this.list[this.index-1]&&this.list.length==1){this.reset();return}while(this.list[this.index].content==this.list[this.index-1].content){this.index--;if(this.index==0)return this.restore(0)}this.restore(--this.index)}},this.redo=function(){if(this.hasRedo){while(this.list[this.index].content==this.list[this.index+1].content){this.index++;if(this.index==this.list.length-1)return this.restore(this.index)}this.restore(++this.index)}},this.restore=function(){var e=this.editor,t=this.list[this.index],n=UE.htmlparser(t.content.replace(i,""));e.options.autoClearEmptyNode=!1,e.filterInputRule(n),e.options.autoClearEmptyNode=o,e.document.body.innerHTML=n.toHtml(),e.fireEvent("afterscencerestore"),browser.ie&&utils.each(domUtils.getElementsByTagName(e.document,"td th caption p"),function(t){domUtils.isEmptyNode(t)&&domUtils.fillNode(e.document,t)});try{var r=(new dom.Range(e.document)).moveToAddress(t.address);r.select(s[r.startContainer.nodeName.toLowerCase()])}catch(u){}this.update(),this.clearKey(),e.fireEvent("reset",!0)},this.getScene=function(){var e=this.editor,t=e.selection.getRange(),n=t.createAddress(!1,!0);e.fireEvent("beforegetscene");var r=UE.htmlparser(e.body.innerHTML);e.options.autoClearEmptyNode=!1,e.filterOutputRule(r),e.options.autoClearEmptyNode=o;var i=r.toHtml();return e.fireEvent("aftergetscene"),{address:n,content:i}},this.save=function(r,i){clearTimeout(e);var s=this.getScene(i),o=this.list[this.index];o&&o.content!=s.content&&t.trigger("contentchange");if(o&&o.content==s.content&&(r?1:a(o.address,s.address)))return;this.list=this.list.slice(0,this.index+1),this.list.push(s),this.list.length>n&&this.list.shift(),this.index=this.list.length-1,this.clearKey(),this.update()},this.update=function(){this.hasRedo=!!this.list[this.index+1],this.hasUndo=!!this.list[this.index-1]},this.reset=function(){this.list=[],this.index=0,this.hasUndo=!1,this.hasRedo=!1,this.clearKey()},this.clearKey=function(){h=0,p=null}}function l(){this.undoManger.save()}var e,t=this,n=t.options.maxUndoCount||20,r=t.options.maxInputCount||20,i=new RegExp(domUtils.fillChar+"|</hr>","gi"),s={ol:1,ul:1,table:1,tbody:1,tr:1,body:1},o=t.options.autoClearEmptyNode;t.undoManger=new f,t.undoManger.editor=t,t.addListener("saveScene",function(){var e=Array.prototype.splice.call(arguments,1);this.undoManger.save.apply(this.undoManger,e)}),t.addListener("reset",function(e,t){t||this.undoManger.reset()}),t.commands.redo=t.commands.undo={execCommand:function(e){this.undoManger[e]()},queryCommandState:function(e){return this.undoManger["has"+(e.toLowerCase()=="undo"?"Undo":"Redo")]?0:-1},notNeedUndo:1};var c={16:1,17:1,18:1,37:1,38:1,39:1,40:1},h=0,p,d=!1;t.addListener("ready",function(){domUtils.on(this.body,"compositionstart",function(){d=!0}),domUtils.on(this.body,"compositionend",function(){d=!1})}),t.addshortcutkey({Undo:"ctrl+90",Redo:"ctrl+89"});var v=!0;t.addListener("keydown",function(t,n){var i=this,s=n.keyCode||n.which;if(!c[s]&&!n.ctrlKey&&!n.metaKey&&!n.shiftKey&&!n.altKey){if(d)return;if(!i.selection.getRange().collapsed){i.undoManger.save(!1,!0),v=!1;return}i.undoManger.list.length==0&&i.undoManger.save(!0),clearTimeout(e);function o(e){e.undoManger.save(!1,!0),e.fireEvent("selectionchange")}e=setTimeout(function(){if(d){var e=setInterval(function(){d||(o(i),clearInterval(e))},300);return}o(i)},200),p=s,h++,h>=r&&o(i)}}),t.addListener("keyup",function(e,t){var n=t.keyCode||t.which;if(!c[n]&&!t.ctrlKey&&!t.metaKey&&!t.shiftKey&&!t.altKey){if(d)return;v||(this.undoManger.save(!1,!0),v=!0)}}),t.stopCmdUndo=function(){t.__hasEnterExecCommand=!0},t.startCmdUndo=function(){t.__hasEnterExecCommand=!1}},UE.plugins.list=function(){function r(e){var t=[];for(var n in e)t.push(n);return t}function u(e){var t=e.className;return domUtils.hasClass(e,/custom_/)?t.match(/custom_(\w+)/)[1]:domUtils.getStyle(e,"list-style-type")}function a(e,t){utils.each(domUtils.getElementsByTagName(e,"ol ul"),function(r){if(!domUtils.inDoc(r,e))return;var s=r.parentNode;if(s.tagName==r.tagName){var o=u(r)||(r.tagName=="OL"?"decimal":"disc"),a=u(s)||(s.tagName=="OL"?"decimal":"disc");if(o==a){var c=utils.indexOf(i[r.tagName],o);c=c+1==i[r.tagName].length?0:c+1,l(r,i[r.tagName][c])}}var h=0,p=2;if(domUtils.hasClass(r,/custom_/)){if(!/[ou]l/i.test(s.tagName)||!domUtils.hasClass(s,/custom_/))p=1}else/[ou]l/i.test(s.tagName)&&domUtils.hasClass(s,/custom_/)&&(p=3);var d=domUtils.getStyle(r,"list-style-type");d&&(r.style.cssText="list-style-type:"+d),r.className=utils.trim(r.className.replace(/list-paddingleft-\w+/,""))+" list-paddingleft-"+p,utils.each(domUtils.getElementsByTagName(r,"li"),function(e){e.style.cssText&&(e.style.cssText="");if(!e.firstChild){domUtils.remove(e);return}if(e.parentNode!==r)return;h++;if(domUtils.hasClass(r,/custom_/)){var t=1,i=u(r);if(r.tagName=="OL"){if(i)switch(i){case"cn":case"cn1":case"cn2":h>10&&(h%10==0||h>10&&h<20)?t=2:h>20&&(t=3);break;case"num2":h>9&&(t=2)}e.className="list-"+n[i]+h+" "+"list-"+i+"-paddingleft-"+t}else e.className="list-"+n[i]+" "+"list-"+i+"-paddingleft"}else e.className=e.className.replace(/list-[\w\-]+/gi,"");var s=e.getAttribute("class");s!==null&&!s.replace(/\s/g,"")&&domUtils.removeAttributes(e,"class")}),!t&&f(r,r.tagName.toLowerCase(),u(r)||domUtils.getStyle(r,"list-style-type"),!0)})}function f(e,t,n,r){var i=e.nextSibling;i&&i.nodeType==1&&i.tagName.toLowerCase()==t&&(u(i)||domUtils.getStyle(i,"list-style-type")||(t=="ol"?"decimal":"disc"))==n&&(domUtils.moveChild(i,e),i.childNodes.length==0&&domUtils.remove(i)),i&&domUtils.isFillChar(i)&&domUtils.remove(i);var s=e.previousSibling;s&&s.nodeType==1&&s.tagName.toLowerCase()==t&&(u(s)||domUtils.getStyle(s,"list-style-type")||(t=="ol"?"decimal":"disc"))==n&&domUtils.moveChild(e,s),s&&domUtils.isFillChar(s)&&domUtils.remove(s),!r&&domUtils.isEmptyBlock(e)&&domUtils.remove(e),u(e)&&a(e.ownerDocument,!0)}function l(e,t){n[t]&&(e.className="custom_"+t);try{domUtils.setStyle(e,"list-style-type",t)}catch(r){}}function c(e){var t=e.previousSibling;t&&domUtils.isEmptyBlock(t)&&domUtils.remove(t),t=e.nextSibling,t&&domUtils.isEmptyBlock(t)&&domUtils.remove(t)}function h(e){while(e&&!domUtils.isBody(e)){if(e.nodeName=="TABLE")return null;if(e.nodeName=="LI")return e;e=e.parentNode}}var e=this,t={TD:1,PRE:1,BLOCKQUOTE:1},n={cn:"cn-1-",cn1:"cn-2-",cn2:"cn-3-",num:"num-1-",num1:"num-2-",num2:"num-3-",dash:"dash",dot:"dot"};e.setOpt({autoTransWordToList:!1,insertorderedlist:{num:"",num1:"",num2:"",cn:"",cn1:"",cn2:"",decimal:"","lower-alpha":"","lower-roman":"","upper-alpha":"","upper-roman":""},insertunorderedlist:{circle:"",disc:"",square:"",dash:"",dot:""},listDefaultPaddingLeft:"30",listiconpath:"http://bs.baidu.com/listicon/",maxListLevel:-1,disablePInList:!1});var i={OL:r(e.options.insertorderedlist),UL:r(e.options.insertunorderedlist)},s=e.options.listiconpath;for(var o in n)!e.options.insertorderedlist.hasOwnProperty(o)&&!e.options.insertunorderedlist.hasOwnProperty(o)&&delete n[o];e.ready(function(){var t=[];for(var r in n){if(r=="dash"||r=="dot")t.push("li.list-"+n[r]+"{background-image:url("+s+n[r]+".gif)}"),t.push("ul.custom_"+r+"{list-style:none;}ul.custom_"+r+" li{background-position:0 3px;background-repeat:no-repeat}");else{for(var i=0;i<99;i++)t.push("li.list-"+n[r]+i+"{background-image:url("+s+"list-"+n[r]+i+".gif)}");t.push("ol.custom_"+r+"{list-style:none;}ol.custom_"+r+" li{background-position:0 3px;background-repeat:no-repeat}")}switch(r){case"cn":t.push("li.list-"+r+"-paddingleft-1{padding-left:25px}"),t.push("li.list-"+r+"-paddingleft-2{padding-left:40px}"),t.push("li.list-"+r+"-paddingleft-3{padding-left:55px}");break;case"cn1":t.push("li.list-"+r+"-paddingleft-1{padding-left:30px}"),t.push("li.list-"+r+"-paddingleft-2{padding-left:40px}"),t.push("li.list-"+r+"-paddingleft-3{padding-left:55px}");break;case"cn2":t.push("li.list-"+r+"-paddingleft-1{padding-left:40px}"),t.push("li.list-"+r+"-paddingleft-2{padding-left:55px}"),t.push("li.list-"+r+"-paddingleft-3{padding-left:68px}");break;case"num":case"num1":t.push("li.list-"+r+"-paddingleft-1{padding-left:25px}");break;case"num2":t.push("li.list-"+r+"-paddingleft-1{padding-left:35px}"),t.push("li.list-"+r+"-paddingleft-2{padding-left:40px}");break;case"dash":t.push("li.list-"+r+"-paddingleft{padding-left:35px}");break;case"dot":t.push("li.list-"+r+"-paddingleft{padding-left:20px}")}}t.push(".list-paddingleft-1{padding-left:0}"),t.push(".list-paddingleft-2{padding-left:"+e.options.listDefaultPaddingLeft+"px}"),t.push(".list-paddingleft-3{padding-left:"+e.options.listDefaultPaddingLeft*2+"px}"),utils.cssRule("list","ol,ul{margin:0;pading:0;"+(browser.ie?"":"width:95%")+"}li{clear:both;}"+t.join("\n"),e.document)}),e.ready(function(){domUtils.on(e.body,"cut",function(){setTimeout(function(){var t=e.selection.getRange(),n;if(!t.collapsed&&(n=domUtils.findParentByTagName(t.startContainer,"li",!0))&&!n.nextSibling&&domUtils.isEmptyBlock(n)){var r=n.parentNode,i;if(i=r.previousSibling)domUtils.remove(r),t.setStartAtLast(i).collapse(!0),t.select(!0);else if(i=r.nextSibling)domUtils.remove(r),t.setStartAtFirst(i).collapse(!0),t.select(!0);else{var s=e.document.createElement("p");domUtils.fillNode(e.document,s),r.parentNode.insertBefore(s,r),domUtils.remove(r),t.setStart(s,0).collapse(!0),t.select(!0)}}})})}),e.addListener("beforepaste",function(e,t){var r=this,s=r.selection.getRange(),o,a=UE.htmlparser(t.html,!0);if(o=domUtils.findParentByTagName(s.startContainer,"li",!0)){var f=o.parentNode,l=f.tagName=="OL"?"ul":"ol";utils.each(a.getNodesByTagName(l),function(t){t.tagName=f.tagName,t.setAttr();if(t.parentNode===a)e=u(f)||(f.tagName=="OL"?"decimal":"disc");else{var r=t.parentNode.getAttr("class");r&&/custom_/.test(r)?e=r.match(/custom_(\w+)/)[1]:e=t.parentNode.getStyle("list-style-type"),e||(e=f.tagName=="OL"?"decimal":"disc")}var s=utils.indexOf(i[f.tagName],e);t.parentNode!==a&&(s=s+1==i[f.tagName].length?0:s+1);var o=i[f.tagName][s];n[o]?t.setAttr("class","custom_"+o):t.setStyle("list-style-type",o)})}t.html=a.toHtml()}),e.getOpt("disablePInList")===!0&&e.addOutputRule(function(e){utils.each(e.getNodesByTagName("li"),function(e){var t=[],n=0;utils.each(e.children,function(r){if(r.tagName=="p"){var i;while(i=r.children.pop())t.splice(n,0,i),i.parentNode=e,lastNode=i;i=t[t.length-1];if(!i||i.type!="element"||i.tagName!="br"){var s=UE.uNode.createElement("br");s.parentNode=e,t.push(s)}n=t.length}}),t.length&&(e.children=t)})}),e.addInputRule(function(t){utils.each(t.getNodesByTagName("li"),function(e){var t=UE.uNode.createElement("p");for(var n=0,r;r=e.children[n];)r.type=="text"||dtd.p[r.tagName]?t.appendChild(r):t.firstChild()?(e.insertBefore(t,r),t=UE.uNode.createElement("p"),n+=2):n++;(t.firstChild()&&!t.parentNode||!e.firstChild())&&e.appendChild(t),t.firstChild()||t.innerHTML(browser.ie?"&nbsp;":"<br/>");var i=e.firstChild(),s=i.lastChild();s&&s.type=="text"&&/^\s*$/.test(s.data)&&i.removeChild(s)});if(e.options.autoTransWordToList){var r={num1:/^\d+\)/,decimal:/^\d+\./,"lower-alpha":/^[a-z]+\)/,"upper-alpha":/^[A-Z]+\./,cn:/^[\u4E00\u4E8C\u4E09\u56DB\u516d\u4e94\u4e03\u516b\u4e5d]+[\u3001]/,cn2:/^\([\u4E00\u4E8C\u4E09\u56DB\u516d\u4e94\u4e03\u516b\u4e5d]+\)/},i={square:"n"};function s(e,t){var n=t.firstChild();if(n&&n.type=="element"&&n.tagName=="span"&&/Wingdings|Symbol/.test(n.getStyle("font-family"))){for(var s in i)if(i[s]==n.data)return s;return"disc"}for(var s in r)if(r[s].test(e))return s}utils.each(t.getNodesByTagName("p"),function(t){function i(e,t,n){if(e.tagName=="ol")if(browser.ie){var i=t.firstChild();i.type=="element"&&i.tagName=="span"&&r[n].test(i.innerText())&&t.removeChild(i)}else t.innerHTML(t.innerHTML().replace(r[n],""));else t.removeChild(t.firstChild());var s=UE.uNode.createElement("li");s.appendChild(t),e.appendChild(s)}if(t.getAttr("class")!="MsoListParagraph")return;t.setStyle("margin",""),t.setStyle("margin-left",""),t.setAttr("class","");var o=t,u,a=t;if(t.parentNode.tagName!="li"&&(u=s(t.innerText(),t))){var f=UE.uNode.createElement(e.options.insertorderedlist.hasOwnProperty(u)?"ol":"ul");n[u]?f.setAttr("class","custom_"+u):f.setStyle("list-style-type",u);while(t&&t.parentNode.tagName!="li"&&s(t.innerText(),t))o=t.nextSibling(),o||t.parentNode.insertBefore(f,t),i(f,t,u),t=o;!f.parentNode&&t&&t.parentNode&&t.parentNode.insertBefore(f,t)}var l=a.firstChild();l&&l.type=="element"&&l.tagName=="span"&&/^\s*(&nbsp;)+\s*$/.test(l.innerText())&&l.parentNode.removeChild(l)})}}),e.addListener("contentchange",function(){a(e.document)}),e.addListener("keydown",function(t,n){function r(){n.preventDefault?n.preventDefault():n.returnValue=!1,e.fireEvent("contentchange"),e.undoManger&&e.undoManger.save()}function i(e,t){while(e&&!domUtils.isBody(e)){if(t(e))return null;if(e.nodeType==1&&/[ou]l/i.test(e.tagName))return e;e=e.parentNode}return null}var s=n.keyCode||n.which;if(s==13&&!n.shiftKey){var o=e.selection.getRange(),u=domUtils.findParent(o.startContainer,function(e){return domUtils.isBlockElm(e)},!0),a=domUtils.findParentByTagName(o.startContainer,"li",!0);if(u&&u.tagName!="PRE"&&!a){var f=u.innerHTML.replace(new RegExp(domUtils.fillChar,"g"),"");/^\s*1\s*\.[^\d]/.test(f)&&(u.innerHTML=f.replace(/^\s*1\s*\./,""),o.setStartAtLast(u).collapse(!0).select(),e.__hasEnterExecCommand=!0,e.execCommand("insertorderedlist"),e.__hasEnterExecCommand=!1)}var l=e.selection.getRange(),h=i(l.startContainer,function(e){return e.tagName=="TABLE"}),p=l.collapsed?h:i(l.endContainer,function(e){return e.tagName=="TABLE"});if(h&&p&&h===p){if(!l.collapsed){h=domUtils.findParentByTagName(l.startContainer,"li",!0),p=domUtils.findParentByTagName(l.endContainer,"li",!0);if(!h||!p||h!==p){var d=l.cloneRange(),v=d.collapse(!1).createBookmark();l.deleteContents(),d.moveToBookmark(v);var a=domUtils.findParentByTagName(d.startContainer,"li",!0);c(a),d.select(),r();return}l.deleteContents(),a=domUtils.findParentByTagName(l.startContainer,"li",!0);if(a&&domUtils.isEmptyBlock(a)){E=a.previousSibling,next=a.nextSibling,y=e.document.createElement("p"),domUtils.fillNode(e.document,y),m=a.parentNode,E&&next?(l.setStart(next,0).collapse(!0).select(!0),domUtils.remove(a)):(!E&&!next||!E?m.parentNode.insertBefore(y,m):a.parentNode.parentNode.insertBefore(y,m.nextSibling),domUtils.remove(a),m.firstChild||domUtils.remove(m),l.setStart(y,0).setCursor()),r();return}}a=domUtils.findParentByTagName(l.startContainer,"li",!0);if(a){if(domUtils.isEmptyBlock(a)){v=l.createBookmark();var m=a.parentNode;a!==m.lastChild?(domUtils.breakParent(a,m),c(a)):(m.parentNode.insertBefore(a,m.nextSibling),domUtils.isEmptyNode(m)&&domUtils.remove(m));if(!dtd.$list[a.parentNode.tagName])if(!domUtils.isBlockElm(a.firstChild)){y=e.document.createElement("p"),a.parentNode.insertBefore(y,a);while(a.firstChild)y.appendChild(a.firstChild);domUtils.remove(a)}else domUtils.remove(a,!0);l.moveToBookmark(v).select()}else{var g=a.firstChild;if(!g||!domUtils.isBlockElm(g)){var y=e.document.createElement("p");!a.firstChild&&domUtils.fillNode(e.document,y);while(a.firstChild)y.appendChild(a.firstChild);a.appendChild(y),g=y}var b=e.document.createElement("span");l.insertNode(b),domUtils.breakParent(b,a);var w=b.nextSibling;g=w.firstChild,g||(y=e.document.createElement("p"),domUtils.fillNode(e.document,y),w.appendChild(y),g=y),domUtils.isEmptyNode(g)&&(g.innerHTML="",domUtils.fillNode(e.document,g)),l.setStart(g,0).collapse(!0).shrinkBoundary().select(),domUtils.remove(b);var E=w.previousSibling;E&&domUtils.isEmptyBlock(E)&&(E.innerHTML="<p></p>",domUtils.fillNode(e.document,E.firstChild))}r()}}}if(s==8){l=e.selection.getRange();if(l.collapsed&&domUtils.isStartInblock(l)){d=l.cloneRange().trimBoundary(),a=domUtils.findParentByTagName(l.startContainer,"li",!0);if(a&&domUtils.isStartInblock(d)){h=domUtils.findParentByTagName(l.startContainer,"p",!0);if(h&&h!==a.firstChild){var m=domUtils.findParentByTagName(h,["ol","ul"]);domUtils.breakParent(h,m),c(h),e.fireEvent("contentchange"),l.setStart(h,0).setCursor(!1,!0),e.fireEvent("saveScene"),domUtils.preventDefault(n);return}if(a&&(E=a.previousSibling)){if(s==46&&a.childNodes.length)return;dtd.$list[E.tagName]&&(E=E.lastChild),e.undoManger&&e.undoManger.save(),g=a.firstChild;if(domUtils.isBlockElm(g))if(domUtils.isEmptyNode(g)){E.appendChild(g),l.setStart(g,0).setCursor(!1,!0);while(a.firstChild)E.appendChild(a.firstChild)}else b=e.document.createElement("span"),l.insertNode(b),domUtils.isEmptyBlock(E)&&(E.innerHTML=""),domUtils.moveChild(a,E),l.setStartBefore(b).collapse(!0).select(!0),domUtils.remove(b);else if(domUtils.isEmptyNode(a)){var y=e.document.createElement("p");E.appendChild(y),l.setStart(y,0).setCursor()}else{l.setEnd(E,E.childNodes.length).collapse().select(!0);while(a.firstChild)E.appendChild(a.firstChild)}domUtils.remove(a),e.fireEvent("contentchange"),e.fireEvent("saveScene"),domUtils.preventDefault(n);return}if(a&&!a.previousSibling){var m=a.parentNode,v=l.createBookmark();if(domUtils.isTagNode(m.parentNode,"ol ul"))m.parentNode.insertBefore(a,m),domUtils.isEmptyNode(m)&&domUtils.remove(m);else{while(a.firstChild)m.parentNode.insertBefore(a.firstChild,m);domUtils.remove(a),domUtils.isEmptyNode(m)&&domUtils.remove(m)}l.moveToBookmark(v).setCursor(!1,!0),e.fireEvent("contentchange"),e.fireEvent("saveScene"),domUtils.preventDefault(n);return}}}}}),e.addListener("keyup",function(t,n){var r=n.keyCode||n.which;if(r==8){var i=e.selection.getRange(),s;(s=domUtils.findParentByTagName(i.startContainer,["ol","ul"],!0))&&f(s,s.tagName.toLowerCase(),u(s)||domUtils.getComputedStyle(s,"list-style-type"),!0)}}),e.addListener("tabkeydown",function(){function n(t){if(e.options.maxListLevel!=-1){var n=t.parentNode,r=0;while(/[ou]l/i.test(n.tagName))r++,n=n.parentNode;if(r>=e.options.maxListLevel)return!0}}var t=e.selection.getRange(),r=domUtils.findParentByTagName(t.startContainer,"li",!0);if(r){var s;if(!t.collapsed){e.fireEvent("saveScene"),s=t.createBookmark();for(var p=0,d,v=domUtils.findParents(r),m;m=v[p++];)if(domUtils.isTagNode(m,"ol ul")){d=m;break}var g=r;if(s.end)while(g&&!(domUtils.getPosition(g,s.end)&domUtils.POSITION_FOLLOWING)){if(n(g)){g=domUtils.getNextDomNode(g,!1,null,function(e){return e!==d});continue}var o=g.parentNode,a=e.document.createElement(o.tagName),c=utils.indexOf(i[a.tagName],u(o)||domUtils.getComputedStyle(o,"list-style-type")),y=c+1==i[a.tagName].length?0:c+1,h=i[a.tagName][y];l(a,h),o.insertBefore(a,g);while(g&&!(domUtils.getPosition(g,s.end)&domUtils.POSITION_FOLLOWING)){r=g.nextSibling,a.appendChild(g);if(!r||domUtils.isTagNode(r,"ol ul")){if(r){while(r=r.firstChild)if(r.tagName=="LI")break}else r=domUtils.getNextDomNode(g,!1,null,function(e){return e!==d});break}g=r}f(a,a.tagName.toLowerCase(),h),g=r}return e.fireEvent("contentchange"),t.moveToBookmark(s).select(),!0}if(n(r))return!0;var o=r.parentNode,a=e.document.createElement(o.tagName),c=utils.indexOf(i[a.tagName],u(o)||domUtils.getComputedStyle(o,"list-style-type"));c=c+1==i[a.tagName].length?0:c+1;var h=i[a.tagName][c];l(a,h);if(domUtils.isStartInblock(t))return e.fireEvent("saveScene"),s=t.createBookmark(),o.insertBefore(a,r),a.appendChild(r),f(a,a.tagName.toLowerCase(),h),e.fireEvent("contentchange"),t.moveToBookmark(s).select(!0),!0}}),e.commands.insertorderedlist=e.commands.insertunorderedlist={execCommand:function(e,n){n||(n=e.toLowerCase()=="insertorderedlist"?"decimal":"disc");var r=this,i=this.selection.getRange(),s=function(e){return e.nodeType==1?e.tagName.toLowerCase()!="br":!domUtils.isWhitespace(e)},o=e.toLowerCase()=="insertorderedlist"?"ol":"ul",a=r.document.createDocumentFragment();i.adjustmentBoundary().shrinkBoundary();var c=i.createBookmark(!0),p=h(r.document.getElementById(c.start)),d=0,v=h(r.document.getElementById(c.end)),m=0,g,y,b,w;if(p||v){p&&(g=p.parentNode),c.end||(v=p),v&&(y=v.parentNode);if(g===y){while(p!==v){w=p,p=p.nextSibling;if(!domUtils.isBlockElm(w.firstChild)){var E=r.document.createElement("p");while(w.firstChild)E.appendChild(w.firstChild);w.appendChild(E)}a.appendChild(w)}w=r.document.createElement("span"),g.insertBefore(w,v);if(!domUtils.isBlockElm(v.firstChild)){E=r.document.createElement("p");while(v.firstChild)E.appendChild(v.firstChild);v.appendChild(E)}a.appendChild(v),domUtils.breakParent(w,g),domUtils.isEmptyNode(w.previousSibling)&&domUtils.remove(w.previousSibling),domUtils.isEmptyNode(w.nextSibling)&&domUtils.remove(w.nextSibling);var S=u(g)||domUtils.getComputedStyle(g,"list-style-type")||(e.toLowerCase()=="insertorderedlist"?"decimal":"disc");if(g.tagName.toLowerCase()==o&&S==n){for(var x=0,T,N=r.document.createDocumentFragment();T=a.firstChild;)if(domUtils.isTagNode(T,"ol ul"))N.appendChild(T);else while(T.firstChild)N.appendChild(T.firstChild),domUtils.remove(T);w.parentNode.insertBefore(N,w)}else b=r.document.createElement(o),l(b,n),b.appendChild(a),w.parentNode.insertBefore(b,w);domUtils.remove(w),b&&f(b,o,n),i.moveToBookmark(c).select();return}if(p){while(p){w=p.nextSibling;if(domUtils.isTagNode(p,"ol ul"))a.appendChild(p);else{var C=r.document.createDocumentFragment(),k=0;while(p.firstChild)domUtils.isBlockElm(p.firstChild)&&(k=1),C.appendChild(p.firstChild);if(!k){var L=r.document.createElement("p");L.appendChild(C),a.appendChild(L)}else a.appendChild(C);domUtils.remove(p)}p=w}g.parentNode.insertBefore(a,g.nextSibling),domUtils.isEmptyNode(g)?(i.setStartBefore(g),domUtils.remove(g)):i.setStartAfter(g),d=1}if(v&&domUtils.inDoc(y,r.document)){p=y.firstChild;while(p&&p!==v){w=p.nextSibling;if(domUtils.isTagNode(p,"ol ul"))a.appendChild(p);else{C=r.document.createDocumentFragment(),k=0;while(p.firstChild)domUtils.isBlockElm(p.firstChild)&&(k=1),C.appendChild(p.firstChild);k?a.appendChild(C):(L=r.document.createElement("p"),L.appendChild(C),a.appendChild(L)),domUtils.remove(p)}p=w}var A=domUtils.createElement(r.document,"div",{tmpDiv:1});domUtils.moveChild(v,A),a.appendChild(A),domUtils.remove(v),y.parentNode.insertBefore(a,y),i.setEndBefore(y),domUtils.isEmptyNode(y)&&domUtils.remove(y),m=1}}d||i.setStartBefore(r.document.getElementById(c.start)),c.end&&!m&&i.setEndAfter(r.document.getElementById(c.end)),i.enlarge(!0,function(e){return t[e.tagName]}),a=r.document.createDocumentFragment();var O=i.createBookmark(),M=domUtils.getNextDomNode(O.start,!1,s),_=i.cloneRange(),D,P=domUtils.isBlockElm;while(M&&M!==O.end&&domUtils.getPosition(M,O.end)&domUtils.POSITION_PRECEDING)if(M.nodeType==3||dtd.li[M.tagName]){if(M.nodeType==1&&dtd.$list[M.tagName]){while(M.firstChild)a.appendChild(M.firstChild);D=domUtils.getNextDomNode(M,!1,s),domUtils.remove(M),M=D;continue}D=M,_.setStartBefore(M);while(M&&M!==O.end&&(!P(M)||domUtils.isBookmarkNode(M)))D=M,M=domUtils.getNextDomNode(M,!1,null,function(e){return!t[e.tagName]});M&&P(M)&&(w=domUtils.getNextDomNode(D,!1,s),w&&domUtils.isBookmarkNode(w)&&(M=domUtils.getNextDomNode(w,!1,s),D=w)),_.setEndAfter(D),M=domUtils.getNextDomNode(D,!1,s);var H=i.document.createElement("li");H.appendChild(_.extractContents());if(domUtils.isEmptyNode(H)){var D=i.document.createElement("p");while(H.firstChild)D.appendChild(H.firstChild);H.appendChild(D)}a.appendChild(H)}else M=domUtils.getNextDomNode(M,!0,s);i.moveToBookmark(O).collapse(!0),b=r.document.createElement(o),l(b,n),b.appendChild(a),i.insertNode(b),f(b,o,n);for(var x=0,T,B=domUtils.getElementsByTagName(b,"div");T=B[x++];)T.getAttribute("tmpDiv")&&domUtils.remove(T,!0);i.moveToBookmark(c).select()},queryCommandState:function(e){var t=e.toLowerCase()=="insertorderedlist"?"ol":"ul",n=this.selection.getStartElementPath();for(var r=0,i;i=n[r++];){if(i.nodeName=="TABLE")return 0;if(t==i.nodeName.toLowerCase())return 1}return 0},queryCommandValue:function(e){var t=e.toLowerCase()=="insertorderedlist"?"ol":"ul",n=this.selection.getStartElementPath(),r;for(var i=0,s;s=n[i++];){if(s.nodeName=="TABLE"){r=null;break}if(t==s.nodeName.toLowerCase()){r=s;break}}return r?u(r)||domUtils.getComputedStyle(r,"list-style-type"):null}}},function(){var e={textarea:function(e,t){var n=t.ownerDocument.createElement("textarea");return n.style.cssText="position:absolute;resize:none;width:100%;height:100%;border:0;padding:0;margin:0;overflow-y:auto;",browser.ie&&browser.version<8&&(n.style.width=t.offsetWidth+"px",n.style.height=t.offsetHeight+"px",t.onresize=function(){n.style.width=t.offsetWidth+"px",n.style.height=t.offsetHeight+"px"}),t.appendChild(n),{setContent:function(e){n.value=e},getContent:function(){return n.value},select:function(){var e;browser.ie?(e=n.createTextRange(),e.collapse(!0),e.select()):(n.setSelectionRange(0,0),n.focus())},dispose:function(){t.removeChild(n),t.onresize=null,n=null,t=null}}},codemirror:function(e,t){var n=window.CodeMirror(t,{mode:"text/html",tabMode:"indent",lineNumbers:!0,lineWrapping:!0}),r=n.getWrapperElement();return r.style.cssText='position:absolute;left:0;top:0;width:100%;height:100%;font-family:consolas,"Courier new",monospace;font-size:13px;',n.getScrollerElement().style.cssText="position:absolute;left:0;top:0;width:100%;height:100%;",n.refresh(),{getCodeMirror:function(){return n},setContent:function(e){n.setValue(e)},getContent:function(){return n.getValue()},select:function(){n.focus()},dispose:function(){t.removeChild(r),r=null,n=null}}}};UE.plugins.source=function(){function o(r){return e[n.sourceEditor=="codemirror"&&window.CodeMirror?"codemirror":"textarea"](t,r)}var t=this,n=this.options,r=!1,i,s;n.sourceEditor=browser.ie?"textarea":n.sourceEditor||"codemirror",t.setOpt({sourceEditorFirst:!1});var u,a,f;t.commands.source={execCommand:function(){r=!r;if(r){f=t.selection.getRange().createAddress(!1,!0),t.undoManger&&t.undoManger.save(!0),browser.gecko&&(t.body.contentEditable=!1),u=t.iframe.style.cssText,t.iframe.style.cssText+="position:absolute;left:-32768px;top:-32768px;",t.fireEvent("beforegetcontent");var e=UE.htmlparser(t.body.innerHTML);t.filterOutputRule(e),e.traversal(function(e){if(e.type=="element")switch(e.tagName){case"td":case"th":case"caption":e.children&&e.children.length==1&&e.firstChild().tagName=="br"&&e.removeChild(e.firstChild());break;case"pre":e.innerText(e.innerText().replace(/&nbsp;/g," "))}}),t.fireEvent("aftergetcontent");var n=e.toHtml(!0);i=o(t.iframe.parentNode),i.setContent(n),s=t.setContent,t.setContent=function(e){var n=UE.htmlparser(e);t.filterInputRule(n),e=n.toHtml(),i.setContent(e)},setTimeout(function(){i.select(),t.addListener("fullscreenchanged",function(){try{i.getCodeMirror().refresh()}catch(e){}})}),a=t.getContent,t.getContent=function(){return i.getContent()||"<p>"+(browser.ie?"":"<br/>")+"</p>"}}else{t.iframe.style.cssText=u;var l=i.getContent()||"<p>"+(browser.ie?"":"<br/>")+"</p>";l=l.replace(new RegExp("[\\r\\t\\n ]*</?(\\w+)\\s*(?:[^>]*)>","g"),function(e,t){return t&&!dtd.$inlineWithA[t.toLowerCase()]?e.replace(/(^[\n\r\t ]*)|([\n\r\t ]*$)/g,""):e.replace(/(^[\n\r\t]*)|([\n\r\t]*$)/g,"")}),t.setContent=s,t.setContent(l),i.dispose(),i=null,t.getContent=a;var c=t.body.firstChild;c||(t.body.innerHTML="<p>"+(browser.ie?"":"<br/>")+"</p>",c=t.body.firstChild),t.undoManger&&t.undoManger.save(!0);if(browser.gecko){var h=document.createElement("input");h.style.cssText="position:absolute;left:0;top:-32768px",document.body.appendChild(h),t.body.contentEditable=!1,setTimeout(function(){domUtils.setViewportOffset(h,{left:-32768,top:0}),h.focus(),setTimeout(function(){t.body.contentEditable=!0,t.selection.getRange().moveToAddress(f).select(!0),domUtils.remove(h)})})}else try{t.selection.getRange().moveToAddress(f).select(!0)}catch(p){}}this.fireEvent("sourcemodechanged",r)},queryCommandState:function(){return r|0},notNeedUndo:1};var l=t.queryCommandState;t.queryCommandState=function(e){return e=e.toLowerCase(),r?e in{source:1,fullscreen:1}?1:-1:l.apply(this,arguments)},n.sourceEditor=="codemirror"&&t.addListener("ready",function(){utils.loadFile(document,{src:n.codeMirrorJsUrl||n.UEDITOR_HOME_URL+"third-party/codemirror/codemirror.js",tag:"script",type:"text/javascript",defer:"defer"},function(){n.sourceEditorFirst&&setTimeout(function(){t.execCommand("source")},0)}),utils.loadFile(document,{tag:"link",rel:"stylesheet",type:"text/css",href:n.codeMirrorCssUrl||n.UEDITOR_HOME_URL+"third-party/codemirror/codemirror.css"})})}}(),UE.plugins.enterkey=function(){var e,t=this,n=t.options.enterTag;t.addListener("keyup",function(n,r){var i=r.keyCode||r.which;if(i==13){var s=t.selection.getRange(),o=s.startContainer,u;if(!browser.ie){if(/h\d/i.test(e)){if(browser.gecko){var a=domUtils.findParentByTagName(o,["h1","h2","h3","h4","h5","h6","blockquote","caption","table"],!0);a||(t.document.execCommand("formatBlock",!1,"<p>"),u=1)}else if(o.nodeType==1){var f=t.document.createTextNode(""),l;s.insertNode(f),l=domUtils.findParentByTagName(f,"div",!0);if(l){var c=t.document.createElement("p");while(l.firstChild)c.appendChild(l.firstChild);l.parentNode.insertBefore(c,l),domUtils.remove(l),s.setStartBefore(f).setCursor(),u=1}domUtils.remove(f)}t.undoManger&&u&&t.undoManger.save()}browser.opera&&s.select()}else t.fireEvent("saveScene",!0,!0)}}),t.addListener("keydown",function(r,i){var s=i.keyCode||i.which;if(s==13){if(t.fireEvent("beforeenterkeydown")){domUtils.preventDefault(i);return}t.fireEvent("saveScene",!0,!0),e="";var o=t.selection.getRange();if(!o.collapsed){var u=o.startContainer,a=o.endContainer,f=domUtils.findParentByTagName(u,"td",!0),l=domUtils.findParentByTagName(a,"td",!0);if(f&&l&&f!==l||!f&&l||f&&!l){i.preventDefault?i.preventDefault():i.returnValue=!1;return}}if(n=="p")browser.ie||(u=domUtils.findParentByTagName(o.startContainer,["ol","ul","p","h1","h2","h3","h4","h5","h6","blockquote","caption"],!0),!u&&!browser.opera?(t.document.execCommand("formatBlock",!1,"<p>"),browser.gecko&&(o=t.selection.getRange(),u=domUtils.findParentByTagName(o.startContainer,"p",!0),u&&domUtils.removeDirtyAttr(u))):(e=u.tagName,u.tagName.toLowerCase()=="p"&&browser.gecko&&domUtils.removeDirtyAttr(u)));else{i.preventDefault?i.preventDefault():i.returnValue=!1;if(!o.collapsed){o.deleteContents(),u=o.startContainer;if(u.nodeType==1&&(u=u.childNodes[o.startOffset])){while(u.nodeType==1){if(dtd.$empty[u.tagName])return o.setStartBefore(u).setCursor(),t.undoManger&&t.undoManger.save(),!1;if(!u.firstChild){var c=o.document.createElement("br");return u.appendChild(c),o.setStart(u,0).setCursor(),t.undoManger&&t.undoManger.save(),!1}u=u.firstChild}u===o.startContainer.childNodes[o.startOffset]?(c=o.document.createElement("br"),o.insertNode(c).setCursor()):o.setStart(u,0).setCursor()}else c=o.document.createElement("br"),o.insertNode(c).setStartAfter(c).setCursor()}else{c=o.document.createElement("br"),o.insertNode(c);var h=c.parentNode;h.lastChild===c?(c.parentNode.insertBefore(c.cloneNode(!0),c),o.setStartBefore(c)):o.setStartAfter(c),o.setCursor()}}}})},UE.plugins.keystrokes=function(){var e=this,t=!0;e.addListener("keydown",function(n,r){var i=r.keyCode||r.which,s=e.selection.getRange();if(!s.collapsed&&!(r.ctrlKey||r.shiftKey||r.altKey||r.metaKey)&&(i>=65&&i<=90||i>=48&&i<=57||i>=96&&i<=111||{13:1,8:1,46:1}[i])){var o=s.startContainer;domUtils.isFillChar(o)&&s.setStartBefore(o),o=s.endContainer,domUtils.isFillChar(o)&&s.setEndAfter(o),s.txtToElmBoundary(),s.endContainer&&s.endContainer.nodeType==1&&(o=s.endContainer.childNodes[s.endOffset],o&&domUtils.isBr(o)&&s.setEndAfter(o));if(s.startOffset==0){o=s.startContainer;if(domUtils.isBoundaryNode(o,"firstChild")){o=s.endContainer;if(s.endOffset==(o.nodeType==3?o.nodeValue.length:o.childNodes.length)&&domUtils.isBoundaryNode(o,"lastChild")){e.fireEvent("saveScene"),e.body.innerHTML="<p>"+(browser.ie?"":"<br/>")+"</p>",s.setStart(e.body.firstChild,0).setCursor(!1,!0),e._selectionChange();return}}}}if(i==keymap.Backspace){s=e.selection.getRange(),t=s.collapsed;if(e.fireEvent("delkeydown",r))return;var u,a;s.collapsed&&s.inFillChar()&&(u=s.startContainer,domUtils.isFillChar(u)?(s.setStartBefore(u).shrinkBoundary(!0).collapse(!0),domUtils.remove(u)):(u.nodeValue=u.nodeValue.replace(new RegExp("^"+domUtils.fillChar),""),s.startOffset--,s.collapse(!0).select(!0)));if(u=s.getClosedNode()){e.fireEvent("saveScene"),s.setStartBefore(u),domUtils.remove(u),s.setCursor(),e.fireEvent("saveScene"),domUtils.preventDefault(r);return}if(!browser.ie){u=domUtils.findParentByTagName(s.startContainer,"table",!0),a=domUtils.findParentByTagName(s.endContainer,"table",!0);if(u&&!a||!u&&a||u!==a){r.preventDefault();return}}}if(i==keymap.Tab){var f={ol:1,ul:1,table:1};if(e.fireEvent("tabkeydown",r)){domUtils.preventDefault(r);return}var l=e.selection.getRange();e.fireEvent("saveScene");for(var c=0,h="",p=e.options.tabSize||4,d=e.options.tabNode||"&nbsp;";c<p;c++)h+=d;var v=e.document.createElement("span");v.innerHTML=h+domUtils.fillChar;if(l.collapsed)l.insertNode(v.cloneNode(!0).firstChild).setCursor(!0);else{var m=function(e){return domUtils.isBlockElm(e)&&!f[e.tagName.toLowerCase()]};u=domUtils.findParent(l.startContainer,m,!0),a=domUtils.findParent(l.endContainer,m,!0);if(u&&a&&u===a)l.deleteContents(),l.insertNode(v.cloneNode(!0).firstChild).setCursor(!0);else{var g=l.createBookmark();l.enlarge(!0);var y=l.createBookmark(),b=domUtils.getNextDomNode(y.start,!1,m);while(b&&!(domUtils.getPosition(b,y.end)&domUtils.POSITION_FOLLOWING))b.insertBefore(v.cloneNode(!0).firstChild,b.firstChild),b=domUtils.getNextDomNode(b,!1,m);l.moveToBookmark(y).moveToBookmark(g).select()}}domUtils.preventDefault(r)}if(browser.gecko&&i==46){l=e.selection.getRange();if(l.collapsed){u=l.startContainer;if(domUtils.isEmptyBlock(u)){var w=u.parentNode;while(domUtils.getChildCount(w)==1&&!domUtils.isBody(w))u=w,w=w.parentNode;u===w.lastChild&&r.preventDefault();return}}}}),e.addListener("keyup",function(e,n){var r=n.keyCode||n.which,i,s=this;if(r==keymap.Backspace){if(s.fireEvent("delkeyup"))return;i=s.selection.getRange();if(i.collapsed){var o,u=["h1","h2","h3","h4","h5","h6"];if(o=domUtils.findParentByTagName(i.startContainer,u,!0))if(domUtils.isEmptyBlock(o)){var a=o.previousSibling;if(a&&a.nodeName!="TABLE"){domUtils.remove(o),i.setStartAtLast(a).setCursor(!1,!0);return}var f=o.nextSibling;if(f&&f.nodeName!="TABLE"){domUtils.remove(o),i.setStartAtFirst(f).setCursor(!1,!0);return}}if(domUtils.isBody(i.startContainer)){var o=domUtils.createElement(s.document,"p",{innerHTML:browser.ie?domUtils.fillChar:"<br/>"});i.insertNode(o).setStart(o,0).setCursor(!1,!0)}}if(!t&&(i.startContainer.nodeType==3||i.startContainer.nodeType==1&&domUtils.isEmptyBlock(i.startContainer)))if(browser.ie){var l=i.document.createElement("span");i.insertNode(l).setStartBefore(l).collapse(!0),i.select(),domUtils.remove(l)}else i.select()}})},UE.plugins.fiximgclick=function(){function t(){this.editor=null,this.resizer=null,this.cover=null,this.doc=document,this.prePos={x:0,y:0},this.startPos={x:0,y:0}}var e=!1;return function(){var n=[[0,0,-1,-1],[0,0,0,-1],[0,0,1,-1],[0,0,-1,0],[0,0,1,0],[0,0,-1,1],[0,0,0,1],[0,0,1,1]];t.prototype={init:function(e){var t=this;t.editor=e,t.startPos=this.prePos={x:0,y:0},t.dragId=-1;var n=[],r=t.cover=document.createElement("div"),s=t.resizer=document.createElement("div");r.id=t.editor.ui.id+"_imagescale_cover",r.style.cssText="position:absolute;display:none;z-index:"+t.editor.options.zIndex+";filter:alpha(opacity=0); opacity:0;background:#CCC;",domUtils.on(r,"mousedown click",function(){t.hide()});for(i=0;i<8;i++)n.push('<span class="edui-editor-imagescale-hand'+i+'"></span>');s.id=t.editor.ui.id+"_imagescale",s.className="edui-editor-imagescale",s.innerHTML=n.join(""),s.style.cssText+=";display:none;border:1px solid #3b77ff;z-index:"+t.editor.options.zIndex+";",t.editor.ui.getDom().appendChild(r),t.editor.ui.getDom().appendChild(s),t.initStyle(),t.initEvents()},initStyle:function(){utils.cssRule("imagescale",".edui-editor-imagescale{display:none;position:absolute;border:1px solid #38B2CE;cursor:hand;-webkit-box-sizing: content-box;-moz-box-sizing: content-box;box-sizing: content-box;}.edui-editor-imagescale span{position:absolute;width:6px;height:6px;overflow:hidden;font-size:0px;display:block;background-color:#3C9DD0;}.edui-editor-imagescale .edui-editor-imagescale-hand0{cursor:nw-resize;top:0;margin-top:-4px;left:0;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand1{cursor:n-resize;top:0;margin-top:-4px;left:50%;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand2{cursor:ne-resize;top:0;margin-top:-4px;left:100%;margin-left:-3px;}.edui-editor-imagescale .edui-editor-imagescale-hand3{cursor:w-resize;top:50%;margin-top:-4px;left:0;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand4{cursor:e-resize;top:50%;margin-top:-4px;left:100%;margin-left:-3px;}.edui-editor-imagescale .edui-editor-imagescale-hand5{cursor:sw-resize;top:100%;margin-top:-3px;left:0;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand6{cursor:s-resize;top:100%;margin-top:-3px;left:50%;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand7{cursor:se-resize;top:100%;margin-top:-3px;left:100%;margin-left:-3px;}")},initEvents:function(){var e=this;e.startPos.x=e.startPos.y=0,e.isDraging=!1},_eventHandler:function(t){var n=this;switch(t.type){case"mousedown":var r=t.target||t.srcElement,r;r.className.indexOf("edui-editor-imagescale-hand")!=-1&&n.dragId==-1&&(n.dragId=r.className.slice(-1),n.startPos.x=n.prePos.x=t.clientX,n.startPos.y=n.prePos.y=t.clientY,domUtils.on(n.doc,"mousemove",n.proxy(n._eventHandler,n)));break;case"mousemove":n.dragId!=-1&&(n.updateContainerStyle(n.dragId,{x:t.clientX-n.prePos.x,y:t.clientY-n.prePos.y}),n.prePos.x=t.clientX,n.prePos.y=t.clientY,e=!0,n.updateTargetElement());break;case"mouseup":n.dragId!=-1&&(n.updateContainerStyle(n.dragId,{x:t.clientX-n.prePos.x,y:t.clientY-n.prePos.y}),n.updateTargetElement(),n.target.parentNode&&n.attachTo(n.target),n.dragId=-1),domUtils.un(n.doc,"mousemove",n.proxy(n._eventHandler,n)),e&&(e=!1,n.editor.fireEvent("contentchange"));break;default:}},updateTargetElement:function(){var e=this;domUtils.setStyles(e.target,{width:e.resizer.style.width,height:e.resizer.style.height}),e.target.width=parseInt(e.resizer.style.width),e.target.height=parseInt(e.resizer.style.height),e.attachTo(e.target)},updateContainerStyle:function(e,t){var r=this,i=r.resizer,s;n[e][0]!=0&&(s=parseInt(i.style.left)+t.x,i.style.left=r._validScaledProp("left",s)+"px"),n[e][1]!=0&&(s=parseInt(i.style.top)+t.y,i.style.top=r._validScaledProp("top",s)+"px"),n[e][2]!=0&&(s=i.clientWidth+n[e][2]*t.x,i.style.width=r._validScaledProp("width",s)+"px"),n[e][3]!=0&&(s=i.clientHeight+n[e][3]*t.y,i.style.height=r._validScaledProp("height",s)+"px")},_validScaledProp:function(e,t){var n=this.resizer,r=document;t=isNaN(t)?0:t;switch(e){case"left":return t<0?0:t+n.clientWidth>r.clientWidth?r.clientWidth-n.clientWidth:t;case"top":return t<0?0:t+n.clientHeight>r.clientHeight?r.clientHeight-n.clientHeight:t;case"width":return t<=0?1:t+n.offsetLeft>r.clientWidth?r.clientWidth-n.offsetLeft:t;case"height":return t<=0?1:t+n.offsetTop>r.clientHeight?r.clientHeight-n.offsetTop:t}},hideCover:function(){this.cover.style.display="none"},showCover:function(){var e=this,t=domUtils.getXY(e.editor.ui.getDom()),n=domUtils.getXY(e.editor.iframe);domUtils.setStyles(e.cover,{width:e.editor.iframe.offsetWidth+"px",height:e.editor.iframe.offsetHeight+"px",top:n.y-t.y+"px",left:n.x-t.x+"px",position:"absolute",display:""})},show:function(e){var t=this;t.resizer.style.display="block",e&&t.attachTo(e),domUtils.on(this.resizer,"mousedown",t.proxy(t._eventHandler,t)),domUtils.on(t.doc,"mouseup",t.proxy(t._eventHandler,t)),t.showCover(),t.editor.fireEvent("afterscaleshow",t),t.editor.fireEvent("saveScene")},hide:function(){var e=this;e.hideCover(),e.resizer.style.display="none",domUtils.un(e.resizer,"mousedown",e.proxy(e._eventHandler,e)),domUtils.un(e.doc,"mouseup",e.proxy(e._eventHandler,e)),e.editor.fireEvent("afterscalehide",e)},proxy:function(e,t){return function(n){return e.apply(t||this,arguments)}},attachTo:function(e){var t=this,n=t.target=e,r=this.resizer,i=domUtils.getXY(n),s=domUtils.getXY(t.editor.iframe),o=domUtils.getXY(r.parentNode);domUtils.setStyles(r,{width:n.width+"px",height:n.height+"px",left:s.x+i.x-t.editor.document.body.scrollLeft-o.x-parseInt(r.style.borderLeftWidth)+"px",top:s.y+i.y-t.editor.document.body.scrollTop-o.y-parseInt(r.style.borderTopWidth)+"px"})}}}(),function(){var e=this,n;e.setOpt("imageScaleEnabled",!0),!browser.ie&&e.options.imageScaleEnabled&&e.addListener("click",function(r,i){var s=e.selection.getRange(),o=s.getClosedNode();if(o&&o.tagName=="IMG"&&e.body.contentEditable!="false"){if(o.className.indexOf("edui-faked-music")!=-1||o.getAttribute("anchorname")||domUtils.hasClass(o,"loadingclass")||domUtils.hasClass(o,"loaderrorclass"))return;if(!n){n=new t,n.init(e),e.ui.getDom().appendChild(n.resizer);var u=function(t){n.hide(),n.target&&e.selection.getRange().selectNode(n.target).select()},a=function(e){var t=e.target||e.srcElement;t&&(t.className===undefined||t.className.indexOf("edui-editor-imagescale")==-1)&&u(e)},f;e.addListener("afterscaleshow",function(t){e.addListener("beforekeydown",u),e.addListener("beforemousedown",a),domUtils.on(document,"keydown",u),domUtils.on(document,"mousedown",a),e.selection.getNative().removeAllRanges()}),e.addListener("afterscalehide",function(t){e.removeListener("beforekeydown",u),e.removeListener("beforemousedown",a),domUtils.un(document,"keydown",u),domUtils.un(document,"mousedown",a);var r=n.target;r.parentNode&&e.selection.getRange().selectNode(r).select()}),domUtils.on(n.resizer,"mousedown",function(t){e.selection.getNative().removeAllRanges();var r=t.target||t.srcElement;r&&r.className.indexOf("edui-editor-imagescale-hand")==-1&&(f=setTimeout(function(){n.hide(),n.target&&e.selection.getRange().selectNode(r).select()},200))}),domUtils.on(n.resizer,"mouseup",function(e){var t=e.target||e.srcElement;t&&t.className.indexOf("edui-editor-imagescale-hand")==-1&&clearTimeout(f)})}n.show(o)}else n&&n.resizer.style.display!="none"&&n.hide()}),browser.webkit&&e.addListener("click",function(t,n){if(n.target.tagName=="IMG"&&e.body.contentEditable!="false"){var r=new dom.Range(e.document);r.selectNode(n.target).select()}})}}(),UE.plugin.register("autolink",function(){var e=0;return browser.ie?{}:{bindEvents:{reset:function(){e=0},keydown:function(e,t){var n=this,r=t.keyCode||t.which;if(r==32||r==13){var i=n.selection.getNative(),s=i.getRangeAt(0).cloneRange(),o,u,a=s.startContainer;while(a.nodeType==1&&s.startOffset>0){a=s.startContainer.childNodes[s.startOffset-1];if(!a)break;s.setStart(a,a.nodeType==1?a.childNodes.length:a.nodeValue.length),s.collapse(!0),a=s.startContainer}do{if(s.startOffset==0){a=s.startContainer.previousSibling;while(a&&a.nodeType==1)a=a.lastChild;if(!a||domUtils.isFillChar(a))break;o=a.nodeValue.length}else a=s.startContainer,o=s.startOffset;s.setStart(a,o-1),u=s.toString().charCodeAt(0)}while(u!=160&&u!=32);if(s.toString().replace(new RegExp(domUtils.fillChar,"g"),"").match(/(?:https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.)/i)){while(s.toString().length){if(/^(?:https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.)/i.test(s.toString()))break;try{s.setStart(s.startContainer,s.startOffset+1)}catch(f){var a=s.startContainer;while(!(next=a.nextSibling)){if(domUtils.isBody(a))return;a=a.parentNode}s.setStart(next,0)}}if(domUtils.findParentByTagName(s.startContainer,"a",!0))return;var l=n.document.createElement("a"),c=n.document.createTextNode(" "),h;n.undoManger&&n.undoManger.save(),l.appendChild(s.extractContents()),l.href=l.innerHTML=l.innerHTML.replace(/<[^>]+>/g,""),h=l.getAttribute("href").replace(new RegExp(domUtils.fillChar,"g"),""),h=/^(?:https?:\/\/)/ig.test(h)?h:"http://"+h,l.setAttribute("_src",utils.html(h)),l.href=utils.html(h),s.insertNode(l),l.parentNode.insertBefore(c,l.nextSibling),s.setStart(c,0),s.collapse(!0),i.removeAllRanges(),i.addRange(s),n.undoManger&&n.undoManger.save()}}}}}},function(){function t(e){if(e.nodeType==3)return null;if(e.nodeName=="A")return e;var t=e.lastChild;while(t){if(t.nodeName=="A")return t;if(t.nodeType==3){if(domUtils.isWhitespace(t)){t=t.previousSibling;continue}return null}t=t.lastChild}}var e={37:1,38:1,39:1,40:1,13:1,32:1};browser.ie&&this.addListener("keyup",function(n,r){var i=this,s=r.keyCode;if(e[s]){var o=i.selection.getRange(),u=o.startContainer;if(s==13){while(u&&!domUtils.isBody(u)&&!domUtils.isBlockElm(u))u=u.parentNode;if(u&&!domUtils.isBody(u)&&u.nodeName=="P"){var a=u.previousSibling;if(a&&a.nodeType==1){var a=t(a);a&&!a.getAttribute("_href")&&domUtils.remove(a,!0)}}}else if(s==32)u.nodeType==3&&/^\s$/.test(u.nodeValue)&&(u=u.previousSibling,u&&u.nodeName=="A"&&!u.getAttribute("_href")&&domUtils.remove(u,!0));else{u=domUtils.findParentByTagName(u,"a",!0);if(u&&!u.getAttribute("_href")){var f=o.createBookmark();domUtils.remove(u,!0),o.moveToBookmark(f).select(!0)}}}})}),UE.plugins.autoheight=function(){function o(){var e=this;clearTimeout(s);if(u)return;if(!e.queryCommandState||e.queryCommandState&&e.queryCommandState("source")!=1)s=setTimeout(function(){var t=e.body.lastChild;while(t&&t.nodeType!=1)t=t.previousSibling;t&&t.nodeType==1&&(t.style.clear="both",i=Math.max(domUtils.getXY(t).y+t.offsetHeight+25,Math.max(r.minFrameHeight,r.initialFrameHeight)),i!=n&&(i!==parseInt(e.iframe.parentNode.style.height)&&(e.iframe.parentNode.style.height=i+"px"),e.body.style.height=i+"px",n=i),domUtils.removeStyle(t,"clear"))},50)}var e=this;e.autoHeightEnabled=e.options.autoHeightEnabled!==!1;if(!e.autoHeightEnabled)return;var t,n=0,r=e.options,i,s,u;e.addListener("fullscreenchanged",function(e,t){u=t}),e.addListener("destroy",function(){e.removeListener("contentchange afterinserthtml keyup mouseup",o)}),e.enableAutoHeight=function(){var e=this;if(!e.autoHeightEnabled)return;var n=e.document;e.autoHeightEnabled=!0,t=n.body.style.overflowY,n.body.style.overflowY="hidden",e.addListener("contentchange afterinserthtml keyup mouseup",o),setTimeout(function(){o.call(e)},browser.gecko?100:0),e.fireEvent("autoheightchanged",e.autoHeightEnabled)},e.disableAutoHeight=function(){e.body.style.overflowY=t||"",e.removeListener("contentchange",o),e.removeListener("keyup",o),e.removeListener("mouseup",o),e.autoHeightEnabled=!1,e.fireEvent("autoheightchanged",e.autoHeightEnabled)},e.on("setHeight",function(){e.disableAutoHeight()}),e.addListener("ready",function(){e.enableAutoHeight();var t;domUtils.on(browser.ie?e.body:e.document,browser.webkit?"dragover":"drop",function(){clearTimeout(t),t=setTimeout(function(){o.call(e)},100)});var n;window.onscroll=function(){n===null?n=this.scrollY:this.scrollY==0&&n!=0&&(e.window.scrollTo(0,0),n=null)}})},UE.plugins.autofloat=function(){function u(){return UE.ui?1:(alert(t.autofloatMsg),0)}function a(){var e=document.body.style;e.backgroundImage='url("about:blank")',e.backgroundAttachment="fixed"}function v(){var t=domUtils.getXY(c),n=domUtils.getComputedStyle(c,"position"),i=domUtils.getComputedStyle(c,"left");c.style.width=c.offsetWidth+"px",c.style.zIndex=e.options.zIndex*1+1,c.parentNode.insertBefore(l,c),s||o&&browser.ie?(c.style.position!="absolute"&&(c.style.position="absolute"),c.style.top=(document.body.scrollTop||document.documentElement.scrollTop)-h+r+"px"):(browser.ie7Compat&&d&&(d=!1,c.style.left=domUtils.getXY(c).x-document.documentElement.getBoundingClientRect().left+2+"px"),c.style.position!="fixed"&&(c.style.position="fixed",c.style.top=r+"px",(n=="absolute"||n=="relative")&&parseFloat(i)&&(c.style.left=t.x+"px")))}function m(){d=!0,l.parentNode&&l.parentNode.removeChild(l),c.style.cssText=f}function g(){var t=p(e.container),n=e.options.toolbarTopOffset||0;t.top<0&&t.bottom-c.offsetHeight>n?v():m()}var e=this,t=e.getLang();e.setOpt({topOffset:0});var n=e.options.autoFloatEnabled!==!1,r=e.options.topOffset;if(!n)return;var i=UE.ui.uiUtils,s=browser.ie&&browser.version<=6,o=browser.quirks,f,l=document.createElement("div"),c,h,p,d=!0,y=utils.defer(function(){g()},browser.ie?200:100,!0);e.addListener("destroy",function(){domUtils.un(window,["scroll","resize"],g),e.removeListener("keydown",y)}),e.addListener("ready",function(){if(u(e)){if(!e.ui)return;p=i.getClientRect,c=e.ui.getDom("toolbarbox"),h=p(c).top,f=c.style.cssText,l.style.height=c.offsetHeight+"px",s&&a(),domUtils.on(window,["scroll","resize"],g),e.addListener("keydown",y),e.addListener("beforefullscreenchange",function(e,t){t&&m()}),e.addListener("fullscreenchanged",function(e,t){t||g()}),e.addListener("sourcemodechanged",function(e,t){setTimeout(function(){g()},0)}),e.addListener("clearDoc",function(){setTimeout(function(){g()},0)})}})},UE.plugins.video=function(){function t(t,n,r,i,s,o,u){var a;switch(u){case"image":a="<img "+(i?'id="'+i+'"':"")+' width="'+n+'" height="'+r+'" _url="'+t+'" class="'+o.replace(/\bvideo-js\b/,"")+'"'+' src="'+e.options.UEDITOR_HOME_URL+'themes/default/images/spacer.gif" style="background:url('+e.options.UEDITOR_HOME_URL+"themes/default/images/videologo.gif) no-repeat center center; border:1px solid gray;"+(s?"float:"+s+";":"")+'" />';break;case"embed":a='<embed type="application/x-shockwave-flash" class="'+o+'" pluginspage="http://www.macromedia.com/go/getflashplayer"'+' src="'+utils.html(t)+'" width="'+n+'" height="'+r+'"'+(s?' style="float:'+s+'"':"")+' wmode="transparent" play="true" loop="false" menu="false" allowscriptaccess="never" allowfullscreen="true" >';break;case"video":var f=t.substr(t.lastIndexOf(".")+1);f=="ogv"&&(f="ogg"),a="<video"+(i?' id="'+i+'"':"")+' class="'+o+' video-js" '+(s?' style="float:'+s+'"':"")+' controls preload="none" width="'+n+'" height="'+r+'" src="'+t+'" data-setup="{}">'+'<source src="'+t+'" type="video/'+f+'" /></video>'}return a}function n(e,n){utils.each(e.getNodesByTagName(n?"img":"embed video"),function(e){var r=e.getAttr("class");if(r&&r.indexOf("edui-faked-video")!=-1){var i=t(n?e.getAttr("_url"):e.getAttr("src"),e.getAttr("width"),e.getAttr("height"),null,e.getStyle("float")||"",r,n?"embed":"image");e.parentNode.replaceChild(UE.uNode.createElement(i),e)}if(r&&r.indexOf("edui-upload-video")!=-1){var i=t(n?e.getAttr("_url"):e.getAttr("src"),e.getAttr("width"),e.getAttr("height"),null,e.getStyle("float")||"",r,n?"video":"image");e.parentNode.replaceChild(UE.uNode.createElement(i),e)}})}var e=this;e.addOutputRule(function(e){n(e,!0)}),e.addInputRule(function(e){n(e)}),e.commands.insertvideo={execCommand:function(n,r,i){r=utils.isArray(r)?r:[r];var s=[],o="tmpVedio",u;for(var a=0,f,l=r.length;a<l;a++)f=r[a],u=i=="upload"?"edui-upload-video video-js vjs-default-skin":"edui-faked-video",s.push(t(f.url,f.width||420,f.height||280,o+a,null,u,"image"));e.execCommand("inserthtml",s.join(""),!0);var c=this.selection.getRange();for(var a=0,l=r.length;a<l;a++){var h=this.document.getElementById("tmpVedio"+a);domUtils.removeAttributes(h,"id"),c.selectNode(h).select(),e.execCommand("imagefloat",r[a].align)}},queryCommandState:function(){var t=e.selection.getRange().getClosedNode(),n=t&&(t.className=="edui-faked-video"||t.className.indexOf("edui-upload-video")!=-1);return n?1:0}}},function(){function t(e){}var e=UE.UETable=function(e){this.table=e,this.indexTable=[],this.selectedTds=[],this.cellsRange={},this.update(e)};e.removeSelectedClass=function(e){utils.each(e,function(e){domUtils.removeClasses(e,"selectTdClass")})},e.addSelectedClass=function(e){utils.each(e,function(e){domUtils.addClass(e,"selectTdClass")})},e.isEmptyBlock=function(e){var t=new RegExp(domUtils.fillChar,"g");if(e[browser.ie?"innerText":"textContent"].replace(/^\s*$/,"").replace(t,"").length>0)return 0;for(var n in dtd.$isNotEmpty)if(dtd.$isNotEmpty.hasOwnProperty(n)&&e.getElementsByTagName(n).length)return 0;return 1},e.getWidth=function(e){return e?parseInt(domUtils.getComputedStyle(e,"width"),10):0},e.getTableCellAlignState=function(e){!utils.isArray(e)&&(e=[e]);var t={},n=["align","valign"],r=null,i=!0;return utils.each(e,function(e){return utils.each(n,function(n){r=e.getAttribute(n);if(!t[n]&&r)t[n]=r;else if(!t[n]||r!==t[n])return i=!1,!1}),i}),i?t:null},e.getTableItemsByRange=function(e){var t=e.selection.getStart();t&&t.id&&t.id.indexOf("_baidu_bookmark_start_")===0&&t.nextSibling&&(t=t.nextSibling);var n=t&&domUtils.findParentByTagName(t,["td","th"],!0),r=n&&n.parentNode,i=t&&domUtils.findParentByTagName(t,"caption",!0),s=i?i.parentNode:r&&r.parentNode.parentNode;return{cell:n,tr:r,table:s,caption:i}},e.getUETableBySelected=function(t){var n=e.getTableItemsByRange(t).table;return n&&n.ueTable&&n.ueTable.selectedTds.length?n.ueTable:null},e.getDefaultValue=function(e,t){var n={thin:"0px",medium:"1px",thick:"2px"},r,i,s,o;if(!t){t=e.document.createElement("table"),t.insertRow(0).insertCell(0).innerHTML="xxx",e.body.appendChild(t);var u=t.getElementsByTagName("td")[0];return o=domUtils.getComputedStyle(t,"border-left-width"),r=parseInt(n[o]||o,10),o=domUtils.getComputedStyle(u,"padding-left"),i=parseInt(n[o]||o,10),o=domUtils.getComputedStyle(u,"border-left-width"),s=parseInt(n[o]||o,10),domUtils.remove(t),{tableBorder:r,tdPadding:i,tdBorder:s}}return u=t.getElementsByTagName("td")[0],o=domUtils.getComputedStyle(t,"border-left-width"),r=parseInt(n[o]||o,10),o=domUtils.getComputedStyle(u,"padding-left"),i=parseInt(n[o]||o,10),o=domUtils.getComputedStyle(u,"border-left-width"),s=parseInt(n[o]||o,10),{tableBorder:r,tdPadding:i,tdBorder:s}},e.getUETable=function(t){var n=t.tagName.toLowerCase();return t=n=="td"||n=="th"||n=="caption"?domUtils.findParentByTagName(t,"table",!0):t,t.ueTable||(t.ueTable=new e(t)),t.ueTable},e.cloneCell=function(e,t,n){if(!e||utils.isString(e))return this.table.ownerDocument.createElement(e||"td");var r=domUtils.hasClass(e,"selectTdClass");r&&domUtils.removeClasses(e,"selectTdClass");var i=e.cloneNode(!0);return t&&(i.rowSpan=i.colSpan=1),!n&&domUtils.removeAttributes(i,"width height"),!n&&domUtils.removeAttributes(i,"style"),i.style.borderLeftStyle="",i.style.borderTopStyle="",i.style.borderLeftColor=e.style.borderRightColor,i.style.borderLeftWidth=e.style.borderRightWidth,i.style.borderTopColor=e.style.borderBottomColor,i.style.borderTopWidth=e.style.borderBottomWidth,r&&domUtils.addClass(e,"selectTdClass"),i},e.prototype={getMaxRows:function(){var e=this.table.rows,t=1;for(var n=0,r;r=e[n];n++){var i=1;for(var s=0,o;o=r.cells[s++];)i=Math.max(o.rowSpan||1,i);t=Math.max(i+n,t)}return t},getMaxCols:function(){var e=this.table.rows,t=0,n={};for(var r=0,i;i=e[r];r++){var s=0;for(var o=0,u;u=i.cells[o++];){s+=u.colSpan||1;if(u.rowSpan&&u.rowSpan>1)for(var a=1;a<u.rowSpan;a++)n["row_"+(r+a)]?n["row_"+(r+a)]++:n["row_"+(r+a)]=u.colSpan||1}s+=n["row_"+r]||0,t=Math.max(s,t)}return t},getCellColIndex:function(e){},getHSideCell:function(e,n){try{var r=this.getCellInfo(e),i,s,o=this.selectedTds.length,u=this.cellsRange;return!n&&(o?!u.beginColIndex:!r.colIndex)||n&&(o?u.endColIndex==this.colsNum-1:r.colIndex==this.colsNum-1)?null:(i=o?u.beginRowIndex:r.rowIndex,s=n?o?u.endColIndex+1:r.colIndex+1:o?u.beginColIndex-1:r.colIndex<1?0:r.colIndex-1,this.getCell(this.indexTable[i][s].rowIndex,this.indexTable[i][s].cellIndex))}catch(a){t(a)}},getTabNextCell:function(e,t){var n=this.getCellInfo(e),r=t||n.rowIndex,i=n.colIndex+1+(n.colSpan-1),s;try{s=this.getCell(this.indexTable[r][i].rowIndex,this.indexTable[r][i].cellIndex)}catch(o){try{r=r*1+1,i=0,s=this.getCell(this.indexTable[r][i].rowIndex,this.indexTable[r][i].cellIndex)}catch(o){}}return s},getVSideCell:function(e,n,r){try{var i=this.getCellInfo(e),s,o,u=this.selectedTds.length&&!r,a=this.cellsRange;return!n&&i.rowIndex==0||n&&(u?a.endRowIndex==this.rowsNum-1:i.rowIndex+i.rowSpan>this.rowsNum-1)?null:(s=n?u?a.endRowIndex+1:i.rowIndex+i.rowSpan:u?a.beginRowIndex-1:i.rowIndex-1,o=u?a.beginColIndex:i.colIndex,this.getCell(this.indexTable[s][o].rowIndex,this.indexTable[s][o].cellIndex))}catch(f){t(f)}},getSameEndPosCells:function(e,n){try{var r=n.toLowerCase()==="x",i=domUtils.getXY(e)[r?"x":"y"]+e["offset"+(r?"Width":"Height")],s=this.table.rows,o=null,u=[];for(var a=0;a<this.rowsNum;a++){o=s[a].cells;for(var f=0,l;l=o[f++];){var c=domUtils.getXY(l)[r?"x":"y"]+l["offset"+(r?"Width":"Height")];if(c>i&&r)break;if(e==l||i==c){l[r?"colSpan":"rowSpan"]==1&&u.push(l);if(r)break}}}return u}catch(h){t(h)}},setCellContent:function(e,t){e.innerHTML=t||(browser.ie?domUtils.fillChar:"<br />")},cloneCell:e.cloneCell,getSameStartPosXCells:function(e){try{var n=domUtils.getXY(e).x+e.offsetWidth,r=this.table.rows,i,s=[];for(var o=0;o<this.rowsNum;o++){i=r[o].cells;for(var u=0,a;a=i[u++];){var f=domUtils.getXY(a).x;if(f>n)break;if(f==n&&a.colSpan==1){s.push(a);break}}}return s}catch(l){t(l)}},update:function(e){this.table=e||this.table,this.selectedTds=[],this.cellsRange={},this.indexTable=[];var t=this.table.rows,n=this.getMaxRows(),r=n-t.length,i=this.getMaxCols();while(r--)this.table.insertRow(t.length);this.rowsNum=n,this.colsNum=i;for(var s=0,o=t.length;s<o;s++)this.indexTable[s]=new Array(i);for(var u=0,a;a=t[u];u++)for(var f=0,l,c=a.cells;l=c[f];f++){l.rowSpan>n&&(l.rowSpan=n);var h=f,p=l.rowSpan||1,d=l.colSpan||1;while(this.indexTable[u][h])h++;for(var v=0;v<p;v++)for(var m=0;m<d;m++)this.indexTable[u+v][h+m]={rowIndex:u,cellIndex:f,colIndex:h,rowSpan:p,colSpan:d}}for(v=0;v<n;v++)for(m=0;m<i;m++)this.indexTable[v][m]===undefined&&(a=t[v],l=a.cells[a.cells.length-1],l=l?l.cloneNode(!0):this.table.ownerDocument.createElement("td"),this.setCellContent(l),l.colSpan!==1&&(l.colSpan=1),l.rowSpan!==1&&(l.rowSpan=1),a.appendChild(l),this.indexTable[v][m]={rowIndex:v,cellIndex:l.cellIndex,colIndex:m,rowSpan:1,colSpan:1});var g=domUtils.getElementsByTagName(this.table,"td"),y=[];utils.each(g,function(e){domUtils.hasClass(e,"selectTdClass")&&y.push(e)});if(y.length){var b=y[0],w=y[y.length-1],E=this.getCellInfo(b),S=this.getCellInfo(w);this.selectedTds=y,this.cellsRange={beginRowIndex:E.rowIndex,beginColIndex:E.colIndex,endRowIndex:S.rowIndex+S.rowSpan-1,endColIndex:S.colIndex+S.colSpan-1}}if(!domUtils.hasClass(this.table.rows[0],"firstRow")){domUtils.addClass(this.table.rows[0],"firstRow");for(var s=1;s<this.table.rows.length;s++)domUtils.removeClasses(this.table.rows[s],"firstRow")}},getCellInfo:function(e){if(!e)return;var t=e.cellIndex,n=e.parentNode.rowIndex,r=this.indexTable[n],i=this.colsNum;for(var s=t;s<i;s++){var o=r[s];if(o.rowIndex===n&&o.cellIndex===t)return o}},getCell:function(e,t){return e<this.rowsNum&&this.table.rows[e].cells[t]||null},deleteCell:function(e,t){t=typeof t=="number"?t:e.parentNode.rowIndex;var n=this.table.rows[t];n.deleteCell(e.cellIndex)},getCellsRange:function(e,t){function n(e,t,i,s){var o=e,u=t,a=i,f=s,l,c,h;if(e>0)for(c=t;c<s;c++)l=r.indexTable[e][c],h=l.rowIndex,h<e&&(o=Math.min(h,o));if(s<r.colsNum)for(h=e;h<i;h++)l=r.indexTable[h][s],c=l.colIndex+l.colSpan-1,c>s&&(f=Math.max(c,f));if(i<r.rowsNum)for(c=t;c<s;c++)l=r.indexTable[i][c],h=l.rowIndex+l.rowSpan-1,h>i&&(a=Math.max(h,a));if(t>0)for(h=e;h<i;h++)l=r.indexTable[h][t],c=l.colIndex,c<t&&(u=Math.min(l.colIndex,u));return o!=e||u!=t||a!=i||f!=s?n(o,u,a,f):{beginRowIndex:e,beginColIndex:t,endRowIndex:i,endColIndex:s}}try{var r=this,i=r.getCellInfo(e);if(e===t)return{beginRowIndex:i.rowIndex,beginColIndex:i.colIndex,endRowIndex:i.rowIndex+i.rowSpan-1,endColIndex:i.colIndex+i.colSpan-1};var s=r.getCellInfo(t),o=Math.min(i.rowIndex,s.rowIndex),u=Math.min(i.colIndex,s.colIndex),a=Math.max(i.rowIndex+i.rowSpan-1,s.rowIndex+s.rowSpan-1),f=Math.max(i.colIndex+i.colSpan-1,s.colIndex+s.colSpan-1);return n(o,u,a,f)}catch(l){}},getCells:function(e){this.clearSelected();var t=e.beginRowIndex,n=e.beginColIndex,r=e.endRowIndex,i=e.endColIndex,s,o,u,a={},f=[];for(var l=t;l<=r;l++)for(var c=n;c<=i;c++){s=this.indexTable[l][c],o=s.rowIndex,u=s.colIndex;var h=o+"|"+u;if(a[h])continue;a[h]=1;if(o<l||u<c||o+s.rowSpan-1>r||u+s.colSpan-1>i)return null;f.push(this.getCell(o,s.cellIndex))}return f},clearSelected:function(){e.removeSelectedClass(this.selectedTds),this.selectedTds=[],this.cellsRange={}},setSelected:function(t){var n=this.getCells(t);e.addSelectedClass(n),this.selectedTds=n,this.cellsRange=t},isFullRow:function(){var e=this.cellsRange;return e.endColIndex-e.beginColIndex+1==this.colsNum},isFullCol:function(){var e=this.cellsRange,t=this.table,n=t.getElementsByTagName("th"),r=e.endRowIndex-e.beginRowIndex+1;return n.length?r==this.rowsNum||r==this.rowsNum-1:r==this.rowsNum},getNextCell:function(e,n,r){try{var i=this.getCellInfo(e),s,o,u=this.selectedTds.length&&!r,a=this.cellsRange;return!n&&i.rowIndex==0||n&&(u?a.endRowIndex==this.rowsNum-1:i.rowIndex+i.rowSpan>this.rowsNum-1)?null:(s=n?u?a.endRowIndex+1:i.rowIndex+i.rowSpan:u?a.beginRowIndex-1:i.rowIndex-1,o=u?a.beginColIndex:i.colIndex,this.getCell(this.indexTable[s][o].rowIndex,this.indexTable[s][o].cellIndex))}catch(f){t(f)}},getPreviewCell:function(e,n){try{var r=this.getCellInfo(e),i,s,o=this.selectedTds.length,u=this.cellsRange;return!n&&(o?!u.beginColIndex:!r.colIndex)||n&&(o?u.endColIndex==this.colsNum-1:r.rowIndex>this.colsNum-1)?null:(i=n?o?u.beginRowIndex:r.rowIndex<1?0:r.rowIndex-1:o?u.beginRowIndex:r.rowIndex,s=n?o?u.endColIndex+1:r.colIndex:o?u.beginColIndex-1:r.colIndex<1?0:r.colIndex-1,this.getCell(this.indexTable[i][s].rowIndex,this.indexTable[i][s].cellIndex))}catch(a){t(a)}},moveContent:function(t,n){if(e.isEmptyBlock(n))return;if(e.isEmptyBlock(t)){t.innerHTML=n.innerHTML;return}var r=t.lastChild;(r.nodeType==3||!dtd.$block[r.tagName])&&t.appendChild(t.ownerDocument.createElement("br"));while(r=n.firstChild)t.appendChild(r)},mergeRight:function(e){var t=this.getCellInfo(e),n=t.colIndex+t.colSpan,r=this.indexTable[t.rowIndex][n],i=this.getCell(r.rowIndex,r.cellIndex);e.colSpan=t.colSpan+r.colSpan,e.removeAttribute("width"),this.moveContent(e,i),this.deleteCell(i,r.rowIndex),this.update()},mergeDown:function(e){var t=this.getCellInfo(e),n=t.rowIndex+t.rowSpan,r=this.indexTable[n][t.colIndex],i=this.getCell(r.rowIndex,r.cellIndex);e.rowSpan=t.rowSpan+r.rowSpan,e.removeAttribute("height"),this.moveContent(e,i),this.deleteCell(i,r.rowIndex),this.update()},mergeRange:function(){var e=this.cellsRange,t=this.getCell(e.beginRowIndex,this.indexTable[e.beginRowIndex][e.beginColIndex].cellIndex);if(t.tagName=="TH"&&e.endRowIndex!==e.beginRowIndex){var n=this.indexTable,r=this.getCellInfo(t);t=this.getCell(1,n[1][r.colIndex].cellIndex),e=this.getCellsRange(t,this.getCell(n[this.rowsNum-1][r.colIndex].rowIndex,n[this.rowsNum-1][r.colIndex].cellIndex))}var i=this.getCells(e);for(var s=0,o;o=i[s++];)o!==t&&(this.moveContent(t,o),this.deleteCell(o));t.rowSpan=e.endRowIndex-e.beginRowIndex+1,t.rowSpan>1&&t.removeAttribute("height"),t.colSpan=e.endColIndex-e.beginColIndex+1,t.colSpan>1&&t.removeAttribute("width"),t.rowSpan==this.rowsNum&&t.colSpan!=1&&(t.colSpan=1);if(t.colSpan==this.colsNum&&t.rowSpan!=1){var u=t.parentNode.rowIndex;if(this.table.deleteRow)for(var s=u+1,a=u+1,f=t.rowSpan;s<f;s++)this.table.deleteRow(a);else for(var s=0,f=t.rowSpan-1;s<f;s++){var l=this.table.rows[u+1];l.parentNode.removeChild(l)}t.rowSpan=1}this.update()},insertRow:function(e,t){function u(e,t,n){if(e==0){var r=n.nextSibling||n.previousSibling,i=r.cells[e];i.tagName=="TH"&&(i=t.ownerDocument.createElement("th"),i.appendChild(t.firstChild),n.insertBefore(i,t),domUtils.remove(t))}else if(t.tagName=="TH"){var s=t.ownerDocument.createElement("td");s.appendChild(t.firstChild),n.insertBefore(s,t),domUtils.remove(t)}}var n=this.colsNum,r=this.table,i=r.insertRow(e),s,o=typeof t=="string"&&t.toUpperCase()=="TH";if(e==0||e==this.rowsNum)for(var a=0;a<n;a++)s=this.cloneCell(t,!0),this.setCellContent(s),s.getAttribute("vAlign")&&s.setAttribute("vAlign",s.getAttribute("vAlign")),i.appendChild(s),o||u(a,s,i);else{var f=this.indexTable[e],l=0;for(a=0;a<n;a++){var c=f[a];c.rowIndex<e?(s=this.getCell(c.rowIndex,c.cellIndex),s.rowSpan=c.rowSpan+1):(s=this.cloneCell(t,!0),this.setCellContent(s),i.appendChild(s)),o||u(a,s,i)}}return this.update(),i},deleteRow:function(e){var t=this.table.rows[e],n=this.indexTable[e],r=this.colsNum,i=0;for(var s=0;s<r;){var o=n[s],u=this.getCell(o.rowIndex,o.cellIndex);if(u.rowSpan>1&&o.rowIndex==e){var a=u.cloneNode(!0);a.rowSpan=u.rowSpan-1,a.innerHTML="",u.rowSpan=1;var f=e+1,l=this.table.rows[f],c,h=this.getPreviewMergedCellsNum(f,s)-i;h<s?(c=s-h-1,domUtils.insertAfter(l.cells[c],a)):l.cells.length&&l.insertBefore(a,l.cells[0]),i+=1}s+=u.colSpan||1}var p=[],d={};for(s=0;s<r;s++){var v=n[s].rowIndex,m=n[s].cellIndex,g=v+"_"+m;if(d[g])continue;d[g]=1,u=this.getCell(v,m),p.push(u)}var y=[];utils.each(p,function(e){e.rowSpan==1?e.parentNode.removeChild(e):y.push(e)}),utils.each(y,function(e){e.rowSpan--}),t.parentNode.removeChild(t),this.update()},insertCol:function(e,t,n){function f(e,t,n){if(e==0){var r=t.nextSibling||t.previousSibling;r.tagName=="TH"&&(r=t.ownerDocument.createElement("th"),r.appendChild(t.firstChild),n.insertBefore(r,t),domUtils.remove(t))}else if(t.tagName=="TH"){var i=t.ownerDocument.createElement("td");i.appendChild(t.firstChild),n.insertBefore(i,t),domUtils.remove(t)}}var r=this.rowsNum,i=0,s,o,u=parseInt((this.table.offsetWidth-(this.colsNum+1)*20-(this.colsNum+1))/(this.colsNum+1),10),a=typeof t=="string"&&t.toUpperCase()=="TH",l;if(e==0||e==this.colsNum)for(;i<r;i++)s=this.table.rows[i],l=s.cells[e==0?e:s.cells.length],o=this.cloneCell(t,!0),this.setCellContent(o),o.setAttribute("vAlign",o.getAttribute("vAlign")),l&&o.setAttribute("width",l.getAttribute("width")),e?domUtils.insertAfter(s.cells[s.cells.length-1],o):s.insertBefore(o,s.cells[0]),a||f(i,o,s);else for(;i<r;i++){var c=this.indexTable[i][e];c.colIndex<e?(o=this.getCell(c.rowIndex,c.cellIndex),o.colSpan=c.colSpan+1):(s=this.table.rows[i],l=s.cells[c.cellIndex],o=this.cloneCell(t,!0),this.setCellContent(o),o.setAttribute("vAlign",o.getAttribute("vAlign")),l&&o.setAttribute("width",l.getAttribute("width")),l?s.insertBefore(o,l):s.appendChild(o)),a||f(i,o,s)}this.update(),this.updateWidth(u,n||{tdPadding:10,tdBorder:1})},updateWidth:function(t,n){var r=this.table,i=e.getWidth(r)-n.tdPadding*2-n.tdBorder+t;if(i<r.ownerDocument.body.offsetWidth){r.setAttribute("width",i);return}var s=domUtils.getElementsByTagName(this.table,"td th");utils.each(s,function(e){e.setAttribute("width",t)})},deleteCol:function(e){var t=this.indexTable,n=this.table.rows,r=this.table.getAttribute("width"),i=0,s=this.rowsNum,o={};for(var u=0;u<s;){var a=t[u],f=a[e],l=f.rowIndex+"_"+f.colIndex;if(o[l])continue;o[l]=1;var c=this.getCell(f.rowIndex,f.cellIndex);i||(i=c&&parseInt(c.offsetWidth/c.colSpan,10).toFixed(0)),c.colSpan>1?c.colSpan--:n[u].deleteCell(f.cellIndex),u+=f.rowSpan||1}this.table.setAttribute("width",r-i),this.update()},splitToCells:function(e){var t=this,n=this.splitToRows(e);utils.each(n,function(e){t.splitToCols(e)})},splitToRows:function(e){var t=this.getCellInfo(e),n=t.rowIndex,r=t.colIndex,i=[];e.rowSpan=1,i.push(e);for(var s=n,o=n+t.rowSpan;s<o;s++){if(s==n)continue;var u=this.table.rows[s],a=u.insertCell(r-this.getPreviewMergedCellsNum(s,r));a.colSpan=t.colSpan,this.setCellContent(a),a.setAttribute("vAlign",e.getAttribute("vAlign")),a.setAttribute("align",e.getAttribute("align")),e.style.cssText&&(a.style.cssText=e.style.cssText),i.push(a)}return this.update(),i},getPreviewMergedCellsNum:function(e,t){var n=this.indexTable[e],r=0;for(var i=0;i<t;){var s=n[i].colSpan,o=n[i].rowIndex;r+=s-(o==e?1:0),i+=s}return r},splitToCols:function(e){var t=(e.offsetWidth/e.colSpan-22).toFixed(0),n=this.getCellInfo(e),r=n.rowIndex,i=n.colIndex,s=[];e.colSpan=1,e.setAttribute("width",t),s.push(e);for(var o=i,u=i+n.colSpan;o<u;o++){if(o==i)continue;var a=this.table.rows[r],f=a.insertCell(this.indexTable[r][o].cellIndex+1);f.rowSpan=n.rowSpan,this.setCellContent(f),f.setAttribute("vAlign",e.getAttribute("vAlign")),f.setAttribute("align",e.getAttribute("align")),f.setAttribute("width",t),e.style.cssText&&(f.style.cssText=e.style.cssText);if(e.tagName=="TH"){var l=e.ownerDocument.createElement("th");l.appendChild(f.firstChild),l.setAttribute("vAlign",e.getAttribute("vAlign")),l.rowSpan=f.rowSpan,a.insertBefore(l,f),domUtils.remove(f)}s.push(f)}return this.update(),s},isLastCell:function(e,t,n){t=t||this.rowsNum,n=n||this.colsNum;var r=this.getCellInfo(e);return r.rowIndex+r.rowSpan==t&&r.colIndex+r.colSpan==n},getLastCell:function(e){e=e||this.table.getElementsByTagName("td");var t=this.getCellInfo(e[0]),n=this,r=e[0],i=r.parentNode,s=0,o=0,u;return utils.each(e,function(e){e.parentNode==i&&(o+=e.colSpan||1),s+=e.rowSpan*e.colSpan||1}),u=s/o,utils.each(e,function(e){if(n.isLastCell(e,u,o))return r=e,!1}),r},selectRow:function(e){var t=this.indexTable[e],n=this.getCell(t[0].rowIndex,t[0].cellIndex),r=this.getCell(t[this.colsNum-1].rowIndex,t[this.colsNum-1].cellIndex),i=this.getCellsRange(n,r);this.setSelected(i)},selectTable:function(){var e=this.table.getElementsByTagName("td"),t=this.getCellsRange(e[0],e[e.length-1]);this.setSelected(t)},setBackground:function(e,t){if(typeof t=="string")utils.each(e,function(e){e.style.backgroundColor=t});else if(typeof t=="object"){t=utils.extend({repeat:!0,colorList:["#ddd","#fff"]},t);var n=this.getCellInfo(e[0]).rowIndex,r=0,i=t.colorList,s=function(e,t,n){return e[t]?e[t]:n?e[t%e.length]:""};for(var o=0,u;u=e[o++];){var a=this.getCellInfo(u);u.style.backgroundColor=s(i,n+r==a.rowIndex?r:++r,t.repeat)}}},removeBackground:function(e){utils.each(e,function(e){e.style.backgroundColor=""})}}}(),function(){function s(e,t){var n=domUtils.getElementsByTagName(e,"td th");utils.each(n,function(e){e.removeAttribute("width")}),e.setAttribute("width",o(t,!0,r(t,e)));var i=[];setTimeout(function(){utils.each(n,function(e){e.colSpan==1&&i.push(e.offsetWidth)}),utils.each(n,function(e,t){e.colSpan==1&&e.setAttribute("width",i[t]+"")})},0)}function o(e,t,n){var r=e.body;return r.offsetWidth-(t?parseInt(domUtils.getComputedStyle(r,"margin-left"),10)*2:0)-n.tableBorder*2-(e.options.offsetWidth||0)}function u(e){var n=t(e).cell;if(n){var r=i(n);return r.selectedTds.length?r.selectedTds:[n]}return[]}var e=UE.UETable,t=function(t){return e.getTableItemsByRange(t)},n=function(t){return e.getUETableBySelected(t)},r=function(t,n){return e.getDefaultValue(t,n)},i=function(t){return e.getUETable(t)};UE.commands.inserttable={queryCommandState:function(){return t(this).table?-1:0},execCommand:function(e,t){function n(e,t){var n=[],r=e.numRows,i=e.numCols;for(var s=0;s<r;s++){n.push("<tr"+(s==0?' class="firstRow"':"")+">");for(var o=0;o<i;o++)n.push('<td width="'+t+'"  vAlign="'+e.tdvalign+'" >'+(browser.ie&&browser.version<11?domUtils.fillChar:"<br/>")+"</td>");n.push("</tr>")}return"<table><tbody>"+n.join("")+"</tbody></table>"}t||(t=utils.extend({},{numCols:this.options.defaultCols,numRows:this.options.defaultRows,tdvalign:this.options.tdvalign}));var i=this,s=this.selection.getRange(),o=s.startContainer,u=domUtils.findParent(o,function(e){return domUtils.isBlockElm(e)},!0)||i.body,a=r(i),f=u.offsetWidth,l=Math.floor(f/t.numCols-a.tdPadding*2-a.tdBorder);!t.tdvalign&&(t.tdvalign=i.options.tdvalign),i.execCommand("inserthtml",n(t,l))}},UE.commands.insertparagraphbeforetable={queryCommandState:function(){return t(this).cell?0:-1},execCommand:function(){var e=t(this).table;if(e){var n=this.document.createElement("p");n.innerHTML=browser.ie?"&nbsp;":"<br />",e.parentNode.insertBefore(n,e),this.selection.getRange().setStart(n,0).setCursor()}}},UE.commands.deletetable={queryCommandState:function(){var e=this.selection.getRange();return domUtils.findParentByTagName(e.startContainer,"table",!0)?0:-1},execCommand:function(e,t){var n=this.selection.getRange();t=t||domUtils.findParentByTagName(n.startContainer,"table",!0);if(t){var r=t.nextSibling;r||(r=domUtils.createElement(this.document,"p",{innerHTML:browser.ie?domUtils.fillChar:"<br/>"}),t.parentNode.insertBefore(r,t)),domUtils.remove(t),n=this.selection.getRange(),r.nodeType==3?n.setStartBefore(r):n.setStart(r,0),n.setCursor(!1,!0),this.fireEvent("tablehasdeleted")}}},UE.commands.cellalign={queryCommandState:function(){return u(this).length?0:-1},execCommand:function(e,t){var n=u(this);if(n.length)for(var r=0,i;i=n[r++];)i.setAttribute("align",t)}},UE.commands.cellvalign={queryCommandState:function(){return u(this).length?0:-1},execCommand:function(e,t){var n=u(this);if(n.length)for(var r=0,i;i=n[r++];)i.setAttribute("vAlign",t)}},UE.commands.insertcaption={queryCommandState:function(){var e=t(this).table;return e?e.getElementsByTagName("caption").length==0?1:-1:-1},execCommand:function(){var e=t(this).table;if(e){var n=this.document.createElement("caption");n.innerHTML=browser.ie?domUtils.fillChar:"<br/>",e.insertBefore(n,e.firstChild);var r=this.selection.getRange();r.setStart(n,0).setCursor()}}},UE.commands.deletecaption={queryCommandState:function(){var e=this.selection.getRange(),t=domUtils.findParentByTagName(e.startContainer,"table");return t?t.getElementsByTagName("caption").length==0?-1:1:-1},execCommand:function(){var e=this.selection.getRange(),t=domUtils.findParentByTagName(e.startContainer,"table");if(t){domUtils.remove(t.getElementsByTagName("caption")[0]);var n=this.selection.getRange();n.setStart(t.rows[0].cells[0],0).setCursor()}}},UE.commands.inserttitle={queryCommandState:function(){var e=t(this).table;if(e){var n=e.rows[0];return n.cells[n.cells.length-1].tagName.toLowerCase()!="th"?0:-1}return-1},execCommand:function(){var e=t(this).table;e&&i(e).insertRow(0,"th");var n=e.getElementsByTagName("th")[0];this.selection.getRange().setStart(n,0).setCursor(!1,!0)}},UE.commands.deletetitle={queryCommandState:function(){var e=t(this).table;if(e){var n=e.rows[0];return n.cells[n.cells.length-1].tagName.toLowerCase()=="th"?0:-1}return-1},execCommand:function(){var e=t(this).table;e&&domUtils.remove(e.rows[0]);var n=e.getElementsByTagName("td")[0];this.selection.getRange().setStart(n,0).setCursor(!1,!0)}},UE.commands.inserttitlecol={queryCommandState:function(){var e=t(this).table;if(e){var n=e.rows[e.rows.length-1];return n.getElementsByTagName("th").length?-1:0}return-1},execCommand:function(e){var n=t(this).table;n&&i(n).insertCol(0,"th"),s(n,this);var r=n.getElementsByTagName("th")[0];this.selection.getRange().setStart(r,0).setCursor(!1,!0)}},UE.commands.deletetitlecol={queryCommandState:function(){var e=t(this).table;if(e){var n=e.rows[e.rows.length-1];return n.getElementsByTagName("th").length?0:-1}return-1},execCommand:function(){var e=t(this).table;if(e)for(var n=0;n<e.rows.length;n++)domUtils.remove(e.rows[n].children[0]);s(e,this);var r=e.getElementsByTagName("td")[0];this.selection.getRange().setStart(r,0).setCursor(!1,!0)}},UE.commands.mergeright={queryCommandState:function(e){var n=t(this),r=n.table,s=n.cell;if(!r||!s)return-1;var o=i(r);if(o.selectedTds.length)return-1;var u=o.getCellInfo(s),a=u.colIndex+u.colSpan;if(a>=o.colsNum)return-1;var f=o.indexTable[u.rowIndex][a],l=r.rows[f.rowIndex].cells[f.cellIndex];return!l||s.tagName!=l.tagName?-1:f.rowIndex==u.rowIndex&&f.rowSpan==u.rowSpan?0:-1},execCommand:function(e){var n=this.selection.getRange(),r=n.createBookmark(!0),s=t(this).cell,o=i(s);o.mergeRight(s),n.moveToBookmark(r).select()}},UE.commands.mergedown={queryCommandState:function(e){var n=t(this),r=n.table,s=n.cell;if(!r||!s)return-1;var o=i(r);if(o.selectedTds.length)return-1;var u=o.getCellInfo(s),a=u.rowIndex+u.rowSpan;if(a>=o.rowsNum)return-1;var f=o.indexTable[a][u.colIndex],l=r.rows[f.rowIndex].cells[f.cellIndex];return!l||s.tagName!=l.tagName?-1:f.colIndex==u.colIndex&&f.colSpan==u.colSpan?0:-1},execCommand:function(){var e=this.selection.getRange(),n=e.createBookmark(!0),r=t(this).cell,s=i(r);s.mergeDown(r),e.moveToBookmark(n).select()}},UE.commands.mergecells={queryCommandState:function(){return n(this)?0:-1},execCommand:function(){var e=n(this);if(e&&e.selectedTds.length){var t=e.selectedTds[0];e.mergeRange();var r=this.selection.getRange();domUtils.isEmptyBlock(t)?r.setStart(t,0).collapse(!0):r.selectNodeContents(t),r.select()}}},UE.commands.insertrow={queryCommandState:function(){var e=t(this),n=e.cell;return n&&(n.tagName=="TD"||n.tagName=="TH"&&e.tr!==e.table.rows[0])&&i(e.table).rowsNum<this.options.maxRowNum?0:-1},execCommand:function(){var e=this.selection.getRange(),n=e.createBookmark(!0),r=t(this),s=r.cell,o=r.table,u=i(o),a=u.getCellInfo(s);if(!u.selectedTds.length)u.insertRow(a.rowIndex,s);else{var f=u.cellsRange;for(var l=0,c=f.endRowIndex-f.beginRowIndex+1;l<c;l++)u.insertRow(f.beginRowIndex,s)}e.moveToBookmark(n).select(),o.getAttribute("interlaced")==="enabled"&&this.fireEvent("interlacetable",o)}},UE.commands.insertrownext={queryCommandState:function(){var e=t(this),n=e.cell;return n&&n.tagName=="TD"&&i(e.table).rowsNum<this.options.maxRowNum?0:-1},execCommand:function(){var e=this.selection.getRange(),n=e.createBookmark(!0),r=t(this),s=r.cell,o=r.table,u=i(o),a=u.getCellInfo(s);if(!u.selectedTds.length)u.insertRow(a.rowIndex+a.rowSpan,s);else{var f=u.cellsRange;for(var l=0,c=f.endRowIndex-f.beginRowIndex+1;l<c;l++)u.insertRow(f.endRowIndex+1,s)}e.moveToBookmark(n).select(),o.getAttribute("interlaced")==="enabled"&&this.fireEvent("interlacetable",o)}},UE.commands.deleterow={queryCommandState:function(){var e=t(this);return e.cell?0:-1},execCommand:function(){var e=t(this).cell,n=i(e),r=n.cellsRange,s=n.getCellInfo(e),o=n.getVSideCell(e),u=n.getVSideCell(e,!0),a=this.selection.getRange();if(utils.isEmptyObject(r))n.deleteRow(s.rowIndex);else for(var f=r.beginRowIndex;f<r.endRowIndex+1;f++)n.deleteRow(r.beginRowIndex);var l=n.table;if(!l.getElementsByTagName("td").length){var c=l.nextSibling;domUtils.remove(l),c&&a.setStart(c,0).setCursor(!1,!0)}else if(s.rowSpan==1||s.rowSpan==r.endRowIndex-r.beginRowIndex+1)(u||o)&&a.selectNodeContents(u||o).setCursor(!1,!0);else{var h=n.getCell(s.rowIndex,n.indexTable[s.rowIndex][s.colIndex].cellIndex);h&&a.selectNodeContents(h).setCursor(!1,!0)}l.getAttribute("interlaced")==="enabled"&&this.fireEvent("interlacetable",l)}},UE.commands.insertcol={queryCommandState:function(e){var n=t(this),r=n.cell;return r&&(r.tagName=="TD"||r.tagName=="TH"&&r!==n.tr.cells[0])&&i(n.table).colsNum<this.options.maxColNum?0:-1},execCommand:function(e){var n=this.selection.getRange(),r=n.createBookmark(!0);if(this.queryCommandState(e)==-1)return;var s=t(this).cell,o=i(s),u=o.getCellInfo(s);if(!o.selectedTds.length)o.insertCol(u.colIndex,s);else{var a=o.cellsRange;for(var f=0,l=a.endColIndex-a.beginColIndex+1;f<l;f++)o.insertCol(a.beginColIndex,s)}n.moveToBookmark(r).select(!0)}},UE.commands.insertcolnext={queryCommandState:function(){var e=t(this),n=e.cell;return n&&i(e.table).colsNum<this.options.maxColNum?0:-1},execCommand:function(){var e=this.selection.getRange(),n=e.createBookmark(!0),r=t(this).cell,s=i(r),o=s.getCellInfo(r);if(!s.selectedTds.length)s.insertCol(o.colIndex+o.colSpan,r);else{var u=s.cellsRange;for(var a=0,f=u.endColIndex-u.beginColIndex+1;a<f;a++)s.insertCol(u.endColIndex+1,r)}e.moveToBookmark(n).select()}},UE.commands.deletecol={queryCommandState:function(){var e=t(this);return e.cell?0:-1},execCommand:function(){var e=t(this).cell,n=i(e),r=n.cellsRange,s=n.getCellInfo(e),o=n.getHSideCell(e),u=n.getHSideCell(e,!0);if(utils.isEmptyObject(r))n.deleteCol(s.colIndex);else for(var a=r.beginColIndex;a<r.endColIndex+1;a++)n.deleteCol(r.beginColIndex);var f=n.table,l=this.selection.getRange();if(!f.getElementsByTagName("td").length){var c=f.nextSibling;domUtils.remove(f),c&&l.setStart(c,0).setCursor(!1,!0)}else domUtils.inDoc(e,this.document)?l.setStart(e,0).setCursor(!1,!0):u&&domUtils.inDoc(u,this.document)?l.selectNodeContents(u).setCursor(!1,!0):o&&domUtils.inDoc(o,this.document)&&l.selectNodeContents(o).setCursor(!0,!0)}},UE.commands.splittocells={queryCommandState:function(){var e=t(this),n=e.cell;if(!n)return-1;var r=i(e.table);return r.selectedTds.length>0?-1:n&&(n.colSpan>1||n.rowSpan>1)?0:-1},execCommand:function(){var e=this.selection.getRange(),n=e.createBookmark(!0),r=t(this).cell,s=i(r);s.splitToCells(r),e.moveToBookmark(n).select()}},UE.commands.splittorows={queryCommandState:function(){var e=t(this),n=e.cell;if(!n)return-1;var r=i(e.table);return r.selectedTds.length>0?-1:n&&n.rowSpan>1?0:-1},execCommand:function(){var e=this.selection.getRange(),n=e.createBookmark(!0),r=t(this).cell,s=i(r);s.splitToRows(r),e.moveToBookmark(n).select()}},UE.commands.splittocols={queryCommandState:function(){var e=t(this),n=e.cell;if(!n)return-1;var r=i(e.table);return r.selectedTds.length>0?-1:n&&n.colSpan>1?0:-1},execCommand:function(){var e=this.selection.getRange(),n=e.createBookmark(!0),r=t(this).cell,s=i(r);s.splitToCols(r),e.moveToBookmark(n).select()}},UE.commands.adaptbytext=UE.commands.adaptbywindow={queryCommandState:function(){return t(this).table?0:-1},execCommand:function(e){var n=t(this),r=n.table;if(r)if(e=="adaptbywindow")s(r,this);else{var i=domUtils.getElementsByTagName(r,"td th");utils.each(i,function(e){e.removeAttribute("width")}),r.removeAttribute("width")}}},UE.commands.averagedistributecol={queryCommandState:function(){var e=n(this);return e?e.isFullRow()||e.isFullCol()?0:-1:-1},execCommand:function(e){function s(){var e=i.table,n,s=0,o=0,u=r(t,e);if(i.isFullRow())s=e.offsetWidth,o=i.colsNum;else{var a=i.cellsRange.beginColIndex,f=i.cellsRange.endColIndex,l;for(var c=a;c<=f;)l=i.selectedTds[c],s+=l.offsetWidth,c+=l.colSpan,o+=1}return n=Math.ceil(s/o)-u.tdBorder*2-u.tdPadding*2,n}function o(e){utils.each(domUtils.getElementsByTagName(i.table,"th"),function(e){e.setAttribute("width","")});var t=i.isFullRow()?domUtils.getElementsByTagName(i.table,"td"):i.selectedTds;utils.each(t,function(t){t.colSpan==1&&t.setAttribute("width",e)})}var t=this,i=n(t);i&&i.selectedTds.length&&o(s())}},UE.commands.averagedistributerow={queryCommandState:function(){var e=n(this);return e?e.selectedTds&&/th/ig.test(e.selectedTds[0].tagName)?-1:e.isFullRow()||e.isFullCol()?0:-1:-1},execCommand:function(e){function s(){var e,n,s=0,o=i.table,u=r(t,o),a=parseInt(domUtils.getComputedStyle(o.getElementsByTagName("td")[0],"padding-top"));if(i.isFullCol()){var f=domUtils.getElementsByTagName(o,"caption"),l=domUtils.getElementsByTagName(o,"th"),c,h;f.length>0&&(c=f[0].offsetHeight),l.length>0&&(h=l[0].offsetHeight),s=o.offsetHeight-(c||0)-(h||0),n=l.length==0?i.rowsNum:i.rowsNum-1}else{var p=i.cellsRange.beginRowIndex,d=i.cellsRange.endRowIndex,v=0,m=domUtils.getElementsByTagName(o,"tr");for(var g=p;g<=d;g++)s+=m[g].offsetHeight,v+=1;n=v}return browser.ie&&browser.version<9?e=Math.ceil(s/n):e=Math.ceil(s/n)-u.tdBorder*2-a*2,e}function o(e){var t=i.isFullCol()?domUtils.getElementsByTagName(i.table,"td"):i.selectedTds;utils.each(t,function(t){t.rowSpan==1&&t.setAttribute("height",e)})}var t=this,i=n(t);i&&i.selectedTds.length&&o(s())}},UE.commands.cellalignment={queryCommandState:function(){return t(this).table?0:-1},execCommand:function(e,t){var r=this,i=n(r);if(!i){var s=r.selection.getStart(),o=s&&domUtils.findParentByTagName(s,["td","th","caption"],!0);/caption/ig.test(o.tagName)?(o.style.textAlign=t.align,o.style.verticalAlign=t.vAlign):domUtils.setAttributes(o,t),r.selection.getRange().setCursor(!0)}else utils.each(i.selectedTds,function(e){domUtils.setAttributes(e,t)})},queryCommandValue:function(e){var n=t(this).cell;n||(n=u(this)[0]);if(!n)return null;var r=UE.UETable.getUETable(n).selectedTds;return!r.length&&(r=n),UE.UETable.getTableCellAlignState(r)}},UE.commands.tablealignment={queryCommandState:function(){return browser.ie&&browser.version<8?-1:t(this).table?0:-1},execCommand:function(e,t){var n=this,r=n.selection.getStart(),i=r&&domUtils.findParentByTagName(r,["table"],!0);i&&i.setAttribute("align",t)}},UE.commands.edittable={queryCommandState:function(){return t(this).table?0:-1},execCommand:function(e,t){var n=this.selection.getRange(),r=domUtils.findParentByTagName(n.startContainer,"table");if(r){var i=domUtils.getElementsByTagName(r,"td").concat(domUtils.getElementsByTagName(r,"th"),domUtils.getElementsByTagName(r,"caption"));utils.each(i,function(e){e.style.borderColor=t})}}},UE.commands.edittd={queryCommandState:function(){return t(this).table?0:-1},execCommand:function(e,t){var r=this,i=n(r);if(!i){var s=r.selection.getStart(),o=s&&domUtils.findParentByTagName(s,["td","th","caption"],!0);o&&(o.style.backgroundColor=t)}else utils.each(i.selectedTds,function(e){e.style.backgroundColor=t})}},UE.commands.settablebackground={queryCommandState:function(){return u(this).length>1?0:-1},execCommand:function(e,t){var n,r;n=u(this),r=i(n[0]),r.setBackground(n,t)}},UE.commands.cleartablebackground={queryCommandState:function(){var e=u(this);if(!e.length)return-1;for(var t=0,n;n=e[t++];)if(n.style.backgroundColor!=="")return 0;return-1},execCommand:function(){var e=u(this),t=i(e[0]);t.removeBackground(e)}},UE.commands.interlacetable=UE.commands.uninterlacetable={queryCommandState:function(e){var n=t(this).table;if(!n)return-1;var r=n.getAttribute("interlaced");return e=="interlacetable"?r==="enabled"?-1:0:!r||r==="disabled"?-1:0},execCommand:function(e,n){var r=t(this).table;e=="interlacetable"?(r.setAttribute("interlaced","enabled"),this.fireEvent("interlacetable",r,n)):(r.setAttribute("interlaced","disabled"),this.fireEvent("uninterlacetable",r))}},UE.commands.setbordervisible={queryCommandState:function(e){var n=t(this).table;return n?0:-1},execCommand:function(){var e=t(this).table;utils.each(domUtils.getElementsByTagName(e,"td"),function(e){e.style.borderWidth="1px",e.style.borderStyle="solid"})}}}(),UE.plugins.table=function(){function m(e){}function L(e,t){A(e,"width",!0),A(e,"height",!0)}function A(e,t,n){e.style[t]&&(n&&e.setAttribute(t,parseInt(e.style[t],10)),e.style[t]="")}function O(e){if(e.tagName=="TD"||e.tagName=="TH")return e;var t;return(t=domUtils.findParentByTagName(e,"td",!0)||domUtils.findParentByTagName(e,"th",!0))?t:null}function M(e){var t=new RegExp(domUtils.fillChar,"g");if(e[browser.ie?"innerText":"textContent"].replace(/^\s*$/,"").replace(t,"").length>0)return 0;for(var n in dtd.$isNotEmpty)if(e.getElementsByTagName(n).length)return 0;return 1}function _(t){return t.pageX||t.pageY?{x:t.pageX,y:t.pageY}:{x:t.clientX+e.document.body.scrollLeft-e.document.body.clientLeft,y:t.clientY+e.document.body.scrollTop-e.document.body.clientTop}}function D(t){if(st())return;try{var n=O(t.target||t.srcElement),r;if(s){e.body.style.webkitUserSelect="none";if(Math.abs(f.x-t.clientX)>u||Math.abs(f.y-t.clientY)>u)G(),s=!1,a=0,Z(t)}if(b&&T){a=0,e.body.style.webkitUserSelect="none",e.selection.getNative()[browser.ie9below?"empty":"removeAllRanges"](),r=_(t),q(e,!0,b,r,n),b=="h"?x.style.left=F(T,t)+"px":b=="v"&&(x.style.top=I(T,t)+"px");return}if(n){if(e.fireEvent("excludetable",n)===!0)return;r=_(t);var i=W(n,r),o=domUtils.findParentByTagName(n,"table",!0);if(j(o,n,t,!0)){if(e.fireEvent("excludetable",o)===!0)return;e.body.style.cursor="url("+e.options.cursorpath+"h.png),pointer"}else if(j(o,n,t)){if(e.fireEvent("excludetable",o)===!0)return;e.body.style.cursor="url("+e.options.cursorpath+"v.png),pointer"}else{e.body.style.cursor="text";var l=n;/\d/.test(i)&&(i=i.replace(/\d/,""),n=h(n).getPreviewCell(n,i=="v")),q(e,n?!!i:!1,n?i:"",r,n)}}else H(!1,o,e)}catch(c){m(c)}}function H(e,t,n){if(!e){if(S)return;P=setTimeout(function(){!S&&E&&E.parentNode&&E.parentNode.removeChild(E)},2e3)}else B(t,n)}function B(e,t){function s(n,r){clearTimeout(i),i=setTimeout(function(){t.fireEvent("tableClicked",e,r)},300)}function o(n){clearTimeout(i);var r=h(e),s=e.rows[0].cells[0],o=r.getLastCell(),u=r.getCellsRange(s,o);t.selection.getRange().setStart(s,0).setCursor(!1,!0),r.setSelected(u)}var n=domUtils.getXY(e),r=e.ownerDocument;if(E&&E.parentNode)return E;E=r.createElement("div"),E.contentEditable=!1,E.innerHTML="",E.style.cssText="width:15px;height:15px;background-image:url("+t.options.UEDITOR_HOME_URL+"dialogs/table/dragicon.png);position: absolute;cursor:move;top:"+(n.y-15)+"px;left:"+n.x+"px;",domUtils.unSelectable(E),E.onmouseover=function(e){S=!0},E.onmouseout=function(e){S=!1},domUtils.on(E,"click",function(e,t){s(t,this)}),domUtils.on(E,"dblclick",function(e,t){o(t)}),domUtils.on(E,"dragstart",function(e,t){domUtils.preventDefault(t)});var i;r.body.appendChild(E)}function j(e,t,n,r){var i=_(n),s=W(t,i);if(r){var o=e.getElementsByTagName("caption")[0],u=o?o.offsetHeight:0;return s=="v1"&&i.y-domUtils.getXY(e).y-u<8}return s=="h1"&&i.x-domUtils.getXY(e).x<8}function F(t,n){var r=h(t);if(r){var s=r.getSameEndPosCells(t,"x")[0],o=r.getSameStartPosXCells(t)[0],u=_(n).x,a=(s?domUtils.getXY(s).x:domUtils.getXY(r.table).x)+20,f=o?domUtils.getXY(o).x+o.offsetWidth-20:e.body.offsetWidth+5||parseInt(domUtils.getComputedStyle(e.body,"width"),10);return a+=i,f-=i,u<a?a:u>f?f:u}}function I(e,t){try{var n=domUtils.getXY(e).y,r=_(t).y;return r<n?n:r}catch(i){m(i)}}function q(e,t,n,r,i){try{e.body.style.cursor=n=="h"?"col-resize":n=="v"?"row-resize":"text",browser.ie&&(n&&!N&&!p(e)?(dt(e,e.document),mt(n,i)):vt(e)),w=t}catch(s){m(s)}}function R(){var e="_UETableResizeLine",t=this.document.getElementById(e);if(!t){t=this.document.createElement("div"),t.id=e,t.contnetEditable=!1,t.setAttribute("unselectable","on");var n={width:2*o+1+"px",position:"absolute","z-index":1e5,cursor:"col-resize",background:"red",display:"none"};t.onmouseout=function(){this.style.display="none"},utils.extend(t.style,n),this.document.body.appendChild(t)}return t}function U(e,t){var n=R.call(this),r=t.table,i={top:domUtils.getXY(r).y+"px",left:domUtils.getXY(e).x+e.offsetWidth-o+"px",display:"block",height:r.offsetHeight+"px"};utils.extend(n.style,i)}function z(e){var t=h(e);U.call(this,e,t)}function W(e,t){var n=domUtils.getXY(e);return n?n.x+e.offsetWidth-t.x<o?"h":t.x-n.x<o?"h1":n.y+e.offsetHeight-t.y<o?"v":t.y-n.y<o?"v1":"":""}function X(t,n){if(st())return;f={x:n.clientX,y:n.clientY};if(n.button==2){var r=p(e),i=!1;if(r){var s=bt(e,n);utils.each(r.selectedTds,function(e){e===s&&(i=!0)}),i?(s=r.selectedTds[0],setTimeout(function(){e.selection.getRange().setStart(s,0).setCursor(!1,!0)},0)):(v(domUtils.getElementsByTagName(e.body,"th td")),r.clearSelected())}}else J(n)}function V(){t&&clearTimeout(t),t=null}function $(t){a=0,t=t||e.window.event;var n=O(t.target||t.srcElement);if(n){var r;if(r=W(n,_(t))){vt(e);if(r=="h1"){r="h";if(j(domUtils.findParentByTagName(n,"table"),n,t))e.execCommand("adaptbywindow");else{n=h(n).getPreviewCell(n);if(n){var i=e.selection.getRange();i.selectNodeContents(n).setCursor(!0,!0)}}}if(r=="h"){var s=h(n),o=s.table,u=at(n,o,!0);u=Q(u,"left"),s.width=s.offsetWidth;var f=[],l=[];utils.each(u,function(e){f.push(e.offsetWidth)}),utils.each(u,function(e){e.removeAttribute("width")}),window.setTimeout(function(){var e=!0;utils.each(u,function(t,n){var r=t.offsetWidth;if(r>f[n])return e=!1,!1;l.push(r)});var t=e?l:f;utils.each(u,function(e,n){e.width=t[n]-pt()})},0)}}}}function J(t){v(domUtils.getElementsByTagName(e.body,"td th")),utils.each(e.document.getElementsByTagName("table"),function(e){e.ueTable=null}),g=bt(e,t);if(!g)return;var n=domUtils.findParentByTagName(g,"table",!0);ut=h(n),ut&&ut.clearSelected(),w?K(t):(e.document.body.style.webkitUserSelect="",N=!0,e.addListener("mouseover",tt))}function K(e){browser.ie&&(e=Y(e)),G(),s=!0,n=setTimeout(function(){Z(e)},l)}function Q(e,t){var n=[],r=null;for(var i=0,s=e.length;i<s;i++)r=e[i][t],r&&n.push(r);return n}function G(){n&&clearTimeout(n),n=null}function Y(e){var t=["pageX","pageY","clientX","clientY","srcElement","target"],n={};if(e)for(var r=0,i,s;i=t[r];r++)s=e[i],s&&(n[i]=s);return n}function Z(t){s=!1,g=t.target||t.srcElement;if(!g)return;var n=W(g,_(t));/\d/.test(n)&&(n=n.replace(/\d/,""),g=h(g).getPreviewCell(g,n=="v")),vt(e),dt(e,e.document),e.fireEvent("saveScene"),mt(n,g),N=!0,b=n,T=g}function et(e,t){if(st())return;G(),s=!1;if(w){a=++a%3,f={x:t.clientX,y:t.clientY},r=setTimeout(function(){a>0&&a--},l);if(a===2){a=0,$(t);return}}if(t.button==2)return;var n=this,i=n.selection.getRange(),o=domUtils.findParentByTagName(i.startContainer,"table",!0),u=domUtils.findParentByTagName(i.endContainer,"table",!0);if(o||u)o===u?(o=domUtils.findParentByTagName(i.startContainer,["td","th","caption"],!0),u=domUtils.findParentByTagName(i.endContainer,["td","th","caption"],!0),o!==u&&n.selection.clearRange()):n.selection.clearRange();N=!1,n.document.body.style.webkitUserSelect="";if(b&&T){n.selection.getNative()[browser.ie9below?"empty":"removeAllRanges"](),a=0,x=n.document.getElementById("ue_tableDragLine");if(x){var c=domUtils.getXY(T),p=domUtils.getXY(x);switch(b){case"h":it(T,p.x-c.x);break;case"v":ot(T,p.y-c.y-T.offsetHeight);break;default:}b="",T=null,vt(n),n.fireEvent("saveScene");return}}if(!g){var d=domUtils.findParentByTagName(t.target||t.srcElement,"td",!0);d||(d=domUtils.findParentByTagName(t.target||t.srcElement,"th",!0));if(d&&(d.tagName=="TD"||d.tagName=="TH")){if(n.fireEvent("excludetable",d)===!0)return;i=new dom.Range(n.document),i.setStart(d,0).setCursor(!1,!0)}}else{var v=h(g),m=v?v.selectedTds[0]:null;if(m)i=new dom.Range(n.document),domUtils.isEmptyBlock(m)?i.setStart(m,0).setCursor(!1,!0):i.selectNodeContents(m).shrinkBoundary().setCursor(!1,!0);else{i=n.selection.getRange().shrinkBoundary();if(!i.collapsed){var o=domUtils.findParentByTagName(i.startContainer,["td","th"],!0),u=domUtils.findParentByTagName(i.endContainer,["td","th"],!0);(o&&!u||!o&&u||o&&u&&o!==u)&&i.setCursor(!1,!0)}}g=null,n.removeListener("mouseover",tt)}n._selectionChange(250,t)}function tt(e,t){if(st())return;var n=this,r=t.target||t.srcElement;y=domUtils.findParentByTagName(r,"td",!0)||domUtils.findParentByTagName(r,"th",!0);if(g&&y&&(g.tagName=="TD"&&y.tagName=="TD"||g.tagName=="TH"&&y.tagName=="TH")&&domUtils.findParentByTagName(g,"table")==domUtils.findParentByTagName(y,"table")){var i=h(y);if(g!=y){n.document.body.style.webkitUserSelect="none",n.selection.getNative()[browser.ie9below?"empty":"removeAllRanges"]();var s=i.getCellsRange(g,y);i.setSelected(s)}else n.document.body.style.webkitUserSelect="",i.clearSelected()}t.preventDefault?t.preventDefault():t.returnValue=!1}function nt(e,t,n){var r=parseInt(domUtils.getComputedStyle(e,"line-height"),10),i=n+t;t=i<r?r:i,e.style.height&&(e.style.height=""),e.rowSpan==1?e.setAttribute("height",t):e.removeAttribute&&e.removeAttribute("height")}function rt(e){return e?parseInt(domUtils.getComputedStyle(e,"width"),10):0}function it(e,t){var n=h(e);if(n){var r=n.table,i=at(e,r);r.style.width="",r.removeAttribute("width"),t=lt(t,e,i);if(e.nextSibling){var s=0;utils.each(i,function(e){e.left.width=+e.left.width+t,e.right&&(e.right.width=+e.right.width-t)})}else utils.each(i,function(e){e.left.width-=-t})}}function st(){return e.body.contentEditable==="false"}function ot(e,t){if(Math.abs(t)<10)return;var n=h(e);if(n){var r=n.getSameEndPosCells(e,"y"),i=r[0]?r[0].offsetHeight:0;for(var s=0,o;o=r[s++];)nt(o,t,i)}}function at(e,t,n){t||(t=domUtils.findParentByTagName(e,"table"));if(!t)return null;var r=domUtils.getNodeIndex(e),i=e,s=t.rows,o=0;while(i)i.nodeType===1&&(o+=i.colSpan||1),i=i.previousSibling;i=null;var u=[];return utils.each(s,function(e){var t=e.cells,r=0;utils.each(t,function(e){r+=e.colSpan||1;if(r===o)return u.push({left:e,right:e.nextSibling||null}),!1;if(r>o)return n&&u.push({left:e}),!1})}),u}function ft(e){var t=Number.MAX_VALUE;for(var n=0,r;r=e[n];n++)t=Math.min(t,r.width||ct(r));return t}function lt(e,t,n){e-=pt();if(e<0)return 0;e-=ct(t);var r=e<0?"left":"right";return e=Math.abs(e),utils.each(n,function(t){var n=t[r];n&&(e=Math.min(e,ct(n)-i))}),e=e<0?0:e,r==="left"?-e:e}function ct(e){var t=0,n=0,t=e.offsetWidth-pt();e.nextSibling||(t-=ht(e)),t=t<0?0:t;try{e.width=t}catch(r){}return t}function ht(e){tab=domUtils.findParentByTagName(e,"table",!1);if(tab.offsetVal===undefined){var t=e.previousSibling;t?tab.offsetVal=e.offsetWidth-t.offsetWidth===c.borderWidth?c.borderWidth:0:tab.offsetVal=0}return tab.offsetVal}function pt(){if(c.tabcellSpace===undefined){var t=null,n=e.document.createElement("table"),r=e.document.createElement("tbody"),i=e.document.createElement("tr"),s=e.document.createElement("td"),o=null;s.style.cssText="border: 0;",s.width=1,i.appendChild(s),i.appendChild(o=s.cloneNode(!1)),r.appendChild(i),n.appendChild(r),n.style.cssText="visibility: hidden;",e.body.appendChild(n),c.paddingSpace=s.offsetWidth-1;var u=n.offsetWidth;s.style.cssText="",o.style.cssText="",c.borderWidth=(n.offsetWidth-u)/3,c.tabcellSpace=c.paddingSpace+c.borderWidth,e.body.removeChild(n)}return pt=function(){return c.tabcellSpace},c.tabcellSpace}function dt(e,t){if(N)return;x=e.document.createElement("div"),domUtils.setAttributes(x,{id:"ue_tableDragLine",unselectable:"on",contenteditable:!1,onresizestart:"return false",ondragstart:"return false",onselectstart:"return false",style:"background-color:blue;position:absolute;padding:0;margin:0;background-image:none;border:0px none;opacity:0;filter:alpha(opacity=0)"}),e.body.appendChild(x)}function vt(e){if(N)return;var t;while(t=e.document.getElementById("ue_tableDragLine"))domUtils.remove(t)}function mt(e,t){if(!t)return;var n=domUtils.findParentByTagName(t,"table"),r=n.getElementsByTagName("caption"),i=n.offsetWidth,s=n.offsetHeight-(r.length>0?r[0].offsetHeight:0),o=domUtils.getXY(n),u=domUtils.getXY(t),a;switch(e){case"h":a="height:"+s+"px;top:"+(o.y+(r.length>0?r[0].offsetHeight:0))+"px;left:"+(u.x+t.offsetWidth),x.style.cssText=a+"px;position: absolute;display:block;background-color:blue;width:1px;border:0; color:blue;opacity:.3;filter:alpha(opacity=30)";break;case"v":a="width:"+i+"px;left:"+o.x+"px;top:"+(u.y+t.offsetHeight),x.style.cssText=a+"px;overflow:hidden;position: absolute;display:block;background-color:blue;height:1px;border:0;color:blue;opacity:.2;filter:alpha(opacity=20)";break;default:}}function gt(e,t){var n=domUtils.getElementsByTagName(e.body,"table"),r;for(var i=0,s;s=n[i++];){var o=domUtils.getElementsByTagName(s,"td");o[0]&&(t?(r=o[0].style.borderColor.replace(/\s/g,""),/(#ffffff)|(rgb\(255,255,255\))/ig.test(r)&&domUtils.addClass(s,"noBorderTable")):domUtils.removeClasses(s,"noBorderTable"))}}function yt(e,t,n){var r=e.body;return r.offsetWidth-(t?parseInt(domUtils.getComputedStyle(r,"margin-left"),10)*2:0)-n.tableBorder*2-(e.options.offsetWidth||0)}function bt(e,t){var n=domUtils.findParentByTagName(t.target||t.srcElement,["td","th"],!0),r=null;if(!n)return null;r=W(n,_(t));if(!n)return null;if(r==="h1"&&n.previousSibling){var i=domUtils.getXY(n),s=n.offsetWidth;Math.abs(i.x+s-t.clientX)>s/3&&(n=n.previousSibling)}else if(r==="v1"&&n.parentNode.previousSibling){var i=domUtils.getXY(n),o=n.offsetHeight;Math.abs(i.y+o-t.clientY)>o/3&&(n=n.parentNode.previousSibling.firstChild)}return n&&e.fireEvent("excludetable",n)!==!0?n:null}var e=this,t=null,n=null,r=null,i=5,s=!1,o=5,u=10,a=0,f=null,l=360,c=UE.UETable,h=function(e){return c.getUETable(e)},p=function(e){return c.getUETableBySelected(e)},d=function(e,t){return c.getDefaultValue(e,t)},v=function(e){return c.removeSelectedClass(e)};e.ready(function(){var e=this,t=e.selection.getText;e.selection.getText=function(){var n=p(e);if(n){var r="";return utils.each(n.selectedTds,function(e){r+=e[browser.ie?"innerText":"textContent"]}),r}return t.call(e.selection)}});var g=null,y=null,b="",w=!1,E=null,S=!1,x=null,T=null,N=!1,C=!0;e.setOpt({maxColNum:20,maxRowNum:100,defaultCols:5,defaultRows:5,tdvalign:"top",cursorpath:e.options.UEDITOR_HOME_URL+"themes/default/images/cursor_",tableDragable:!1,classList:["ue-table-interlace-color-single","ue-table-interlace-color-double"]}),e.getUETable=h;var k={deletetable:1,inserttable:1,cellvalign:1,insertcaption:1,deletecaption:1,inserttitle:1,deletetitle:1,mergeright:1,mergedown:1,mergecells:1,insertrow:1,insertrownext:1,deleterow:1,insertcol:1,insertcolnext:1,deletecol:1,splittocells:1,splittorows:1,splittocols:1,adaptbytext:1,adaptbywindow:1,adaptbycustomer:1,insertparagraph:1,insertparagraphbeforetable:1,averagedistributecol:1,averagedistributerow:1};e.ready(function(){utils.cssRule("table",".selectTdClass{background-color:#edf5fa !important}table.noBorderTable td,table.noBorderTable th,table.noBorderTable caption{border:1px dashed #ddd !important}table{margin-bottom:10px;border-collapse:collapse;display:table;}td,th{padding: 5px 10px;border: 1px solid #DDD;}caption{border:1px dashed #DDD;border-bottom:0;padding:3px;text-align:center;}th{border-top:1px solid #BBB;background-color:#F7F7F7;}table tr.firstRow th{border-top-width:2px;}.ue-table-interlace-color-single{ background-color: #fcfcfc; } .ue-table-interlace-color-double{ background-color: #f7faff; }td p{margin:0;padding:0;}",e.document);var t,n,r;e.addListener("keydown",function(e,i){var s=this,o=i.keyCode||i.which;if(o==8){var u=p(s);u&&u.selectedTds.length&&(u.isFullCol()?s.execCommand("deletecol"):u.isFullRow()?s.execCommand("deleterow"):s.fireEvent("delcells"),domUtils.preventDefault(i));var a=domUtils.findParentByTagName(s.selection.getStart(),"caption",!0),f=s.selection.getRange();if(f.collapsed&&a&&M(a)){s.fireEvent("saveScene");var l=a.parentNode;domUtils.remove(a),l&&f.setStart(l.rows[0].cells[0],0).setCursor(!1,!0),s.fireEvent("saveScene")}}if(o==46){u=p(s);if(u){s.fireEvent("saveScene");for(var c=0,h;h=u.selectedTds[c++];)domUtils.fillNode(s.document,h);s.fireEvent("saveScene"),domUtils.preventDefault(i)}}if(o==13){var d=s.selection.getRange(),a=domUtils.findParentByTagName(d.startContainer,"caption",!0);if(a){var l=domUtils.findParentByTagName(a,"table");d.collapsed?a&&d.setStart(l.rows[0].cells[0],0).setCursor(!1,!0):(d.deleteContents(),s.fireEvent("saveScene")),domUtils.preventDefault(i);return}if(d.collapsed){var l=domUtils.findParentByTagName(d.startContainer,"table");if(l){var v=l.rows[0].cells[0],m=domUtils.findParentByTagName(s.selection.getStart(),["td","th"],!0),g=l.previousSibling;if(v===m&&(!g||g.nodeType==1&&g.tagName=="TABLE")&&domUtils.isStartInblock(d)){var y=domUtils.findParent(s.selection.getStart(),function(e){return domUtils.isBlockElm(e)},!0);y&&(/t(h|d)/i.test(y.tagName)||y===m.firstChild)&&(s.execCommand("insertparagraphbeforetable"),domUtils.preventDefault(i))}}}}if((i.ctrlKey||i.metaKey)&&i.keyCode=="67"){t=null;var u=p(s);if(u){var b=u.selectedTds;n=u.isFullCol(),r=u.isFullRow(),t=[[u.cloneCell(b[0],null,!0)]];for(var c=1,h;h=b[c];c++)h.parentNode!==b[c-1].parentNode?t.push([u.cloneCell(h,null,!0)]):t[t.length-1].push(u.cloneCell(h,null,!0))}}}),e.addListener("tablehasdeleted",function(){q(this,!1,"",null),E&&domUtils.remove(E)}),e.addListener("beforepaste",function(e,i){var s=this,o=s.selection.getRange();if(domUtils.findParentByTagName(o.startContainer,"caption",!0)){var u=s.document.createElement("div");u.innerHTML=i.html,i.html=u[browser.ie9below?"innerText":"textContent"];return}var a=p(s);if(t){s.fireEvent("saveScene");var o=s.selection.getRange(),f=domUtils.findParentByTagName(o.startContainer,["td","th"],!0),l,v;if(f){var m=h(f);if(r){var g=m.getCellInfo(f).rowIndex;f.tagName=="TH"&&g++;for(var y=0,b;b=t[y++];){var w=m.insertRow(g++,"td");for(var E=0,S;S=b[E];E++){var x=w.cells[E];x||(x=w.insertCell(E)),x.innerHTML=S.innerHTML,S.getAttribute("width")&&x.setAttribute("width",S.getAttribute("width")),S.getAttribute("vAlign")&&x.setAttribute("vAlign",S.getAttribute("vAlign")),S.getAttribute("align")&&x.setAttribute("align",S.getAttribute("align")),S.style.cssText&&(x.style.cssText=S.style.cssText)}for(var E=0,S;S=w.cells[E];E++){if(!b[E])break;S.innerHTML=b[E].innerHTML,b[E].getAttribute("width")&&S.setAttribute("width",b[E].getAttribute("width")),b[E].getAttribute("vAlign")&&S.setAttribute("vAlign",b[E].getAttribute("vAlign")),b[E].getAttribute("align")&&S.setAttribute("align",b[E].getAttribute("align")),b[E].style.cssText&&(S.style.cssText=b[E].style.cssText)}}}else{if(n){k=m.getCellInfo(f);var T=0;for(var E=0,b=t[0],S;S=b[E++];)T+=S.colSpan||1;s.__hasEnterExecCommand=!0;for(y=0;y<T;y++)s.execCommand("insertcol");s.__hasEnterExecCommand=!1,f=m.table.rows[0].cells[k.cellIndex],f.tagName=="TH"&&(f=m.table.rows[1].cells[k.cellIndex])}for(var y=0,b;b=t[y++];){l=f;for(var E=0,S;S=b[E++];)if(f)f.innerHTML=S.innerHTML,S.getAttribute("width")&&f.setAttribute("width",S.getAttribute("width")),S.getAttribute("vAlign")&&f.setAttribute("vAlign",S.getAttribute("vAlign")),S.getAttribute("align")&&f.setAttribute("align",S.getAttribute("align")),S.style.cssText&&(f.style.cssText=S.style.cssText),v=f,f=f.nextSibling;else{var N=S.cloneNode(!0);domUtils.removeAttributes(N,["class","rowSpan","colSpan"]),v.parentNode.appendChild(N)}f=m.getNextCell(l,!0,!0);if(!t[y])break;if(!f){var k=m.getCellInfo(l);m.table.insertRow(m.table.rows.length),m.update(),f=m.getVSideCell(l,!0)}}}m.update()}else{a=s.document.createElement("table");for(var y=0,b;b=t[y++];){var w=a.insertRow(a.rows.length);for(var E=0,S;S=b[E++];)N=c.cloneCell(S,null,!0),domUtils.removeAttributes(N,["class"]),w.appendChild(N);E==2&&N.rowSpan>1&&(N.rowSpan=1)}var A=d(s),O=s.body.offsetWidth-(C?parseInt(domUtils.getComputedStyle(s.body,"margin-left"),10)*2:0)-A.tableBorder*2-(s.options.offsetWidth||0);s.execCommand("insertHTML","<table  "+(n&&r?'width="'+O+'"':"")+">"+a.innerHTML.replace(/>\s*</g,"><").replace(/\bth\b/gi,"td")+"</table>")}return s.fireEvent("contentchange"),s.fireEvent("saveScene"),i.html="",!0}var u=s.document.createElement("div"),_;u.innerHTML=i.html,_=u.getElementsByTagName("table"),domUtils.findParentByTagName(s.selection.getStart(),"table")?(utils.each(_,function(e){domUtils.remove(e)}),domUtils.findParentByTagName(s.selection.getStart(),"caption",!0)&&(u.innerHTML=u[browser.ie?"innerText":"textContent"])):utils.each(_,function(e){L(e,!0),domUtils.removeAttributes(e,["style","border"]),utils.each(domUtils.getElementsByTagName(e,"td"),function(e){M(e)&&domUtils.fillNode(s.document,e),L(e,!0)})}),i.html=u.innerHTML}),e.addListener("afterpaste",function(){utils.each(domUtils.getElementsByTagName(e.body,"table"),function(t){if(t.offsetWidth>e.body.offsetWidth){var n=d(e,t);t.style.width=e.body.offsetWidth-(C?parseInt(domUtils.getComputedStyle(e.body,"margin-left"),10)*2:0)-n.tableBorder*2-(e.options.offsetWidth||0)+"px"}})}),e.addListener("blur",function(){t=null});var i;e.addListener("keydown",function(){clearTimeout(i),i=setTimeout(function(){var t=e.selection.getRange(),n=domUtils.findParentByTagName(t.startContainer,["th","td"],!0);if(n){var r=n.parentNode.parentNode.parentNode;r.offsetWidth>r.getAttribute("width")&&(n.style.wordBreak="break-all")}},100)}),e.addListener("selectionchange",function(){q(e,!1,"",null)}),e.addListener("contentchange",function(){var e=this;vt(e);if(p(e))return;var t=e.selection.getRange(),n=t.startContainer;n=domUtils.findParentByTagName(n,["td","th"],!0),utils.each(domUtils.getElementsByTagName(e.document,"table"),function(t){if(e.fireEvent("excludetable",t)===!0)return;t.ueTable=new c(t),t.onmouseover=function(){e.fireEvent("tablemouseover",t)},t.onmousemove=function(){e.fireEvent("tablemousemove",t),e.options.tableDragable&&H(!0,this,e),utils.defer(function(){e.fireEvent("contentchange",50)},!0)},t.onmouseout=function(){e.fireEvent("tablemouseout",t),q(e,!1,"",null),vt(e)},t.onclick=function(t){t=e.window.event||t;var n=O(t.target||t.srcElement);if(!n)return;var r=h(n),i=r.table,s=r.getCellInfo(n),o,u=e.selection.getRange();if(j(i,n,t,!0)){var a=r.getCell(r.indexTable[r.rowsNum-1][s.colIndex].rowIndex,r.indexTable[r.rowsNum-1][s.colIndex].cellIndex);t.shiftKey&&r.selectedTds.length?r.selectedTds[0]!==a?(o=r.getCellsRange(r.selectedTds[0],a),r.setSelected(o)):u&&u.selectNodeContents(a).select():n!==a?(o=r.getCellsRange(n,a),r.setSelected(o)):u&&u.selectNodeContents(a).select();return}if(j(i,n,t)){var f=r.getCell(r.indexTable[s.rowIndex][r.colsNum-1].rowIndex,r.indexTable[s.rowIndex][r.colsNum-1].cellIndex);t.shiftKey&&r.selectedTds.length?r.selectedTds[0]!==f?(o=r.getCellsRange(r.selectedTds[0],f),r.setSelected(o)):u&&u.selectNodeContents(f).select():n!==f?(o=r.getCellsRange(n,f),r.setSelected(o)):u&&u.selectNodeContents(f).select()}}}),gt(e,!0)}),domUtils.on(e.document,"mousemove",D),domUtils.on(e.document,"mouseout",function(t){var n=t.target||t.srcElement;n.tagName=="TABLE"&&q(e,!1,"",null)}),e.addListener("interlacetable",function(e,t,n){if(!t)return;var r=this,i=t.rows,s=i.length,o=function(e,t,n){return e[t]?e[t]:n?e[t%e.length]:""};for(var u=0;u<s;u++)i[u].className=o(n||r.options.classList,u,!0)}),e.addListener("uninterlacetable",function(e,t){if(!t)return;var n=this,r=t.rows,i=n.options.classList,s=r.length;for(var o=0;o<s;o++)domUtils.removeClasses(r[o],i)}),e.addListener("mousedown",X),e.addListener("mouseup",et),domUtils.on(e.body,"dragstart",function(t){et.call(e,"dragstart",t)}),e.addOutputRule(function(e){utils.each(e.getNodesByTagName("div"),function(e){e.getAttr("id")=="ue_tableDragLine"&&e.parentNode.removeChild(e)})});var s=0;e.addListener("mousedown",function(){s=0}),e.addListener("tabkeydown",function(){var t=this.selection.getRange(),n=t.getCommonAncestor(!0,!0),r=domUtils.findParentByTagName(n,"table");if(r){if(domUtils.findParentByTagName(n,"caption",!0)){var i=domUtils.getElementsByTagName(r,"th td");i&&i.length&&t.setStart(i[0],0).setCursor(!1,!0)}else{var i=domUtils.findParentByTagName(n,["td","th"],!0),o=h(i);s=i.rowSpan>1?s:o.getCellInfo(i).rowIndex;var u=o.getTabNextCell(i,s);u?M(u)?t.setStart(u,0).setCursor(!1,!0):t.selectNodeContents(u).select():(e.fireEvent("saveScene"),e.__hasEnterExecCommand=!0,this.execCommand("insertrownext"),e.__hasEnterExecCommand=!1,t=this.selection.getRange(),t.setStart(r.rows[r.rows.length-1].cells[0],0).setCursor(),e.fireEvent("saveScene"))}return!0}}),browser.ie&&e.addListener("selectionchange",function(){q(this,!1,"",null)}),e.addListener("keydown",function(e,t){var n=this,r=t.keyCode||t.which;if(r==8||r==46)return;var i=!t.ctrlKey&&!t.metaKey&&!t.shiftKey&&!t.altKey;i&&v(domUtils.getElementsByTagName(n.body,"td"));var s=p(n);if(!s)return;i&&s.clearSelected()}),e.addListener("beforegetcontent",function(){gt(this,!1),browser.ie&&utils.each(this.document.getElementsByTagName("caption"),function(e){domUtils.isEmptyNode(e)&&(e.innerHTML="&nbsp;")})}),e.addListener("aftergetcontent",function(){gt(this,!0)}),e.addListener("getAllHtml",function(){v(e.document.getElementsByTagName("td"))}),e.addListener("fullscreenchanged",function(t,n){if(!n){var r=this.body.offsetWidth/document.body.offsetWidth,i=domUtils.getElementsByTagName(this.body,"table");utils.each(i,function(t){if(t.offsetWidth<e.body.offsetWidth)return!1;var n=domUtils.getElementsByTagName(t,"td"),i=[];utils.each(n,function(e){i.push(e.offsetWidth)});for(var s=0,o;o=n[s];s++)o.setAttribute("width",Math.floor(i[s]*r));t.setAttribute("width",Math.floor(yt(e,C,d(e))))})}});var o=e.execCommand;e.execCommand=function(e,t){var n=this,r=arguments;e=e.toLowerCase();var i=p(n),s,u=new dom.Range(n.document),a=n.commands[e]||UE.commands[e],f;if(!a)return;if(i&&!k[e]&&!a.notNeedUndo&&!n.__hasEnterExecCommand){n.__hasEnterExecCommand=!0,n.fireEvent("beforeexeccommand",e),s=i.selectedTds;var l=-2,c=-2,h,d;for(var v=0,m;m=s[v];v++){M(m)?u.setStart(m,0).setCursor(!1,!0):u.selectNode(m).select(!0),d=n.queryCommandState(e),h=n.queryCommandValue(e);if(d!=-1){if(l!==d||c!==h)n._ignoreContentChange=!0,f=o.apply(n,arguments),n._ignoreContentChange=!1;l=n.queryCommandState(e),c=n.queryCommandValue(e),domUtils.isEmptyBlock(m)&&domUtils.fillNode(n.document,m)}}u.setStart(s[0],0).shrinkBoundary(!0).setCursor(!1,!0),n.fireEvent("contentchange"),n.fireEvent("afterexeccommand",e),n.__hasEnterExecCommand=!1,n._selectionChange()}else f=o.apply(n,arguments);return f}});var P},UE.UETable.prototype.sortTable=function(e,t){var n=this.table,r=n.rows,i=[],s=r[0].cells[0].tagName==="TH",o=0;if(this.selectedTds.length){var u=this.cellsRange,a=u.endRowIndex+1;for(var f=u.beginRowIndex;f<a;f++)i[f]=r[f];i.splice(0,u.beginRowIndex),o=u.endRowIndex+1===this.rowsNum?0:u.endRowIndex+1}else for(var f=0,a=r.length;f<a;f++)i[f]=r[f];var l={reversecurrent:function(e,t){return 1},orderbyasc:function(e,t){var n=e.innerText||e.textContent,r=t.innerText||t.textContent;return n.localeCompare(r)},reversebyasc:function(e,t){var n=e.innerHTML,r=t.innerHTML;return r.localeCompare(n)},orderbynum:function(e,t){var n=e[browser.ie?"innerText":"textContent"].match(/\d+/),r=t[browser.ie?"innerText":"textContent"].match(/\d+/);return n&&(n=+n[0]),r&&(r=+r[0]),(n||0)-(r||0)},reversebynum:function(e,t){var n=e[browser.ie?"innerText":"textContent"].match(/\d+/),r=t[browser.ie?"innerText":"textContent"].match(/\d+/);return n&&(n=+n[0]),r&&(r=+r[0]),(r||0)-(n||0)}};n.setAttribute("data-sort-type",t&&typeof t=="string"&&l[t]?t:""),s&&i.splice(0,1),i=utils.sort(i,function(n,r){var i;return t&&typeof t=="function"?i=t.call(this,n.cells[e],r.cells[e]):t&&typeof t=="number"?i=1:t&&typeof t=="string"&&l[t]?i=l[t].call(this,n.cells[e],r.cells[e]):i=l.orderbyasc.call(this,n.cells[e],r.cells[e]),i});var c=n.ownerDocument.createDocumentFragment();for(var h=0,a=i.length;h<a;h++)c.appendChild(i[h]);var p=n.getElementsByTagName("tbody")[0];o?p.insertBefore(c,r[o-u.endRowIndex+u.beginRowIndex-1]):p.appendChild(c)},UE.plugins.tablesort=function(){var e=this,t=UE.UETable,n=function(e){return t.getUETable(e)},r=function(e){return t.getTableItemsByRange(e)};e.ready(function(){utils.cssRule("tablesort","table.sortEnabled tr.firstRow th,table.sortEnabled tr.firstRow td{padding-right:20px;background-repeat: no-repeat;background-position: center right;   background-image:url("+e.options.themePath+e.options.theme+"/images/sortable.png);}",e.document),e.addListener("afterexeccommand",function(e,t){(t=="mergeright"||t=="mergedown"||t=="mergecells")&&this.execCommand("disablesort")})}),UE.commands.sorttable={queryCommandState:function(){var e=this,t=r(e);if(!t.cell)return-1;var n=t.table,i=n.getElementsByTagName("td");for(var s=0,o;o=i[s++];)if(o.rowSpan!=1||o.colSpan!=1)return-1;return 0},execCommand:function(e,t){var i=this,s=i.selection.getRange(),o=s.createBookmark(!0),u=r(i),a=u.cell,f=n(u.table),l=f.getCellInfo(a);f.sortTable(l.cellIndex,t),s.moveToBookmark(o);try{s.select()}catch(c){}}},UE.commands.enablesort=UE.commands.disablesort={queryCommandState:function(e){var t=r(this).table;if(t&&e=="enablesort"){var n=domUtils.getElementsByTagName(t,"th td");for(var i=0;i<n.length;i++)if(n[i].getAttribute("colspan")>1||n[i].getAttribute("rowspan")>1)return-1}return t?e=="enablesort"^t.getAttribute("data-sort")!="sortEnabled"?-1:0:-1},execCommand:function(e){var t=r(this).table;t.setAttribute("data-sort",e=="enablesort"?"sortEnabled":"sortDisabled"),e=="enablesort"?domUtils.addClass(t,"sortEnabled"):domUtils.removeClasses(t,"sortEnabled")}}},UE.plugins.contextmenu=function(){var e=this;e.setOpt("enableContextMenu",!0);if(e.getOpt("enableContextMenu")===!1)return;var t=e.getLang("contextMenu"),n,r=e.options.contextMenu||[{label:t.selectall,cmdName:"selectall"},{label:t.cleardoc,cmdName:"cleardoc",exec:function(){confirm(t.confirmclear)&&this.execCommand("cleardoc")}},"-",{label:t.unlink,cmdName:"unlink"},"-",{group:t.paragraph,icon:"justifyjustify",subMenu:[{label:t.justifyleft,cmdName:"justify",value:"left"},{label:t.justifyright,cmdName:"justify",value:"right"},{label:t.justifycenter,cmdName:"justify",value:"center"},{label:t.justifyjustify,cmdName:"justify",value:"justify"}]},"-",{group:t.table,icon:"table",subMenu:[{label:t.inserttable,cmdName:"inserttable"},{label:t.deletetable,cmdName:"deletetable"},"-",{label:t.deleterow,cmdName:"deleterow"},{label:t.deletecol,cmdName:"deletecol"},{label:t.insertcol,cmdName:"insertcol"},{label:t.insertcolnext,cmdName:"insertcolnext"},{label:t.insertrow,cmdName:"insertrow"},{label:t.insertrownext,cmdName:"insertrownext"},"-",{label:t.insertcaption,cmdName:"insertcaption"},{label:t.deletecaption,cmdName:"deletecaption"},{label:t.inserttitle,cmdName:"inserttitle"},{label:t.deletetitle,cmdName:"deletetitle"},{label:t.inserttitlecol,cmdName:"inserttitlecol"},{label:t.deletetitlecol,cmdName:"deletetitlecol"},"-",{label:t.mergecells,cmdName:"mergecells"},{label:t.mergeright,cmdName:"mergeright"},{label:t.mergedown,cmdName:"mergedown"},"-",{label:t.splittorows,cmdName:"splittorows"},{label:t.splittocols,cmdName:"splittocols"},{label:t.splittocells,cmdName:"splittocells"},"-",{label:t.averageDiseRow,cmdName:"averagedistributerow"},{label:t.averageDisCol,cmdName:"averagedistributecol"},"-",{label:t.edittd,cmdName:"edittd",exec:function(){UE.ui.edittd&&new UE.ui.edittd(this),this.getDialog("edittd").open()}},{label:t.edittable,cmdName:"edittable",exec:function(){UE.ui.edittable&&new UE.ui.edittable(this),this.getDialog("edittable").open()}},{label:t.setbordervisible,cmdName:"setbordervisible"}]},{group:t.tablesort,icon:"tablesort",subMenu:[{label:t.enablesort,cmdName:"enablesort"},{label:t.disablesort,cmdName:"disablesort"},"-",{label:t.reversecurrent,cmdName:"sorttable",value:"reversecurrent"},{label:t.orderbyasc,cmdName:"sorttable",value:"orderbyasc"},{label:t.reversebyasc,cmdName:"sorttable",value:"reversebyasc"},{label:t.orderbynum,cmdName:"sorttable",value:"orderbynum"},{label:t.reversebynum,cmdName:"sorttable",value:"reversebynum"}]},{group:t.borderbk,icon:"borderBack",subMenu:[{label:t.setcolor,cmdName:"interlacetable",exec:function(){this.execCommand("interlacetable")}},{label:t.unsetcolor,cmdName:"uninterlacetable",exec:function(){this.execCommand("uninterlacetable")}},{label:t.setbackground,cmdName:"settablebackground",exec:function(){this.execCommand("settablebackground",{repeat:!0,colorList:["#bbb","#ccc"]})}},{label:t.unsetbackground,cmdName:"cleartablebackground",exec:function(){this.execCommand("cleartablebackground")}},{label:t.redandblue,cmdName:"settablebackground",exec:function(){this.execCommand("settablebackground",{repeat:!0,colorList:["red","blue"]})}},{label:t.threecolorgradient,cmdName:"settablebackground",exec:function(){this.execCommand("settablebackground",{repeat:!0,colorList:["#aaa","#bbb","#ccc"]})}}]},{group:t.aligntd,icon:"aligntd",subMenu:[{cmdName:"cellalignment",value:{align:"left",vAlign:"top"}},{cmdName:"cellalignment",value:{align:"center",vAlign:"top"}},{cmdName:"cellalignment",value:{align:"right",vAlign:"top"}},{cmdName:"cellalignment",value:{align:"left",vAlign:"middle"}},{cmdName:"cellalignment",value:{align:"center",vAlign:"middle"}},{cmdName:"cellalignment",value:{align:"right",vAlign:"middle"}},{cmdName:"cellalignment",value:{align:"left",vAlign:"bottom"}},{cmdName:"cellalignment",value:{align:"center",vAlign:"bottom"}},{cmdName:"cellalignment",value:{align:"right",vAlign:"bottom"}}]},{group:t.aligntable,icon:"aligntable",subMenu:[{cmdName:"tablealignment",className:"left",label:t.tableleft,value:"left"},{cmdName:"tablealignment",className:"center",label:t.tablecenter,value:"center"},{cmdName:"tablealignment",className:"right",label:t.tableright,value:"right"}]},"-",{label:t.insertparagraphbefore,cmdName:"insertparagraph",value:!0},{label:t.insertparagraphafter,cmdName:"insertparagraph"},{label:t.copy,cmdName:"copy"},{label:t.paste,cmdName:"paste"}];if(!r.length)return;var i=UE.ui.uiUtils;e.addListener("contextmenu",function(s,o){var u=i.getViewportOffsetByEvent(o);e.fireEvent("beforeselectionchange"),n&&n.destroy();for(var a=0,f,l=[];f=r[a];a++){var c;(function(n){if(n=="-")(c=l[l.length-1])&&c!=="-"&&l.push("-");else if(n.hasOwnProperty("group")){for(var r=0,i,s=[];i=n.subMenu[r];r++)(function(t){t=="-"?(c=s[s.length-1])&&c!=="-"?s.push("-"):s.splice(s.length-1):(e.commands[t.cmdName]||UE.commands[t.cmdName]||t.query)&&(t.query?t.query():e.queryCommandState(t.cmdName))>-1&&s.push({label:t.label||e.getLang("contextMenu."+t.cmdName+(t.value||""))||"",className:"edui-for-"+t.cmdName+(t.className?" edui-for-"+t.cmdName+"-"+t.className:""),onclick:t.exec?function(){t.exec.call(e)}:function(){e.execCommand(t.cmdName,t.value)}})})(i);if(s.length){function o(){switch(n.icon){case"table":return e.getLang("contextMenu.table");case"justifyjustify":return e.getLang("contextMenu.paragraph");case"aligntd":return e.getLang("contextMenu.aligntd");case"aligntable":return e.getLang("contextMenu.aligntable");case"tablesort":return t.tablesort;case"borderBack":return t.borderbk;default:return""}}l.push({label:o(),className:"edui-for-"+n.icon,subMenu:{items:s,editor:e}})}}else(e.commands[n.cmdName]||UE.commands[n.cmdName]||n.query)&&(n.query?n.query.call(e):e.queryCommandState(n.cmdName))>-1&&l.push({label:n.label||e.getLang("contextMenu."+n.cmdName),className:"edui-for-"+(n.icon?n.icon:n.cmdName+(n.value||"")),onclick:n.exec?function(){n.exec.call(e)}:function(){e.execCommand(n.cmdName,n.value)}})})(f)}l[l.length-1]=="-"&&l.pop(),n=new UE.ui.Menu({items:l,className:"edui-contextmenu",editor:e}),n.render(),n.showAt(u),e.fireEvent("aftershowcontextmenu",n),domUtils.preventDefault(o);if(browser.ie){var h;try{h=e.selection.getNative().createRange()}catch(p){return}if(h.item){var d=new dom.Range(e.document);d.selectNode(h.item(0)).select(!0,!0)}}})},UE.plugins.shortcutmenu=function(){var e=this,t,n=e.options.shortcutMenu||[];if(!n.length)return;e.addListener("contextmenu mouseup",function(e,r){var i=this,s={type:e,target:r.target||r.srcElement,screenX:r.screenX,screenY:r.screenY,clientX:r.clientX,clientY:r.clientY};setTimeout(function(){var r=i.selection.getRange();if(r.collapsed===!1||e=="contextmenu")t||(t=new baidu.editor.ui.ShortCutMenu({editor:i,items:n,theme:i.options.theme,className:"edui-shortcutmenu"}),t.render(),i.fireEvent("afterrendershortcutmenu",t)),t.show(s,!!UE.plugins.contextmenu)});if(e=="contextmenu"){domUtils.preventDefault(r);if(browser.ie9below){var o;try{o=i.selection.getNative().createRange()}catch(r){return}if(o.item){var u=new dom.Range(i.document);u.selectNode(o.item(0)).select(!0,!0)}}}}),e.addListener("keydown",function(e){e=="keydown"&&t&&!t.isHidden&&t.hide()})},UE.plugins.basestyle=function(){var e={bold:["strong","b"],italic:["em","i"],subscript:["sub"],superscript:["sup"]},t=function(e,t){return domUtils.filterNodeList(e.selection.getStartElementPath(),t)},n=this;n.addshortcutkey({Bold:"ctrl+66",Italic:"ctrl+73",Underline:"ctrl+85"}),n.addInputRule(function(e){utils.each(e.getNodesByTagName("b i"),function(e){switch(e.tagName){case"b":e.tagName="strong";break;case"i":e.tagName="em"}})});for(var r in e)(function(e,r){n.commands[e]={execCommand:function(e){var i=n.selection.getRange(),s=t(this,r);if(i.collapsed){if(s){var o=n.document.createTextNode("");i.insertNode(o).removeInlineStyle(r),i.setStartBefore(o),domUtils.remove(o)}else{var u=i.document.createElement(r[0]);if(e=="superscript"||e=="subscript")o=n.document.createTextNode(""),i.insertNode(o).removeInlineStyle(["sub","sup"]).setStartBefore(o).collapse(!0);i.insertNode(u).setStart(u,0)}i.collapse(!0)}else(e=="superscript"||e=="subscript")&&(!s||s.tagName.toLowerCase()!=e)&&i.removeInlineStyle(["sub","sup"]),s?i.removeInlineStyle(r):i.applyInlineStyle(r[0]);i.select()},queryCommandState:function(){return t(this,r)?1:0}}})(r,e[r])},UE.plugins.elementpath=function(){var e,t,n=this;n.setOpt("elementPathEnabled",!0);if(!n.options.elementPathEnabled)return;n.commands.elementpath={execCommand:function(r,i){var s=t[i],o=n.selection.getRange();e=i*1,o.selectNode(s).select()},queryCommandValue:function(){var n=[].concat(this.selection.getStartElementPath()).reverse(),r=[];t=n;for(var i=0,s;s=n[i];i++){if(s.nodeType==3)continue;var o=s.tagName.toLowerCase();o=="img"&&s.getAttribute("anchorname")&&(o="anchor"),r[i]=o;if(e==i){e=-1;break}}return r}}},UE.plugins.formatmatch=function(){function i(s,o){function a(e){return h&&e.selectNode(h),e.applyInlineStyle(t[t.length-1].tagName,null,t)}if(browser.webkit)var u=o.target.tagName=="IMG"?o.target:null;e.undoManger&&e.undoManger.save();var f=e.selection.getRange(),l=u||f.getClosedNode();if(n&&l&&l.tagName=="IMG")l.style.cssText+=";float:"+(n.style.cssFloat||n.style.styleFloat||"none")+";display:"+(n.style.display||"inline"),n=null;else if(!n){var c=f.collapsed;if(c){var h=e.document.createTextNode("match");f.insertNode(h).select()}e.__hasEnterExecCommand=!0;var p=e.options.removeFormatAttributes;e.options.removeFormatAttributes="",e.execCommand("removeformat"),e.options.removeFormatAttributes=p,e.__hasEnterExecCommand=!1,f=e.selection.getRange(),t.length&&a(f),h&&f.setStartBefore(h).collapse(!0),f.select(),h&&domUtils.remove(h)}e.undoManger&&e.undoManger.save(),e.removeListener("mouseup",i),r=0}var e=this,t=[],n,r=0;e.addListener("reset",function(){t=[],r=0}),e.commands.formatmatch={execCommand:function(s){if(r){r=0,t=[],e.removeListener("mouseup",i);return}var o=e.selection.getRange();n=o.getClosedNode();if(!n||n.tagName!="IMG"){o.collapse(!0).shrinkBoundary();var u=o.startContainer;t=domUtils.findParents(u,!0,function(e){return!domUtils.isBlockElm(e)&&e.nodeType==1});for(var a=0,f;f=t[a];a++)if(f.tagName=="A"){t.splice(a,1);break}}e.addListener("mouseup",i),r=1},queryCommandState:function(){return r},notNeedUndo:1}},UE.plugin.register("searchreplace",function(){function n(e,t,n){var r=t.searchStr;t.dir==-1&&(e=e.split("").reverse().join(""),r=r.split("").reverse().join(""),n=e.length-n);var i=new RegExp(r,"g"+(t.casesensitive?"":"i")),s;while(s=i.exec(e))if(s.index>=n)return t.dir==-1?e.length-s.index-t.searchStr.length:s.index;return-1}function r(e,r,i){var s,o,u=i.all||i.dir==1?"getNextDomNode":"getPreDomNode";domUtils.isBody(e)&&(e=e.firstChild);var a=1;while(e){s=e.nodeType==3?e.nodeValue:e[browser.ie?"innerText":"textContent"],o=n(s,i,r),a=0;if(o!=-1)return{node:e,index:o};e=domUtils[u](e);while(e&&t[e.nodeName.toLowerCase()])e=domUtils[u](e,!0);e&&(r=i.dir==-1?(e.nodeType==3?e.nodeValue:e[browser.ie?"innerText":"textContent"]).length:0)}}function i(e,t,n){var r=0,s=e.firstChild,o=0,u;while(s){if(s.nodeType==3){o=s.nodeValue.replace(/(^[\t\r\n]+)|([\t\r\n]+$)/,"").length,r+=o;if(r>=t)return{node:s,index:o-(r-t)}}else if(!dtd.$empty[s.tagName]){o=s[browser.ie?"innerText":"textContent"].replace(/(^[\t\r\n]+)|([\t\r\n]+$)/,"").length,r+=o;if(r>=t){u=i(s,o-(r-t),n);if(u)return u}}s=domUtils.getNextDomNode(s)}}function s(e,t){var n=e.selection.getRange(),s,u=t.searchStr,a=e.document.createElement("span");a.innerHTML="$$ueditor_searchreplace_key$$",n.shrinkBoundary(!0);if(!n.collapsed){n.select();var f=e.selection.getText();if((new RegExp("^"+t.searchStr+"$",t.casesensitive?"":"i")).test(f)){if(t.replaceStr!=undefined)return o(n,t.replaceStr),n.select(),!0;n.collapse(t.dir==-1)}}n.insertNode(a),n.enlargeToBlockElm(!0),s=n.startContainer;var l=s[browser.ie?"innerText":"textContent"].indexOf("$$ueditor_searchreplace_key$$");n.setStartBefore(a),domUtils.remove(a);var c=r(s,l,t);if(c){var h=i(c.node,c.index,u),p=i(c.node,c.index+u.length,u);return n.setStart(h.node,h.index).setEnd(p.node,p.index),t.replaceStr!==undefined&&o(n,t.replaceStr),n.select(),!0}n.setCursor()}function o(t,n){n=e.document.createTextNode(n),t.deleteContents().insertNode(n)}var e=this,t={table:1,tbody:1,tr:1,ol:1,ul:1};return{commands:{searchreplace:{execCommand:function(t,n){utils.extend(n,{all:!1,casesensitive:!1,dir:1},!0);var r=0;if(n.all){var i=e.selection.getRange(),o=e.body.firstChild;o&&o.nodeType==1?(i.setStart(o,0),i.shrinkBoundary(!0)):o.nodeType==3&&i.setStartBefore(o),i.collapse(!0).select(!0),n.replaceStr!==undefined&&e.fireEvent("saveScene");while(s(this,n))r++;r&&e.fireEvent("saveScene")}else n.replaceStr!==undefined&&e.fireEvent("saveScene"),s(this,n)&&r++,r&&e.fireEvent("saveScene");return r},notNeedUndo:1}}}}),UE.plugins.customstyle=function(){var e=this;e.setOpt({customstyle:[{tag:"h1",name:"tc",style:"font-size:32px;font-weight:bold;border-bottom:#ccc 2px solid;padding:0 4px 0 0;text-align:center;margin:0 0 20px 0;"},{tag:"h1",name:"tl",style:"font-size:32px;font-weight:bold;border-bottom:#ccc 2px solid;padding:0 4px 0 0;text-align:left;margin:0 0 10px 0;"},{tag:"span",name:"im",style:"font-size:16px;font-style:italic;font-weight:bold;line-height:18px;"},{tag:"span",name:"hi",style:"font-size:16px;font-style:italic;font-weight:bold;color:rgb(51, 153, 204);line-height:18px;"}]}),e.commands.customstyle={execCommand:function(e,t){var n=this,r=t.tag,i=domUtils.findParent(n.selection.getStart(),function(e){return e.getAttribute("label")},!0),s,o,u={};for(var a in t)t[a]!==undefined&&(u[a]=t[a]);delete u.tag;if(i&&i.getAttribute("label")==t.label){s=this.selection.getRange(),o=s.createBookmark();if(s.collapsed)if(dtd.$block[i.tagName]){var f=n.document.createElement("p");domUtils.moveChild(i,f),i.parentNode.insertBefore(f,i),domUtils.remove(i)}else domUtils.remove(i,!0);else{var l=domUtils.getCommonAncestor(o.start,o.end),c=domUtils.getElementsByTagName(l,r);(new RegExp(r,"i")).test(l.tagName)&&c.push(l);for(var h=0,p;p=c[h++];)if(p.getAttribute("label")==t.label){var d=domUtils.getPosition(p,o.start),v=domUtils.getPosition(p,o.end);if((d&domUtils.POSITION_FOLLOWING||d&domUtils.POSITION_CONTAINS)&&(v&domUtils.POSITION_PRECEDING||v&domUtils.POSITION_CONTAINS)&&dtd.$block[r]){var f=n.document.createElement("p");domUtils.moveChild(p,f),p.parentNode.insertBefore(f,p)}domUtils.remove(p,!0)}i=domUtils.findParent(l,function(e){return e.getAttribute("label")==t.label},!0),i&&domUtils.remove(i,!0)}s.moveToBookmark(o).select()}else if(dtd.$block[r]){this.execCommand("paragraph",r,u,"customstyle"),s=n.selection.getRange();if(!s.collapsed){s.collapse(),i=domUtils.findParent(n.selection.getStart(),function(e){return e.getAttribute("label")==t.label},!0);var m=n.document.createElement("p");domUtils.insertAfter(i,m),domUtils.fillNode(n.document,m),s.setStart(m,0).setCursor()}}else{s=n.selection.getRange();if(s.collapsed){i=n.document.createElement(r),domUtils.setAttributes(i,u),s.insertNode(i).setStart(i,0).setCursor();return}o=s.createBookmark(),s.applyInlineStyle(r,u).moveToBookmark(o).select()}},queryCommandValue:function(){var e=domUtils.filterNodeList(this.selection.getStartElementPath(),function(e){return e.getAttribute("label")});return e?e.getAttribute("label"):""}},e.addListener("keyup",function(t,n){var r=n.keyCode||n.which;if(r==32||r==13){var i=e.selection.getRange();if(i.collapsed){var s=domUtils.findParent(e.selection.getStart(),function(e){return e.getAttribute("label")},!0);if(s&&dtd.$block[s.tagName]&&domUtils.isEmptyNode(s)){var o=e.document.createElement("p");domUtils.insertAfter(s,o),domUtils.fillNode(e.document,o),domUtils.remove(s),i.setStart(o,0).setCursor()}}}})},UE.plugins.catchremoteimage=function(){var me=this,ajax=UE.ajax;if(me.options.catchRemoteImageEnable===!1)return;me.setOpt({catchRemoteImageEnable:!1}),me.addListener("afterpaste",function(){me.fireEvent("catchRemoteImage")}),me.addListener("catchRemoteImage",function(){function catchremoteimage(e,t){var n=utils.serializeParam(me.queryCommandValue("serverparam"))||"",r=utils.formatUrl(catcherActionUrl+(catcherActionUrl.indexOf("?")==-1?"?":"&")+n),i=utils.isCrossDomainUrl(r),s={method:"POST",dataType:i?"jsonp":"",timeout:6e4,onsuccess:t.success,onerror:t.error};s[catcherFieldName]=e,ajax.request(r,s)}var catcherLocalDomain=me.getOpt("catcherLocalDomain"),catcherActionUrl=me.getActionUrl(me.getOpt("catcherActionName")),catcherUrlPrefix=me.getOpt("catcherUrlPrefix"),catcherFieldName=me.getOpt("catcherFieldName"),remoteImages=[],imgs=domUtils.getElementsByTagName(me.document,"img"),test=function(e,t){if(e.indexOf(location.host)!=-1||/(^\.)|(^\/)/.test(e))return!0;if(t)for(var n=0,r;r=t[n++];)if(e.indexOf(r)!==-1)return!0;return!1};for(var i=0,ci;ci=imgs[i++];){if(ci.getAttribute("word_img"))continue;var src=ci.getAttribute("_src")||ci.src||"";/^(https?|ftp):/i.test(src)&&!test(src,catcherLocalDomain)&&remoteImages.push(src)}remoteImages.length&&catchremoteimage(remoteImages,{success:function(r){try{var info=r.state!==undefined?r:eval("("+r.responseText+")")}catch(e){return}var i,j,ci,cj,oldSrc,newSrc,list=info.list;for(i=0;ci=imgs[i++];){oldSrc=ci.getAttribute("_src")||ci.src||"";for(j=0;cj=list[j++];)if(oldSrc==cj.source&&cj.state=="SUCCESS"){newSrc=catcherUrlPrefix+cj.url,domUtils.setAttributes(ci,{src:newSrc,_src:newSrc});break}}me.fireEvent("catchremotesuccess")},error:function(){me.fireEvent("catchremoteerror")}})})},UE.plugin.register("snapscreen",function(){function getLocation(e){var t,n=document.createElement("a"),r=utils.serializeParam(me.queryCommandValue("serverparam"))||"";return n.href=e,browser.ie&&(n.href=n.href),t=n.search,r&&(t=t+(t.indexOf("?")==-1?"?":"&")+r,t=t.replace(/[&]+/ig,"&")),{port:n.port,hostname:n.hostname,path:n.pathname+t||+n.hash}}var me=this,snapplugin;return{commands:{snapscreen:{execCommand:function(cmd){function onSuccess(rs){try{rs=eval("("+rs+")");if(rs.state=="SUCCESS"){var opt=me.options;me.execCommand("insertimage",{src:opt.snapscreenUrlPrefix+rs.url,_src:opt.snapscreenUrlPrefix+rs.url,alt:rs.title||"",floatStyle:opt.snapscreenImgAlign})}else alert(rs.state)}catch(e){alert(lang.callBackErrorMsg)}}var url,local,res,lang=me.getLang("snapScreen_plugin");if(!snapplugin){var container=me.container,doc=me.container.ownerDocument||me.container.document;snapplugin=doc.createElement("object");try{snapplugin.type="application/x-pluginbaidusnap"}catch(e){return}snapplugin.style.cssText="position:absolute;left:-9999px;width:0;height:0;",snapplugin.setAttribute("width","0"),snapplugin.setAttribute("height","0"),container.appendChild(snapplugin)}url=me.getActionUrl(me.getOpt("snapscreenActionName")),local=getLocation(url),setTimeout(function(){try{res=snapplugin.saveSnapshot(local.hostname,local.path,local.port)}catch(e){me.ui._dialogs.snapscreenDialog.open();return}onSuccess(res)},50)},queryCommandState:function(){return navigator.userAgent.indexOf("Windows",0)!=-1?0:-1}}}}}),UE.commands.insertparagraph={execCommand:function(e,t){var n=this,r=n.selection.getRange(),i=r.startContainer,s;while(i){if(domUtils.isBody(i))break;s=i,i=i.parentNode}if(s){var o=n.document.createElement("p");t?s.parentNode.insertBefore(o,s):s.parentNode.insertBefore(o,s.nextSibling),domUtils.fillNode(n.document,o),r.setStart(o,0).setCursor(!1,!0)}}},UE.plugin.register("webapp",function(){function t(t,n){return n?'<iframe class="edui-faked-webapp" title="'+t.title+'" '+(t.align&&!t.cssfloat?'align="'+t.align+'"':"")+(t.cssfloat?'style="float:'+t.cssfloat+'"':"")+'width="'+t.width+'" height="'+t.height+'"  scrolling="no" frameborder="0" src="'+t.url+'" logo_url = "'+t.logo+'"></iframe>':'<img title="'+t.title+'" width="'+t.width+'" height="'+t.height+'"'+' src="'+e.options.UEDITOR_HOME_URL+'themes/default/images/spacer.gif" _logo_url="'+t.logo+'" style="background:url('+t.logo+') no-repeat center center; border:1px solid gray;" class="edui-faked-webapp" _url="'+t.url+'" '+(t.align&&!t.cssfloat?'align="'+t.align+'"':"")+(t.cssfloat?'style="float:'+t.cssfloat+'"':"")+"/>"}var e=this;return{outputRule:function(e){utils.each(e.getNodesByTagName("img"),function(e){var n;if(e.getAttr("class")=="edui-faked-webapp"){n=t({title:e.getAttr("title"),width:e.getAttr("width"),height:e.getAttr("height"),align:e.getAttr("align"),cssfloat:e.getStyle("float"),url:e.getAttr("_url"),logo:e.getAttr("_logo_url")},!0);var r=UE.uNode.createElement(n);e.parentNode.replaceChild(r,e)}})},inputRule:function(e){utils.each(e.getNodesByTagName("iframe"),function(e){if(e.getAttr("class")=="edui-faked-webapp"){var n=UE.uNode.createElement(t({title:e.getAttr("title"),width:e.getAttr("width"),height:e.getAttr("height"),align:e.getAttr("align"),cssfloat:e.getStyle("float"),url:e.getAttr("src"),logo:e.getAttr("logo_url")}));e.parentNode.replaceChild(n,e)}})},commands:{webapp:{execCommand:function(e,n){var r=this,i=t(utils.extend(n,{align:"none"}),!1);r.execCommand("inserthtml",i)},queryCommandState:function(){var e=this,t=e.selection.getRange().getClosedNode(),n=t&&t.className=="edui-faked-webapp";return n?1:0}}}}}),UE.plugins.template=function(){UE.commands.template={execCommand:function(e,t){t.html&&this.execCommand("inserthtml",t.html)}},this.addListener("click",function(e,t){var n=t.target||t.srcElement,r=this.selection.getRange(),i=domUtils.findParent(n,function(e){if(e.className&&domUtils.hasClass(e,"ue_t"))return e},!0);i&&r.selectNode(i).shrinkBoundary().select()}),this.addListener("keydown",function(e,t){var n=this.selection.getRange();if(!n.collapsed&&!t.ctrlKey&&!t.metaKey&&!t.shiftKey&&!t.altKey){var r=domUtils.findParent(n.startContainer,function(e){if(e.className&&domUtils.hasClass(e,"ue_t"))return e},!0);r&&domUtils.removeClasses(r,["ue_t"])}})},UE.plugin.register("music",function(){function t(t,n,r,i,s,o){return o?'<embed type="application/x-shockwave-flash" class="edui-faked-music" pluginspage="http://www.macromedia.com/go/getflashplayer" src="'+t+'" width="'+n+'" height="'+r+'" '+(i&&!s?'align="'+i+'"':"")+(s?'style="float:'+s+'"':"")+' wmode="transparent" play="true" loop="false" menu="false" allowscriptaccess="never" allowfullscreen="true" >':"<img "+(i&&!s?'align="'+i+'"':"")+(s?'style="float:'+s+'"':"")+' width="'+n+'" height="'+r+'" _url="'+t+'" class="edui-faked-music"'+' src="'+e.options.langPath+e.options.lang+'/images/music.png" />'}var e=this;return{outputRule:function(e){utils.each(e.getNodesByTagName("img"),function(e){var n;if(e.getAttr("class")=="edui-faked-music"){var r=e.getStyle("float"),i=e.getAttr("align");n=t(e.getAttr("_url"),e.getAttr("width"),e.getAttr("height"),i,r,!0);var s=UE.uNode.createElement(n);e.parentNode.replaceChild(s,e)}})},inputRule:function(e){utils.each(e.getNodesByTagName("embed"),function(e){if(e.getAttr("class")=="edui-faked-music"){var n=e.getStyle("float"),r=e.getAttr("align");html=t(e.getAttr("src"),e.getAttr("width"),e.getAttr("height"),r,n,!1);var i=UE.uNode.createElement(html);e.parentNode.replaceChild(i,e)}})},commands:{music:{execCommand:function(e,n){var r=this,i=t(n.url,n.width||400,n.height||95,"none",!1);r.execCommand("inserthtml",i)},queryCommandState:function(){var e=this,t=e.selection.getRange().getClosedNode(),n=t&&t.className=="edui-faked-music";return n?1:0}}}}}),UE.plugin.register("autoupload",function(){function e(e,t){var n=t,r,i,s,o,u,a,f,l,c=/image\/\w+/i.test(e.type)?"image":"file",h="loading_"+(+(new Date)).toString(36);r=n.getOpt(c+"FieldName"),i=n.getOpt(c+"UrlPrefix"),s=n.getOpt(c+"MaxSize"),o=n.getOpt(c+"AllowFiles"),u=n.getActionUrl(n.getOpt(c+"ActionName")),f=function(e){var t=n.document.getElementById(h);t&&domUtils.remove(t),n.fireEvent("showmessage",{id:h,content:e,type:"error",timeout:4e3})},c=="image"?(a='<img class="loadingclass" id="'+h+'" src="'+n.options.themePath+n.options.theme+'/images/spacer.gif" title="'+(n.getLang("autoupload.loading")||"")+'" >',l=function(e){var t=i+e.url,r=n.document.getElementById(h);r&&(r.setAttribute("src",t),r.setAttribute("_src",t),r.setAttribute("title",e.title||""),r.setAttribute("alt",e.original||""),r.removeAttribute("id"),domUtils.removeClasses(r,"loadingclass"))}):(a='<p><img class="loadingclass" id="'+h+'" src="'+n.options.themePath+n.options.theme+'/images/spacer.gif" title="'+(n.getLang("autoupload.loading")||"")+'" >'+"</p>",l=function(e){var t=i+e.url,r=n.document.getElementById(h),s=n.selection.getRange(),o=s.createBookmark();s.selectNode(r).select(),n.execCommand("insertfile",{url:t}),s.moveToBookmark(o).select()}),n.execCommand("inserthtml",a);if(!n.getOpt(c+"ActionName")){f(n.getLang("autoupload.errorLoadConfig"));return}if(e.size>s){f(n.getLang("autoupload.exceedSizeError"));return}var p=e.name?e.name.substr(e.name.lastIndexOf(".")):"";if(p&&c!="image"||o&&(o.join("")+".").indexOf(p.toLowerCase()+".")==-1){f(n.getLang("autoupload.exceedTypeError"));return}var d=new XMLHttpRequest,v=new FormData,m=utils.serializeParam(n.queryCommandValue("serverparam"))||"",g=utils.formatUrl(u+(u.indexOf("?")==-1?"?":"&")+m);v.append(r,e,e.name||"blob."+e.type.substr("image/".length)),v.append("type","ajax"),d.open("post",g,!0),d.setRequestHeader("X-Requested-With","XMLHttpRequest"),d.addEventListener("load",function(e){try{var t=(new Function("return "+utils.trim(e.target.response)))();t.state=="SUCCESS"&&t.url?l(t):f(t.state)}catch(r){f(n.getLang("autoupload.loadError"))}}),d.send(v)}function t(e){return e.clipboardData&&e.clipboardData.items&&e.clipboardData.items.length==1&&/^image\//.test(e.clipboardData.items[0].type)?e.clipboardData.items:null}function n(e){return e.dataTransfer&&e.dataTransfer.files?e.dataTransfer.files:null}return{outputRule:function(e){utils.each(e.getNodesByTagName("img"),function(e){/\b(loaderrorclass)|(bloaderrorclass)\b/.test(e.getAttr("class"))&&e.parentNode.removeChild(e)}),utils.each(e.getNodesByTagName("p"),function(e){/\bloadpara\b/.test(e.getAttr("class"))&&e.parentNode.removeChild(e)})},bindEvents:{ready:function(r){var i=this;window.FormData&&window.FileReader&&(domUtils.on(i.body,"paste drop",function(r){var s=!1,o;o=r.type=="paste"?t(r):n(r);if(o){var u=o.length,a;while(u--)a=o[u],a.getAsFile&&(a=a.getAsFile()),a&&a.size>0&&(e(a,i),s=!0);s&&r.preventDefault()}}),domUtils.on(i.body,"dragover",function(e){e.dataTransfer.types[0]=="Files"&&e.preventDefault()}),utils.cssRule("loading",".loadingclass{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loading.gif') no-repeat center center transparent;border:1px solid #cccccc;margin-left:1px;height: 22px;width: 22px;}\n"+".loaderrorclass{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loaderror.png') no-repeat center center transparent;border:1px solid #cccccc;margin-right:1px;height: 22px;width: 22px;"+"}",this.document))}}}}),UE.plugin.register("autosave",function(){function i(i){var s;if(new Date-t<n)return;if(!i.hasContents()){r&&e.removePreferences(r);return}t=new Date,i._saveFlag=null,s=e.body.innerHTML;if(i.fireEvent("beforeautosave",{content:s})===!1)return;e.setPreferences(r,s),i.fireEvent("afterautosave",{content:s})}var e=this,t=new Date,n=20,r=null;return{defaultOptions:{saveInterval:500},bindEvents:{ready:function(){var t="-drafts-data",n=null;e.key?n=e.key+t:n=(e.container.parentNode.id||"ue-common")+t,r=(location.protocol+location.host+location.pathname).replace(/[.:\/]/g,"_")+n},contentchange:function(){if(!r)return;e._saveFlag&&window.clearTimeout(e._saveFlag),e.options.saveInterval>0?e._saveFlag=window.setTimeout(function(){i(e)},e.options.saveInterval):i(e)}},commands:{clearlocaldata:{execCommand:function(t,n){r&&e.getPreferences(r)&&e.removePreferences(r)},notNeedUndo:!0,ignoreContentChange:!0},getlocaldata:{execCommand:function(t,n){return r?e.getPreferences(r)||"":""},notNeedUndo:!0,ignoreContentChange:!0},drafts:{execCommand:function(t,n){r&&(e.body.innerHTML=e.getPreferences(r)||"<p>"+domUtils.fillHtml+"</p>",e.focus(!0))},queryCommandState:function(){return r?e.getPreferences(r)===null?-1:0:-1},notNeedUndo:!0,ignoreContentChange:!0}}}}),UE.plugin.register("charts",function(){function t(e){var t=null,n=0;if(e.rows.length<2)return!1;if(e.rows[0].cells.length<2)return!1;t=e.rows[0].cells,n=t.length;for(var r=0,i;i=t[r];r++)if(i.tagName.toLowerCase()!=="th")return!1;for(var r=1,s;s=e.rows[r];r++){if(s.cells.length!=n)return!1;if(s.cells[0].tagName.toLowerCase()!=="th")return!1;for(var o=1,i;i=s.cells[o];o++){var u=utils.trim(i.innerText||i.textContent||"");u=u.replace(new RegExp(UE.dom.domUtils.fillChar,"g"),"").replace(/^\s+|\s+$/g,"");if(!/^\d*\.?\d+$/.test(u))return!1}}return!0}var e=this;return{bindEvents:{chartserror:function(){}},commands:{charts:{execCommand:function(n,r){var i=domUtils.findParentByTagName(this.selection.getRange().startContainer,"table",!0),s=[],o={};if(!i)return!1;if(!t(i))return e.fireEvent("chartserror"),!1;o.title=r.title||"",o.subTitle=r.subTitle||"",o.xTitle=r.xTitle||"",o.yTitle=r.yTitle||"",o.suffix=r.suffix||"",o.tip=r.tip||"",o.dataFormat=r.tableDataFormat||"",o.chartType=r.chartType||0;for(var u in o){if(!o.hasOwnProperty(u))continue;s.push(u+":"+o[u])}i.setAttribute("data-chart",s.join(";")),domUtils.addClass(i,"edui-charts-table")},queryCommandState:function(e,n){var r=domUtils.findParentByTagName(this.selection.getRange().startContainer,"table",!0);return r&&t(r)?0:-1}}},inputRule:function(e){utils.each(e.getNodesByTagName("table"),function(e){e.getAttr("data-chart")!==undefined&&e.setAttr("style")})},outputRule:function(e){utils.each(e.getNodesByTagName("table"),function(e){e.getAttr("data-chart")!==undefined&&e.setAttr("style","display: none;")})}}}),UE.plugin.register("section",function(){function e(e){this.tag="",this.level=-1,this.dom=null,this.nextSection=null,this.previousSection=null,this.parentSection=null,this.startAddress=[],this.endAddress=[],this.children=[]}function t(t){var n=new e;return utils.extend(n,t)}function n(e,t){var n=t;for(var r=0;r<e.length;r++){if(!n.childNodes)return null;n=n.childNodes[e[r]]}return n}var r=this;return{bindMultiEvents:{type:"aftersetcontent afterscencerestore",handler:function(){r.fireEvent("updateSections")}},bindEvents:{ready:function(){r.fireEvent("updateSections"),domUtils.on(r.body,"drop paste",function(){r.fireEvent("updateSections")})},afterexeccommand:function(e,t){t=="paragraph"&&r.fireEvent("updateSections")},keyup:function(e,t){var n=this,r=n.selection.getRange();if(r.collapsed!=1)n.fireEvent("updateSections");else{var i=t.keyCode||t.which;(i==13||i==8||i==46)&&n.fireEvent("updateSections")}}},commands:{getsections:{execCommand:function(e,n){function s(e){for(var t=0;t<r.length;t++)if(r[t](e))return t;return-1}function f(e,n){var r,i=null,u,l,c=e.childNodes;for(var h=0,p=c.length;h<p;h++){l=c[h],r=s(l);if(r>=0){var d=o.selection.getRange().selectNode(l).createAddress(!0).startAddress,v=t({tag:l.tagName,title:l.innerText||l.textContent||"",level:r,dom:l,startAddress:utils.clone(d,[]),endAddress:utils.clone(d,[]),children:[]});a.nextSection=v,v.previousSection=a,u=a;while(r<=u.level)u=u.parentSection;v.parentSection=u,u.children.push(v),i=a=v}else l.nodeType===1&&f(l,n),i&&i.endAddress[i.endAddress.length-1]++}}var r=n||["h1","h2","h3","h4","h5","h6"];for(var i=0;i<r.length;i++)typeof r[i]=="string"?r[i]=function(e){return function(t){return t.tagName==e.toUpperCase()}}(r[i]):typeof r[i]!="function"&&(r[i]=function(e){return null});var o=this,u=t({level:-1,title:"root"}),a=u;return f(o.body,u),u},notNeedUndo:!0},movesection:{execCommand:function(e,t,r,i){function h(e,t,n){var r=!1,i=!1;for(var s=0;s<e.length;s++){if(s>=n.length)break;if(n[s]>e[s]){r=!0;break}if(n[s]<e[s])break}for(var s=0;s<t.length;s++){if(s>=n.length)break;if(n[s]<e[s]){i=!0;break}if(n[s]>e[s])break}return r&&i}var s=this,o,u;if(!t||!r||r.level==-1)return;o=i?r.endAddress:r.startAddress,u=n(o,s.body);if(!o||!u||h(t.startAddress,t.endAddress,o))return;var a=n(t.startAddress,s.body),f=n(t.endAddress,s.body),l,c;if(i){l=f;while(l&&!(domUtils.getPosition(a,l)&domUtils.POSITION_FOLLOWING)){c=l.previousSibling,domUtils.insertAfter(u,l);if(l==a)break;l=c}}else{l=a;while(l&&!(domUtils.getPosition(l,f)&domUtils.POSITION_FOLLOWING)){c=l.nextSibling,u.parentNode.insertBefore(l,u);if(l==f)break;l=c}}s.fireEvent("updateSections")}},deletesection:{execCommand:function(e,t,n){function i(e){var t=r.body;for(var n=0;n<e.length;n++){if(!t.childNodes)return null;t=t.childNodes[e[n]]}return t}var r=this;if(!t)return;var s=i(t.startAddress),o=i(t.endAddress),u=s,a;if(!n)while(u&&domUtils.inDoc(o,r.document)&&!(domUtils.getPosition(u,o)&domUtils.POSITION_FOLLOWING))a=u.nextSibling,domUtils.remove(u),u=a;else domUtils.remove(u);r.fireEvent("updateSections")}},selectsection:{execCommand:function(e,t){if(!t&&!t.dom)return!1;var n=this,r=n.selection.getRange(),i={startAddress:utils.clone(t.startAddress,[]),endAddress:utils.clone(t.endAddress,[])};return i.endAddress[i.endAddress.length-1]++,r.moveToAddress(i).select().scrollToView(),!0},notNeedUndo:!0},scrolltosection:{execCommand:function(e,t){if(!t&&!t.dom)return!1;var n=this,r=n.selection.getRange(),i={startAddress:t.startAddress,endAddress:t.endAddress};return i.endAddress[i.endAddress.length-1]++,r.moveToAddress(i).scrollToView(),!0},notNeedUndo:!0}}}}),UE.plugin.register("simpleupload",function(){function r(){var r=n.offsetWidth||20,i=n.offsetHeight||20,s=document.createElement("iframe"),o="display:block;width:"+r+"px;height:"+i+"px;overflow:hidden;border:0;margin:0;padding:0;position:absolute;top:0;left:0;filter:alpha(opacity=0);-moz-opacity:0;-khtml-opacity: 0;opacity: 0;cursor:pointer;";domUtils.on(s,"load",function(){var n=(+(new Date)).toString(36),u,a,f;a=s.contentDocument||s.contentWindow.document,f=a.body,u=a.createElement("div"),u.innerHTML='<form id="edui_form_'+n+'" target="edui_iframe_'+n+'" method="POST" enctype="multipart/form-data" action="'+e.getOpt("serverUrl")+'" '+'style="'+o+'">'+'<input id="edui_input_'+n+'" type="file" accept="image/*" name="'+e.options.imageFieldName+'" '+'style="'+o+'">'+"</form>"+'<iframe id="edui_iframe_'+n+'" name="edui_iframe_'+n+'" style="display:none;width:0;height:0;border:0;margin:0;padding:0;position:absolute;"></iframe>',u.className="edui-"+e.options.theme,u.id=e.ui.id+"_iframeupload",f.style.cssText=o,f.style.width=r+"px",f.style.height=i+"px",f.appendChild(u),f.parentNode&&(f.parentNode.style.width=r+"px",f.parentNode.style.height=r+"px");var l=a.getElementById("edui_form_"+n),c=a.getElementById("edui_input_"+n),p=a.getElementById("edui_iframe_"+n);domUtils.on(c,"change",function(){function s(){try{var n,r,i,u=(p.contentDocument||p.contentWindow.document).body,a=u.innerText||u.textContent||"";r=(new Function("return "+a))(),n=e.options.imageUrlPrefix+r.url,r.state=="SUCCESS"&&r.url?(i=e.document.getElementById(t),i.setAttribute("src",n),i.setAttribute("_src",n),i.setAttribute("title",r.title||""),i.setAttribute("alt",r.original||""),i.removeAttribute("id"),domUtils.removeClasses(i,"loadingclass")):o&&o(r.state)}catch(f){o&&o(e.getLang("simpleupload.loadError"))}l.reset(),domUtils.un(p,"load",s)}function o(n){if(t){var r=e.document.getElementById(t);r&&domUtils.remove(r),e.fireEvent("showmessage",{id:t,content:n,type:"error",timeout:4e3})}}if(!c.value)return;var t="loading_"+(+(new Date)).toString(36),n=utils.serializeParam(e.queryCommandValue("serverparam"))||"",r=e.getActionUrl(e.getOpt("imageActionName")),i=e.getOpt("imageAllowFiles");e.focus(),e.execCommand("inserthtml",'<img class="loadingclass" id="'+t+'" src="'+e.options.themePath+e.options.theme+'/images/spacer.gif" title="'+(e.getLang("simpleupload.loading")||"")+'" >');if(!e.getOpt("imageActionName")){errorHandler(e.getLang("autoupload.errorLoadConfig"));return}var u=c.value,a=u?u.substr(u.lastIndexOf(".")):"";if(!a||i&&(i.join("")+".").indexOf(a.toLowerCase()+".")==-1){o(e.getLang("simpleupload.exceedTypeError"));return}domUtils.on(p,"load",s),l.action=utils.formatUrl(r+(r.indexOf("?")==-1?"?":"&")+n),l.submit()});var d;e.addListener("selectionchange",function(){clearTimeout(d),d=setTimeout(function(){var t=e.queryCommandState("simpleupload");t==-1?c.disabled="disabled":c.disabled=!1},400)}),t=!0}),s.style.cssText=o,n.appendChild(s)}var e=this,t=!1,n;return{bindEvents:{ready:function(){utils.cssRule("loading",".loadingclass{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loading.gif') no-repeat center center transparent;border:1px solid #cccccc;margin-right:1px;height: 22px;width: 22px;}\n"+".loaderrorclass{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loaderror.png') no-repeat center center transparent;border:1px solid #cccccc;margin-right:1px;height: 22px;width: 22px;"+"}",this.document)},simpleuploadbtnready:function(t,i){n=i,e.afterConfigReady(r)}},outputRule:function(e){utils.each(e.getNodesByTagName("img"),function(e){/\b(loaderrorclass)|(bloaderrorclass)\b/.test(e.getAttr("class"))&&e.parentNode.removeChild(e)})},commands:{simpleupload:{queryCommandState:function(){return t?0:-1}}}}}),UE.plugin.register("serverparam",function(){var e=this,t={};return{commands:{serverparam:{execCommand:function(e,n,r){n===undefined||n===null?t={}:utils.isString(n)?r===undefined||r===null?delete t[n]:t[n]=r:utils.isObject(n)?utils.extend(t,n,!0):utils.isFunction(n)&&utils.extend(t,n(),!0)},queryCommandValue:function(){return t||{}}}}}}),UE.plugin.register("insertfile",function(){function t(e){var t=e.substr(e.lastIndexOf(".")+1).toLowerCase(),n={rar:"icon_rar.gif",zip:"icon_rar.gif",tar:"icon_rar.gif",gz:"icon_rar.gif",bz2:"icon_rar.gif",doc:"icon_doc.gif",docx:"icon_doc.gif",pdf:"icon_pdf.gif",mp3:"icon_mp3.gif",xls:"icon_xls.gif",chm:"icon_chm.gif",ppt:"icon_ppt.gif",pptx:"icon_ppt.gif",avi:"icon_mv.gif",rmvb:"icon_mv.gif",wmv:"icon_mv.gif",flv:"icon_mv.gif",swf:"icon_mv.gif",rm:"icon_mv.gif",exe:"icon_exe.gif",psd:"icon_psd.gif",txt:"icon_txt.gif",jpg:"icon_jpg.gif",png:"icon_jpg.gif",jpeg:"icon_jpg.gif",gif:"icon_jpg.gif",ico:"icon_jpg.gif",bmp:"icon_jpg.gif"};return n[t]?n[t]:n.txt}var e=this;return{commands:{insertfile:{execCommand:function(n,r){r=utils.isArray(r)?r:[r];var i,s,o,u,a="",f=e.getOpt("UEDITOR_HOME_URL"),l=f+(f.substr(f.length-1)=="/"?"":"/")+"dialogs/attachment/fileTypeImages/";for(i=0;i<r.length;i++)s=r[i],o=l+t(s.url),u=s.title||s.url.substr(s.url.lastIndexOf("/")+1),a+='<p style="line-height: 16px;"><img style="vertical-align: middle; margin-right: 2px;" src="'+o+'" _src="'+o+'" />'+'<a style="font-size:12px; color:#0066cc;" href="'+s.url+'" title="'+u+'">'+u+"</a>"+"</p>";e.execCommand("insertHtml",a)}}}}});var baidu=baidu||{};baidu.editor=baidu.editor||{},UE.ui=baidu.editor.ui={},function(){function u(){var e=document.getElementById("edui_fixedlayer");o.setViewportOffset(e,{left:0,top:0})}function a(e){t.on(window,"scroll",u),t.on(window,"resize",baidu.editor.utils.defer(u,0,!0))}var e=baidu.editor.browser,t=baidu.editor.dom.domUtils,n="$EDITORUI",r=window[n]={},i="ID"+n,s=0,o=baidu.editor.ui.uiUtils={uid:function(e){return e?e[i]||(e[i]=++s):++s},hook:function(e,t){var n;return e&&e._callbacks?n=e:(n=function(){var t;e&&(t=e.apply(this,arguments));var r=n._callbacks,i=r.length;while(i--){var s=r[i].apply(this,arguments);t===undefined&&(t=s)}return t},n._callbacks=[]),n._callbacks.push(t),n},createElementByHtml:function(e){var t=document.createElement("div");return t.innerHTML=e,t=t.firstChild,t.parentNode.removeChild(t),t},getViewportElement:function(){return e.ie&&e.quirks?document.body:document.documentElement},getClientRect:function(e){var n;try{n=e.getBoundingClientRect()}catch(r){n={left:0,top:0,height:0,width:0}}var i={left:Math.round(n.left),top:Math.round(n.top),height:Math.round(n.bottom-n.top),width:Math.round(n.right-n.left)},s;while((s=e.ownerDocument)!==document&&(e=t.getWindow(s).frameElement))n=e.getBoundingClientRect(),i.left+=n.left,i.top+=n.top;return i.bottom=i.top+i.height,i.right=i.left+i.width,i},getViewportRect:function(){var e=o.getViewportElement(),t=(window.innerWidth||e.clientWidth)|0,n=(window.innerHeight||e.clientHeight)|0;return{left:0,top:0,height:n,width:t,bottom:n,right:t}},setViewportOffset:function(e,n){var r,i=o.getFixedLayer();e.parentNode===i?(e.style.left=n.left+"px",e.style.top=n.top+"px"):t.setViewportOffset(e,n)},getEventOffset:function(e){var t=e.target||e.srcElement,n=o.getClientRect(t),r=o.getViewportOffsetByEvent(e);return{left:r.left-n.left,top:r.top-n.top}},getViewportOffsetByEvent:function(e){var n=e.target||e.srcElement,r=t.getWindow(n).frameElement,i={left:e.clientX,top:e.clientY};if(r&&n.ownerDocument!==document){var s=o.getClientRect(r);i.left+=s.left,i.top+=s.top}return i},setGlobal:function(e,t){return r[e]=t,n+'["'+e+'"]'},unsetGlobal:function(e){delete r[e]},copyAttributes:function(n,r){var i=r.attributes,s=i.length;while(s--){var o=i[s];o.nodeName!="style"&&o.nodeName!="class"&&(!e.ie||o.specified)&&n.setAttribute(o.nodeName,o.nodeValue)}r.className&&t.addClass(n,r.className),r.style.cssText&&(n.style.cssText+=";"+r.style.cssText)},removeStyle:function(e,t){if(e.style.removeProperty)e.style.removeProperty(t);else{if(!e.style.removeAttribute)throw"";e.style.removeAttribute(t)}},contains:function(e,t){return e&&t&&(e===t?!1:e.contains?e.contains(t):e.compareDocumentPosition(t)&16)},startDrag:function(e,t,n){function s(e){var n=e.clientX-r,s=e.clientY-i;t.ondragmove(n,s,e),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}var n=n||document,r=e.clientX,i=e.clientY;if(n.addEventListener){function o(e){n.removeEventListener("mousemove",s,!0),n.removeEventListener("mouseup",o,!0),window.removeEventListener("mouseup",o,!0),t.ondragstop()}n.addEventListener("mousemove",s,!0),n.addEventListener("mouseup",o,!0),window.addEventListener("mouseup",o,!0),e.preventDefault()}else{var u=e.srcElement;u.setCapture();function a(){u.releaseCapture(),u.detachEvent("onmousemove",s),u.detachEvent("onmouseup",a),u.detachEvent("onlosecaptrue",a),t.ondragstop()}u.attachEvent("onmousemove",s),u.attachEvent("onmouseup",a),u.attachEvent("onlosecaptrue",a),e.returnValue=!1}t.ondragstart()},getFixedLayer:function(){var t=document.getElementById("edui_fixedlayer");return t==null&&(t=document.createElement("div"),t.id="edui_fixedlayer",document.body.appendChild(t),e.ie&&e.version<=8?(t.style.position="absolute",a(),setTimeout(u)):t.style.position="fixed",t.style.left="0",t.style.top="0",t.style.width="0",t.style.height="0"),t},makeUnselectable:function(t){if(e.opera||e.ie&&e.version<9){t.unselectable="on";if(t.hasChildNodes())for(var n=0;n<t.childNodes.length;n++)t.childNodes[n].nodeType==1&&o.makeUnselectable(t.childNodes[n])}else t.style.MozUserSelect!==undefined?t.style.MozUserSelect="none":t.style.WebkitUserSelect!==undefined?t.style.WebkitUserSelect="none":t.style.KhtmlUserSelect!==undefined&&(t.style.KhtmlUserSelect="none")}}}(),function(){var e=baidu.editor.utils,t=baidu.editor.ui.uiUtils,n=baidu.editor.EventBase,r=baidu.editor.ui.UIBase=function(){};r.prototype={className:"",uiName:"",initOptions:function(e){var n=this;for(var r in e)n[r]=e[r];this.id=this.id||"edui"+t.uid()},initUIBase:function(){this._globalKey=e.unhtml(t.setGlobal(this.id,this))},render:function(e){var n=this.renderHtml(),r=t.createElementByHtml(n),i=domUtils.getElementsByTagName(r,"*"),s="edui-"+(this.theme||this.editor.options.theme),o=document.getElementById("edui_fixedlayer");for(var u=0,a;a=i[u++];)domUtils.addClass(a,s);domUtils.addClass(r,s),o&&(o.className="",domUtils.addClass(o,s));var f=this.getDom();f!=null?(f.parentNode.replaceChild(r,f),t.copyAttributes(r,f)):(typeof e=="string"&&(e=document.getElementById(e)),e=e||t.getFixedLayer(),domUtils.addClass(e,s),e.appendChild(r)),this.postRender()},getDom:function(e){return e?document.getElementById(this.id+"_"+e):document.getElementById(this.id)},postRender:function(){this.fireEvent("postrender")},getHtmlTpl:function(){return""},formatHtml:function(e){var t="edui-"+this.uiName;return e.replace(/##/g,this.id).replace(/%%-/g,this.uiName?t+"-":"").replace(/%%/g,(this.uiName?t:"")+" "+this.className).replace(/\$\$/g,this._globalKey)},renderHtml:function(){return this.formatHtml(this.getHtmlTpl())},dispose:function(){var e=this.getDom();e&&baidu.editor.dom.domUtils.remove(e),t.unsetGlobal(this.id)}},e.inherits(r,n)}(),function(){var e=baidu.editor.utils,t=baidu.editor.ui.UIBase,n=baidu.editor.ui.Separator=function(e){this.initOptions(e),this.initSeparator()};n.prototype={uiName:"separator",initSeparator:function(){this.initUIBase()},getHtmlTpl:function(){return'<div id="##" class="edui-box %%"></div>'}},e.inherits(n,t)}(),function(){var e=baidu.editor.utils,t=baidu.editor.dom.domUtils,n=baidu.editor.ui.UIBase,r=baidu.editor.ui.uiUtils,i=baidu.editor.ui.Mask=function(e){this.initOptions(e),this.initUIBase()};i.prototype={getHtmlTpl:function(){return'<div id="##" class="edui-mask %%" onclick="return $$._onClick(event, this);" onmousedown="return $$._onMouseDown(event, this);"></div>'},postRender:function(){var e=this;t.on(window,"resize",function(){setTimeout(function(){e.isHidden()||e._fill()})})},show:function(e){this._fill(),this.getDom().style.display="",this.getDom().style.zIndex=e},hide:function(){this.getDom().style.display="none",this.getDom().style.zIndex=""},isHidden:function(){return this.getDom().style.display=="none"},_onMouseDown:function(){return!1},_onClick:function(e,t){this.fireEvent("click",e,t)},_fill:function(){var e=this.getDom(),t=r.getViewportRect();e.style.width=t.width+"px",e.style.height=t.height+"px"}},e.inherits(i,n)}(),function(){function o(e,t){for(var n=0;n<s.length;n++){var r=s[n];if(!r.isHidden()&&r.queryAutoHide(t)!==!1){if(e&&/scroll/ig.test(e.type)&&r.className=="edui-wordpastepop")return;r.hide()}}s.length&&r.editor.fireEvent("afterhidepop")}var e=baidu.editor.utils,t=baidu.editor.ui.uiUtils,n=baidu.editor.dom.domUtils,r=baidu.editor.ui.UIBase,i=baidu.editor.ui.Popup=function(e){this.initOptions(e),this.initPopup()},s=[];i.postHide=o;var u=["edui-anchor-topleft","edui-anchor-topright","edui-anchor-bottomleft","edui-anchor-bottomright"];i.prototype={SHADOW_RADIUS:5,content:null,_hidden:!1,autoRender:!0,canSideLeft:!0,canSideUp:!0,initPopup:function(){this.initUIBase(),s.push(this)},getHtmlTpl:function(){return'<div id="##" class="edui-popup %%" onmousedown="return false;"> <div id="##_body" class="edui-popup-body"> <iframe style="position:absolute;z-index:-1;left:0;top:0;background-color: transparent;" frameborder="0" width="100%" height="100%" src="about:blank"></iframe> <div class="edui-shadow"></div> <div id="##_content" class="edui-popup-content">'+this.getContentHtmlTpl()+"  </div>"+" </div>"+"</div>"},getContentHtmlTpl:function(){return this.content?typeof this.content=="string"?this.content:this.content.renderHtml():""},_UIBase_postRender:r.prototype.postRender,postRender:function(){this.content instanceof r&&this.content.postRender();if(this.captureWheel&&!this.captured){this.captured=!0;var e=(document.documentElement.clientHeight||document.body.clientHeight)-80,i=this.getDom().offsetHeight,s=t.getClientRect(this.combox.getDom()).top,o=this.getDom("content"),u=this.getDom("body").getElementsByTagName("iframe"),a=this;u.length&&(u=u[0]);while(s+i>e)i-=30;o.style.height=i+"px",u&&(u.style.height=i+"px"),window.XMLHttpRequest?n.on(o,"onmousewheel"in document.body?"mousewheel":"DOMMouseScroll",function(e){e.preventDefault?e.preventDefault():e.returnValue=!1,e.wheelDelta?o.scrollTop-=e.wheelDelta/120*60:o.scrollTop-=e.detail/-3*60}):n.on(this.getDom(),"mousewheel",function(e){e.returnValue=!1,a.getDom("content").scrollTop-=e.wheelDelta/120*60})}this.fireEvent("postRenderAfter"),this.hide(!0),this._UIBase_postRender()},_doAutoRender:function(){!this.getDom()&&this.autoRender&&this.render()},mesureSize:function(){var e=this.getDom("content");return t.getClientRect(e)},fitSize:function(){if(this.captureWheel&&this.sized)return this.__size;this.sized=!0;var e=this.getDom("body");e.style.width="",e.style.height="";var t=this.mesureSize();if(this.captureWheel){e.style.width=-(-20-t.width)+"px";var n=parseInt(this.getDom("content").style.height,10);!window.isNaN(n)&&(t.height=n)}else e.style.width=t.width+"px";return e.style.height=t.height+"px",this.__size=t,this.captureWheel&&(this.getDom("content").style.overflow="auto"),t},showAnchor:function(e,n){this.showAnchorRect(t.getClientRect(e),n)},showAnchorRect:function(e,r,i){this._doAutoRender();var s=t.getViewportRect();this.getDom().style.visibility="hidden",this._show();var o=this.fitSize(),a,f,l,c;r?(a=this.canSideLeft&&e.right+o.width>s.right&&e.left>o.width,f=this.canSideUp&&e.top+o.height>s.bottom&&e.bottom>o.height,l=a?e.left-o.width:e.right,c=f?e.bottom-o.height:e.top):(a=this.canSideLeft&&e.right+o.width>s.right&&e.left>o.width,f=this.canSideUp&&e.top+o.height>s.bottom&&e.bottom>o.height,l=a?e.right-o.width:e.left,c=f?e.top-o.height:e.bottom);var h=this.getDom();t.setViewportOffset(h,{left:l,top:c}),n.removeClasses(h,u),h.className+=" "+u[(f?1:0)*2+(a?1:0)],this.editor&&(h.style.zIndex=this.editor.container.style.zIndex*1+10,baidu.editor.ui.uiUtils.getFixedLayer().style.zIndex=h.style.zIndex-1),this.getDom().style.visibility="visible"},showAt:function(e){var t=e.left,n=e.top,r={left:t,top:n,right:t,bottom:n,height:0,width:0};this.showAnchorRect(r,!1,!0)},_show:function(){if(this._hidden){var e=this.getDom();e.style.display="",this._hidden=!1,this.fireEvent("show")}},isHidden:function(){return this._hidden},show:function(){this._doAutoRender(),this._show()},hide:function(e){!this._hidden&&this.getDom()&&(this.getDom().style.display="none",this._hidden=!0,e||this.fireEvent("hide"))},queryAutoHide:function(e){return!e||!t.contains(this.getDom(),e)}},e.inherits(i,r),n.on(document,"mousedown",function(e){var t=e.target||e.srcElement;o(e,t)}),n.on(window,"scroll",function(e,t){o(e,t)})}(),function(){function i(e,t){var n='<div id="##" class="edui-colorpicker %%"><div class="edui-colorpicker-topbar edui-clearfix"><div unselectable="on" id="##_preview" class="edui-colorpicker-preview"></div><div unselectable="on" class="edui-colorpicker-nocolor" onclick="$$._onPickNoColor(event, this);">'+e+"</div>"+"</div>"+'<table  class="edui-box" style="border-collapse: collapse;" onmouseover="$$._onTableOver(event, this);" onmouseout="$$._onTableOut(event, this);" onclick="return $$._onTableClick(event, this);" cellspacing="0" cellpadding="0">'+'<tr style="border-bottom: 1px solid #ddd;font-size: 13px;line-height: 25px;color:#39C;padding-top: 2px"><td colspan="10">'+t.getLang("themeColor")+"</td> </tr>"+'<tr class="edui-colorpicker-tablefirstrow" >';for(var i=0;i<r.length;i++)i&&i%10===0&&(n+="</tr>"+(i==60?'<tr style="border-bottom: 1px solid #ddd;font-size: 13px;line-height: 25px;color:#39C;"><td colspan="10">'+t.getLang("standardColor")+"</td></tr>":"")+"<tr"+(i==60?' class="edui-colorpicker-tablefirstrow"':"")+">"),n+=i<70?'<td style="padding: 0 2px;"><a hidefocus title="'+r[i]+'" onclick="return false;" href="javascript:" unselectable="on" class="edui-box edui-colorpicker-colorcell"'+' data-color="#'+r[i]+'"'+' style="background-color:#'+r[i]+";border:solid #ccc;"+(i<10||i>=60?"border-width:1px;":i>=10&&i<20?"border-width:1px 1px 0 1px;":"border-width:0 1px 0 1px;")+'"'+"></a></td>":"";return n+="</tr></table></div>",n}var e=baidu.editor.utils,t=baidu.editor.ui.UIBase,n=baidu.editor.ui.ColorPicker=function(e){this.initOptions(e),this.noColorText=this.noColorText||this.editor.getLang("clearColor"),this.initUIBase()};n.prototype={getHtmlTpl:function(){return i(this.noColorText,this.editor)},_onTableClick:function(e){var t=e.target||e.srcElement,n=t.getAttribute("data-color");n&&this.fireEvent("pickcolor",n)},_onTableOver:function(e){var t=e.target||e.srcElement,n=t.getAttribute("data-color");n&&(this.getDom("preview").style.backgroundColor=n)},_onTableOut:function(){this.getDom("preview").style.backgroundColor=""},_onPickNoColor:function(){this.fireEvent("picknocolor")}},e.inherits(n,t);var r="ffffff,000000,eeece1,1f497d,4f81bd,c0504d,9bbb59,8064a2,4bacc6,f79646,f2f2f2,7f7f7f,ddd9c3,c6d9f0,dbe5f1,f2dcdb,ebf1dd,e5e0ec,dbeef3,fdeada,d8d8d8,595959,c4bd97,8db3e2,b8cce4,e5b9b7,d7e3bc,ccc1d9,b7dde8,fbd5b5,bfbfbf,3f3f3f,938953,548dd4,95b3d7,d99694,c3d69b,b2a2c7,92cddc,fac08f,a5a5a5,262626,494429,17365d,366092,953734,76923c,5f497a,31859b,e36c09,7f7f7f,0c0c0c,1d1b10,0f243e,244061,632423,4f6128,3f3151,205867,974806,c00000,ff0000,ffc000,ffff00,92d050,00b050,00b0f0,0070c0,002060,7030a0,".split(",")}(),function(){var e=baidu.editor.utils,t=baidu.editor.ui.uiUtils,n=baidu.editor.ui.UIBase,r=baidu.editor.ui.TablePicker=function(e){this.initOptions(e),this.initTablePicker()};r.prototype={defaultNumRows:10,defaultNumCols:10,maxNumRows:20,maxNumCols:20,numRows:10,numCols:10,lengthOfCellSide:22,initTablePicker:function(){this.initUIBase()},getHtmlTpl:function(){var e=this;return'<div id="##" class="edui-tablepicker %%"><div class="edui-tablepicker-body"><div class="edui-infoarea"><span id="##_label" class="edui-label"></span></div><div class="edui-pickarea" onmousemove="$$._onMouseMove(event, this);" onmouseover="$$._onMouseOver(event, this);" onmouseout="$$._onMouseOut(event, this);" onclick="$$._onClick(event, this);"><div id="##_overlay" class="edui-overlay"></div></div></div></div>'},_UIBase_render:n.prototype.render,render:function(e){this._UIBase_render(e),this.getDom("label").innerHTML="0"+this.editor.getLang("t_row")+" x 0"+this.editor.getLang("t_col")},_track:function(e,t){var n=this.getDom("overlay").style,r=this.lengthOfCellSide;n.width=e*r+"px",n.height=t*r+"px";var i=this.getDom("label");i.innerHTML=e+this.editor.getLang("t_col")+" x "+t+this.editor.getLang("t_row"),this.numCols=e,this.numRows=t},_onMouseOver:function(e,n){var r=e.relatedTarget||e.fromElement;!t.contains(n,r)&&n!==r&&(this.getDom("label").innerHTML="0"+this.editor.getLang("t_col")+" x 0"+this.editor.getLang("t_row"),this.getDom("overlay").style.visibility="")},_onMouseOut:function(e,n){var r=e.relatedTarget||e.toElement;!t.contains(n,r)&&n!==r&&(this.getDom("label").innerHTML="0"+this.editor.getLang("t_col")+" x 0"+this.editor.getLang("t_row"),this.getDom("overlay").style.visibility="hidden")},_onMouseMove:function(e,n){var r=this.getDom("overlay").style,i=t.getEventOffset(e),s=this.lengthOfCellSide,o=Math.ceil(i.left/s),u=Math.ceil(i.top/s);this._track(o,u)},_onClick:function(){this.fireEvent("picktable",this.numCols,this.numRows)}},e.inherits(r,n)}(),function(){var e=baidu.editor.browser,t=baidu.editor.dom.domUtils,n=baidu.editor.ui.uiUtils,r='onmousedown="$$.Stateful_onMouseDown(event, this);" onmouseup="$$.Stateful_onMouseUp(event, this);"'+(e.ie?' onmouseenter="$$.Stateful_onMouseEnter(event, this);" onmouseleave="$$.Stateful_onMouseLeave(event, this);"':' onmouseover="$$.Stateful_onMouseOver(event, this);" onmouseout="$$.Stateful_onMouseOut(event, this);"');baidu.editor.ui.Stateful={alwalysHoverable:!1,target:null,Stateful_init:function(){this._Stateful_dGetHtmlTpl=this.getHtmlTpl,this.getHtmlTpl=this.Stateful_getHtmlTpl},Stateful_getHtmlTpl:function(){var e=this._Stateful_dGetHtmlTpl();return e.replace(/stateful/g,function(){return r})},Stateful_onMouseEnter:function(e,t){this.target=t;if(!this.isDisabled()||this.alwalysHoverable)this.addState("hover"),this.fireEvent("over")},Stateful_onMouseLeave:function(e,t){if(!this.isDisabled()||this.alwalysHoverable)this.removeState("hover"),this.removeState("active"),this.fireEvent("out")},Stateful_onMouseOver:function(e,t){var r=e.relatedTarget;!n.contains(t,r)&&t!==r&&this.Stateful_onMouseEnter(e,t)},Stateful_onMouseOut:function(e,t){var r=e.relatedTarget;!n.contains(t,r)&&t!==r&&this.Stateful_onMouseLeave(e,t)},Stateful_onMouseDown:function(e,t){this.isDisabled()||this.addState("active")},Stateful_onMouseUp:function(e,t){this.isDisabled()||this.removeState("active")},Stateful_postRender:function(){this.disabled&&!this.hasState("disabled")&&this.addState("disabled")},hasState:function(e){return t.hasClass(this.getStateDom(),"edui-state-"+e)},addState:function(e){this.hasState(e)||(this.getStateDom().className+=" edui-state-"+e)},removeState:function(e){this.hasState(e)&&t.removeClasses(this.getStateDom(),["edui-state-"+e])},getStateDom:function(){return this.getDom("state")},isChecked:function(){return this.hasState("checked")},setChecked:function(e){!this.isDisabled()&&e?this.addState("checked"):this.removeState("checked")},isDisabled:function(){return this.hasState("disabled")},setDisabled:function(e){e?(this.removeState("hover"),this.removeState("checked"),this.removeState("active"),this.addState("disabled")):this.removeState("disabled")}}}(),function(){var e=baidu.editor.utils,t=baidu.editor.ui.UIBase,n=baidu.editor.ui.Stateful,r=baidu.editor.ui.Button=function(e){if(e.name){var t=e.name,n=e.cssRules;e.className||(e.className="edui-for-"+t),e.cssRules=".edui-default  .edui-for-"+t+" .edui-icon {"+n+"}"}this.initOptions(e),this.initButton()};r.prototype={uiName:"button",label:"",title:"",showIcon:!0,showText:!0,cssRules:"",initButton:function(){this.initUIBase(),this.Stateful_init(),this.cssRules&&e.cssRule("edui-customize-"+this.name+"-style",this.cssRules)},getHtmlTpl:function(){return'<div id="##" class="edui-box %%"><div id="##_state" stateful><div class="%%-wrap"><div id="##_body" unselectable="on" '+(this.title?'title="'+this.title+'"':"")+' class="%%-body" onmousedown="return $$._onMouseDown(event, this);" onclick="return $$._onClick(event, this);">'+(this.showIcon?'<div class="edui-box edui-icon"></div>':"")+(this.showText?'<div class="edui-box edui-label">'+this.label+"</div>":"")+"</div>"+"</div>"+"</div></div>"},postRender:function(){this.Stateful_postRender(),this.setDisabled(this.disabled)},_onMouseDown:function(e){var t=e.target||e.srcElement,n=t&&t.tagName&&t.tagName.toLowerCase();if(n=="input"||n=="object"||n=="object")return!1},_onClick:function(){this.isDisabled()||this.fireEvent("click")},setTitle:function(e){var t=this.getDom("label");t.innerHTML=e}},e.inherits(r,t),e.extend(r.prototype,n)}(),function(){var e=baidu.editor.utils,t=baidu.editor.ui.uiUtils,n=baidu.editor.dom.domUtils,r=baidu.editor.ui.UIBase,i=baidu.editor.ui.Stateful,s=baidu.editor.ui.SplitButton=function(e){this.initOptions(e),this.initSplitButton()};s.prototype={popup:null,uiName:"splitbutton",title:"",initSplitButton:function(){this.initUIBase(),this.Stateful_init();var e=this;if(this.popup!=null){var t=this.popup;this.popup=null,this.setPopup(t)}},_UIBase_postRender:r.prototype.postRender,postRender:function(){this.Stateful_postRender(),this._UIBase_postRender()},setPopup:function(n){if(this.popup===n)return;this.popup!=null&&this.popup.dispose(),n.addListener("show",e.bind(this._onPopupShow,this)),n.addListener("hide",e.bind(this._onPopupHide,this)),n.addListener("postrender",e.bind(function(){n.getDom("body").appendChild(t.createElementByHtml('<div id="'+this.popup.id+'_bordereraser" class="edui-bordereraser edui-background" style="width:'+(t.getClientRect(this.getDom()).width+20)+'px"></div>')),n.getDom().className+=" "+this.className},this)),this.popup=n},_onPopupShow:function(){this.addState("opened")},_onPopupHide:function(){this.removeState("opened")},getHtmlTpl:function(){return'<div id="##" class="edui-box %%"><div '+(this.title?'title="'+this.title+'"':"")+' id="##_state" stateful><div class="%%-body">'+'<div id="##_button_body" class="edui-box edui-button-body" onclick="$$._onButtonClick(event, this);">'+'<div class="edui-box edui-icon"></div>'+"</div>"+'<div class="edui-box edui-splitborder"></div>'+'<div class="edui-box edui-arrow" onclick="$$._onArrowClick();"></div>'+"</div></div></div>"},showPopup:function(){var e=t.getClientRect(this.getDom());e.top-=this.popup.SHADOW_RADIUS,e.height+=this.popup.SHADOW_RADIUS,this.popup.showAnchorRect(e)},_onArrowClick:function(e,t){this.isDisabled()||this.showPopup()},_onButtonClick:function(){this.isDisabled()||this.fireEvent("buttonclick")}},e.inherits(s,r),e.extend(s.prototype,i,!0)}(),function(){var e=baidu.editor.utils,t=baidu.editor.ui.uiUtils,n=baidu.editor.ui.ColorPicker,r=baidu.editor.ui.Popup,i=baidu.editor.ui.SplitButton,s=baidu.editor.ui.ColorButton=function(e){this.initOptions(e),this.initColorButton()};s.prototype={initColorButton:function(){var e=this;this.popup=new r({content:new n({noColorText:e.editor.getLang("clearColor"),editor:e.editor,onpickcolor:function(t,n){e._onPickColor(n)},onpicknocolor:function(t,n){e._onPickNoColor(n)}}),editor:e.editor}),this.initSplitButton()},_SplitButton_postRender:i.prototype.postRender,postRender:function(){this._SplitButton_postRender(),this.getDom("button_body").appendChild(t.createElementByHtml('<div id="'+this.id+'_colorlump" class="edui-colorlump"></div>')),this.getDom().className+=" edui-colorbutton"},setColor:function(e){this.getDom("colorlump").style.backgroundColor=e,this.color=e},_onPickColor:function(e){this.fireEvent("pickcolor",e)!==!1&&(this.setColor(e),this.popup.hide())},_onPickNoColor:function(e){this.fireEvent("picknocolor")!==!1&&this.popup.hide()}},e.inherits(s,i)}(),function(){var e=baidu.editor.utils,t=baidu.editor.ui.Popup,n=baidu.editor.ui.TablePicker,r=baidu.editor.ui.SplitButton,i=baidu.editor.ui.TableButton=function(e){this.initOptions(e),this.initTableButton()};i.prototype={initTableButton:function(){var e=this;this.popup=new t({content:new n({editor:e.editor,onpicktable:function(t,n,r){e._onPickTable(n,r)}}),editor:e.editor}),this.initSplitButton()},_onPickTable:function(e,t){this.fireEvent("picktable",e,t)!==!1&&this.popup.hide()}},e.inherits(i,r)}(),function(){var e=baidu.editor.utils,t=baidu.editor.ui.UIBase,n=baidu.editor.ui.AutoTypeSetPicker=function(e){this.initOptions(e),this.initAutoTypeSetPicker()};n.prototype={initAutoTypeSetPicker:function(){this.initUIBase()},getHtmlTpl:function(){var e=this.editor,t=e.options.autotypeset,n=e.getLang("autoTypeSet"),r="textAlignValue"+e.uid,i="imageBlockLineValue"+e.uid,s="symbolConverValue"+e.uid;return'<div id="##" class="edui-autotypesetpicker %%"><div class="edui-autotypesetpicker-body"><table ><tr><td nowrap><input type="checkbox" name="mergeEmptyline" '+(t.mergeEmptyline?"checked":"")+">"+n.mergeLine+'</td><td colspan="2"><input type="checkbox" name="removeEmptyline" '+(t.removeEmptyline?"checked":"")+">"+n.delLine+"</td></tr>"+'<tr><td nowrap><input type="checkbox" name="removeClass" '+(t.removeClass?"checked":"")+">"+n.removeFormat+'</td><td colspan="2"><input type="checkbox" name="indent" '+(t.indent?"checked":"")+">"+n.indent+"</td></tr>"+"<tr>"+'<td nowrap><input type="checkbox" name="textAlign" '+(t.textAlign?"checked":"")+">"+n.alignment+"</td>"+'<td colspan="2" id="'+r+'">'+'<input type="radio" name="'+r+'" value="left" '+(t.textAlign&&t["textAlign"]=="left"?"checked":"")+">"+e.getLang("justifyleft")+'<input type="radio" name="'+r+'" value="center" '+(t.textAlign&&t["textAlign"]=="center"?"checked":"")+">"+e.getLang("justifycenter")+'<input type="radio" name="'+r+'" value="right" '+(t.textAlign&&t["textAlign"]=="right"?"checked":"")+">"+e.getLang("justifyright")+"</td>"+"</tr>"+"<tr>"+'<td nowrap><input type="checkbox" name="imageBlockLine" '+(t.imageBlockLine?"checked":"")+">"+n.imageFloat+"</td>"+'<td nowrap id="'+i+'">'+'<input type="radio" name="'+i+'" value="none" '+(t.imageBlockLine&&t["imageBlockLine"]=="none"?"checked":"")+">"+e.getLang("default")+'<input type="radio" name="'+i+'" value="left" '+(t.imageBlockLine&&t["imageBlockLine"]=="left"?"checked":"")+">"+e.getLang("justifyleft")+'<input type="radio" name="'+i+'" value="center" '+(t.imageBlockLine&&t["imageBlockLine"]=="center"?"checked":"")+">"+e.getLang("justifycenter")+'<input type="radio" name="'+i+'" value="right" '+(t.imageBlockLine&&t["imageBlockLine"]=="right"?"checked":"")+">"+e.getLang("justifyright")+"</td>"+"</tr>"+'<tr><td nowrap><input type="checkbox" name="clearFontSize" '+(t.clearFontSize?"checked":"")+">"+n.removeFontsize+'</td><td colspan="2"><input type="checkbox" name="clearFontFamily" '+(t.clearFontFamily?"checked":"")+">"+n.removeFontFamily+"</td></tr>"+'<tr><td nowrap colspan="3"><input type="checkbox" name="removeEmptyNode" '+(t.removeEmptyNode?"checked":"")+">"+n.removeHtml+"</td></tr>"+'<tr><td nowrap colspan="3"><input type="checkbox" name="pasteFilter" '+(t.pasteFilter?"checked":"")+">"+n.pasteFilter+"</td></tr>"+"<tr>"+'<td nowrap><input type="checkbox" name="symbolConver" '+(t.bdc2sb||t.tobdc?"checked":"")+">"+n.symbol+"</td>"+'<td id="'+s+'">'+'<input type="radio" name="bdc" value="bdc2sb" '+(t.bdc2sb?"checked":"")+">"+n.bdc2sb+'<input type="radio" name="bdc" value="tobdc" '+(t.tobdc?"checked":"")+">"+n.tobdc+""+"</td>"+'<td nowrap align="right"><button >'+n.run+"</button></td>"+"</tr>"+"</table>"+"</div>"+"</div>"},_UIBase_render:t.prototype.render},e.inherits(n,t)}(),function(){function s(t){var n={},r=t.getDom(),i=t.editor.uid,s=null,o=null,u=domUtils.getElementsByTagName(r,"input");for(var a=u.length-1,f;f=u[a--];){s=f.getAttribute("type");if(s=="checkbox"){o=f.getAttribute("name"),n[o]&&delete n[o];if(f.checked){var l=document.getElementById(o+"Value"+i);if(l)if(/input/ig.test(l.tagName))n[o]=l.value;else{var c=l.getElementsByTagName("input");for(var h=c.length-1,p;p=c[h--];)if(p.checked){n[o]=p.value;break}}else n[o]=!0}else n[o]=!1}else n[f.getAttribute("value")]=f.checked}var d=domUtils.getElementsByTagName(r,"select");for(var a=0,v;v=d[a++];){var m=v.getAttribute("name");n[m]=n[m]?v.value:""}e.extend(t.editor.options.autotypeset,n),t.editor.setPreferences("autotypeset",n)}var e=baidu.editor.utils,t=baidu.editor.ui.Popup,n=baidu.editor.ui.AutoTypeSetPicker,r=baidu.editor.ui.SplitButton,i=baidu.editor.ui.AutoTypeSetButton=function(e){this.initOptions(e),this.initAutoTypeSetButton()};i.prototype={initAutoTypeSetButton:function(){var e=this;this.popup=new t({content:new n({editor:e.editor}),editor:e.editor,hide:function(){!this._hidden&&this.getDom()&&(s(this),this.getDom().style.display="none",this._hidden=!0,this.fireEvent("hide"))}});var r=0;this.popup.addListener("postRenderAfter",function(){var t=this;if(r)return;var n=this.getDom(),i=n.getElementsByTagName("button")[0];i.onclick=function(){s(t),e.editor.execCommand("autotypeset"),t.hide()},domUtils.on(n,"click",function(n){var r=n.target||n.srcElement,i=e.editor.uid;if(r&&r.tagName=="INPUT"){if(r.name=="imageBlockLine"||r.name=="textAlign"||r.name=="symbolConver"){var o=r.checked,u=document.getElementById(r.name+"Value"+i),a=u.getElementsByTagName("input"),f={imageBlockLine:"none",textAlign:"left",symbolConver:"tobdc"};for(var l=0;l<a.length;l++)o?a[l].value==f[r.name]&&(a[l].checked="checked"):a[l].checked=!1}if(r.name=="imageBlockLineValue"+i||r.name=="textAlignValue"+i||r.name=="bdc"){var c=r.parentNode.previousSibling.getElementsByTagName("input");c&&(c[0].checked=!0)}s(t)}}),r=1}),this.initSplitButton()}},e.inherits(i,r)}(),function(){var e=baidu.editor.utils,t=baidu.editor.ui.Popup,n=baidu.editor.ui.Stateful,r=baidu.editor.ui.UIBase,i=baidu.editor.ui.CellAlignPicker=function(e){this.initOptions(e),this.initSelected(),this.initCellAlignPicker()};i.prototype={initSelected:function(){var e={valign:{top:0,middle:1,bottom:2},align:{left:0,center:1,right:2},count:3},t=-1;this.selected&&(this.selectedIndex=e.valign[this.selected.valign]*e.count+e.align[this.selected.align])},initCellAlignPicker:function(){this.initUIBase(),this.Stateful_init()},getHtmlTpl:function(){var e=["left","center","right"],t=9,n=null,r=-1,i=[];for(var s=0;s<t;s++)n=this.selectedIndex===s?' class="edui-cellalign-selected" ':"",r=s%3,r===0&&i.push("<tr>"),i.push('<td index="'+s+'" '+n+' stateful><div class="edui-icon edui-'+e[r]+'"></div></td>'),r===2&&i.push("</tr>");return'<div id="##" class="edui-cellalignpicker %%"><div class="edui-cellalignpicker-body"><table onclick="$$._onClick(event);">'+i.join("")+"</table>"+"</div>"+"</div>"},getStateDom:function(){return this.target},_onClick:function(e){var n=e.target||e.srcElement;/icon/.test(n.className)&&(this.items[n.parentNode.getAttribute("index")].onclick(),t.postHide(e))},_UIBase_render:r.prototype.render},e.inherits(i,r),e.extend(i.prototype,n,!0)}(),function(){var e=baidu.editor.utils,t=baidu.editor.ui.Stateful,n=baidu.editor.ui.uiUtils,r=baidu.editor.ui.UIBase,i=baidu.editor.ui.PastePicker=function(e){this.initOptions(e),this.initPastePicker()};i.prototype={initPastePicker:function(){this.initUIBase(),this.Stateful_init()},getHtmlTpl:function(){return'<div class="edui-pasteicon" onclick="$$._onClick(this)"></div><div class="edui-pastecontainer"><div class="edui-title">'+this.editor.getLang("pasteOpt")+"</div>"+'<div class="edui-button">'+'<div title="'+this.editor.getLang("pasteSourceFormat")+'" onclick="$$.format(false)" stateful>'+'<div class="edui-richtxticon"></div></div>'+'<div title="'+this.editor.getLang("tagFormat")+'" onclick="$$.format(2)" stateful>'+'<div class="edui-tagicon"></div></div>'+'<div title="'+this.editor.getLang("pasteTextFormat")+'" onclick="$$.format(true)" stateful>'+'<div class="edui-plaintxticon"></div></div>'+"</div>"+"</div>"+"</div>"},getStateDom:function(){return this.target},format:function(e){this.editor.ui._isTransfer=!0,this.editor.fireEvent("pasteTransfer",e)},_onClick:function(e){var t=domUtils.getNextDomNode(e),r=n.getViewportRect().height,i=n.getClientRect(t);i.top+i.height>r?t.style.top=-i.height-e.offsetHeight+"px":t.style.top="",/hidden/ig.test(domUtils.getComputedStyle(t,"visibility"))?(t.style.visibility="visible",domUtils.addClass(e,"edui-state-opened")):(t.style.visibility="hidden",domUtils.removeClasses(e,"edui-state-opened"))},_UIBase_render:r.prototype.render},e.inherits(i,r),e.extend(i.prototype,t,!0)}(),function(){var e=baidu.editor.utils,t=baidu.editor.ui.uiUtils,n=baidu.editor.ui.UIBase,r=baidu.editor.ui.Toolbar=function(e){this.initOptions(e),this.initToolbar()};r.prototype={items:null,initToolbar:function(){this.items=this.items||[],this.initUIBase()},add:function(e,t){t===undefined?this.items.push(e):this.items.splice(t,0,e)},getHtmlTpl:function(){var e=[];for(var t=0;t<this.items.length;t++)e[t]=this.items[t].renderHtml();return'<div id="##" class="edui-toolbar %%" onselectstart="return false;" onmousedown="return $$._onMouseDown(event, this);">'+e.join("")+"</div>"},postRender:function(){var e=this.getDom();for(var n=0;n<this.items.length;n++)this.items[n].postRender();t.makeUnselectable(e)},_onMouseDown:function(e){var t=e.target||e.srcElement,n=t&&t.tagName&&t.tagName.toLowerCase();if(n=="input"||n=="object"||n=="object")return!1}},e.inherits(r,n)}(),function(){var e=baidu.editor.utils,t=baidu.editor.dom.domUtils,n=baidu.editor.ui.uiUtils,r=baidu.editor.ui.UIBase,i=baidu.editor.ui.Popup,s=baidu.editor.ui.Stateful,o=baidu.editor.ui.CellAlignPicker,u=baidu.editor.ui.Menu=function(e){this.initOptions(e),this.initMenu()},a={renderHtml:function(){return'<div class="edui-menuitem edui-menuseparator"><div class="edui-menuseparator-inner"></div></div>'},postRender:function(){},queryAutoHide:function(){return!0}};u.prototype={items:null,uiName:"menu",initMenu:function(){this.items=this.items||[],this.initPopup(),this.initItems()},initItems:function(){for(var e=0;e<this.items.length;e++){var t=this.items[e];t=="-"?this.items[e]=this.getSeparator():t instanceof f||(t.editor=this.editor,t.theme=this.editor.options.theme,this.items[e]=this.createItem(t))}},getSeparator:function(){return a},createItem:function(e){return e.menu=this,new f(e)},_Popup_getContentHtmlTpl:i.prototype.getContentHtmlTpl,getContentHtmlTpl:function(){if(this.items.length==0)return this._Popup_getContentHtmlTpl();var e=[];for(var t=0;t<this.items.length;t++){var n=this.items[t];e[t]=n.renderHtml()}return'<div class="%%-body">'+e.join("")+"</div>"},_Popup_postRender:i.prototype.postRender,postRender:function(){var e=this;for(var r=0;r<this.items.length;r++){var i=this.items[r];i.ownerMenu=this,i.postRender()}t.on(this.getDom(),"mouseover",function(t){t=t||event;var r=t.relatedTarget||t.fromElement,i=e.getDom();!n.contains(i,r)&&i!==r&&e.fireEvent("over")}),this._Popup_postRender()},queryAutoHide:function(e){if(e){if(n.contains(this.getDom(),e))return!1;for(var t=0;t<this.items.length;t++){var r=this.items[t];if(r.queryAutoHide(e)===!1)return!1}}},clearItems:function(){for(var e=0;e<this.items.length;e++){var t=this.items[e];clearTimeout(t._showingTimer),clearTimeout(t._closingTimer),t.subMenu&&t.subMenu.destroy()}this.items=[]},destroy:function(){this.getDom()&&t.remove(this.getDom()),this.clearItems()},dispose:function(){this.destroy()}},e.inherits(u,i);var f=baidu.editor.ui.MenuItem=function(e){this.initOptions(e),this.initUIBase(),this.Stateful_init();if(this.subMenu&&!(this.subMenu instanceof u))if(e.className&&e.className.indexOf("aligntd")!=-1){var n=this;this.subMenu.selected=this.editor.queryCommandValue("cellalignment"),this.subMenu=new i({content:new o(this.subMenu),parentMenu:n,editor:n.editor,destroy:function(){this.getDom()&&t.remove(this.getDom())}}),this.subMenu.addListener("postRenderAfter",function(){t.on(this.getDom(),"mouseover",function(){n.addState("opened")})})}else this.subMenu=new u(this.subMenu)};f.prototype={label:"",subMenu:null,ownerMenu:null,uiName:"menuitem",alwalysHoverable:!0,getHtmlTpl:function(){return'<div id="##" class="%%" stateful onclick="$$._onClick(event, this);"><div class="%%-body">'+this.renderLabelHtml()+"</div>"+"</div>"},postRender:function(){var e=this;this.addListener("over",function(){e.ownerMenu.fireEvent("submenuover",e),e.subMenu&&e.delayShowSubMenu()}),this.subMenu&&(this.getDom().className+=" edui-hassubmenu",this.subMenu.render(),this.addListener("out",function(){e.delayHideSubMenu()}),this.subMenu.addListener("over",function(){clearTimeout(e._closingTimer),e._closingTimer=null,e.addState("opened")}),this.ownerMenu.addListener("hide",function(){e.hideSubMenu()}),this.ownerMenu.addListener("submenuover",function(t,n){n!==e&&e.delayHideSubMenu()}),this.subMenu._bakQueryAutoHide=this.subMenu.queryAutoHide,this.subMenu.queryAutoHide=function(t){return t&&n.contains(e.getDom(),t)?!1:this._bakQueryAutoHide(t)}),this.getDom().style.tabIndex="-1",n.makeUnselectable(this.getDom()),this.Stateful_postRender()},delayShowSubMenu:function(){var e=this;e.isDisabled()||(e.addState("opened"),clearTimeout(e._showingTimer),clearTimeout(e._closingTimer),e._closingTimer=null,e._showingTimer=setTimeout(function(){e.showSubMenu()},250))},delayHideSubMenu:function(){var e=this;e.isDisabled()||(e.removeState("opened"),clearTimeout(e._showingTimer),e._closingTimer||(e._closingTimer=setTimeout(function(){e.hasState("opened")||e.hideSubMenu(),e._closingTimer=null},400)))},renderLabelHtml:function(){return'<div class="edui-arrow"></div><div class="edui-box edui-icon"></div><div class="edui-box edui-label %%-label">'+(this.label||"")+"</div>"},getStateDom:function(){return this.getDom()},queryAutoHide:function(e){if(this.subMenu&&this.hasState("opened"))return this.subMenu.queryAutoHide(e)},_onClick:function(e,t){if(this.hasState("disabled"))return;this.fireEvent("click",e,t)!==!1&&(this.subMenu?this.showSubMenu():i.postHide(e))},showSubMenu:function(){var e=n.getClientRect(this.getDom());e.right-=5,e.left+=2,e.width-=7,e.top-=4,e.bottom+=4,e.height+=8,this.subMenu.showAnchorRect(e,!0,!0)},hideSubMenu:function(){this.subMenu.hide()}},e.inherits(f,r),e.extend(f.prototype,s,!0)}(),function(){var e=baidu.editor.utils,t=baidu.editor.ui.uiUtils,n=baidu.editor.ui.Menu,r=baidu.editor.ui.SplitButton,i=baidu.editor.ui.Combox=function(e){this.initOptions(e),this.initCombox()};i.prototype={uiName:"combox",onbuttonclick:function(){this.showPopup()},initCombox:function(){var e=this;this.items=this.items||[];for(var t=0;t<this.items.length;t++){var r=this.items[t];r.uiName="listitem",r.index=t,r.onclick=function(){e.selectByIndex(this.index)}}this.popup=new n({items:this.items,uiName:"list",editor:this.editor,captureWheel:!0,combox:this}),this.initSplitButton()},_SplitButton_postRender:r.prototype.postRender,postRender:function(){this._SplitButton_postRender(),this.setLabel(this.label||""),this.setValue(this.initValue||"")},showPopup:function(){var e=t.getClientRect(this.getDom());e.top+=1,e.bottom-=1,e.height-=2,this.popup.showAnchorRect(e)},getValue:function(){return this.value},setValue:function(e){var t=this.indexByValue(e);t!=-1?(this.selectedIndex=t,this.setLabel(this.items[t].label),this.value=this.items[t].value):(this.selectedIndex=-1,this.setLabel(this.getLabelForUnknowValue(e)),this.value=e)},setLabel:function(e){this.getDom("button_body").innerHTML=e,this.label=e},getLabelForUnknowValue:function(e){return e},indexByValue:function(e){for(var t=0;t<this.items.length;t++)if(e==this.items[t].value)return t;return-1},getItem:function(e){return this.items[e]},selectByIndex:function(e){e<this.items.length&&this.fireEvent("select",e)!==!1&&(this.selectedIndex=e,this.value=this.items[e].value,this.setLabel(this.items[e].label))}},e.inherits(i,r)}(),function(){var e=baidu.editor.utils,t=baidu.editor.dom.domUtils,n=baidu.editor.ui.uiUtils,r=baidu.editor.ui.Mask,i=baidu.editor.ui.UIBase,s=baidu.editor.ui.Button,o=baidu.editor.ui.Dialog=function(t){if(t.name){var n=t.name,r=t.cssRules;t.className||(t.className="edui-for-"+n),r&&(t.cssRules=".edui-default .edui-for-"+n+" .edui-dialog-content  {"+r+"}")}this.initOptions(e.extend({autoReset:!0,draggable:!0,onok:function(){},oncancel:function(){},onclose:function(e,t){return t?this.onok():this.oncancel()},holdScroll:!1},t)),this.initDialog()},u,a,f;o.prototype={draggable:!1,uiName:"dialog",initDialog:function(){var t=this,n=this.editor.options.theme;this.cssRules&&e.cssRule("edui-customize-"+this.name+"-style",this.cssRules),this.initUIBase(),this.modalMask=u||(u=new r({className:"edui-dialog-modalmask",theme:n,onclick:function(){f&&f.close(!1)}})),this.dragMask=a||(a=new r({className:"edui-dialog-dragmask",theme:n})),this.closeButton=new s({className:"edui-dialog-closebutton",title:t.closeDialog,theme:n,onclick:function(){t.close(!1)}}),this.fullscreen&&this.initResizeEvent();if(this.buttons)for(var i=0;i<this.buttons.length;i++)this.buttons[i]instanceof s||(this.buttons[i]=new s(e.extend(this.buttons[i],{editor:this.editor},!0)))},initResizeEvent:function(){var e=this;t.on(window,"resize",function(){if(e._hidden||e._hidden===undefined)return;e.__resizeTimer&&window.clearTimeout(e.__resizeTimer),e.__resizeTimer=window.setTimeout(function(){e.__resizeTimer=null;var t=e.getDom(),r=e.getDom("content"),i=UE.ui.uiUtils.getClientRect(t),s=UE.ui.uiUtils.getClientRect(r),o=n.getViewportRect();r.style.width=o.width-i.width+s.width+"px",r.style.height=o.height-i.height+s.height+"px",t.style.width=o.width+"px",t.style.height=o.height+"px",e.fireEvent("resize")},100)})},fitSize:function(){var e=this.getDom("body"),t=this.mesureSize();return e.style.width=t.width+"px",e.style.height=t.height+"px",t},safeSetOffset:function(e){var t=this,r=t.getDom(),i=n.getViewportRect(),s=n.getClientRect(r),o=e.left;o+s.width>i.right&&(o=i.right-s.width);var u=e.top;u+s.height>i.bottom&&(u=i.bottom-s.height),r.style.left=Math.max(o,0)+"px",r.style.top=Math.max(u,0)+"px"},showAtCenter:function(){var e=n.getViewportRect();if(!this.fullscreen){this.getDom().style.display="";var r=this.fitSize(),i=this.getDom("titlebar").offsetHeight|0,s=e.width/2-r.width/2,o=e.height/2-(r.height-i)/2-i,u=this.getDom();this.safeSetOffset({left:Math.max(s|0,0),top:Math.max(o|0,0)}),t.hasClass(u,"edui-state-centered")||(u.className+=" edui-state-centered")}else{var a=this.getDom(),f=this.getDom("content");a.style.display="block";var l=UE.ui.uiUtils.getClientRect(a),c=UE.ui.uiUtils.getClientRect(f);a.style.left="-100000px",f.style.width=e.width-l.width+c.width+"px",f.style.height=e.height-l.height+c.height+"px",a.style.width=e.width+"px",a.style.height=e.height+"px",a.style.left=0,this._originalContext={html:{overflowX:document.documentElement.style.overflowX,overflowY:document.documentElement.style.overflowY},body:{overflowX:document.body.style.overflowX,overflowY:document.body.style.overflowY}},document.documentElement.style.overflowX="hidden",document.documentElement.style.overflowY="hidden",document.body.style.overflowX="hidden",document.body.style.overflowY="hidden"}this._show()},getContentHtml:function(){var e="";return typeof this.content=="string"?e=this.content:this.iframeUrl&&(e='<span id="'+this.id+'_contmask" class="dialogcontmask"></span><iframe id="'+this.id+'_iframe" class="%%-iframe" height="100%" width="100%" frameborder="0" src="'+this.iframeUrl+'"></iframe>'),e},getHtmlTpl:function(){var e="";if(this.buttons){var t=[];for(var n=0;n<this.buttons.length;n++)t[n]=this.buttons[n].renderHtml();e='<div class="%%-foot"><div id="##_buttons" class="%%-buttons">'+t.join("")+"</div>"+"</div>"}return'<div id="##" class="%%"><div '+(this.fullscreen?'class="%%-wrap edui-dialog-fullscreen-flag"':'class="%%"')+'><div id="##_body" class="%%-body">'+'<div class="%%-shadow"></div>'+'<div id="##_titlebar" class="%%-titlebar">'+'<div class="%%-draghandle" onmousedown="$$._onTitlebarMouseDown(event, this);">'+'<span class="%%-caption">'+(this.title||"")+"</span>"+"</div>"+this.closeButton.renderHtml()+"</div>"+'<div id="##_content" class="%%-content">'+(this.autoReset?"":this.getContentHtml())+"</div>"+e+"</div></div></div>"},postRender:function(){this.modalMask.getDom()||(this.modalMask.render(),this.modalMask.hide()),this.dragMask.getDom()||(this.dragMask.render(),this.dragMask.hide());var e=this;this.addListener("show",function(){e.modalMask.show(this.getDom().style.zIndex-2)}),this.addListener("hide",function(){e.modalMask.hide()});if(this.buttons)for(var r=0;r<this.buttons.length;r++)this.buttons[r].postRender();t.on(window,"resize",function(){setTimeout(function(){e.isHidden()||e.safeSetOffset(n.getClientRect(e.getDom()))})}),this._hide()},mesureSize:function(){var e=this.getDom("body"),t=n.getClientRect(this.getDom("content")).width,r=e.style;return r.width=t,n.getClientRect(e)},_onTitlebarMouseDown:function(e,r){if(this.draggable){var i,s=n.getViewportRect(),o=this;n.startDrag(e,{ondragstart:function(){i=n.getClientRect(o.getDom()),o.getDom("contmask").style.visibility="visible",o.dragMask.show(o.getDom().style.zIndex-1)},ondragmove:function(e,t){var n=i.left+e,r=i.top+t;o.safeSetOffset({left:n,top:r})},ondragstop:function(){o.getDom("contmask").style.visibility="hidden",t.removeClasses(o.getDom(),["edui-state-centered"]),o.dragMask.hide()}})}},reset:function(){this.getDom("content").innerHTML=this.getContentHtml(),this.fireEvent("dialogafterreset")},_show:function(){this._hidden&&(this.getDom().style.display="",this.editor.container.style.zIndex&&(this.getDom().style.zIndex=this.editor.container.style.zIndex*1+10),this._hidden=!1,this.fireEvent("show"),baidu.editor.ui.uiUtils.getFixedLayer().style.zIndex=this.getDom().style.zIndex-4)},isHidden:function(){return this._hidden},_hide:function(){if(!this._hidden){var e=this.getDom();e.style.display="none",e.style.zIndex="",e.style.width="",e.style.height="",this._hidden=!0,this.fireEvent("hide")}},open:function(){if(this.autoReset)try{this.reset()}catch(e){this.render(),this.open()}this.showAtCenter();if(this.iframeUrl)try{this.getDom("iframe").focus()}catch(t){}f=this},_onCloseButtonClick:function(e,t){this.close(!1)},close:function(e){if(this.fireEvent("close",e)!==!1){this.fullscreen&&(document.documentElement.style.overflowX=this._originalContext.html.overflowX,document.documentElement.style.overflowY=this._originalContext.html.overflowY,document.body.style.overflowX=this._originalContext.body.overflowX,document.body.style.overflowY=this._originalContext.body.overflowY,delete this._originalContext),this._hide();var n=this.getDom("content"),r=this.getDom("iframe");if(n&&r){var i=r.contentDocument||r.contentWindow.document;i&&(i.body.innerHTML=""),t.remove(n)}}}},e.inherits(o,i)}(),function(){var e=baidu.editor.utils,t=baidu.editor.ui.Menu,n=baidu.editor.ui.SplitButton,r=baidu.editor.ui.MenuButton=function(e){this.initOptions(e),this.initMenuButton()};r.prototype={initMenuButton:function(){var e=this;this.uiName="menubutton",this.popup=new t({items:e.items,className:e.className,editor:e.editor}),this.popup.addListener("show",function(){var t=this;for(var n=0;n<t.items.length;n++)t.items[n].removeState("checked"),t.items[n].value==e._value&&(t.items[n].addState("checked"),this.value=e._value)}),this.initSplitButton()},setValue:function(e){this._value=e}},e.inherits(r,n)}(),function(){var e=baidu.editor.utils,t=baidu.editor.ui.Popup,n=baidu.editor.ui.SplitButton,r=baidu.editor.ui.MultiMenuPop=function(e){this.initOptions(e),this.initMultiMenu()};r.prototype={initMultiMenu:function(){var e=this;this.popup=new t({content:"",editor:e.editor,iframe_rendered:!1,onshow:function(){this.iframe_rendered||(this.iframe_rendered=!0,this.getDom("content").innerHTML='<iframe id="'+e.id+'_iframe" src="'+e.iframeUrl+'" frameborder="0"></iframe>',e.editor.container.style.zIndex&&(this.getDom().style.zIndex=e.editor.container.style.zIndex*1+1))}}),this.onbuttonclick=function(){this.showPopup()},this.initSplitButton()}},e.inherits(r,n)}(),function(){function f(e){var t=e.target||e.srcElement,n=i.findParent(t,function(e){return i.hasClass(e,"edui-shortcutmenu")||i.hasClass(e,"edui-popup")},!0);if(!n)for(var r=0,o;o=s[r++];)o.hide()}var e=baidu.editor.ui,t=e.UIBase,n=e.uiUtils,r=baidu.editor.utils,i=baidu.editor.dom.domUtils,s=[],o,u=!1,a=e.ShortCutMenu=function(e){this.initOptions(e),this.initShortCutMenu()};a.postHide=f,a.prototype={isHidden:!0,SPACE:5,initShortCutMenu:function(){this.items=this.items||[],this.initUIBase(),this.initItems(),this.initEvent(),s.push(this)},initEvent:function(){var e=this,t=e.editor.document;i.on(t,"mousemove",function(t){if(e.isHidden===!1){if(e.getSubMenuMark()||e.eventType=="contextmenu")return;var n=!0,r=e.getDom(),i=r.offsetWidth,s=r.offsetHeight,u=i/2+e.SPACE,a=s/2,f=Math.abs(t.screenX-e.left),l=Math.abs(t.screenY-e.top);clearTimeout(o),o=setTimeout(function(){l>0&&l<a?e.setOpacity(r,"1"):l>a&&l<a+70?(e.setOpacity(r,"0.5"),n=!1):l>a+70&&l<a+140&&e.hide(),n&&f>0&&f<u?e.setOpacity(r,"1"):f>u&&f<u+70?e.setOpacity(r,"0.5"):f>u+70&&f<u+140&&e.hide()})}}),browser.chrome&&i.on(t,"mouseout",function(t){var n=t.relatedTarget||t.toElement;(n==null||n.tagName=="HTML")&&e.hide()}),e.editor.addListener("afterhidepop",function(){e.isHidden||(u=!0)})},initItems:function(){if(r.isArray(this.items))for(var t=0,n=this.items.length;t<n;t++){var i=this.items[t].toLowerCase();e[i]&&(this.items[t]=new e[i](this.editor),this.items[t].className+=" edui-shortcutsubmenu ")}},setOpacity:function(e,t){browser.ie&&browser.version<9?e.style.filter="alpha(opacity = "+parseFloat(t)*100+");":e.style.opacity=t},getSubMenuMark:function(){u=!1;var e=n.getFixedLayer(),t=i.getElementsByTagName(e,"div",function(e){return i.hasClass(e,"edui-shortcutsubmenu edui-popup")});for(var r=0,s;s=t[r++];)s.style.display!="none"&&(u=!0);return u},show:function(e,t){function a(e){e.left<0&&(e.left=0),e.top<0&&(e.top=0),o.style.cssText="position:absolute;left:"+e.left+"px;top:"+e.top+"px;"}function f(e){e.tagName||(e=e.getDom()),s.left=parseInt(e.style.left),s.top=parseInt(e.style.top),s.top-=o.offsetHeight+15,a(s)}var r=this,s={},o=this.getDom(),u=n.getFixedLayer();r.eventType=e.type,o.style.cssText="display:block;left:-9999px";if(e.type=="contextmenu"&&t){var l=i.getElementsByTagName(u,"div","edui-contextmenu")[0];l?f(l):r.editor.addListener("aftershowcontextmenu",function(e,t){f(t)})}else s=n.getViewportOffsetByEvent(e),s.top-=o.offsetHeight+r.SPACE,s.left+=r.SPACE+20,a(s),r.setOpacity(o,.2);r.isHidden=!1,r.left=e.screenX+o.offsetWidth/2-r.SPACE,r.top=e.screenY-o.offsetHeight/2-r.SPACE,r.editor&&(o.style.zIndex=r.editor.container.style.zIndex*1+10,u.style.zIndex=o.style.zIndex-1)},hide:function(){this.getDom()&&(this.getDom().style.display="none"),this.isHidden=!0},postRender:function(){if(r.isArray(this.items))for(var e=0,t;t=this.items[e++];)t.postRender()},getHtmlTpl:function(){var e;if(r.isArray(this.items)){e=[];for(var t=0;t<this.items.length;t++)e[t]=this.items[t].renderHtml();e=e.join("")}else e=this.items;return'<div id="##" class="%% edui-toolbar" data-src="shortcutmenu" onmousedown="return false;" onselectstart="return false;" >'+e+"</div>"}},r.inherits(a,t),i.on(document,"mousedown",function(e){f(e)}),i.on(window,"scroll",function(e){f(e)})}(),function(){var e=baidu.editor.utils,t=baidu.editor.ui.UIBase,n=baidu.editor.ui.Breakline=function(e){this.initOptions(e),this.initSeparator()};n.prototype={uiName:"Breakline",initSeparator:function(){this.initUIBase()},getHtmlTpl:function(){return"<br/>"}},e.inherits(n,t)}(),function(){var e=baidu.editor.utils,t=baidu.editor.dom.domUtils,n=baidu.editor.ui.UIBase,r=baidu.editor.ui.Message=function(e){this.initOptions(e),this.initMessage()};r.prototype={initMessage:function(){this.initUIBase()},getHtmlTpl:function(){return'<div id="##" class="edui-message %%"> <div id="##_closer" class="edui-message-closer">Ã</div> <div id="##_body" class="edui-message-body edui-message-type-info"> <iframe style="position:absolute;z-index:-1;left:0;top:0;background-color: transparent;" frameborder="0" width="100%" height="100%" src="about:blank"></iframe> <div class="edui-shadow"></div> <div id="##_content" class="edui-message-content">  </div> </div></div>'},reset:function(e){var t=this;e.keepshow||(clearTimeout(this.timer),t.timer=setTimeout(function(){t.hide()},e.timeout||4e3)),e.content!==undefined&&t.setContent(e.content),e.type!==undefined&&t.setType(e.type),t.show()},postRender:function(){var e=this,n=this.getDom("closer");n&&t.on(n,"click",function(){e.hide()})},setContent:function(e){this.getDom("content").innerHTML=e},setType:function(e){e=e||"info";var t=this.getDom("body");t.className=t.className.replace(/edui-message-type-[\w-]+/,"edui-message-type-"+e)},getContent:function(){return this.getDom("content").innerHTML},getType:function(){var e=this.getDom("body").match(/edui-message-type-([\w-]+)/);return e?e[1]:""},show:function(){this.getDom().style.display="block"},hide:function(){var e=this.getDom();e&&(e.style.display="none",e.parentNode&&e.parentNode.removeChild(e))}},e.inherits(r,n)}(),function(){var e=baidu.editor.utils,t=baidu.editor.ui,n=t.Dialog;t.buttons={},t.Dialog=function(e){var t=new n(e);return t.addListener("hide",function(){if(t.editor){var e=t.editor;try{if(browser.gecko){var n=e.window.scrollY,r=e.window.scrollX;e.body.focus(),e.window.scrollTo(r,n)}else e.focus()}catch(i){}}}),t};var r={anchor:"~/dialogs/anchor/anchor.html",insertimage:"~/dialogs/image/image.html",link:"~/dialogs/link/link.html",spechars:"~/dialogs/spechars/spechars.html",searchreplace:"~/dialogs/searchreplace/searchreplace.html",map:"~/dialogs/map/map.html",gmap:"~/dialogs/gmap/gmap.html",insertvideo:"~/dialogs/video/video.html",help:"~/dialogs/help/help.html",preview:"~/dialogs/preview/preview.html",emotion:"~/dialogs/emotion/emotion.html",wordimage:"~/dialogs/wordimage/wordimage.html",attachment:"~/dialogs/attachment/attachment.html",insertframe:"~/dialogs/insertframe/insertframe.html",edittip:"~/dialogs/table/edittip.html",edittable:"~/dialogs/table/edittable.html",edittd:"~/dialogs/table/edittd.html",webapp:"~/dialogs/webapp/webapp.html",snapscreen:"~/dialogs/snapscreen/snapscreen.html",scrawl:"~/dialogs/scrawl/scrawl.html",music:"~/dialogs/music/music.html",template:"~/dialogs/template/template.html",background:"~/dialogs/background/background.html",charts:"~/dialogs/charts/charts.html"},i=["undo","redo","formatmatch","bold","italic","underline","fontborder","touppercase","tolowercase","strikethrough","subscript","superscript","source","indent","outdent","blockquote","pasteplain","pagebreak","selectall","print","horizontal","removeformat","time","date","unlink","insertparagraphbeforetable","insertrow","insertcol","mergeright","mergedown","deleterow","deletecol","splittorows","splittocols","splittocells","mergecells","deletetable","drafts"];for(var s=0,o;o=i[s++];)o=o.toLowerCase(),t[o]=function(e){return function(n){var r=new t.Button({className:"edui-for-"+e,title:n.options.labelMap[e]||n.getLang("labelMap."+e)||"",onclick:function(){n.execCommand(e)},theme:n.options.theme,showText:!1});return t.buttons[e]=r,n.addListener("selectionchange",function(t,i,s){var o=n.queryCommandState(e);o==-1?(r.setDisabled(!0),r.setChecked(!1)):s||(r.setDisabled(!1),r.setChecked(o))}),r}}(o);t.cleardoc=function(e){var n=new t.Button({className:"edui-for-cleardoc",title:e.options.labelMap.cleardoc||e.getLang("labelMap.cleardoc")||"",theme:e.options.theme,onclick:function(){confirm(e.getLang("confirmClear"))&&e.execCommand("cleardoc")}});return t.buttons.cleardoc=n,e.addListener("selectionchange",function(){n.setDisabled(e.queryCommandState("cleardoc")==-1)}),n};var u={justify:["left","right","center","justify"],imagefloat:["none","left","center","right"],directionality:["ltr","rtl"]};for(var a in u)(function(e,n){for(var r=0,i;i=n[r++];)(function(n){t[e.replace("float","")+n]=function(r){var i=new t.Button({className:"edui-for-"+e.replace("float","")+n,title:r.options.labelMap[e.replace("float","")+n]||r.getLang("labelMap."+e.replace("float","")+n)||"",theme:r.options.theme,onclick:function(){r.execCommand(e,n)}});return t.buttons[e]=i,r.addListener("selectionchange",function(t,s,o){i.setDisabled(r.queryCommandState(e)==-1),i.setChecked(r.queryCommandValue(e)==n&&!o)}),i}})(i)})(a,u[a]);for(var s=0,o;o=["backcolor","forecolor"][s++];)t[o]=function(e){return function(n){var r=new t.ColorButton({className:"edui-for-"+e,color:"default",title:n.options.labelMap[e]||n.getLang("labelMap."+e)||"",editor:n,onpickcolor:function(t,r){n.execCommand(e,r)},onpicknocolor:function(){n.execCommand(e,"default"),this.setColor("transparent"),this.color="default"},onbuttonclick:function(){n.execCommand(e,this.color)}});return t.buttons[e]=r,n.addListener("selectionchange",function(){r.setDisabled(n.queryCommandState(e)==-1)}),r}}(o);var f={noOk:["searchreplace","help","spechars","webapp","preview"],ok:["attachment","anchor","link","insertimage","map","gmap","insertframe","wordimage","insertvideo","insertframe","edittip","edittable","edittd","scrawl","template","music","background","charts"]};for(var a in f)(function(n,i){for(var s=0,o;o=i[s++];){if(browser.opera&&o==="searchreplace")continue;(function(i){t[i]=function(s,o,u){o=o||(s.options.iframeUrlMap||{})[i]||r[i],u=s.options.labelMap[i]||s.getLang("labelMap."+i)||"";var a;o&&(a=new t.Dialog(e.extend({iframeUrl:s.ui.mapUrl(o),editor:s,className:"edui-for-"+i,title:u,holdScroll:i==="insertimage",fullscreen:/charts|preview/.test(i),closeDialog:s.getLang("closeDialog")},n=="ok"?{buttons:[{className:"edui-okbutton",label:s.getLang("ok"),editor:s,onclick:function(){a.close(!0)}},{className:"edui-cancelbutton",label:s.getLang("cancel"),editor:s,onclick:function(){a.close(!1)}}]}:{})),s.ui._dialogs[i+"Dialog"]=a);var f=new t.Button({className:"edui-for-"+i,title:u,onclick:function(){if(a)switch(i){case"wordimage":var e=s.execCommand("wordimage");e&&e.length&&(a.render(),a.open());break;case"scrawl":s.queryCommandState("scrawl")!=-1&&(a.render(),a.open());break;default:a.render(),a.open()}},theme:s.options.theme,disabled:i=="scrawl"&&s.queryCommandState("scrawl")==-1||i=="charts"});return t.buttons[i]=f,s.addListener("selectionchange",function(){var e={edittable:1};if(i in e)return;var t=s.queryCommandState(i);f.getDom()&&(f.setDisabled(t==-1),f.setChecked(t))}),f}})(o.toLowerCase())}})(a,f[a]);t.snapscreen=function(e,n,i){i=e.options.labelMap.snapscreen||e.getLang("labelMap.snapscreen")||"";var s=new t.Button({className:"edui-for-snapscreen",title:i,onclick:function(){e.execCommand("snapscreen")},theme:e.options.theme});t.buttons.snapscreen=s,n=n||(e.options.iframeUrlMap||{}).snapscreen||r.snapscreen;if(n){var o=new t.Dialog({iframeUrl:e.ui.mapUrl(n),editor:e,className:"edui-for-snapscreen",title:i,buttons:[{className:"edui-okbutton",label:e.getLang("ok"),editor:e,onclick:function(){o.close(!0)}},{className:"edui-cancelbutton",label:e.getLang("cancel"),editor:e,onclick:function(){o.close(!1)}}]});o.render(),e.ui._dialogs.snapscreenDialog=o}return e.addListener("selectionchange",function(){s.setDisabled(e.queryCommandState("snapscreen")==-1)}),s},t.insertcode=function(n,r,i){r=n.options.insertcode||[],i=n.options.labelMap.insertcode||n.getLang("labelMap.insertcode")||"";var s=[];e.each(r,function(e,t){s.push({label:e,value:t,theme:n.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label" >'+(this.label||"")+"</div>"}})});var o=new t.Combox({editor:n,items:s,onselect:function(e,t){n.execCommand("insertcode",this.items[t].value)},onbuttonclick:function(){this.showPopup()},title:i,initValue:i,className:"edui-for-insertcode",indexByValue:function(e){if(e)for(var t=0,n;n=this.items[t];t++)if(n.value.indexOf(e)!=-1)return t;return-1}});return t.buttons.insertcode=o,n.addListener("selectionchange",function(e,t,r){if(!r){var s=n.queryCommandState("insertcode");if(s==-1)o.setDisabled(!0);else{o.setDisabled(!1);var u=n.queryCommandValue("insertcode");if(!u){o.setValue(i);return}u&&(u=u.replace(/['"]/g,"").split(",")[0]),o.setValue(u)}}}),o},t.fontfamily=function(n,r,i){r=n.options.fontfamily||[],i=n.options.labelMap.fontfamily||n.getLang("labelMap.fontfamily")||"";if(!r.length)return;for(var s=0,o,u=[];o=r[s];s++){var a=n.getLang("fontfamily")[o.name]||"";(function(t,r){u.push({label:t,value:r,theme:n.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label" style="font-family:'+e.unhtml(this.value)+'">'+(this.label||"")+"</div>"}})})(o.label||a,o.val)}var f=new t.Combox({editor:n,items:u,onselect:function(e,t){n.execCommand("FontFamily",this.items[t].value)},onbuttonclick:function(){this.showPopup()},title:i,initValue:i,className:"edui-for-fontfamily",indexByValue:function(e){if(e)for(var t=0,n;n=this.items[t];t++)if(n.value.indexOf(e)!=-1)return t;return-1}});return t.buttons.fontfamily=f,n.addListener("selectionchange",function(e,t,r){if(!r){var i=n.queryCommandState("FontFamily");if(i==-1)f.setDisabled(!0);else{f.setDisabled(!1);var s=n.queryCommandValue("FontFamily");s&&(s=s.replace(/['"]/g,"").split(",")[0]),f.setValue(s)}}}),f},t.fontsize=function(e,n,r){r=e.options.labelMap.fontsize||e.getLang("labelMap.fontsize")||"",n=n||e.options.fontsize||[];if(!n.length)return;var i=[];for(var s=0;s<n.length;s++){var o=n[s]+"px";i.push({label:o,value:o,theme:e.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label" style="line-height:1;font-size:'+this.value+'">'+(this.label||"")+"</div>"}})}var u=new t.Combox({editor:e,items:i,title:r,initValue:r,onselect:function(t,n){e.execCommand("FontSize",this.items[n].value)},onbuttonclick:function(){this.showPopup()},className:"edui-for-fontsize"});return t.buttons.fontsize=u,e.addListener("selectionchange",function(t,n,r){if(!r){var i=e.queryCommandState("FontSize");i==-1?u.setDisabled(!0):(u.setDisabled(!1),u.setValue(e.queryCommandValue("FontSize")))}}),u},t.paragraph=function(n,r,i){i=n.options.labelMap.paragraph||n.getLang("labelMap.paragraph")||"",r=n.options.paragraph||[];if(e.isEmptyObject(r))return;var s=[];for(var o in r)s.push({value:o,label:r[o]||n.getLang("paragraph")[o],theme:n.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label"><span class="edui-for-'+this.value+'">'+(this.label||"")+"</span></div>"}});var u=new t.Combox({editor:n,items:s,title:i,initValue:i,className:"edui-for-paragraph",onselect:function(e,t){n.execCommand("Paragraph",this.items[t].value)},onbuttonclick:function(){this.showPopup()}});return t.buttons.paragraph=u,n.addListener("selectionchange",function(e,t,r){if(!r){var i=n.queryCommandState("Paragraph");if(i==-1)u.setDisabled(!0);else{u.setDisabled(!1);var s=n.queryCommandValue("Paragraph"),o=u.indexByValue(s);o!=-1?u.setValue(s):u.setValue(u.initValue)}}}),u},t.customstyle=function(e){var n=e.options.customstyle||[],r=e.options.labelMap.customstyle||e.getLang("labelMap.customstyle")||"";if(!n.length)return;var i=e.getLang("customstyle");for(var s=0,o=[],u;u=n[s++];)(function(t){var n={};n.label=t.label?t.label:i[t.name],n.style=t.style,n.className=t.className,n.tag=t.tag,o.push({label:n.label,value:n,theme:e.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label"><'+n.tag+" "+(n.className?' class="'+n.className+'"':"")+(n.style?' style="'+n.style+'"':"")+">"+n.label+"</"+n.tag+">"+"</div>"}})})(u);var a=new t.Combox({editor:e,items:o,title:r,initValue:r,className:"edui-for-customstyle",onselect:function(t,n){e.execCommand("customstyle",this.items[n].value)},onbuttonclick:function(){this.showPopup()},indexByValue:function(e){for(var t=0,n;n=this.items[t++];)if(n.label==e)return t-1;return-1}});return t.buttons.customstyle=a,e.addListener("selectionchange",function(t,n,r){if(!r){var i=e.queryCommandState("customstyle");if(i==-1)a.setDisabled(!0);else{a.setDisabled(!1);var s=e.queryCommandValue("customstyle"),o=a.indexByValue(s);o!=-1?a.setValue(s):a.setValue(a.initValue)}}}),a},t.inserttable=function(e,n,r){r=e.options.labelMap.inserttable||e.getLang("labelMap.inserttable")||"";var i=new t.TableButton({editor:e,title:r,className:"edui-for-inserttable",onpicktable:function(t,n,r){e.execCommand("InsertTable",{numRows:r,numCols:n,border:1})},onbuttonclick:function(){this.showPopup()}});return t.buttons.inserttable=i,e.addListener("selectionchange",function(){i.setDisabled(e.queryCommandState("inserttable")==-1)}),i},t.lineheight=function(e){var n=e.options.lineheight||[];if(!n.length)return;for(var r=0,i,s=[];i=n[r++];)s.push({label:i,value:i,theme:e.options.theme,onclick:function(){e.execCommand("lineheight",this.value)}});var o=new t.MenuButton({editor:e,className:"edui-for-lineheight",title:e.options.labelMap.lineheight||e.getLang("labelMap.lineheight")||"",items:s,onbuttonclick:function(){var t=e.queryCommandValue("LineHeight")||this.value;e.execCommand("LineHeight",t)}});return t.buttons.lineheight=o,e.addListener("selectionchange",function(){var t=e.queryCommandState("LineHeight");if(t==-1)o.setDisabled(!0);else{o.setDisabled(!1);var n=e.queryCommandValue("LineHeight");n&&o.setValue((n+"").replace(/cm/,"")),o.setChecked(t)}}),o};var l=["top","bottom"];for(var c=0,h;h=l[c++];)(function(e){t["rowspacing"+e]=function(n){var r=n.options["rowspacing"+e]||[];if(!r.length)return null;for(var i=0,s,o=[];s=r[i++];)o.push({label:s,value:s,theme:n.options.theme,onclick:function(){n.execCommand("rowspacing",this.value,e)}});var u=new t.MenuButton({editor:n,className:"edui-for-rowspacing"+e,title:n.options.labelMap["rowspacing"+e]||n.getLang("labelMap.rowspacing"+e)||"",items:o,onbuttonclick:function(){var t=n.queryCommandValue("rowspacing",e)||this.value;n.execCommand("rowspacing",t,e)}});return t.buttons[e]=u,n.addListener("selectionchange",function(){var t=n.queryCommandState("rowspacing",e);if(t==-1)u.setDisabled(!0);else{u.setDisabled(!1);var r=n.queryCommandValue("rowspacing",e);r&&u.setValue((r+"").replace(/%/,"")),u.setChecked(t)}}),u}})(h);var p=["insertorderedlist","insertunorderedlist"];for(var d=0,v;v=p[d++];)(function(e){t[e]=function(n){var r=n.options[e],i=function(){n.execCommand(e,this.value)},s=[];for(var o in r)s.push({label:r[o]||n.getLang()[e][o]||"",value:o,theme:n.options.theme,onclick:i});var u=new t.MenuButton({editor:n,className:"edui-for-"+e,title:n.getLang("labelMap."+e)||"",items:s,onbuttonclick:function(){var t=n.queryCommandValue(e)||this.value;n.execCommand(e,t)}});return t.buttons[e]=u,n.addListener("selectionchange",function(){var t=n.queryCommandState(e);if(t==-1)u.setDisabled(!0);else{u.setDisabled(!1);var r=n.queryCommandValue(e);u.setValue(r),u.setChecked(t)}}),u}})(v);t.fullscreen=function(e,n){n=e.options.labelMap.fullscreen||e.getLang("labelMap.fullscreen")||"";var r=new t.Button({className:"edui-for-fullscreen",title:n,theme:e.options.theme,onclick:function(){e.ui&&e.ui.setFullScreen(!e.ui.isFullScreen()),this.setChecked(e.ui.isFullScreen())}});return t.buttons.fullscreen=r,e.addListener("selectionchange",function(){var t=e.queryCommandState("fullscreen");r.setDisabled(t==-1),r.setChecked(e.ui.isFullScreen())}),r},t.emotion=function(e,n){var i="emotion",s=new t.MultiMenuPop({title:e.options.labelMap[i]||e.getLang("labelMap."+i+"")||"",editor:e,className:"edui-for-"+i,iframeUrl:e.ui.mapUrl(n||(e.options.iframeUrlMap||{})[i]||r[i])});return t.buttons[i]=s,e.addListener("selectionchange",function(){s.setDisabled(e.queryCommandState(i)==-1)}),s},t.autotypeset=function(e){var n=new t.AutoTypeSetButton({editor:e,title:e.options.labelMap.autotypeset||e.getLang("labelMap.autotypeset")||"",className:"edui-for-autotypeset",onbuttonclick:function(){e.execCommand("autotypeset")}});return t.buttons.autotypeset=n,e.addListener("selectionchange",function(){n.setDisabled(e.queryCommandState("autotypeset")==-1)}),n},t.simpleupload=function(e){var n="simpleupload",r=new t.Button({className:"edui-for-"+n,title:e.options.labelMap[n]||e.getLang("labelMap."+n)||"",onclick:function(){},theme:e.options.theme,showText:!1});return t.buttons[n]=r,e.addListener("ready",function(){var t=r.getDom("body"),n=t.children[0];e.fireEvent("simpleuploadbtnready",n)}),e.addListener("selectionchange",function(t,i,s){var o=e.queryCommandState(n);o==-1?(r.setDisabled(!0),r.setChecked(!1)):s||(r.setDisabled(!1),r.setChecked(o))}),r}}(),function(){function s(e){this.initOptions(e),this.initEditorUI()}var e=baidu.editor.utils,t=baidu.editor.ui.uiUtils,n=baidu.editor.ui.UIBase,r=baidu.editor.dom.domUtils,i=[];s.prototype={uiName:"editor",initEditorUI:function(){function o(e,t){e.setOpt({wordCount:!0,maximumWords:1e4,wordCountMsg:e.options.wordCountMsg||e.getLang("wordCountMsg"),wordOverFlowMsg:e.options.wordOverFlowMsg||e.getLang("wordOverFlowMsg")});var n=e.options,r=n.maximumWords,i=n.wordCountMsg,s=n.wordOverFlowMsg,o=t.getDom("wordcount");if(!n.wordCount)return;var u=e.getContentLength(!0);u>r?(o.innerHTML=s,e.fireEvent("wordcountoverflow")):o.innerHTML=i.replace("{#leave}",r-u).replace("{#count}",u)}this.editor.ui=this,this._dialogs={},this.initUIBase(),this._initToolbars();var e=this.editor,t=this;e.addListener("ready",function(){e.getDialog=function(t){return e.ui._dialogs[t+"Dialog"]},r.on(e.window,"scroll",function(e){baidu.editor.ui.Popup.postHide(e)}),e.ui._actualFrameWidth=e.options.initialFrameWidth,UE.browser.ie&&UE.browser.version===6&&e.container.ownerDocument.execCommand("BackgroundImageCache",!1,!0),e.options.elementPathEnabled&&(e.ui.getDom("elementpath").innerHTML='<div class="edui-editor-breadcrumb">'+e.getLang("elementPathTip")+":</div>");if(e.options.wordCount){function n(){o(e,t),r.un(e.document,"click",arguments.callee)}r.on(e.document,"click",n),e.ui.getDom("wordcount").innerHTML=e.getLang("wordCountTip")}e.ui._scale(),e.options.scaleEnabled?(e.autoHeightEnabled&&e.disableAutoHeight(),t.enableScale()):t.disableScale(),!e.options.elementPathEnabled&&!e.options.wordCount&&!e.options.scaleEnabled&&(e.ui.getDom("elementpath").style.display="none",e.ui.getDom("wordcount").style.display="none",e.ui.getDom("scale").style.display="none");if(!e.selection.isFocus())return;e.fireEvent("selectionchange",!1,!0)}),e.addListener("mousedown",function(e,t){var n=t.target||t.srcElement;baidu.editor.ui.Popup.postHide(t,n),baidu.editor.ui.ShortCutMenu.postHide(t)}),e.addListener("delcells",function(){UE.ui.edittip&&new UE.ui.edittip(e),e.getDialog("edittip").open()});var n,i=!1,s;e.addListener("afterpaste",function(){if(e.queryCommandState("pasteplain"))return;baidu.editor.ui.PastePicker&&(n=new baidu.editor.ui.Popup({content:new baidu.editor.ui.PastePicker({editor:e}),editor:e,className:"edui-wordpastepop"}),n.render()),i=!0}),e.addListener("afterinserthtml",function(){clearTimeout(s),s=setTimeout(function(){if(n&&(i||e.ui._isTransfer)){if(n.isHidden()){var t=r.createElement(e.document,"span",{style:"line-height:0px;",innerHTML:"ï»¿"}),s=e.selection.getRange();s.insertNode(t);var o=getDomNode(t,"firstChild","previousSibling");o&&n.showAnchor(o.nodeType==3?o.parentNode:o),r.remove(t)}else n.show();delete e.ui._isTransfer,i=!1}},200)}),e.addListener("contextmenu",function(e,t){baidu.editor.ui.Popup.postHide(t)}),e.addListener("keydown",function(e,t){n&&n.dispose(t);var r=t.keyCode||t.which;t.altKey&&r==90&&UE.ui.buttons.fullscreen.onclick()}),e.addListener("wordcount",function(e){o(this,t)}),e.addListener("selectionchange",function(){e.options.elementPathEnabled&&t[(e.queryCommandState("elementpath")==-1?"dis":"en")+"ableElementPath"](),e.options.scaleEnabled&&t[(e.queryCommandState("scale")==-1?"dis":"en")+"ableScale"]()});var u=new baidu.editor.ui.Popup({editor:e,content:"",className:"edui-bubble",_onEditButtonClick:function(){this.hide(),e.ui._dialogs.linkDialog.open()},_onImgEditButtonClick:function(t){this.hide(),e.ui._dialogs[t]&&e.ui._dialogs[t].open()},_onImgSetFloat:function(t){this.hide(),e.execCommand("imagefloat",t)},_setIframeAlign:function(e){var t=u.anchorEl,n=t.cloneNode(!0);switch(e){case-2:n.setAttribute("align","");break;case-1:n.setAttribute("align","left");break;case 1:n.setAttribute("align","right")}t.parentNode.insertBefore(n,t),r.remove(t),u.anchorEl=n,u.showAnchor(u.anchorEl)},_updateIframe:function(){var t=e._iframe=u.anchorEl;r.hasClass(t,"ueditor_baidumap")?(e.selection.getRange().selectNode(t).select(),e.ui._dialogs.mapDialog.open(),u.hide()):(e.ui._dialogs.insertframeDialog.open(),u.hide())},_onRemoveButtonClick:function(t){e.execCommand(t),this.hide()},queryAutoHide:function(t){if(t&&t.ownerDocument==e.document)if(t.tagName.toLowerCase()=="img"||r.findParentByTagName(t,"a",!0))return t!==u.anchorEl;return baidu.editor.ui.Popup.prototype.queryAutoHide.call(this,t)}});u.render(),e.options.imagePopup&&(e.addListener("mouseover",function(t,n){n=n||window.event;var r=n.target||n.srcElement;if(e.ui._dialogs.insertframeDialog&&/iframe/ig.test(r.tagName)){var i=u.formatHtml("<nobr>"+e.getLang("property")+': <span onclick=$$._setIframeAlign(-2) class="edui-clickable">'+e.getLang("default")+'</span>&nbsp;&nbsp;<span onclick=$$._setIframeAlign(-1) class="edui-clickable">'+e.getLang("justifyleft")+'</span>&nbsp;&nbsp;<span onclick=$$._setIframeAlign(1) class="edui-clickable">'+e.getLang("justifyright")+"</span>&nbsp;&nbsp;"+' <span onclick="$$._updateIframe( this);" class="edui-clickable">'+e.getLang("modify")+"</span></nobr>");i?(u.getDom("content").innerHTML=i,u.anchorEl=r,u.showAnchor(u.anchorEl)):u.hide()}}),e.addListener("selectionchange",function(t,n){if(!n)return;var i="",s="",o=e.selection.getRange().getClosedNode(),a=e.ui._dialogs;if(o&&o.tagName=="IMG"){var f="insertimageDialog";if(o.className.indexOf("edui-faked-video")!=-1||o.className.indexOf("edui-upload-video")!=-1)f="insertvideoDialog";o.className.indexOf("edui-faked-webapp")!=-1&&(f="webappDialog"),o.src.indexOf("http://api.map.baidu.com")!=-1&&(f="mapDialog"),o.className.indexOf("edui-faked-music")!=-1&&(f="musicDialog"),o.src.indexOf("http://maps.google.com/maps/api/staticmap")!=-1&&(f="gmapDialog"),o.getAttribute("anchorname")&&(f="anchorDialog",i=u.formatHtml("<nobr>"+e.getLang("property")+': <span onclick=$$._onImgEditButtonClick("anchorDialog") class="edui-clickable">'+e.getLang("modify")+"</span>&nbsp;&nbsp;"+"<span onclick=$$._onRemoveButtonClick('anchor') class=\"edui-clickable\">"+e.getLang("delete")+"</span></nobr>")),o.getAttribute("word_img")&&(e.word_img=[o.getAttribute("word_img")],f="wordimageDialog");if(r.hasClass(o,"loadingclass")||r.hasClass(o,"loaderrorclass"))f="";if(!a[f])return;s="<nobr>"+e.getLang("property")+": "+'<span onclick=$$._onImgSetFloat("none") class="edui-clickable">'+e.getLang("default")+"</span>&nbsp;&nbsp;"+'<span onclick=$$._onImgSetFloat("left") class="edui-clickable">'+e.getLang("justifyleft")+"</span>&nbsp;&nbsp;"+'<span onclick=$$._onImgSetFloat("right") class="edui-clickable">'+e.getLang("justifyright")+"</span>&nbsp;&nbsp;"+'<span onclick=$$._onImgSetFloat("center") class="edui-clickable">'+e.getLang("justifycenter")+"</span>&nbsp;&nbsp;"+"<span onclick=\"$$._onImgEditButtonClick('"+f+'\');" class="edui-clickable">'+e.getLang("modify")+"</span></nobr>",!i&&(i=u.formatHtml(s))}if(e.ui._dialogs.linkDialog){var l=e.queryCommandValue("link"),c;if(l&&(c=l.getAttribute("_href")||l.getAttribute("href",2))){var h=c;c.length>30&&(h=c.substring(0,20)+"..."),i&&(i+='<div style="height:5px;"></div>'),i+=u.formatHtml("<nobr>"+e.getLang("anthorMsg")+': <a target="_blank" href="'+c+'" title="'+c+'" >'+h+"</a>"+' <span class="edui-clickable" onclick="$$._onEditButtonClick();">'+e.getLang("modify")+"</span>"+' <span class="edui-clickable" onclick="$$._onRemoveButtonClick(\'unlink\');"> '+e.getLang("clear")+"</span></nobr>"),u.showAnchor(l)}}i?(u.getDom("content").innerHTML=i,u.anchorEl=o||l,u.showAnchor(u.anchorEl)):u.hide()}))},_initToolbars:function(){var t=this.editor,n=this.toolbars||[],r=[];for(var i=0;i<n.length;i++){var s=n[i],o=new baidu.editor.ui.Toolbar({theme:t.options.theme});for(var u=0;u<s.length;u++){var a=s[u],f=null;if(typeof a=="string"){a=a.toLowerCase(),a=="|"&&(a="Separator"),a=="||"&&(a="Breakline"),baidu.editor.ui[a]&&(f=new baidu.editor.ui[a](t));if(a=="fullscreen"){r&&r[0]?r[0].items.splice(0,0,f):f&&o.items.splice(0,0,f);continue}}else f=a;f&&f.id&&o.add(f)}r[i]=o}e.each(UE._customizeUI,function(e,n){var r,i;if(e.id&&e.id!=t.key)return!1;r=e.execFn.call(t,t,n),r&&(i=e.index,i===undefined&&(i=o.items.length),o.add(r,i))}),this.toolbars=r},getHtmlTpl:function(){return'<div id="##" class="%%"><div id="##_toolbarbox" class="%%-toolbarbox">'+(this.toolbars.length?'<div id="##_toolbarboxouter" class="%%-toolbarboxouter"><div class="%%-toolbarboxinner">'+this.renderToolbarBoxHtml()+"</div></div>":"")+'<div id="##_toolbarmsg" class="%%-toolbarmsg" style="display:none;">'+'<div id = "##_upload_dialog" class="%%-toolbarmsg-upload" onclick="$$.showWordImageDialog();">'+this.editor.getLang("clickToUpload")+"</div>"+'<div class="%%-toolbarmsg-close" onclick="$$.hideToolbarMsg();">x</div>'+'<div id="##_toolbarmsg_label" class="%%-toolbarmsg-label"></div>'+'<div style="height:0;overflow:hidden;clear:both;"></div>'+"</div>"+'<div id="##_message_holder" class="%%-messageholder"></div>'+"</div>"+'<div id="##_iframeholder" class="%%-iframeholder">'+"</div>"+'<div id="##_bottombar" class="%%-bottomContainer"><table><tr>'+'<td id="##_elementpath" class="%%-bottombar"></td>'+'<td id="##_wordcount" class="%%-wordcount"></td>'+'<td id="##_scale" class="%%-scale"><div class="%%-icon"></div></td>'+"</tr></table></div>"+'<div id="##_scalelayer"></div>'+"</div>"},showWordImageDialog:function(){this._dialogs.wordimageDialog.open()},renderToolbarBoxHtml:function(){var e=[];for(var t=0;t<this.toolbars.length;t++)e.push(this.toolbars[t].renderHtml());return e.join("")},setFullScreen:function(e){var t=this.editor,n=t.container.parentNode.parentNode;if(this._fullscreen!=e){this._fullscreen=e,this.editor.fireEvent("beforefullscreenchange",e);if(baidu.editor.browser.gecko)var r=t.selection.getRange().createBookmark();if(e){while(n.tagName!="BODY"){var s=baidu.editor.dom.domUtils.getComputedStyle(n,"position");i.push(s),n.style.position="static",n=n.parentNode}this._bakHtmlOverflow=document.documentElement.style.overflow,this._bakBodyOverflow=document.body.style.overflow,this._bakAutoHeight=this.editor.autoHeightEnabled,this._bakScrollTop=Math.max(document.documentElement.scrollTop,document.body.scrollTop),this._bakEditorContaninerWidth=t.iframe.parentNode.offsetWidth,this._bakAutoHeight&&(t.autoHeightEnabled=!1,this.editor.disableAutoHeight()),document.documentElement.style.overflow="hidden",window.scrollTo(0,window.scrollY),this._bakCssText=this.getDom().style.cssText,this._bakCssText1=this.getDom("iframeholder").style.cssText,t.iframe.parentNode.style.width="",this._updateFullScreen()}else{while(n.tagName!="BODY")n.style.position=i.shift(),n=n.parentNode;this.getDom().style.cssText=this._bakCssText,this.getDom("iframeholder").style.cssText=this._bakCssText1,this._bakAutoHeight&&(t.autoHeightEnabled=!0,this.editor.enableAutoHeight()),document.documentElement.style.overflow=this._bakHtmlOverflow,document.body.style.overflow=this._bakBodyOverflow,t.iframe.parentNode.style.width=this._bakEditorContaninerWidth+"px",window.scrollTo(0,this._bakScrollTop)}if(browser.gecko&&t.body.contentEditable==="true"){var o=document.createElement("input");document.body.appendChild(o),t.body.contentEditable=!1,setTimeout(function(){o.focus(),setTimeout(function(){t.body.contentEditable=!0,t.fireEvent("fullscreenchanged",e),t.selection.getRange().moveToBookmark(r).select(!0),baidu.editor.dom.domUtils.remove(o),e&&window.scroll(0,0)},0)},0)}t.body.contentEditable==="true"&&(this.editor.fireEvent("fullscreenchanged",e),this.triggerLayout())}},_updateFullScreen:function(){if(this._fullscreen){var e=t.getViewportRect();this.getDom().style.cssText="border:0;position:absolute;left:0;top:"+(this.editor.options.topOffset||0)+"px;width:"+e.width+"px;height:"+e.height+"px;z-index:"+(this.getDom().style.zIndex*1+100),t.setViewportOffset(this.getDom(),{left:0,top:this.editor.options.topOffset||0}),this.editor.setHeight(e.height-this.getDom("toolbarbox").offsetHeight-this.getDom("bottombar").offsetHeight-(this.editor.options.topOffset||0),!0);if(browser.gecko)try{window.onresize()}catch(n){}}},_updateElementPath:function(){var e=this.getDom("elementpath"),t;if(this.elementPathEnabled&&(t=this.editor.queryCommandValue("elementpath"))){var n=[];for(var r=0,i;i=t[r];r++)n[r]=this.formatHtml('<span unselectable="on" onclick="$$.editor.execCommand(&quot;elementpath&quot;, &quot;'+r+'&quot;);">'+i+"</span>");e.innerHTML='<div class="edui-editor-breadcrumb" onmousedown="return false;">'+this.editor.getLang("elementPathTip")+": "+n.join(" &gt; ")+"</div>"}else e.style.display="none"},disableElementPath:function(){var e=this.getDom("elementpath");e.innerHTML="",e.style.display="none",this.elementPathEnabled=!1},enableElementPath:function(){var e=this.getDom("elementpath");e.style.display="",this.elementPathEnabled=!0,this._updateElementPath()},_scale:function(){function g(){l=r.getXY(n),c||(c=t.options.minFrameHeight+s.offsetHeight+o.offsetHeight),a.style.cssText="position:absolute;left:0;display:;top:0;background-color:#41ABFF;opacity:0.4;filter: Alpha(opacity=40);width:"+n.offsetWidth+"px;height:"+n.offsetHeight+"px;z-index:"+(t.options.zIndex+1),r.on(e,"mousemove",b),r.on(i,"mouseup",w),r.on(e,"mouseup",w)}function b(t){E();var n=t||window.event;p=n.pageX||e.documentElement.scrollLeft+n.clientX,d=n.pageY||e.documentElement.scrollTop+n.clientY,v=p-l.x,m=d-l.y,v>=h&&(f=!0,a.style.width=v+"px"),m>=c&&(f=!0,a.style.height=m+"px")}function w(){f&&(f=!1,t.ui._actualFrameWidth=a.offsetWidth-2,n.style.width=t.ui._actualFrameWidth+"px",t.setHeight(a.offsetHeight-o.offsetHeight-s.offsetHeight-2,!0)),a&&(a.style.display="none"),E(),r.un(e,"mousemove",b),r.un(i,"mouseup",w),r.un(e,"mouseup",w)}function E(){browser.ie?e.selection.clear():window.getSelection().removeAllRanges()}var e=document,t=this.editor,n=t.container,i=t.document,s=this.getDom("toolbarbox"),o=this.getDom("bottombar"),u=this.getDom("scale"),a=this.getDom("scalelayer"),f=!1,l=null,c=0,h=t.options.minFrameWidth,p=0,d=0,v=0,m=0,y=this;this.editor.addListener("fullscreenchanged",function(e,t){if(t)y.disableScale();else if(y.editor.options.scaleEnabled){y.enableScale();var n=y.editor.document.createElement("span");y.editor.body.appendChild(n),y.editor.body.style.height=Math.max(r.getXY(n).y,y.editor.iframe.offsetHeight-20)+"px",r.remove(n)}}),this.enableScale=function(){if(t.queryCommandState("source")==1)return;u.style.display="",this.scaleEnabled=!0,r.on(u,"mousedown",g)},this.disableScale=function(){u.style.display="none",this.scaleEnabled=!1,r.un(u,"mousedown",g)}},isFullScreen:function(){return this._fullscreen},postRender:function(){n.prototype.postRender.call(this);for(var e=0;e<this.toolbars.length;e++)this.toolbars[e].postRender();var t=this,r,i=baidu.editor.dom.domUtils,s=function(){clearTimeout(r),r=setTimeout(function(){t._updateFullScreen()})};i.on(window,"resize",s),t.addListener("destroy",function(){i.un(window,"resize",s),clearTimeout(r)})},showToolbarMsg:function(e,t){this.getDom("toolbarmsg_label").innerHTML=e,this.getDom("toolbarmsg").style.display="";if(!t){var n=this.getDom("upload_dialog");n.style.display="none"}},hideToolbarMsg:function(){this.getDom("toolbarmsg").style.display="none"},mapUrl:function(e){return e?e.replace("~/",this.editor.options.UEDITOR_HOME_URL||""):""},triggerLayout:function(){var e=this.getDom();e.style.zoom=="1"?e.style.zoom="100%":e.style.zoom="1"}},e.inherits(s,baidu.editor.ui.UIBase);var o={};UE.ui.Editor=function(t){var n=new UE.Editor(t);n.options.editor=n,e.loadFile(document,{href:n.options.themePath+n.options.theme+"/css/ueditor.css",tag:"link",type:"text/css",rel:"stylesheet"});var i=n.render;return n.render=function(t){t.constructor===String&&(n.key=t,o[t]=n),e.domReady(function(){function e(){n.setOpt({labelMap:n.options.labelMap||n.getLang("labelMap")}),new s(n.options);if(t){t.constructor===String&&(t=document.getElementById(t)),t&&t.getAttribute("name")&&(n.options.textarea=t.getAttribute("name"));if(t&&/script|textarea/ig.test(t.tagName)){var e=document.createElement("div");t.parentNode.insertBefore(e,t);var o=t.value||t.innerHTML;n.options.initialContent=/^[\t\r\n ]*$/.test(o)?n.options.initialContent:o.replace(/>[\n\r\t]+([ ]{4})+/g,">").replace(/[\n\r\t]+([ ]{4})+</g,"<").replace(/>[\n\r\t]+</g,"><"),t.className&&(e.className=t.className),t.style.cssText&&(e.style.cssText=t.style.cssText),/textarea/i.test(t.tagName)?(n.textarea=t,n.textarea.style.display="none"):t.parentNode.removeChild(t),t.id&&(e.id=t.id,r.removeAttributes(t,"id")),t=e,t.innerHTML=""}}r.addClass(t,"edui-"+n.options.theme),n.ui.render(t);var u=n.options;n.container=n.ui.getDom();var a=r.findParents(t,!0),f=[];for(var l=0,c;c=a[l];l++)f[l]=c.style.display,c.style.display="block";if(u.initialFrameWidth)u.minFrameWidth=u.initialFrameWidth;else{u.minFrameWidth=u.initialFrameWidth=t.offsetWidth;var h=t.style.width;/%$/.test(h)&&(u.initialFrameWidth=h)}u.initialFrameHeight?u.minFrameHeight=u.initialFrameHeight:u.initialFrameHeight=u.minFrameHeight=t.offsetHeight;for(var l=0,c;c=a[l];l++)c.style.display=f[l];t.style.height&&(t.style.height=""),n.container.style.width=u.initialFrameWidth+(/%$/.test(u.initialFrameWidth)?"":"px"),n.container.style.zIndex=u.zIndex,i.call(n,n.ui.getDom("iframeholder")),n.fireEvent("afteruiready")}n.langIsReady?e():n.addListener("langReady",e)})},n},UE.getEditor=function(e,t){var n=o[e];return n||(n=o[e]=new UE.ui.Editor(t),n.render(e)),n},UE.delEditor=function(e){var t;if(t=o[e])t.key&&t.destroy(),delete o[e]},UE.registerUI=function(t,n,r,i){e.each(t.split(/\s+/),function(e){UE._customizeUI[e]={id:i,execFn:n,index:r}})}}(),UE.registerUI("message",function(e){function o(){var e=s.ui.getDom("toolbarbox");e&&(r.style.top=e.offsetHeight+3+"px"),r.style.zIndex=Math.max(s.options.zIndex,s.iframe.style.zIndex)+1}var t=baidu.editor.ui,n=t.Message,r,i=[],s=e;s.addListener("ready",function(){r=document.getElementById(s.ui.id+"_message_holder"),o(),setTimeout(function(){o()},500)}),s.addListener("showmessage",function(e,t){t=utils.isString(t)?{content:t}:t;var u=new n({timeout:t.timeout,type:t.type,content:t.content,keepshow:t.keepshow,editor:s}),a=t.id||"msg_"+(+(new Date)).toString(36);return u.render(r),i[a]=u,u.reset(t),o(),a}),s.addListener("updatemessage",function(e,t,n){n=utils.isString(n)?{content:n}:n;var s=i[t];s.render(r),s&&s.reset(n)}),s.addListener("hidemessage",function(e,t){var n=i[t];n&&n.hide()})}),UE.registerUI("autosave",function(e){var t=null,n=null;e.on("afterautosave",function(){clearTimeout(t),t=setTimeout(function(){n&&e.trigger("hidemessage",n),n=e.trigger("showmessage",{content:e.getLang("autosave.success"),timeout:2e3})},2e3)})})}(),define("ueditorall",["jquery","ueditorconfig"],function(){}),function(e,t,n,r){var i=e(t);e.fn.lazyload=function(s){function f(){var t=0;o.each(function(){var n=e(this);if(a.skip_invisible&&!n.is(":visible"))return;if(!e.abovethetop(this,a)&&!e.leftofbegin(this,a))if(!e.belowthefold(this,a)&&!e.rightoffold(this,a))n.trigger("appear"),t=0;else if(++t>a.failure_limit)return!1})}var o=this,u,a={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:t,data_attribute:"original",skip_invisible:!0,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return s&&(r!==s.failurelimit&&(s.failure_limit=s.failurelimit,delete s.failurelimit),r!==s.effectspeed&&(s.effect_speed=s.effectspeed,delete s.effectspeed),e.extend(a,s)),u=a.container===r||a.container===t?i:e(a.container),0===a.event.indexOf("scroll")&&u.bind(a.event,function(){return f()}),this.each(function(){var t=this,n=e(t);t.loaded=!1,(n.attr("src")===r||n.attr("src")===!1)&&n.is("img")&&n.attr("src",a.placeholder),n.one("appear",function(){if(!this.loaded){if(a.appear){var r=o.length;a.appear.call(t,r,a)}e("<img />").bind("load",function(){var r=n.attr("data-"+a.data_attribute);n.hide(),n.is("img")?n.attr("src",r):n.css("background-image","url('"+r+"')"),n[a.effect](a.effect_speed),t.loaded=!0;var i=e.grep(o,function(e){return!e.loaded});o=e(i);if(a.load){var s=o.length;a.load.call(t,s,a)}}).attr("src",n.attr("data-"+a.data_attribute))}}),0!==a.event.indexOf("scroll")&&n.bind(a.event,function(){t.loaded||n.trigger("appear")})}),i.bind("resize",function(){f()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&i.bind("pageshow",function(t){t.originalEvent&&t.originalEvent.persisted&&o.each(function(){e(this).trigger("appear")})}),e(n).ready(function(){f()}),this},e.belowthefold=function(n,s){var o;return s.container===r||s.container===t?o=(t.innerHeight?t.innerHeight:i.height())+i.scrollTop():o=e(s.container).offset().top+e(s.container).height(),o<=e(n).offset().top-s.threshold},e.rightoffold=function(n,s){var o;return s.container===r||s.container===t?o=i.width()+i.scrollLeft():o=e(s.container).offset().left+e(s.container).width(),o<=e(n).offset().left-s.threshold},e.abovethetop=function(n,s){var o;return s.container===r||s.container===t?o=i.scrollTop():o=e(s.container).offset().top,o>=e(n).offset().top+s.threshold+e(n).height()},e.leftofbegin=function(n,s){var o;return s.container===r||s.container===t?o=i.scrollLeft():o=e(s.container).offset().left,o>=e(n).offset().left+s.threshold+e(n).width()},e.inviewport=function(t,n){return!e.rightoffold(t,n)&&!e.leftofbegin(t,n)&&!e.belowthefold(t,n)&&!e.abovethetop(t,n)},e.extend(e.expr[":"],{"below-the-fold":function(t){return e.belowthefold(t,{threshold:0})},"above-the-top":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-screen":function(t){return e.rightoffold(t,{threshold:0})},"left-of-screen":function(t){return!e.rightoffold(t,{threshold:0})},"in-viewport":function(t){return e.inviewport(t,{threshold:0})},"above-the-fold":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-fold":function(t){return e.rightoffold(t,{threshold:0})},"left-of-fold":function(t){return!e.rightoffold(t,{threshold:0})}})}(jQuery,window,document),define("lazyload",["jquery"],function(e){return function(){var t,n;return t||e.jQuery.fn.lazyload}}(this));if(typeof __head_flag=="undefined"){var cookieDomain=window.location.hostname.split(".").slice(-2).join("."),__permanent_hash_key="7856a9943c5cb6b9947e8b1f3fdecdf3",Md5Util={hexcase:0,b64pad:"",chrsz:8,binl2hex:function(e){var t=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",n="";for(var r=0;r<e.length*4;r++)n+=t.charAt(e[r>>2]>>r%4*8+4&15)+t.charAt(e[r>>2]>>r%4*8&15);return n},core_md5:function(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;var n=1732584193,r=-271733879,i=-1732584194,s=271733878;for(var o=0;o<e.length;o+=16){var u=n,a=r,f=i,l=s;n=this.md5_ff(n,r,i,s,e[o+0],7,-680876936),s=this.md5_ff(s,n,r,i,e[o+1],12,-389564586),i=this.md5_ff(i,s,n,r,e[o+2],17,606105819),r=this.md5_ff(r,i,s,n,e[o+3],22,-1044525330),n=this.md5_ff(n,r,i,s,e[o+4],7,-176418897),s=this.md5_ff(s,n,r,i,e[o+5],12,1200080426),i=this.md5_ff(i,s,n,r,e[o+6],17,-1473231341),r=this.md5_ff(r,i,s,n,e[o+7],22,-45705983),n=this.md5_ff(n,r,i,s,e[o+8],7,1770035416),s=this.md5_ff(s,n,r,i,e[o+9],12,-1958414417),i=this.md5_ff(i,s,n,r,e[o+10],17,-42063),r=this.md5_ff(r,i,s,n,e[o+11],22,-1990404162),n=this.md5_ff(n,r,i,s,e[o+12],7,1804603682),s=this.md5_ff(s,n,r,i,e[o+13],12,-40341101),i=this.md5_ff(i,s,n,r,e[o+14],17,-1502002290),r=this.md5_ff(r,i,s,n,e[o+15],22,1236535329),n=this.md5_gg(n,r,i,s,e[o+1],5,-165796510),s=this.md5_gg(s,n,r,i,e[o+6],9,-1069501632),i=this.md5_gg(i,s,n,r,e[o+11],14,643717713),r=this.md5_gg(r,i,s,n,e[o+0],20,-373897302),n=this.md5_gg(n,r,i,s,e[o+5],5,-701558691),s=this.md5_gg(s,n,r,i,e[o+10],9,38016083),i=this.md5_gg(i,s,n,r,e[o+15],14,-660478335),r=this.md5_gg(r,i,s,n,e[o+4],20,-405537848),n=this.md5_gg(n,r,i,s,e[o+9],5,568446438),s=this.md5_gg(s,n,r,i,e[o+14],9,-1019803690),i=this.md5_gg(i,s,n,r,e[o+3],14,-187363961),r=this.md5_gg(r,i,s,n,e[o+8],20,1163531501),n=this.md5_gg(n,r,i,s,e[o+13],5,-1444681467),s=this.md5_gg(s,n,r,i,e[o+2],9,-51403784),i=this.md5_gg(i,s,n,r,e[o+7],14,1735328473),r=this.md5_gg(r,i,s,n,e[o+12],20,-1926607734),n=this.md5_hh(n,r,i,s,e[o+5],4,-378558),s=this.md5_hh(s,n,r,i,e[o+8],11,-2022574463),i=this.md5_hh(i,s,n,r,e[o+11],16,1839030562),r=this.md5_hh(r,i,s,n,e[o+14],23,-35309556),n=this.md5_hh(n,r,i,s,e[o+1],4,-1530992060),s=this.md5_hh(s,n,r,i,e[o+4],11,1272893353),i=this.md5_hh(i,s,n,r,e[o+7],16,-155497632),r=this.md5_hh(r,i,s,n,e[o+10],23,-1094730640),n=this.md5_hh(n,r,i,s,e[o+13],4,681279174),s=this.md5_hh(s,n,r,i,e[o+0],11,-358537222),i=this.md5_hh(i,s,n,r,e[o+3],16,-722521979),r=this.md5_hh(r,i,s,n,e[o+6],23,76029189),n=this.md5_hh(n,r,i,s,e[o+9],4,-640364487),s=this.md5_hh(s,n,r,i,e[o+12],11,-421815835),i=this.md5_hh(i,s,n,r,e[o+15],16,530742520),r=this.md5_hh(r,i,s,n,e[o+2],23,-995338651),n=this.md5_ii(n,r,i,s,e[o+0],6,-198630844),s=this.md5_ii(s,n,r,i,e[o+7],10,1126891415),i=this.md5_ii(i,s,n,r,e[o+14],15,-1416354905),r=this.md5_ii(r,i,s,n,e[o+5],21,-57434055),n=this.md5_ii(n,r,i,s,e[o+12],6,1700485571),s=this.md5_ii(s,n,r,i,e[o+3],10,-1894986606),i=this.md5_ii(i,s,n,r,e[o+10],15,-1051523),r=this.md5_ii(r,i,s,n,e[o+1],21,-2054922799),n=this.md5_ii(n,r,i,s,e[o+8],6,1873313359),s=this.md5_ii(s,n,r,i,e[o+15],10,-30611744),i=this.md5_ii(i,s,n,r,e[o+6],15,-1560198380),r=this.md5_ii(r,i,s,n,e[o+13],21,1309151649),n=this.md5_ii(n,r,i,s,e[o+4],6,-145523070),s=this.md5_ii(s,n,r,i,e[o+11],10,-1120210379),i=this.md5_ii(i,s,n,r,e[o+2],15,718787259),r=this.md5_ii(r,i,s,n,e[o+9],21,-343485551),n=this.safe_add(n,u),r=this.safe_add(r,a),i=this.safe_add(i,f),s=this.safe_add(s,l)}return Array(n,r,i,s)},md5_cmn:function(e,t,n,r,i,s){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(t,e),this.safe_add(r,s)),i),n)},md5_ff:function(e,t,n,r,i,s,o){return this.md5_cmn(t&n|~t&r,e,t,i,s,o)},md5_gg:function(e,t,n,r,i,s,o){return this.md5_cmn(t&r|n&~r,e,t,i,s,o)},md5_hh:function(e,t,n,r,i,s,o){return this.md5_cmn(t^n^r,e,t,i,s,o)},md5_ii:function(e,t,n,r,i,s,o){return this.md5_cmn(n^(t|~r),e,t,i,s,o)},str2binl:function(e){var t=Array(),n=(1<<this.chrsz)-1;for(var r=0;r<e.length*this.chrsz;r+=this.chrsz)t[r>>5]|=(e.charCodeAt(r/this.chrsz)&n)<<r%32;return t},safe_add:function(e,t){var n=(e&65535)+(t&65535),r=(e>>16)+(t>>16)+(n>>16);return r<<16|n&65535},bit_rol:function(e,t){return e<<t|e>>>32-t},hex_md5:function(e){return this.binl2hex(this.core_md5(this.str2binl(e),e.length*this.chrsz))}},CookieUtil={get:function(e){var t=encodeURIComponent(e)+"=",n=document.cookie.indexOf(t),r="";if(n>-1){var i=document.cookie.indexOf(";",n);i==-1&&(i=document.cookie.length),r=decodeURIComponent(document.cookie.substring(n+t.length,i))}return r},set:function(e,t,n,r,i,s){var o=encodeURIComponent(e)+"="+encodeURIComponent(t);n instanceof Date&&(o+="; expires="+n.toGMTString()),r&&(o+="; path="+r),i&&(o+="; domain="+i),s&&(o+="; secure"),document.cookie=o},unset:function(e,t,n,r){this.set(e,"",new Date(0),t,n,r)}},__permanentFunctions={createPermanentID:function(){var e=new Date,t=e.getFullYear()+"",n=e.getMonth()+1;n<10&&(n="0"+n);var r=e.getDate();r<10&&(r="0"+r);var i=e.getHours();i<10&&(i="0"+i);var s=e.getMinutes();s<10&&(s="0"+s);var o=e.getSeconds();o<10&&(o="0"+o);var u="00"+e.getMilliseconds();u=u.substr(u.length-3,3);var a=Math.floor(1e5+Math.random()*9e5),f=Math.floor(1e5+Math.random()*9e5),l=t+n+r+i+s+o+u+a+f+__permanent_hash_key,c=Md5Util.hex_md5(l);return c=this.formatHashCode(c),t+n+r+i+s+o+u+c+a+f},formatHashCode:function(e){var t=parseInt(e.substr(0,8),16),n=String(t).substr(0,6),r=n.length;return r<6&&(n+=this.str_repeat("0",Math.abs(6-r))),n},str_repeat:function(e,t){return(new Array(t+1)).join(e)},initTime:function(){var e=new Date;return e.getTime()},init:function(){this.permanent_id=CookieUtil.get("__permanent_id");if(typeof this.permanent_id=="undefined"||!/^\d{35}$/.test(this.permanent_id)){var e=new Date(2020,1,1);this.permanent_id=this.createPermanentID(),CookieUtil.set("__permanent_id",this.permanent_id,e,"/",cookieDomain)}}};__permanentFunctions.init()}define("permanent",["jquery"],function(){}),require(["jquery","bootstrap","lazyload","validate","permanent"],function(e){function l(){e("img[data-original]").lazyload({effect:"show",placeholder:"/Public/meetelf/home/images/portraitup.png",threshold:200,event:"sporty"}),setTimeout(function(){e("img").trigger("sporty")},1e3)}function c(t,n){n||(n=e("#tips-modal")),n.modal("show"),n.find(".tips-msg").html(t)}var t=e("body").delegate('a[href^="#"]',"click",function(e){e.preventDefault()}).data("module");t&&require(t.split(" ")),e("#weiboimg").popover({content:'<div class="weixinsm"><div class="text-center"><img src="../images/weiboimg.jpg" alt="ä¼ç­¾å©æå®æ¹å¾®å"></div><div class="text-center"><h5>ä¼ç­¾å©æå®æ¹å¾®å</h5><h5>ãæ«ä¸æ«ãç«å³å³æ³¨</h5></div></div>',html:!0,placement:"top",trigger:"hover"}),e("#weixinimg").popover({content:'<div class="weixinsm"><div class="text-center"><img src="../images/weixinimg.jpg" alt="ä¼ç­¾å©æå®æ¹å¾®ä¿¡"></div><div class="text-center"><h5>ä¼ç­¾å©æå®æ¹å¾®ä¿¡</h5><h5>ãæ«ä¸æ«ãç«å³å³æ³¨</h5></div></div>',html:!0,placement:"top",trigger:"hover"}),e("#downloadios").popover({content:function(){var e='<div class="elf-poplayer"><div class="text-center"><img src="/Public/common/images/download/'+(window.location.host.indexOf("0")!=-1?"ios_beta.png":"ios_release.png")+'" alt="å¨çº¿ç­¾å°iOSç"></div>'+'<div class="text-center"><h5>å¨çº¿ç­¾å°iOSç</h5><h5>ãæ«ä¸æ«ãç«å³ä¸è½½</h5></div>'+"</div>";return e}(),html:!0,placement:"top",trigger:"hover"}),e("#downloadandr").popover({content:function(){var e='<div class="elf-poplayer"><div class="text-center"><img src="/Public/common/images/download/'+(window.location.host.indexOf("0")!=-1?"android_beta.png":"android_release.png")+'"alt="å¨çº¿ç­¾å°Androidç"></div>'+'<div class="text-center"><h5>å¨çº¿ç­¾å°Androidç</h5><h5>ãæ«ä¸æ«ãç«å³ä¸è½½</h5></div>'+"</div>";return e}(),html:!0,placement:"top",trigger:"hover"});var n=document.createElement("a"),r=window.location.href;n.href=r;var i=n.protocol+"://"+n.host,s=r.substr(i.length-1);e("#pinned-nav").find(".dropdown-menu").find("a").each(function(t,n){e(n).attr("href")==s&&(e(n).attr("class","active"),e(n).parent().parent(".dropdown-menu").siblings(".dropdown-toggle").attr("class","dropdown-toggle active"))});var o=e(document.body),u=e(".bottom_tools"),a=e("#mt_service"),f=e(".mt_img");e(window).scroll(function(){var t=e(document).height(),n=e(window).scrollTop(),r=e("footer").outerHeight(!0),i=e(window).innerHeight();n>100?e(".bottom_tools").fadeIn(200).css("display","block"):e(".bottom_tools").fadeOut(200),u.css("bottom",t-n-r>i?40:i+n+r+40-t)}),e("#scrollUp").click(function(t){t.preventDefault(),e("html,body").animate({scrollTop:0})}),a.hover(function(){f.css("opacity","1")},function(){f.css("opacity","0")}),e(document).ready(function(){l()}),e.extend({imgReload:l}),e.extend({alertModal:c})}),define("homeCommon",["jquery"],function(){}),define("homelang",["jquery"],function(e){var t={content_len_error:"åå®¹ä¸è½ä¸ºç©ºï¼ä¸å­ç¬¦å¿é¡»æ¯10000å­ç¬¦å",start_time_not_empty:"æ´»å¨å¼å§æ¶é´ä¸è½ä¸ºç©º",end_time_not_empty:"æ´»å¨ç»ææ¶é´ä¸è½ä¸ºç©º",start_not_lt_end:"æ´»å¨å¼å§æ¶é´ä¸è½å¤§äºç»ææ¶é´",start_not_lt_now:"æ´»å¨å¼å§æ¶é´ä¸è½å°äºå½åæ¶é´",end_not_lt_now:"æ´»å¨ç»ææ¶é´ä¸è½å°äºå½åæ¶é´",time_format_err:"æ¶é´æ ¼å¼ä¸å¯¹",address_not_empty:"å°åä¿¡æ¯ä¸è½ä¸ºç©º",ticket_name_not_empty:"ç¥¨å¡åç§°ä¸è½ä¸ºç©º",ticket_name_len_error:"ç¥¨å¡åç§°å­ç¬¦ä¸º2å°10ä¸ªå­",ticket_num_not_empty:"ç¥¨å¡æ°éä¸è½ä¸ºç©º",ticket_num_format_err:"ç¥¨å¡æ°éå¿é¡»ä¸ºæ°å­",ticket_money_format_err:"ç¥¨å¡ä»·æ ¼å¿é¡»ä¸ºæ°å­",ticket_name_exist:"ç¥¨å¡åç§°å·²å­å¨",title_not_empty:"æ é¢ä¸è½ä¸ºç©º",title_len_error:"æ é¢å­æ°å¨6å°30å­ä¹é´",title_ban_error:"æ é¢åå«éå¶è¯",address_not_empty:"å°åä¿¡æ¯ä¸è½ä¸ºç©º",flow_start_not_empty:"æµç¨å¼å§æ¶é´ä¸è½ä¸ºç©º",flow_end_not_empty:"æµç¨ç»ææ¶é´ä¸è½ä¸ºç©º",flow_start_lt_end:"æµç¨å¼å§æ¶é´ä¸è½å¤§äºæµç¨ç»ææ¶é´",flow_start_rt_activity:"æµç¨å¼å§æ¶é´ä¸è½å°äºæ´»å¨å¼å§æ¶é´",flow_start_lt_activity:"æµç¨å¼å§æ¶é´ä¸è½å¤§äºæ´»å¨ç»ææ¶é´",flow_end_lt_activity:"æµç¨ç»ææ¶é´ä¸è½å¤§äºæ´»å¨ç»ææ¶é´",flow_time_not_combine:"æµç¨æ¶é´ä¸åºéå ",ticket_start_lt_now:"å®ç¥¨æ¶é´ä¸è½å°äºå½åæ¶é´",ticket_start_rt_aend:"å®ç¥¨æ¶é´ä¸è½å¤§äºæ´»å¨ç»ææ¶é´",ticket_start_rt_end:"å®ç¥¨å¼å§æ¶é´ä¸è½å¤§äºå®ç¥¨ç»ææ¶é´",ticket_end_rt_end:"å®ç¥¨ç»ææ¶é´ä¸è½å¤§äºæ´»å¨ç»ææ¶é´",undertaker_name_not_empty:"ä¸»åæ¹åç§°ä¸è½ä¸ºç©º"};e.extend({lang:t})}),define("home.act.add",["jquery","messageControl","MTFCropper","validate","cookie","pin","datepicker","combobox","ueditorall","ueditorconfig","homeCommon","homelang"],function(e,t){function o(e){var t=e.name;i.setCenter(t)}function f(t,n){var r=e("select[name='"+t+"']"),i=e("select[name='"+n+"']");e.ajax({type:"POST",url:"/act/ajax_get_area",dataType:"json",data:{id:r.val()}}).done(function(t){t.status?(i.html("").html(t.msg),e.cookie("area_2")&&e("select[name='area_2']").find("option[value='"+e.cookie("area_2")+"']").attr("selected",!0)):(i.html("<option value>å¸/åº</option>"),console.log(t.msg))})}function c(t){e("#mt_dtbox").DateTimePicker({addEventHandlers:function(){var t=this;e("body").delegate(".datePicker","click",function(n){n.stopPropagation(),t.showDateTimePicker(e(this))})},beforeShow:function(e){var t=this;t.settings.defaultDate=new Date}});var n=e("#flow-default").html(),r=e(n);r.find("input[name='start_time']").attr("name","op_flow["+l+"][start_time]"),r.find("input[name='end_time']").attr("name","op_flow["+l+"][end_time]"),r.find("input[name='title']").attr("name","op_flow["+l+"][title]"),r.find("#btn-del").attr("id","btn-del-"+l),e(t).parent().before(r),l++}function p(){e("#mt_dtbox").DateTimePicker({addEventHandlers:function(){var t=this;e("body").delegate(".datePicker","click",function(n){n.stopPropagation(),t.showDateTimePicker(e(this))})},beforeShow:function(e){var t=this;t.settings.defaultDate=new Date}});var t=e("#ticket-tr").find("tbody").html(),n=e(t);n.find("input[name='name']").attr("name","op_ticket[new]["+h+"][name]"),n.find("input[name='num']").attr("name","op_ticket[new]["+h+"][num]"),n.find("input[name='start_time']").attr("name","op_ticket[new]["+h+"][start_time]"),n.find("input[name='end_time']").attr("name","op_ticket[new]["+h+"][end_time]"),n.find("input[name='price']").attr("name","op_ticket[new]["+h+"][price]"),n.find(".collapsed").attr("data-target","#op_ticket_"+h),n.find(".collapsed").attr("aria-controls","op_ticket_"+h),n.find(".target-class").attr("id","op_ticket_"+h),n.find("#ticket-btn-del").attr("id","ticket-btn-del-"+h),e("#ticket-hook").before(n),h++}function v(){var t=e("#undertaker-default").html(),n=e(t);n.find("input[name='name']").attr("name","op_undertaker["+d+"][name]"),n.find("#undertaker-del").attr("id","undertaker-del-"+d),n.find(".add-combobox").combobox({name:"op_undertaker["+d+"][type]",guid:"op_undertaker["+d+"][guid]"}),d++,e("#undertaker-add-button").parent().before(n)}function m(){var t=!0;return e(".mtelf-table-border").find("div[id*='collapseExample']").each(function(n,r){var i=(new Date(e("#start_time").val().replace(/-/g,"/"))).getTime(),s=(new Date(e("#end_time").val().replace(/-/g,"/"))).getTime(),o=e(r).find("input[name*='start_time']"),u=(new Date(e(o).val().replace(/-/g,"/"))).getTime(),a=e(r).find("input[name*='end_time']"),f=(new Date(e(a).val().replace(/-/g,"/"))).getTime(),l=(new Date).getTime();u&&(u>s?(e(r).collapse("show"),e("#ticket-error").html("").html(e.lang.ticket_start_rt_aend),e(o).focus(),t=!1):f&&u>f&&(e(r).collapse("show"),e("#ticket-error").html("").html(e.lang.ticket_start_rt_end),e(o).focus(),t=!1)),f&&f>s&&(e(r).collapse("show"),e("#ticket-error").html("").html(e.lang.ticket_end_rt_end),e(a).focus(),t=!1)}),t}function g(){var t=!0;return e("#ticket-error").html(""),e(".mtelf-table-border").find(".ticket-tr-for").each(function(n,r){e(r).find("input[name*='name']").val()||(e(e(r).find("input[name*='name']")).focus(),e(".act-save, .act-pub").attr("disabled",!0),e("#ticket-error").html("").html(e.lang.ticket_name_not_empty),t=!1);if(e(r).val().length>10)return e(r).focus(),e(".act-save, .act-pub").attr("disabled",!0),e("#ticket-error").html("").html(e.lang.ticket_name_len_error),!1}),t}function y(){var t=!0;e("#item-process-error").html("");var n=(new Date(e("#start_time").val().replace(/-/g,"/"))).getTime(),r=(new Date(e("#end_time").val().replace(/-/g,"/"))).getTime(),i=null;return e("body").find("#item-process").find(".row").each(function(s,o){var u=e(o).find("input[name*='title']").val();if(u){var a=e(o).find("input[name*='start_time']"),f=(new Date(e(a).val().replace(/-/g,"/"))).getTime(),l=e(o).find("input[name*='end_time']"),c=(new Date(e(l).val().replace(/-/g,"/"))).getTime();f?c?f<n?(e("#item-process-error").html("").html(e.lang.flow_start_rt_activity),e(a).focus(),t=!1):c>r?(e("#item-process-error").html("").html(e.lang.flow_end_lt_activity),e(l).focus(),t=!1):f>c?(e("#item-process-error").html("").html(e.lang.flow_start_lt_end),e(l).focus(),t=!1):i&&f<i&&(e("#item-process-error").html("").html(e.lang.flow_time_not_combine),e(a).focus(),t=!1):(e("#item-process-error").html("").html(e.lang.flow_end_not_empty),e(l).focus(),t=!1):(e("#item-process-error").html("").html(e.lang.flow_start_not_empty),e(a).focus(),t=!1),i=c}}),t}function b(){var t=!0;return e("#ticket-error").html(""),e(".mtelf-table-border").find(".ticket-tr-for").each(function(n,r){var i=e(r).find("input[name*='[num']"),s=i.val(),o=e(r).find("input[name*='[price']"),u=i.val();s||(e(i).focus(),e("#ticket-error").html("").html(e.lang.ticket_num_not_empty),t=!1),parseInt(s)!=s&&(e(i).focus(),e("#ticket-error").html("").html(e.lang.ticket_num_format_err),t=!1),u&&parseInt(u)!=u&&(e(i).focus(),e("#ticket-error").html("").html(e.lang.ticket_money_format_err),t=!1)}),t}function x(t){e("#poster").val(t.data.val),e("#defaultPoster").attr("src",t.data.path)}var n=0,r=UE.getEditor("container",{initialFrameHeight:450});e("#container").blur(function(){console.log("haha");var t=e(e("#container").find("#edui1").find("#ueditor_0").prop("contentWindow").document).find("body").find("p").html();e(this).text(t),console.log(e(this).html()),isNaN(t)?e("ueditor-error").text("åå®¹ä¸è½ä¸ºç©º"):e("ueditor-error").text("")}),e(".act-save").removeAttr("disabled"),e(".act-pub").removeAttr("disabled");var i=new BMap.Map("mapzoom"),s=new BMap.Point(117.217415,39.145267);i.centerAndZoom(s,15),i.enableScrollWheelZoom();var u=new BMap.LocalCity;u.get(o),i.addEventListener("click",function(t){e("#modal-lat").val(t.point.lat),e("#modal-lng").val(t.point.lng)});var a=new BMap.LocalSearch(i,{renderOptions:{map:i}});a.setPageCapacity(15),e(".address-search").on("click",function(){var t=e("#keywords").val();a.search(t)}),e(".address-save").on("click",function(){e("input[name=lng]").val(e("#modal-lng").val()),e("input[name=lat]").val(e("#modal-lat").val()),e("#mapModal").modal("hide")}),e('[data-toggle="tooltip"]').tooltip(),e("#mt_dtbox").DateTimePicker({beforeShow:function(e){var t=this;t.settings.defaultDate=new Date}}),e("#act_form").delegate("select[name='area_1']","change",function(){f("area_1","area_2")}),e("#act_form").delegate("select[name='area_2']","change",function(){e.cookie("area_2",e("select[name='area_2']").val())}),e("select[name='area_1']").val()&&f("area_1","area_2"),e("#postersModal").delegate(".btn-save","click",function(){var t=e("#tabitem1").find(".active > img").attr("src");e(".upload-posters").attr("src",t),e("#poster").val(t),e(this).siblings(".btn-default").trigger("click")});var l=e("#item-process").find(".row").length;e(".create-flow").on("click",function(){c(this)}),e("#item-process").delegate("button[id*='btn-del-']","click",function(t){t.preventDefault(),e(this).parent().parent().parent(".st-li-process-item").remove()});var h=1;e("body").delegate("#add-free-ticket","click",function(){p()}),e("body").delegate("button[id*='ticket-btn-del-']","click",function(){var n=e(this).parents("table").find(".ticket-tr-for").length;if(n<=1){t.show({type:"alert",content:"ç¥¨ä¸è½å°äº1å¼ ",autoClose:!0}),console.log("ç¥¨æ®ä¸è½å°äº1");return}e(this).parent().parent("tr").remove();var r=e(this).siblings("button").data("target");e(r).parents(".table-collapse").remove()});var d=2;e("body").delegate("#undertaker-add-button","click",function(){v()}),e("body").delegate("button[id*='undertaker-del-']","click",function(){e(this).parent().parent().parent(".st-li-process-item").remove()}),e.validator.addMethod("startafternow",function(t,n){var r=(new Date(e("#start_time").val().replace(/-/g,"/"))).getTime(),i=(new Date).getTime();return r+6e4>i},e.lang.start_not_lt_now),e.validator.addMethod("endafternow",function(t,n){var r=(new Date(e("#end_time").val().replace(/-/g,"/"))).getTime(),i=(new Date).getTime();return r+6e4>i},e.lang.end_not_lt_now),e.validator.addMethod("afterstart",function(t,n){if(e("#start_time").val()==""||e("#end_time").val()=="")return!0;var r=(new Date(e("#start_time").val().replace(/-/g,"/"))).getTime(),i=(new Date(e("#end_time").val().replace(/-/g,"/"))).getTime();return i>r},e.lang.start_not_lt_end),e(".mtelf-table-border").delegate("input[name*='name']","keyup",function(){e("#ticket-error").html("");var t=e(".mtelf-table-border input[name*='name']");for(var n=0;n<t.length;n++){var r=e(t[n]);if(!e(r).val())return e(r).focus(),e(".act-save, .act-pub").attr("disabled",!0),e("#ticket-error").html("").html(e.lang.ticket_name_not_empty),!1;if(e(r).val().length>10)return e(r).focus(),e(".act-save, .act-pub").attr("disabled",!0),e("#ticket-error").html("").html(e.lang.ticket_name_len_error),!1;e(".act-save, .act-pub").attr("disabled",!1)}}),e(".mtelf-table-border").delegate("input[name*='[num']","keyup",function(){e("#ticket-error").html("");var t=e(".mtelf-table-border input[name*='num']");for(var n=0;n<t.length;n++){var r=e(t[n]);e(r).val()||(e(r).focus(),e("#ticket-error").html("").html(e.lang.ticket_num_not_empty),res=!1);if(parseInt(e(r).val())!=e(r).val())return e(r).focus(),e("#ticket-error").html("").html(e.lang.ticket_num_format_err),!1}}),e(".mtelf-table-border").delegate("input[name*='[price']","keyup",function(){e("#ticket-error").html("");if(e(this).val()&&parseInt(e(this).val())!=e(this).val())return e(this).focus(),e("#ticket-error").html("").html(e.lang.ticket_money_format_err),!1}),e(".mtelf-table-border").delegate("input[name*='time']","change",function(){e("#ticket-error").html("")}),e("#item-process").delegate("input","change",function(){e("#item-process-error").html("")}),e("body").delegate(".act-save, .act-pub, .act-preview","click",function(){e("#act-status").val(e(this).data("status"))}),e(".act-save").on("click",function(){e("#status_post").val(0),e(this).hasClass("preview-save")?n=1:n=0}),e(".act-pub").on("click",function(){e("#status_post").val(1),n=0}),e(".act-save .act-pub").on("click",function(){console.log("å°èè±å¦å¦è¯¾å å¼è¯¾å¦"),e(".act-save").button("loading"),e(".act-pub").button("loading"),e(".act-save").attr("disabled","disabled"),e(".act-pub").attr("disabled","disabled"),e("#act_form").submit()}),e("#act_form").validate({errorPlacement:function(t,n){if(t){n.attr("class","form-control");var r=e(n).attr("name");r=="area_1"||r=="area_2"?(n.parents(".row").find("#select-error").html(e(t).html()),n.parents(".row").find("#address-error").html("")):r=="address"?(n.parents(".row").find("#select-error").html(""),n.parents(".row").find("#address-error").html(e(t).html())):n.parents(".row").siblings("p").html(e(t).html()),e(".act-save .act-pub .act-review").removeAttr("disabled")}},success:function(e){e.parents(".row").siblings("p").html("")},rules:{title:{required:!0,rangelength:[6,50]},start_time:{required:!0,afterstart:!0},end_time:{required:!0,endafternow:!0,afterstart:!0},area_1:{required:!0},area_2:{required:!0},address:{required:!0},content:{required:!0,rangelength:[1,1e4]}},messages:{title:{required:e.lang.title_not_empty,rangelength:e.lang.title_len_error,remote:e.lang.title_ban_error},start_time:{required:e.lang.start_time_not_empty,date:e.lang.time_format_err},end_time:{required:e.lang.end_time_not_empty,date:e.lang.time_format_err},area_1:{required:e.lang.address_not_empty},area_2:{required:e.lang.address_not_empty},address:{required:e.lang.address_not_empty},content:{required:"åå®¹ä¸è½ä¸ºç©º",rangelength:"åå®¹é¿åº¦ä¸è¶è¿10000å­"}},submitHandler:function(i){function o(){e("textarea[name='content']").text(e(e("#container").find("#edui1").find("#ueditor_0").prop("contentWindow").document).find("body").find("p").html()),e.ajax({type:"POST",url:e(i).attr("action"),dataType:"json",data:e(i).serialize(),beforeSend:function(){e("#loading_css").attr("class","loading_css"),e("#spinner").attr("class","spinner")},success:function(r){e("#loading_css").removeAttr("class","loading_css"),e("#spinner").removeAttr("class","spinner"),r.status?n==1?window.location.href=r.preview_url:window.location.href=r.url:(e(".btn-block").attr("disabled",!1),t.show({type:"alert",content:r.msg,autoClose:!0}))},error:function(){e(".act-save .act-pub").removeAttr("disabled")}})}e(".act-save").prop("disabled",!0),e(".act-pub").prop("disabled",!0);var s=r.getContent();if(s.length<1||s.length>1e4)return e("#ueditor-error").html(e.lang.content_len_error),e(".act-save, .act-pub").attr("disabled",!1),!1;e("#ueditor-error").html("");if(!g()||!b())return e(".act-save, .act-pub").attr("disabled",!1),!1;if(!y()||!m())return e(".act-save, .act-pub").attr("disabled",!1),!1;if(!e("input[name='op_undertaker[0][name]']").val())return e(".act-save, .act-pub").attr("disabled",!1),e("#undertaker-error").html(e.lang.undertaker_name_not_empty),!1;e("#undertaker-error").html("");if(!e("input[name='lng']").val()||!e("input[name='lat']").val())return t.show({type:"alert",content:"è¯·è¿è¡å°å¾å®ä½",autoClose:!0},function(){e(".act-save, .act-pub").attr("disabled",!1),e("input[name='lng']").siblings("a").trigger("click")}),!1;e("#status_post").val()==1?t.show({type:"confirm",title:"åå¸ç¡®è®¤",content:"æ¨ç¡®å®åå¸æ´»å¨åï¼åå¸åè¯¥æ´»å¨å°±ä¸è½ç¼è¾äºï¼",buttonTitle:"åå¸"},function(t){t==="submit"?o():(e(".act-save").prop("disabled",!1),e(".act-pub").prop("disabled",!1))}):(console.log("dasdasdasdasdas"),o())}});var w=[],E=[];e("#undertaker-all").on("click",function(){var t=e(this).prop("checked");e("#zhubanModal").find("input[name*='checkbox-']").prop("checked",t),e("#zhubanModal").find("input[name*='checkbox-']").each(function(n,r){t?(w[n]=e(r).data("value"),E[n]=e(r).data("guid")):(w=[],E=[])})}),e("#zhubanModal").find("input[name*='checkbox-']").on("click",function(){e(this).prop("checked")?(w[e(this).data("key")]=e(this).data("value"),E[e(this).data("key")]=e(this).data("guid")):(delete w[e(this).data("key")],delete E[e(this).data("key")])});var S=!1;e("#zhubanModal").delegate(".btn-save","click",function(){S=!0,e(this).siblings(".btn-default").trigger("click")}),e("#zhubanModal").on("hide.bs.modal",function(){if(w&&S){var t=[],n=[],r=0;for(var i=0;i<w.length;i++)w[i]&&(t[r]=w[i],n[r]=E[i],r++);e("#undertaker-master").val(t.join(",")),e("#zhubanfang_input").val(n.join(","))}}).on("show.bs.modal",function(){S=!1}),e("#mapModal").on("show.bs.modal",function(){var t="";e("select[name='area_1']").val()&&(t+=e("select[name='area_1']").find("option:selected").text()),e("select[name='area_2']").val()&&(t+=e("select[name='area_2']").find("option:selected").text()),t+=e("input[name='address']").val(),e("#keywords").val(t)}),e(".combobox").combobox({name:"op_undertaker[1][type]",guid:"op_undertaker[1][guid]"}),e(".edit-row").find("select").on("change",function(){e(this).siblings("input").val(e(this).find("option:selected").data("value"))}),e("#upload-poster-modal").mtfImgUpload("activity_poster","defaultPoster","540,324",{aspectRatio:5/3,minContainerHeight:300,minContainerWidth:400},x),e("#act_form").find("input[name='title']").blur(function(){var n=e(this).val();n&&e.ajax({type:"POST",url:e("#censor_words_url").val(),dataType:"json",data:{words:n}}).done(function(e){e.status||t.show({type:"alert",content:e.msg,autoClose:!0})})}),e("#signin-form").delegate(".btn-option","click",function(t){t.stopPropagation();var n=e(this).find(":checkbox").length;if(n===0)return;if(n===1){var r=e(this).children().prop("checked");r?e(this).removeClass("active"):(e(this).addClass("active"),e(this).parent().addClass("active"),e(this).siblings(":checkbox").prop("checked",!0)),e(this).children(":checkbox").prop("checked",!r)}else if(n===2){var i=e(this).children(":checkbox").prop("checked");i?(e(this).removeClass("active"),e(this).children("span").removeClass("active"),e(this).children("span").children().prop("checked",!1)):e(this).addClass("active"),e(this).children(":checkbox").prop("checked",!i)}})});